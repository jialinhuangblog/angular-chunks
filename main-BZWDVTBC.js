import{$ as K,A as yI,B as wI,C as tn,D as kr,E as Fa,F as La,G as Va,H as Dr,I as II,J as EI,K as CI,L as TI,M as Ua,N as ja,O as ye,P as mt,Q as qt,R as nn,S as ap,T as _d,U as pt,V as yt,W as kn,X as li,Y as SI,Z as wt,_ as vd,a as B,aa as AI,b as Ms,c as hI,d as mI,e as pI,f as fI,g as gI,h as tr,i as sp,j as op,k as Ps,l as $t,m as Pa,n as _I,o as Oa,p as fd,q as vI,r as Ji,s as bI,t as xn,u as xr,v as Na,w as ci,x as en,y as gd,z as kt}from"./chunk-F5LKORDS.js";import{$ as O0,$a as Cr,$b as ks,A as vt,Aa as L0,Ab as K0,B as Ym,Ba as Ta,Bb as Y0,C as Cs,Ca as V0,Cb as Q0,D as Ts,Da as Ci,Db as ct,E as id,Ea as St,Eb as be,F as Qm,Fa as Sa,Fb as X0,G as Fi,Ga as U0,Gb as Rs,H as x0,Ha as Aa,Hb as Z0,I as Er,Ia as H,Ib as ud,J as nd,Ja as x,Jb as hd,K as Xn,Ka as Ra,Kb as Ar,L as k0,La as od,Lb as J0,M as Xm,Ma as j0,Mb as ka,N as D0,Na as xa,Nb as np,O as Zm,Oa as ad,Ob as eI,P as M0,Pa as cd,Pb as lt,Q as Jm,Qa as Zn,Qb as tI,R as rd,Ra as B0,Rb as iI,S as Xi,Sa as ip,Sb as ae,T as Ot,Ta as As,Tb as Zi,U as Ue,Ua as z0,Ub as Rn,V as P0,Va as zt,Vb as Li,W as bt,Wa as ht,Wb as nI,X as tt,Xa as $0,Xb as xs,Y as Ei,Ya as q0,Yb as rI,Z as q,Za as Ie,Zb as sI,_ as Q,_a as ld,_b as ge,a as ri,aa as F,ab as qe,ac as oI,b as C0,ba as ep,bb as se,bc as md,c as Ii,ca as M,cb as dd,cc as Ds,d as qm,da as U,db as Ee,dc as aI,e as ed,ea as ne,eb as Tr,ec as ti,f as te,fa as Ea,fb as G0,fc as cI,g as si,ga as _e,gb as je,gc as Da,h as T0,ha as X,hb as j,hc as rp,i as S0,ia as le,ib as z,ic as lI,j as Qi,ja as We,jb as oe,k as Gm,ka as N0,kb as pi,l as Hm,la as Ss,lb as Sn,lc as Rr,m as Wm,ma as En,mb as Ce,mc as Jn,n as ei,na as At,nb as Qe,o as Z,oa as Rt,ob as Nt,oc as Vi,p as ba,pa as xt,pb as Be,pc as pd,q as ya,qa as Ca,qb as ai,qc as er,r as A0,ra as Cn,rb as it,rc as dI,s as pe,sa as Tn,sb as Ae,sc as Ma,t as wa,ta as ve,tb as Re,tc as uI,u as oi,ua as F0,ub as H0,v as td,va as fe,vb as W0,w as Ia,wa as V,wb as An,x as R0,xa as tp,xb as ze,y as Km,ya as re,yb as Ti,z as Qn,za as sd,zb as Sr}from"./chunk-7QELNYEQ.js";import{a as O,b as Fe,c as E0,d as Yn,e as v}from"./chunk-ACKELEN3.js";var dp=class extends sI{constructor(){super(...arguments),this.supportsDOMEvents=!0}},up=class i extends dp{static makeCurrent(){rI(new i)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=gM();return e==null?null:_M(e)}resetBaseElement(){Ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return oI(document.cookie,t)}},Ba=null;function gM(){return Ba=Ba||document.querySelector("base"),Ba?Ba.getAttribute("href"):null}function _M(i){return new URL(i,document.baseURI).pathname}var vM=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})(),bd=new F(""),kI=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(s=>s.supports(e)),!n)throw new tt(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||i)(M(bd),M(V))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})(),za=class{constructor(t){this._doc=t}},cp="ng-app-id",DI=(()=>{class i{constructor(e,n,r,s={}){this.doc=e,this.appId=n,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=rp(s),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(r=>r.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${cp}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(r=>{r.textContent!=null&&n.set(r.textContent,r)}),n}return null}changeUsageCount(e,n){let r=this.styleRef;if(r.has(e)){let s=r.get(e);return s.usage+=n,s.usage}return r.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let r=this.styleNodesInDOM,s=r?.get(n);if(s?.parentNode===e)return r.delete(n),s.removeAttribute(cp),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(cp,this.appId),e.appendChild(o),o}}addStyleToHost(e,n){let r=this.getStyleElement(e,n),s=this.styleRef,o=s.get(n)?.elements;o?o.push(r):s.set(n,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M(Ta),M(Sa,8),M(Ci))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})(),lp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mp=/%COMP%/g,MI="%COMP%",bM=`_nghost-${MI}`,yM=`_ngcontent-${MI}`,wM=!0,IM=new F("",{providedIn:"root",factory:()=>wM});function EM(i){return yM.replace(mp,i)}function CM(i){return bM.replace(mp,i)}function PI(i,t){return t.map(e=>e.replace(mp,i))}var yd=(()=>{class i{constructor(e,n,r,s,o,a,l,d=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=rp(a),this.defaultRenderer=new $a(e,o,l,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Ea.ShadowDom&&(n=Fe(O({},n),{encapsulation:Ea.Emulated}));let r=this.getOrCreateRenderer(e,n);return r instanceof wd?r.applyToHost(e):r instanceof qa&&r.applyStyles(),r}getOrCreateRenderer(e,n){let r=this.rendererByCompId,s=r.get(n.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(n.encapsulation){case Ea.Emulated:s=new wd(l,d,n,this.appId,h,o,a,p);break;case Ea.ShadowDom:return new hp(l,d,e,n,o,a,this.nonce,p);default:s=new qa(l,d,n,h,o,a,p);break}r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)(M(kI),M(DI),M(Ta),M(IM),M(ge),M(Ci),M(V),M(Sa))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})(),$a=class{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(lp[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(RI(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(RI(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){e.remove()}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new tt(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;let s=lp[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let r=lp[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Aa.DashCase|Aa.Important)?t.style.setProperty(e,n,r&Aa.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Aa.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=xs().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function RI(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var hp=class extends $a{constructor(t,e,n,r,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=PI(r.id,r.styles);for(let h of d){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qa=class extends $a{constructor(t,e,n,r,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?PI(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wd=class extends qa{constructor(t,e,n,r,s,o,a,l){let d=r+"-"+n.id;super(t,e,n,s,o,a,l,d),this.contentAttr=EM(d),this.hostAttr=CM(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},TM=(()=>{class i extends za{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)(M(ge))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})(),SM=(()=>{class i extends za{constructor(e){super(e),this.delegate=U(iI,{optional:!0})}supports(e){return this.delegate?this.delegate.supports(e):!1}addEventListener(e,n,r){return this.delegate.addEventListener(e,n,r)}removeEventListener(e,n,r){return this.delegate.removeEventListener(e,n,r)}static{this.\u0275fac=function(n){return new(n||i)(M(ge))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})(),xI=["alt","control","meta","shift"],AM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RM={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},xM=(()=>{class i extends za{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,n,r){let s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xs().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let n=e.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let s=i._normalizeKey(n.pop()),o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),xI.forEach(d=>{let h=n.indexOf(d);h>-1&&(n.splice(h,1),o+=d+".")}),o+=s,n.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let r=AM[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),xI.forEach(o=>{if(o!==r){let a=RM[o];a(e)&&(s+=o+".")}}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||i)(M(ge))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})();function OI(i,t){return tI(O({rootComponent:i},kM(t)))}function kM(i){return{appProviders:[...NM,...i?.providers??[]],platformProviders:OM}}function DM(){up.makeCurrent()}function MM(){return new tp}function PM(){return L0(document),document}var OM=[{provide:Ci,useValue:cI},{provide:V0,useValue:DM,multi:!0},{provide:ge,useFactory:PM,deps:[]}];var NM=[{provide:N0,useValue:"root"},{provide:tp,useFactory:MM,deps:[]},{provide:bd,useClass:TM,multi:!0,deps:[ge,V,Ci]},{provide:bd,useClass:xM,multi:!0,deps:[ge]},{provide:bd,useClass:SM,multi:!0},yd,DI,kI,{provide:ad,useExisting:yd},{provide:lI,useClass:vM,deps:[]},[]];var Id=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||i)(M(ge))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var he="primary",cc=Symbol("RouteTitle"),vp=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Us(i){return new vp(i)}function FM(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let o=n[s],a=i[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function LM(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!rn(i[e],t[e]))return!1;return!0}function rn(i,t){let e=i?bp(i):void 0,n=t?bp(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!$I(i[r],t[r]))return!1;return!0}function bp(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function $I(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}else return i===t}function qI(i){return i.length>0?i[i.length-1]:null}function ir(i){return ya(i)?i:hd(i)?ei(Promise.resolve(i)):Z(i)}var VM={exact:HI,subset:WI},GI={exact:UM,subset:jM,ignored:()=>!0};function FI(i,t,e){return VM[e.paths](i.root,t.root,e.matrixParams)&&GI[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function UM(i,t){return rn(i,t)}function HI(i,t,e){if(!Pr(i.segments,t.segments)||!Td(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!HI(i.children[n],t.children[n],e))return!1;return!0}function jM(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>$I(i[e],t[e]))}function WI(i,t,e){return KI(i,t,t.segments,e)}function KI(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!Pr(r,e)||t.hasChildren()||!Td(r,e,n))}else if(i.segments.length===e.length){if(!Pr(i.segments,e)||!Td(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!WI(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!Pr(i.segments,r)||!Td(i.segments,r,n)||!i.children[he]?!1:KI(i.children[he],t,s,n)}}function Td(i,t,e){return t.every((n,r)=>GI[e](i[r].parameters,n.parameters))}var Mn=class{constructor(t=new Ve([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Us(this.queryParams),this._queryParamMap}toString(){return $M.serialize(this)}},Ve=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sd(this)}},Mr=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Us(this.parameters),this._parameterMap}toString(){return QI(this)}};function BM(i,t){return Pr(i,t)&&i.every((e,n)=>rn(e.parameters,t[n].parameters))}function Pr(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function zM(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===he&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==he&&(e=e.concat(t(r,n)))}),e}var qp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:()=>new Xa,providedIn:"root"})}}return i})(),Xa=class{parse(t){let e=new wp(t);return new Mn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ga(t.root,!0)}`,n=HM(t.queryParams),r=typeof t.fragment=="string"?`#${qM(t.fragment)}`:"";return`${e}${n}${r}`}},$M=new Xa;function Sd(i){return i.segments.map(t=>QI(t)).join("/")}function Ga(i,t){if(!i.hasChildren())return Sd(i);if(t){let e=i.children[he]?Ga(i.children[he],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==he&&n.push(`${r}:${Ga(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=zM(i,(n,r)=>r===he?[Ga(i.children[he],!1)]:[`${r}:${Ga(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[he]!=null?`${Sd(i)}/${e[0]}`:`${Sd(i)}/(${e.join("//")})`}}function YI(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ed(i){return YI(i).replace(/%3B/gi,";")}function qM(i){return encodeURI(i)}function yp(i){return YI(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ad(i){return decodeURIComponent(i)}function LI(i){return Ad(i.replace(/\+/g,"%20"))}function QI(i){return`${yp(i.path)}${GM(i.parameters)}`}function GM(i){return Object.entries(i).map(([t,e])=>`;${yp(t)}=${yp(e)}`).join("")}function HM(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${Ed(e)}=${Ed(r)}`).join("&"):`${Ed(e)}=${Ed(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var WM=/^[^\/()?;#]+/;function pp(i){let t=i.match(WM);return t?t[0]:""}var KM=/^[^\/()?;=#]+/;function YM(i){let t=i.match(KM);return t?t[0]:""}var QM=/^[^=?&#]+/;function XM(i){let t=i.match(QM);return t?t[0]:""}var ZM=/^[^&#]+/;function JM(i){let t=i.match(ZM);return t?t[0]:""}var wp=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[he]=new Ve(t,e)),n}parseSegment(){let t=pp(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new tt(4009,!1);return this.capture(t),new Mr(Ad(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=YM(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=pp(this.remaining);r&&(n=r,this.capture(n))}t[Ad(e)]=Ad(n)}parseQueryParam(t){let e=XM(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=JM(this.remaining);o&&(n=o,this.capture(n))}let r=LI(e),s=LI(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=pp(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new tt(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=he);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[he]:new Ve([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new tt(4011,!1)}};function XI(i){return i.segments.length>0?new Ve([],{[he]:i}):i}function ZI(i){let t={};for(let[n,r]of Object.entries(i.children)){let s=ZI(r);if(n===he&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let e=new Ve(i.segments,t);return eP(e)}function eP(i){if(i.numberOfChildren===1&&i.children[he]){let t=i.children[he];return new Ve(i.segments.concat(t.segments),t.children)}return i}function Za(i){return i instanceof Mn}function tP(i,t,e=null,n=null){let r=JI(i);return eE(r,t,e,n)}function JI(i){let t;function e(s){let o={};for(let l of s.children){let d=e(l);o[l.outlet]=d}let a=new Ve(s.url,o);return s===i&&(t=a),a}let n=e(i.root),r=XI(n);return t??r}function eE(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return fp(r,r,r,e,n);let s=iP(t);if(s.toRoot())return fp(r,r,new Ve([],{}),e,n);let o=nP(s,r,i),a=o.processChildren?Ka(o.segmentGroup,o.index,s.commands):iE(o.segmentGroup,o.index,s.commands);return fp(r,o.segmentGroup,a,e,n)}function Rd(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Ja(i){return typeof i=="object"&&i!=null&&i.outlets}function fp(i,t,e,n,r){let s={};n&&Object.entries(n).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;i===t?o=e:o=tE(i,t,e);let a=XI(ZI(o));return new Mn(a,s,r)}function tE(i,t,e){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===t?n[r]=e:n[r]=tE(s,t,e)}),new Ve(i.segments,n)}var xd=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Rd(n[0]))throw new tt(4003,!1);let r=n.find(Ja);if(r&&r!==qI(n))throw new tt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iP(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new xd(!0,0,i);let t=0,e=!1,n=i.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,d])=>{a[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new xd(e,t,n)}var Fs=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function nP(i,t,e){if(i.isAbsolute)return new Fs(t,!0,0);if(!e)return new Fs(t,!1,NaN);if(e.parent===null)return new Fs(e,!0,0);let n=Rd(i.commands[0])?0:1,r=e.segments.length-1+n;return rP(e,r,i.numberOfDoubleDots)}function rP(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new tt(4005,!1);r=n.segments.length}return new Fs(n,!1,r-s)}function sP(i){return Ja(i[0])?i[0].outlets:{[he]:i}}function iE(i,t,e){if(i??=new Ve([],{}),i.segments.length===0&&i.hasChildren())return Ka(i,t,e);let n=oP(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new Ve(i.segments.slice(0,n.pathIndex),{});return s.children[he]=new Ve(i.segments.slice(n.pathIndex),i.children),Ka(s,0,r)}else return n.match&&r.length===0?new Ve(i.segments,{}):n.match&&!i.hasChildren()?Ip(i,t,e):n.match?Ka(i,0,r):Ip(i,t,e)}function Ka(i,t,e){if(e.length===0)return new Ve(i.segments,{});{let n=sP(e),r={};if(Object.keys(n).some(s=>s!==he)&&i.children[he]&&i.numberOfChildren===1&&i.children[he].segments.length===0){let s=Ka(i.children[he],t,e);return new Ve(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=iE(i.children[s],t,o))}),Object.entries(i.children).forEach(([s,o])=>{n[s]===void 0&&(r[s]=o)}),new Ve(i.segments,r)}}function oP(i,t,e){let n=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;let o=i.segments[r],a=e[n];if(Ja(a))break;let l=`${a}`,d=n<e.length-1?e[n+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!UI(l,d,o))return s;n+=2}else{if(!UI(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function Ip(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Ja(s)){let l=aP(s.outlets);return new Ve(n,l)}if(r===0&&Rd(e[0])){let l=i.segments[t];n.push(new Mr(l.path,VI(e[0]))),r++;continue}let o=Ja(s)?s.outlets[he]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Rd(a)?(n.push(new Mr(o,VI(a))),r+=2):(n.push(new Mr(o,{})),r++)}return new Ve(n,{})}function aP(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=Ip(new Ve([],{}),0,n))}),t}function VI(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function UI(i,t,e){return i==e.path&&rn(t,e.parameters)}var Ya="imperative",Ft=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Ft||{}),Si=class{constructor(t,e){this.id=t,this.url=e}},ec=class extends Si{constructor(t,e,n="imperative",r=null){super(t,e),this.type=Ft.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Or=class extends Si{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gi=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(gi||{}),Ep=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Ep||{}),Dn=class extends Si{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends Si{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Ft.NavigationSkipped}},tc=class extends Si{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kd=class extends Si{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cp=class extends Si{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tp=class extends Si{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sp=class extends Si{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ap=class extends Si{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rp=class{constructor(t){this.route=t,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xp=class{constructor(t){this.route=t,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kp=class{constructor(t){this.snapshot=t,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dp=class{constructor(t){this.snapshot=t,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mp=class{constructor(t){this.snapshot=t,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ic=class{constructor(t){this.snapshot=t,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nc=class{},js=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function cP(i,t){return i.providers&&!i._injector&&(i._injector=q0(i.providers,t,`Route: ${i.path}`)),i._injector??t}function Ui(i){return i.outlet||he}function lP(i,t){let e=i.filter(n=>Ui(n)===t);return e.push(...i.filter(n=>Ui(n)!==t)),e}function lc(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Pp=class{get injector(){return lc(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Ld(this.rootInjector),this.attachRef=null}},Ld=(()=>{class i{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,n){let r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Pp(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||i)(M(Ss))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Dd=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Op(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=Op(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Np(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Np(t,this._root).map(e=>e.value)}};function Op(i,t){if(i===t.value)return t;for(let e of t.children){let n=Op(i,e);if(n)return n}return null}function Np(i,t){if(i===t.value)return[t];for(let e of t.children){let n=Np(i,e);if(n.length)return n.unshift(t),n}return[]}var fi=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ns(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var Md=class extends Dd{constructor(t,e){super(t),this.snapshot=e,Gp(this,t)}toString(){return this.snapshot.toString()}};function nE(i){let t=dP(i),e=new si([new Mr("",{})]),n=new si({}),r=new si({}),s=new si({}),o=new si(""),a=new Bs(e,n,s,o,r,he,i,t.root);return a.snapshot=t.root,new Md(new fi(a,[]),t)}function dP(i){let t={},e={},n={},r="",s=new Ls([],t,n,r,e,he,i,null,{});return new Od("",new fi(s,[]))}var Bs=class{constructor(t,e,n,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(pe(d=>d[cc]))??Z(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(t=>Us(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(t=>Us(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pd(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:O(O({},t.params),i.params),data:O(O({},t.data),i.data),resolve:O(O(O(O({},i.data),t.data),r?.data),i._resolvedData)}:n={params:O({},i.params),data:O({},i.data),resolve:O(O({},i.data),i._resolvedData??{})},r&&sE(r)&&(n.resolve[cc]=r.title),n}var Ls=class{get title(){return this.data?.[cc]}constructor(t,e,n,r,s,o,a,l,d){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Us(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Us(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Od=class extends Dd{constructor(t,e){super(e),this.url=t,Gp(this,e)}toString(){return rE(this._root)}};function Gp(i,t){t.value._routerState=i,t.children.forEach(e=>Gp(i,e))}function rE(i){let t=i.children.length>0?` { ${i.children.map(rE).join(", ")} } `:"";return`${i.value}${t}`}function gp(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,rn(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),rn(t.params,e.params)||i.paramsSubject.next(e.params),LM(t.url,e.url)||i.urlSubject.next(e.url),rn(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function Fp(i,t){let e=rn(i.params,t.params)&&BM(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||Fp(i.parent,t.parent))}function sE(i){return typeof i.title=="string"||i.title===null}var Hp=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new fe,this.deactivateEvents=new fe,this.attachEvents=new fe,this.detachEvents=new fe,this.parentContexts=U(Ld),this.location=U(Zn),this.changeDetector=U(lt),this.inputBinder=U(Wp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new tt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new tt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new tt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new tt(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Lp(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=le({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[At]})}}return i})(),Lp=class i{__ngOutletInjector(t){return new i(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Bs?this.route:t===Ld?this.childContexts:this.parent.get(t,e)}},Wp=new F("");function uP(i,t,e){let n=rc(i,t._root,e?e._root:void 0);return new Md(n,t)}function rc(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=hP(i,t,e);return new fi(n,r)}else{if(i.shouldAttach(t.value)){let s=i.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>rc(i,a)),o}}let n=mP(t.value),r=t.children.map(s=>rc(i,s));return new fi(n,r)}}function hP(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return rc(i,n,r);return rc(i,n)})}function mP(i){return new Bs(new si(i.url),new si(i.params),new si(i.queryParams),new si(i.fragment),new si(i.data),i.outlet,i.component,i)}var sc=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},oE="ngNavigationCancelingError";function Nd(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=Za(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=aE(!1,gi.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function aE(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[oE]=!0,e.cancellationCode=t,e}function pP(i){return cE(i)&&Za(i.url)}function cE(i){return!!i&&i[oE]}var fP=(i,t,e,n)=>pe(r=>(new Vp(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),Vp=class{constructor(t,e,n,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),gp(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=Ns(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Ns(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Ns(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=Ns(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new ic(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Dp(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(gp(r),r===s)if(r.component){let o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),gp(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)}},Fd=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Vs=class{constructor(t,e){this.component=t,this.route=e}};function gP(i,t,e){let n=i._root,r=t?t._root:null;return Ha(n,r,e,[n.value])}function _P(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function $s(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!O0(i)?i:t.get(i):n}function Ha(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ns(t);return i.children.forEach(o=>{vP(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Qa(a,e.getContext(o),r)),r}function vP(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=bP(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Fd(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ha(i,t,a?a.children:null,n,r):Ha(i,t,e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Vs(a.outlet.component,o))}else o&&Qa(t,a,r),r.canActivateChecks.push(new Fd(n)),s.component?Ha(i,null,a?a.children:null,n,r):Ha(i,null,e,n,r);return r}function bP(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!Pr(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Pr(i.url,t.url)||!rn(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fp(i,t)||!rn(i.queryParams,t.queryParams);case"paramsChange":default:return!Fp(i,t)}}function Qa(i,t,e){let n=Ns(i),r=i.value;Object.entries(n).forEach(([s,o])=>{r.component?t?Qa(o,t.children.getContext(s),e):Qa(o,null,e):Qa(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Vs(t.outlet.component,r)):e.canDeactivateChecks.push(new Vs(null,r)):e.canDeactivateChecks.push(new Vs(null,r))}function dc(i){return typeof i=="function"}function yP(i){return typeof i=="boolean"}function wP(i){return i&&dc(i.canLoad)}function IP(i){return i&&dc(i.canActivate)}function EP(i){return i&&dc(i.canActivateChild)}function CP(i){return i&&dc(i.canDeactivate)}function TP(i){return i&&dc(i.canMatch)}function lE(i){return i instanceof A0||i?.name==="EmptyError"}var Cd=Symbol("INITIAL_VALUE");function zs(){return Ot(i=>wa(i.map(t=>t.pipe(Fi(1),Xi(Cd)))).pipe(pe(t=>{for(let e of t)if(e!==!0){if(e===Cd)return Cd;if(e===!1||SP(e))return e}return!0}),vt(t=>t!==Cd),Fi(1)))}function SP(i){return Za(i)||i instanceof sc}function AP(i,t){return oi(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?Z(Fe(O({},e),{guardsResult:!0})):RP(o,n,r,i).pipe(oi(a=>a&&yP(a)?xP(n,s,i,t):Z(a)),pe(a=>Fe(O({},e),{guardsResult:a})))})}function RP(i,t,e,n){return ei(i).pipe(oi(r=>OP(r.component,r.route,e,t,n)),Xn(r=>r!==!0,!0))}function xP(i,t,e,n){return ei(t).pipe(Ts(r=>td(DP(r.route.parent,n),kP(r.route,n),PP(i,r.path,e),MP(i,r.route,e))),Xn(r=>r!==!0,!0))}function kP(i,t){return i!==null&&t&&t(new Mp(i)),Z(!0)}function DP(i,t){return i!==null&&t&&t(new kp(i)),Z(!0)}function MP(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return Z(!0);let r=n.map(s=>Ia(()=>{let o=lc(t)??e,a=$s(s,o),l=IP(a)?a.canActivate(t,i):En(o,()=>a(t,i));return ir(l).pipe(Xn())}));return Z(r).pipe(zs())}function PP(i,t,e){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>_P(o)).filter(o=>o!==null).map(o=>Ia(()=>{let a=o.guards.map(l=>{let d=lc(o.node)??e,h=$s(l,d),p=EP(h)?h.canActivateChild(n,i):En(d,()=>h(n,i));return ir(p).pipe(Xn())});return Z(a).pipe(zs())}));return Z(s).pipe(zs())}function OP(i,t,e,n,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let l=lc(t)??r,d=$s(a,l),h=CP(d)?d.canDeactivate(i,t,e,n):En(l,()=>d(i,t,e,n));return ir(h).pipe(Xn())});return Z(o).pipe(zs())}function NP(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return Z(!0);let s=r.map(o=>{let a=$s(o,i),l=wP(a)?a.canLoad(t,e):En(i,()=>a(t,e));return ir(l)});return Z(s).pipe(zs(),dE(n))}function dE(i){return C0(bt(t=>{if(typeof t!="boolean")throw Nd(i,t)}),pe(t=>t===!0))}function FP(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return Z(!0);let s=r.map(o=>{let a=$s(o,i),l=TP(a)?a.canMatch(t,e):En(i,()=>a(t,e));return ir(l)});return Z(s).pipe(zs(),dE(n))}var oc=class{constructor(t){this.segmentGroup=t||null}},ac=class extends Error{constructor(t){super(),this.urlTree=t}};function Os(i){return ba(new oc(i))}function LP(i){return ba(new tt(4e3,!1))}function VP(i){return ba(aE(!1,gi.GuardRejected))}var Up=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return Z(n);if(r.numberOfChildren>1||!r.children[he])return LP(`${t.redirectTo}`);r=r.children[he]}}applyRedirectCommands(t,e,n,r,s){if(typeof e!="string"){let a=e,{queryParams:l,fragment:d,routeConfig:h,url:p,outlet:f,params:w,data:C,title:D}=r,R=En(s,()=>a({params:w,data:C,queryParams:l,fragment:d,routeConfig:h,url:p,outlet:f,title:D}));if(R instanceof Mn)throw new ac(R);e=R}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e[0]==="/")throw new ac(o);return o}applyRedirectCreateUrlTree(t,e,n,r){let s=this.createSegmentGroup(t,e.root,n,r);return new Mn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);n[r]=e[a]}else n[r]=s}),n}createSegmentGroup(t,e,n,r){let s=this.createSegments(t,e.segments,n,r),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,n,r)}),new Ve(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new tt(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},jp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UP(i,t,e,n,r){let s=uE(i,t,e);return s.matched?(n=cP(t,n),FP(n,t,e,r).pipe(pe(o=>o===!0?s:O({},jp)))):Z(s)}function uE(i,t,e){if(t.path==="**")return jP(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?O({},jp):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||FM)(e,i,t);if(!r)return O({},jp);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?O(O({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function jP(i){return{matched:!0,parameters:i.length>0?qI(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function jI(i,t,e,n){return e.length>0&&$P(i,e,n)?{segmentGroup:new Ve(t,zP(n,new Ve(e,i.children))),slicedSegments:[]}:e.length===0&&qP(i,e,n)?{segmentGroup:new Ve(i.segments,BP(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new Ve(i.segments,i.children),slicedSegments:e}}function BP(i,t,e,n){let r={};for(let s of e)if(Vd(i,t,s)&&!n[Ui(s)]){let o=new Ve([],{});r[Ui(s)]=o}return O(O({},n),r)}function zP(i,t){let e={};e[he]=t;for(let n of i)if(n.path===""&&Ui(n)!==he){let r=new Ve([],{});e[Ui(n)]=r}return e}function $P(i,t,e){return e.some(n=>Vd(i,t,n)&&Ui(n)!==he)}function qP(i,t,e){return e.some(n=>Vd(i,t,n))}function Vd(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function GP(i,t,e){return t.length===0&&!i.children[e]}var Bp=class{};function HP(i,t,e,n,r,s,o="emptyOnly"){return new zp(i,t,e,n,r,o,s).recognize()}var WP=31,zp=class{constructor(t,e,n,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Up(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new tt(4002,`'${t.segmentGroup}'`)}recognize(){let t=jI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(pe(({children:e,rootSnapshot:n})=>{let r=new fi(n,e),s=new Od("",r),o=tP(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new Ls([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,he,e).pipe(pe(n=>({children:n,rootSnapshot:e})),Cs(n=>{if(n instanceof ac)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof oc?this.noMatchError(n):n}))}processSegmentGroup(t,e,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n,s):this.processSegment(t,e,n,n.segments,r,!0,s).pipe(pe(o=>o instanceof fi?[o]:[]))}processChildren(t,e,n,r){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return ei(s).pipe(Ts(o=>{let a=n.children[o],l=lP(e,o);return this.processSegmentGroup(t,l,a,o,r)}),M0((o,a)=>(o.push(...a),o)),Qm(null),D0(),oi(o=>{if(o===null)return Os(n);let a=hE(o);return KP(a),Z(a)}))}processSegment(t,e,n,r,s,o,a){return ei(e).pipe(Ts(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,n,r,s,o,a).pipe(Cs(d=>{if(d instanceof oc)return Z(null);throw d}))),Xn(l=>!!l),Cs(l=>{if(lE(l))return GP(n,r,s)?Z(new Bp):Os(n);throw l}))}processSegmentAgainstRoute(t,e,n,r,s,o,a,l){return Ui(n)!==o&&(o===he||!Vd(r,s,n))?Os(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,s,o,l):Os(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o,a){let{matched:l,parameters:d,consumedSegments:h,positionalParamSegments:p,remainingSegments:f}=uE(e,r,s);if(!l)return Os(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WP&&(this.allowRedirects=!1));let w=new Ls(s,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,BI(r),Ui(r),r.component??r._loadedComponent??null,r,zI(r)),C=Pd(w,a,this.paramsInheritanceStrategy);w.params=Object.freeze(C.params),w.data=Object.freeze(C.data);let D=this.applyRedirects.applyRedirectCommands(h,r.redirectTo,p,w,t);return this.applyRedirects.lineralizeSegments(r,D).pipe(oi(R=>this.processSegment(t,n,e,R.concat(f),o,!1,a)))}matchSegmentAgainstRoute(t,e,n,r,s,o){let a=UP(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),a.pipe(Ot(l=>l.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(Ot(({routes:d})=>{let h=n._loadedInjector??t,{parameters:p,consumedSegments:f,remainingSegments:w}=l,C=new Ls(f,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,BI(n),Ui(n),n.component??n._loadedComponent??null,n,zI(n)),D=Pd(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(D.params),C.data=Object.freeze(D.data);let{segmentGroup:R,slicedSegments:$}=jI(e,f,w,d);if($.length===0&&R.hasChildren())return this.processChildren(h,d,R,C).pipe(pe(Y=>new fi(C,Y)));if(d.length===0&&$.length===0)return Z(new fi(C,[]));let ee=Ui(n)===s;return this.processSegment(h,d,R,$,ee?he:s,!0,C).pipe(pe(Y=>new fi(C,Y instanceof fi?[Y]:[])))}))):Os(e)))}getChildConfig(t,e,n){return e.children?Z({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Z({routes:e._loadedRoutes,injector:e._loadedInjector}):NP(t,e,n,this.urlSerializer).pipe(oi(r=>r?this.configLoader.loadChildren(t,e).pipe(bt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):VP(e))):Z({routes:[],injector:t})}};function KP(i){i.sort((t,e)=>t.value.outlet===he?-1:e.value.outlet===he?1:t.value.outlet.localeCompare(e.value.outlet))}function YP(i){let t=i.value.routeConfig;return t&&t.path===""}function hE(i){let t=[],e=new Set;for(let n of i){if(!YP(n)){t.push(n);continue}let r=t.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=hE(n.children);t.push(new fi(n.value,r))}return t.filter(n=>!e.has(n))}function BI(i){return i.data||{}}function zI(i){return i.resolve||{}}function QP(i,t,e,n,r,s){return oi(o=>HP(i,t,e,n,o.extractedUrl,r,s).pipe(pe(({state:a,tree:l})=>Fe(O({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function XP(i,t){return oi(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Z(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of mE(l))o.add(d);let a=0;return ei(o).pipe(Ts(l=>s.has(l)?ZP(l,n,i,t):(l.data=Pd(l,l.parent,i).resolve,Z(void 0))),bt(()=>a++),Xm(1),oi(l=>a===o.size?Z(e):Qi))})}function mE(i){let t=i.children.map(e=>mE(e)).flat();return[i,...t]}function ZP(i,t,e,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!sE(r)&&(s[cc]=r.title),JP(s,i,t,n).pipe(pe(o=>(i._resolvedData=o,i.data=Pd(i,i.parent,e).resolve,null)))}function JP(i,t,e,n){let r=bp(i);if(r.length===0)return Z({});let s={};return ei(r).pipe(oi(o=>eO(i[o],t,e,n).pipe(Xn(),bt(a=>{if(a instanceof sc)throw Nd(new Xa,a);s[o]=a}))),Xm(1),x0(s),Cs(o=>lE(o)?Qi:ba(o)))}function eO(i,t,e,n){let r=lc(t)??n,s=$s(i,r),o=s.resolve?s.resolve(t,e):En(r,()=>s(t,e));return ir(o)}function _p(i){return Ot(t=>{let e=i(t);return e?ei(e).pipe(pe(()=>t)):Z(t)})}var pE=(()=>{class i{buildTitle(e){let n,r=e.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===he);return n}getResolvedTitleForRoute(e){return e.data[cc]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:()=>U(tO),providedIn:"root"})}}return i})(),tO=(()=>{class i extends pE{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)(M(Id))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Kp=new F("",{providedIn:"root",factory:()=>({})}),Yp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=_e({type:i,selectors:[["ng-component"]],standalone:!0,features:[be],decls:1,vars:0,template:function(n,r){n&1&&oe(0,"router-outlet")},dependencies:[Hp],encapsulation:2})}}return i})();function Qp(i){let t=i.children&&i.children.map(Qp),e=t?Fe(O({},i),{children:t}):O({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==he&&(e.component=Yp),e}var Xp=new F(""),iO=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(np)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Z(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=ir(e.loadComponent()).pipe(pe(fE),bt(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),nd(()=>{this.componentLoaders.delete(e)})),r=new ed(n,()=>new te).pipe(qm());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Z({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=nO(n,this.compiler,e,this.onLoadEndListener).pipe(nd(()=>{this.childrenLoaders.delete(n)})),o=new ed(s,()=>new te).pipe(qm());return this.childrenLoaders.set(n,o),o}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function nO(i,t,e,n){return ir(i.loadChildren()).pipe(pe(fE),oi(r=>r instanceof $0||Array.isArray(r)?Z(r):ei(t.compileModuleAsync(r))),pe(r=>{n&&n(i);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(Xp,[],{optional:!0,self:!0}).flat()),{routes:o.map(Qp),injector:s}}))}function rO(i){return i&&typeof i=="object"&&"default"in i}function fE(i){return rO(i)?i.default:i}var Zp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:()=>U(sO),providedIn:"root"})}}return i})(),sO=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),oO=new F("");var aO=new F(""),cO=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new te,this.transitionAbortSubject=new te,this.configLoader=U(iO),this.environmentInjector=U(Ss),this.urlSerializer=U(qp),this.rootContexts=U(Ld),this.location=U(ks),this.inputBindingEnabled=U(Wp,{optional:!0})!==null,this.titleStrategy=U(pE),this.options=U(Kp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Zp),this.createViewTransition=U(oO,{optional:!0}),this.navigationErrorHandler=U(aO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let e=r=>this.events.next(new Rp(r)),n=r=>this.events.next(new xp(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(Fe(O(O({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,r){return this.transitions=new si({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ya,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(s=>s.id!==0),pe(s=>Fe(O({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ot(s=>{let o=!1,a=!1;return Z(s).pipe(Ot(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",gi.SupersededByNewNavigation),Qi;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Fe(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&h!=="reload"){let p="";return this.events.next(new Nr(l.id,this.urlSerializer.serialize(l.rawUrl),p,Ep.IgnoredSameUrlNavigation)),l.resolve(!1),Qi}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(Ot(p=>{let f=this.transitions?.getValue();return this.events.next(new ec(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),f!==this.transitions?.getValue()?Qi:Promise.resolve(p)}),QP(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),bt(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Fe(O({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let f=new kd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(f)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:f,source:w,restoredState:C,extras:D}=l,R=new ec(p,this.urlSerializer.serialize(f),w,C);this.events.next(R);let $=nE(this.rootComponentType).snapshot;return this.currentTransition=s=Fe(O({},l),{targetSnapshot:$,urlAfterRedirects:f,extras:Fe(O({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Z(s)}else{let p="";return this.events.next(new Nr(l.id,this.urlSerializer.serialize(l.extractedUrl),p,Ep.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Qi}}),bt(l=>{let d=new Cp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),pe(l=>(this.currentTransition=s=Fe(O({},l),{guards:gP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),AP(this.environmentInjector,l=>this.events.next(l)),bt(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Nd(this.urlSerializer,l.guardsResult);let d=new Tp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),vt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",gi.GuardRejected),!1)),_p(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(bt(d=>{let h=new Sp(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Ot(d=>{let h=!1;return Z(d).pipe(XP(this.paramsInheritanceStrategy,this.environmentInjector),bt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",gi.NoDataFromResolver)}}))}),bt(d=>{let h=new Ap(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),_p(l=>{let d=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(bt(f=>{h.component=f}),pe(()=>{})));for(let f of h.children)p.push(...d(f));return p};return wa(d(l.targetSnapshot.root)).pipe(Qm(null),Fi(1))}),_p(()=>this.afterPreactivation()),Ot(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?ei(h).pipe(pe(()=>s)):Z(s)}),pe(l=>{let d=uP(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Fe(O({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),bt(()=>{this.events.next(new nc)}),fP(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Fi(1),bt({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Or(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Ue(this.transitionAbortSubject.pipe(bt(l=>{throw l}))),nd(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",gi.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cs(l=>{if(a=!0,cE(l))this.events.next(new Dn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),pP(l)?this.events.next(new js(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let d=new tc(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let h=En(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof sc){let{message:p,cancellationCode:f}=Nd(this.urlSerializer,h);this.events.next(new Dn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,f)),this.events.next(new js(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let p=e.errorHandler(l);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Qi}))}))}cancelNavigationTransition(e,n,r){let s=new Dn(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function lO(i){return i!==Ya}var dO=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:()=>U(uO),providedIn:"root"})}}return i})(),$p=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},uO=(()=>{class i extends $p{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Cn(i)))(r||i)}})()}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),gE=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:()=>U(hO),providedIn:"root"})}}return i})(),hO=(()=>{class i extends gE{constructor(){super(...arguments),this.location=U(ks),this.urlSerializer=U(qp),this.options=U(Kp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Zp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=nE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof ec)this.stateMemento=this.createStateMemento();else if(e instanceof Nr)this.rawUrlTree=n.initialUrl;else if(e instanceof kd){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??r,n)}}else e instanceof nc?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):e instanceof Dn&&(e.code===gi.GuardRejected||e.code===gi.NoDataFromResolver)?this.restoreHistory(n):e instanceof tc?this.restoreHistory(n,!0):e instanceof Or&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let r=e instanceof Mn?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let s=this.browserPageId,o=O(O({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(r,"",o)}else{let s=O(O({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Cn(i)))(r||i)}})()}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Wa=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Wa||{});function mO(i,t){i.events.pipe(vt(e=>e instanceof Or||e instanceof Dn||e instanceof tc||e instanceof Nr),pe(e=>e instanceof Or||e instanceof Nr?Wa.COMPLETE:(e instanceof Dn?e.code===gi.Redirect||e.code===gi.SupersededByNewNavigation:!1)?Wa.REDIRECTING:Wa.FAILED),vt(e=>e!==Wa.REDIRECTING),Fi(1)).subscribe(()=>{t()})}function pO(i){throw i}var fO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ud=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(ud),this.stateManager=U(gE),this.options=U(Kp,{optional:!0})||{},this.pendingTasks=U(F0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(cO),this.urlSerializer=U(qp),this.location=U(ks),this.urlHandlingStrategy=U(Zp),this._events=new te,this.errorHandler=this.options.errorHandler||pO,this.navigated=!1,this.routeReuseStrategy=U(dO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Xp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(Wp,{optional:!0}),this.eventsSubscription=new ri,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof Dn&&n.code!==gi.Redirect&&n.code!==gi.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Or)this.navigated=!0;else if(n instanceof js){let o=n.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),l=O({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lO(r.source)},o);this.scheduleNavigation(a,Ya,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}vO(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ya,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=O({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Qp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,d=l?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let f=r?r.snapshot:this.routerState.snapshot.root;p=JI(f)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),p=this.currentUrlTree.root}return eE(p,e,h,d??null)}navigateByUrl(e,n={skipLocationChange:!1}){let r=Za(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Ya,null,n)}navigate(e,n={skipLocationChange:!1}){return _O(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(n===!0?r=O({},fO):n===!1?r=O({},gO):r=n,Za(e))return FI(this.currentUrlTree,e,r);let s=this.parseUrl(e);return FI(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,s])=>(s!=null&&(n[r]=s),n),{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,d;o?(a=o.resolve,l=o.reject,d=o.promise):d=new Promise((p,f)=>{a=p,l=f});let h=this.pendingTasks.add();return mO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function _O(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new tt(4008,!1)}function vO(i){return!(i instanceof nc)&&!(i instanceof js)}var bO=new F("");function _E(i,...t){return We([{provide:Xp,multi:!0,useValue:i},[],{provide:Bs,useFactory:yO,deps:[Ud]},{provide:J0,multi:!0,useFactory:wO},t.map(e=>e.\u0275providers)])}function yO(i){return i.routerState.root}function wO(){let i=U(ve);return t=>{let e=i.get(ka);if(t!==e.components[0])return;let n=i.get(Ud),r=i.get(IO);i.get(EO)===1&&n.initialNavigation(),i.get(CO,null,ep.Optional)?.setUpPreloading(),i.get(bO,null,ep.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var IO=new F("",{factory:()=>new te}),EO=new F("",{providedIn:"root",factory:()=>1});var CO=new F("");var jd=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_e({type:i,selectors:[["app-sub"]],standalone:!0,features:[be],decls:2,vars:0,consts:[[1,"title"]],template:function(e,n){e&1&&(j(0,"h1",0),ze(1,"subpage of subpage"),z())},styles:[".title[_ngcontent-%COMP%]{font-size:3rem;margin:80px auto;text-align:center}@media (max-width: 600px){.title[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 600px) and (max-width: 300px){.title[_ngcontent-%COMP%]{font-size:1rem}}"]})};var SE=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(x(cd),x(re))}}static{this.\u0275dir=le({type:i})}}return i})(),SO=(()=>{class i extends SE{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Cn(i)))(r||i)}})()}static{this.\u0275dir=le({type:i,features:[zt]})}}return i})(),Fr=new F("");var AO={provide:Fr,useExisting:Ei(()=>Qd),multi:!0};function RO(){let i=xs()?xs().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var xO=new F(""),Qd=(()=>{class i extends SE{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!RO())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(x(cd),x(re),x(xO,8))}}static{this.\u0275dir=le({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&Ce("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[ct([AO]),zt]})}}return i})();function nr(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function AE(i){return i!=null&&typeof i.length=="number"}var Lr=new F(""),Xd=new F(""),kO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sn=class{static min(t){return DO(t)}static max(t){return MO(t)}static required(t){return RE(t)}static requiredTrue(t){return PO(t)}static email(t){return OO(t)}static minLength(t){return NO(t)}static maxLength(t){return FO(t)}static pattern(t){return LO(t)}static nullValidator(t){return zd(t)}static compose(t){return OE(t)}static composeAsync(t){return NE(t)}};function DO(i){return t=>{if(nr(t.value)||nr(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function MO(i){return t=>{if(nr(t.value)||nr(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function RE(i){return nr(i.value)?{required:!0}:null}function PO(i){return i.value===!0?null:{required:!0}}function OO(i){return nr(i.value)||kO.test(i.value)?null:{email:!0}}function NO(i){return t=>nr(t.value)||!AE(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function FO(i){return t=>AE(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function LO(i){if(!i)return zd;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(nr(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function zd(i){return null}function xE(i){return i!=null}function kE(i){return hd(i)?ei(i):i}function DE(i){let t={};return i.forEach(e=>{t=e!=null?O(O({},t),e):t}),Object.keys(t).length===0?null:t}function ME(i,t){return t.map(e=>e(i))}function VO(i){return!i.validate}function PE(i){return i.map(t=>VO(t)?t:e=>t.validate(e))}function OE(i){if(!i)return null;let t=i.filter(xE);return t.length==0?null:function(e){return DE(ME(e,t))}}function sf(i){return i!=null?OE(PE(i)):null}function NE(i){if(!i)return null;let t=i.filter(xE);return t.length==0?null:function(e){let n=ME(e,t).map(kE);return R0(n).pipe(pe(DE))}}function of(i){return i!=null?NE(PE(i)):null}function vE(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function FE(i){return i._rawValidators}function LE(i){return i._rawAsyncValidators}function Jp(i){return i?Array.isArray(i)?i:[i]:[]}function $d(i,t){return Array.isArray(i)?i.includes(t):i===t}function bE(i,t){let e=Jp(t);return Jp(i).forEach(r=>{$d(e,r)||e.push(r)}),e}function yE(i,t){return Jp(t).filter(e=>!$d(i,e))}var qd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=of(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Pn=class extends qd{get formDirective(){return null}get path(){return null}},ji=class extends qd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gd=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},UO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},n4=Fe(O({},UO),{"[class.ng-submitted]":"isSubmitted"}),Zd=(()=>{class i extends Gd{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(x(ji,2))}}static{this.\u0275dir=le({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Ee("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[zt]})}}return i})(),VE=(()=>{class i extends Gd{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(x(Pn,10))}}static{this.\u0275dir=le({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&Ee("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[zt]})}}return i})();var uc="VALID",Bd="INVALID",Gs="PENDING",hc="DISABLED",rr=class{},Hd=class extends rr{constructor(t,e){super(),this.value=t,this.source=e}},pc=class extends rr{constructor(t,e){super(),this.pristine=t,this.source=e}},fc=class extends rr{constructor(t,e){super(),this.touched=t,this.source=e}},Hs=class extends rr{constructor(t,e){super(),this.status=t,this.source=e}},ef=class extends rr{constructor(t){super(),this.source=t}},tf=class extends rr{constructor(t){super(),this.source=t}};function af(i){return(Jd(i)?i.validators:i)||null}function jO(i){return Array.isArray(i)?sf(i):i||null}function cf(i,t){return(Jd(t)?t.asyncValidators:i)||null}function BO(i){return Array.isArray(i)?of(i):i||null}function Jd(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function UE(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new tt(1e3,"");if(!n[e])throw new tt(1001,"")}function jE(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new tt(1002,"")})}var Ws=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Rn(()=>this.statusReactive()),this.statusReactive=As(void 0),this._pristine=Rn(()=>this.pristineReactive()),this.pristineReactive=As(!0),this._touched=Rn(()=>this.touchedReactive()),this.touchedReactive=As(!1),this._events=new te,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Li(this.statusReactive)}set status(t){Li(()=>this.statusReactive.set(t))}get valid(){return this.status===uc}get invalid(){return this.status===Bd}get pending(){return this.status==Gs}get disabled(){return this.status===hc}get enabled(){return this.status!==hc}get pristine(){return Li(this.pristineReactive)}set pristine(t){Li(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Li(this.touchedReactive)}set touched(t){Li(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(bE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(bE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(yE(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(yE(t,this._rawAsyncValidators))}hasValidator(t){return $d(this._rawValidators,t)}hasAsyncValidator(t){return $d(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Fe(O({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new fc(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new fc(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Fe(O({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new pc(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new pc(!0,n))}markAsPending(t={}){this.status=Gs;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hs(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Fe(O({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=hc,this.errors=null,this._forEachChild(r=>{r.disable(Fe(O({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hd(this.value,n)),this._events.next(new Hs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Fe(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=uc,this._forEachChild(n=>{n.enable(Fe(O({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Fe(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uc||this.status===Gs)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hd(this.value,e)),this._events.next(new Hs(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Fe(O({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hc:uc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Gs,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=kE(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new Hs(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new fe,this.statusChanges=new fe}_calculateStatus(){return this._allControlsDisabled()?hc:this.errors?Bd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gs)?Gs:this._anyControlsHaveStatus(Bd)?Bd:uc}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new pc(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new fc(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Jd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=jO(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=BO(this._rawAsyncValidators)}},Ks=class extends Ws{constructor(t,e,n){super(af(e),cf(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){jE(this,!0,t),Object.keys(t).forEach(n=>{UE(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var nf=class extends Ks{};var _c=new F("CallSetDisabledState",{providedIn:"root",factory:()=>eu}),eu="always";function BE(i,t){return[...t.path,i]}function Wd(i,t,e=eu){lf(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),$O(i,t),GO(i,t),qO(i,t),zO(i,t)}function wE(i,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),Yd(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Kd(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function zO(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function lf(i,t){let e=FE(i);t.validator!==null?i.setValidators(vE(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=LE(i);t.asyncValidator!==null?i.setAsyncValidators(vE(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Kd(t._rawValidators,r),Kd(t._rawAsyncValidators,r)}function Yd(i,t){let e=!1;if(i!==null){if(t.validator!==null){let r=FE(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,i.setValidators(s))}}if(t.asyncValidator!==null){let r=LE(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,i.setAsyncValidators(s))}}}let n=()=>{};return Kd(t._rawValidators,n),Kd(t._rawAsyncValidators,n),e}function $O(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&zE(i,t)})}function qO(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&zE(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function zE(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function GO(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function $E(i,t){i==null,lf(i,t)}function HO(i,t){return Yd(i,t)}function qE(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function WO(i){return Object.getPrototypeOf(i.constructor)===SO}function GE(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function HE(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(s=>{s.constructor===Qd?e=s:WO(s)?n=s:r=s}),r||n||e||null}function KO(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}var YO={provide:Pn,useExisting:Ei(()=>vc)},mc=Promise.resolve(),vc=(()=>{class i extends Pn{get submitted(){return Li(this.submittedReactive)}constructor(e,n,r){super(),this.callSetDisabledState=r,this._submitted=Rn(()=>this.submittedReactive()),this.submittedReactive=As(!1),this._directives=new Set,this.ngSubmit=new fe,this.form=new Ks({},sf(e),of(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){mc.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Wd(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){mc.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){mc.then(()=>{let n=this._findContainer(e.path),r=new Ks({});$E(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){mc.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){mc.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),GE(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||i)(x(Lr,10),x(Xd,10),x(_c,8))}}static{this.\u0275dir=le({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&Ce("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ct([YO]),zt]})}}return i})();function IE(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function EE(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var gc=class extends Ws{constructor(t=null,e,n){super(af(e),cf(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(EE(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){EE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var QO=i=>i instanceof gc;var XO={provide:ji,useExisting:Ei(()=>df)},CE=Promise.resolve(),df=(()=>{class i extends ji{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new gc,this._registered=!1,this.name="",this.update=new fe,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=HE(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),qE(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Wd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){CE.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&ae(n);CE.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?BE(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(x(Pn,9),x(Lr,10),x(Xd,10),x(Fr,10),x(lt,8),x(_c,8))}}static{this.\u0275dir=le({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ct([XO]),zt,At]})}}return i})(),WE=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=le({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})();var KE=new F("");var ZO={provide:Pn,useExisting:Ei(()=>Vr)},Vr=(()=>{class i extends Pn{get submitted(){return Li(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,n,r){super(),this.callSetDisabledState=r,this._submitted=Rn(()=>this._submittedReactive()),this._submittedReactive=As(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new fe,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return Wd(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){wE(e.control||null,e,!1),KO(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this._submittedReactive.set(!0),GE(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new ef(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new tf(this.form))}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,r=this.form.get(e.path);n!==r&&(wE(n||null,e),QO(r)&&(Wd(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);$E(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&HO(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lf(this.form,this),this._oldForm&&Yd(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||i)(x(Lr,10),x(Xd,10),x(_c,8))}}static{this.\u0275dir=le({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&Ce("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ct([ZO]),zt,At]})}}return i})();var JO={provide:ji,useExisting:Ei(()=>uf)},uf=(()=>{class i extends ji{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new fe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=HE(this,s)}ngOnChanges(e){this._added||this._setUpControl(),qE(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return BE(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(n){return new(n||i)(x(Pn,13),x(Lr,10),x(Xd,10),x(Fr,10),x(KE,8))}}static{this.\u0275dir=le({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ct([JO]),zt,At]})}}return i})();var eN=(()=>{class i{constructor(){this._validator=zd}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):zd,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=le({type:i,features:[At]})}}return i})();var tN={provide:Lr,useExisting:Ei(()=>hf),multi:!0};var hf=(()=>{class i extends eN{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ae,this.createValidator=e=>RE}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Cn(i)))(r||i)}})()}static{this.\u0275dir=le({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){n&2&&qe("required",r._enabled?"":null)},inputs:{required:"required"},features:[ct([tN]),zt]})}}return i})();var YE=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({})}}return i})(),rf=class extends Ws{constructor(t,e,n){super(af(e),cf(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){jE(this,!1,t),t.forEach((n,r)=>{UE(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function TE(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var QE=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,n=null){let r=this._reduceControls(e),s={};return TE(n)?s=n:n!==null&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Ks(r,s)}record(e,n=null){let r=this._reduceControls(e);return new nf(r,n)}control(e,n,r){let s={};return this.useNonNullable?(TE(n)?s=n:(s.validators=n,s.asyncValidators=r),new gc(e,Fe(O({},s),{nonNullable:!0}))):new gc(e,n,r)}array(e,n,r){let s=e.map(o=>this._createControl(o));return new rf(s,n,r)}_reduceControls(e){let n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){if(e instanceof gc)return e;if(e instanceof Ws)return e;if(Array.isArray(e)){let n=e[0],r=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(n,r,s)}else return this.control(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ys=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:_c,useValue:e.callSetDisabledState??eu}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[YE]})}}return i})(),XE=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:KE,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:_c,useValue:e.callSetDisabledState??eu}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[YE]})}}return i})();var pf;try{pf=typeof Intl<"u"&&Intl.v8BreakIterator}catch{pf=!1}var $e=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Da(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||pf)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(M(Ci))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Qs,ZE=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ff(){if(Qs)return Qs;if(typeof document!="object"||!document)return Qs=new Set(ZE),Qs;let i=document.createElement("input");return Qs=new Set(ZE.filter(t=>(i.setAttribute("type",t),i.type===t))),Qs}var bc;function iN(){if(bc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bc=!0}))}finally{bc=bc||!1}return bc}function on(i){return iN()?i:!!i.capture}var Ur;function JE(){if(Ur==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ur=!1,Ur;if("scrollBehavior"in document.documentElement.style)Ur=!0;else{let i=Element.prototype.scrollTo;i?Ur=!/\{\s*\[native code\]\s*\}/.test(i.toString()):Ur=!1}}return Ur}var mf;function nN(){if(mf==null){let i=typeof document<"u"?document.head:null;mf=!!(i&&(i.createShadowRoot||i.attachShadow))}return mf}function eC(i){if(nN()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function _i(i){return i.composedPath?i.composedPath()[0]:i.target}function yc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Bi(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function cn(i){return i!=null&&`${i}`!="false"}function Xs(i,t=0){return rN(i)?Number(i):arguments.length===2?t:0}function rN(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function Zs(i){return Array.isArray(i)?i:[i]}function ft(i){return i==null?"":typeof i=="string"?i:`${i}px`}function Ai(i){return i instanceof re?i.nativeElement:i}var sN=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var iu=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({providers:[sN]})}}return i})();var tC=new Set,jr,oN=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cN}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&aN(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||i)(M($e),M(Sa,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function aN(i,t){if(!tC.has(i))try{jr||(jr=document.createElement("style"),t&&jr.setAttribute("nonce",t),jr.setAttribute("type","text/css"),document.head.appendChild(jr)),jr.sheet&&(jr.sheet.insertRule(`@media ${i} {body{ }}`,0),tC.add(i))}catch(e){console.error(e)}}function cN(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var nC=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new te}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return iC(Zs(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=iC(Zs(e)).map(o=>this._registerQuery(o).observable),s=wa(r);return s=td(s.pipe(Fi(1)),s.pipe(rd(1),id(0))),s.pipe(pe(o=>{let a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:d})=>{a.matches=a.matches||l,a.breakpoints[d]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let n=this._mediaMatcher.matchMedia(e),s={observable:new Ii(o=>{let a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(Xi(n),pe(({matches:o})=>({query:e,matches:o})),Ue(this._destroySubject)),mql:n};return this._queries.set(e,s),s}static{this.\u0275fac=function(n){return new(n||i)(M(oN),M(V))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function iC(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var aC=" ";function If(i,t,e){let n=ou(i,t);e=e.trim(),!n.some(r=>r.trim()===e)&&(n.push(e),i.setAttribute(t,n.join(aC)))}function du(i,t,e){let n=ou(i,t);e=e.trim();let r=n.filter(s=>s!==e);r.length?i.setAttribute(t,r.join(aC)):i.removeAttribute(t)}function ou(i,t){return i.getAttribute(t)?.match(/\S+/g)??[]}var cC="cdk-describedby-message",nu="cdk-describedby-host",vf=0,lC=(()=>{class i{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${vf++}`,this._document=e,this._id=U(Ta)+"-"+vf++}describe(e,n,r){if(!this._canBeDescribed(e,n))return;let s=gf(n,r);typeof n!="string"?(rC(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,n,r){if(!n||!this._isElementNode(e))return;let s=gf(n,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),typeof n=="string"){let o=this._messageRegistry.get(s);o&&o.referenceCount===0&&this._deleteMessageElement(s)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${nu}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(nu);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){let r=this._document.createElement("div");rC(r,this._id),r.textContent=e,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(gf(e,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){let n=ou(e,"aria-describedby").filter(r=>r.indexOf(cC)!=0);e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){let r=this._messageRegistry.get(n);If(e,"aria-describedby",r.messageElement.id),e.setAttribute(nu,this._id),r.referenceCount++}_removeMessageReference(e,n){let r=this._messageRegistry.get(n);r.referenceCount--,du(e,"aria-describedby",r.messageElement.id),e.removeAttribute(nu)}_isElementDescribedByMessage(e,n){let r=ou(e,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&r.indexOf(o)!=-1}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&typeof n=="object")return!0;let r=n==null?"":`${n}`.trim(),s=e.getAttribute("aria-label");return r?!s||s.trim()!==r:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M($e))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function gf(i,t){return typeof i=="string"?`${t||""}/${i}`:i}function rC(i,t){i.id||(i.id=`${cC}-${t}-${vf++}`)}var IN=200,bf=class{constructor(t,e){this._letterKeyStream=new te,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new te,this.selectedItem=this._selectedItem;let n=typeof e?.debounceInterval=="number"?e.debounceInterval:IN;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(n)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(bt(e=>this._pressedLetters.push(e)),id(t),vt(()=>this._pressedLetters.length>0),pe(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let n=1;n<this._items.length+1;n++){let r=(this._selectedItemIndex+n)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},yf=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=ri.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this.tabOut=new te,this.change=new te,t instanceof sd?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):ip(t)&&(this._effectRef=nI(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new bf(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:n=>this._skipPredicateFn(n)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(n=>{this.setActiveItem(n)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||Bi(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),n=typeof t=="number"?t:e.indexOf(t),r=e[n];this._activeItem=r??null,this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let r=(this._activeItemIndex+t*n+e.length)%e.length,s=e[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=e,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return ip(this._items)?this._items():this._items instanceof sd?this._items.toArray():this._items}_itemsChanged(t){if(this._typeahead?.setItems(t),this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e,this._typeahead?.setCurrentSelectedItemIndex(e))}}},au=class extends yf{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}};function Ef(i){return i.buttons===0||i.detail===0}function Cf(i){let t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var EN=new F("cdk-input-modality-detector-options"),CN={ignoreKeys:[18,17,224,91,16]},dC=650,Js=on({passive:!0,capture:!0}),TN=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new si(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=_i(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<dC||(this._modality.next(Ef(o)?"keyboard":"mouse"),this._mostRecentTarget=_i(o))},this._onTouchstart=o=>{if(Cf(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=_i(o)},this._options=O(O({},CN),s),this.modalityDetected=this._modality.pipe(rd(1)),this.modalityChanged=this.modalityDetected.pipe(Er()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Js),r.addEventListener("mousedown",this._onMousedown,Js),r.addEventListener("touchstart",this._onTouchstart,Js)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Js),document.removeEventListener("mousedown",this._onMousedown,Js),document.removeEventListener("touchstart",this._onTouchstart,Js))}static{this.\u0275fac=function(n){return new(n||i)(M($e),M(V),M(ge),M(EN,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),SN=new F("liveAnnouncerElement",{providedIn:"root",factory:AN});function AN(){return null}var RN=new F("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),xN=0,uC=(()=>{class i{constructor(e,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){let r=this._defaultOptions,s,o;return n.length===1&&typeof n[0]=="number"?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),o==null&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof o=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${xN++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let s=n[r],o=s.getAttribute("aria-owns");o?o.indexOf(e)===-1&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}static{this.\u0275fac=function(n){return new(n||i)(M(SN,8),M(V),M(ge),M(RN,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var su=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(su||{}),kN=new F("cdk-focus-monitor-default-options"),ru=on({passive:!0,capture:!0}),sr=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new te,this._rootNodeFocusAndBlurListener=a=>{let l=_i(a);for(let d=l;d;d=d.parentElement)a.type==="focus"?this._onFocus(a,d):this._onBlur(a,d)},this._document=s,this._detectionMode=o?.detectionMode||su.IMMEDIATE}monitor(e,n=!1){let r=Ai(e);if(!this._platform.isBrowser||r.nodeType!==1)return Z();let s=eC(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;let a={checkChildren:n,subject:new te,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let n=Ai(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){let s=Ai(e),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===su.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused",n==="touch"),e.classList.toggle("cdk-keyboard-focused",n==="keyboard"),e.classList.toggle("cdk-mouse-focused",n==="mouse"),e.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&n,this._detectionMode===su.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?dC:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,n){let r=this._elementInfo.get(n),s=_i(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,ru),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,ru)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ue(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ru),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ru),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){let n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||i)(M(V),M($e),M(TN),M(ge,8),M(kN,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Br=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Br||{}),sC="cdk-high-contrast-black-on-white",oC="cdk-high-contrast-white-on-black",_f="cdk-high-contrast-active",Tf=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=U(nC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Br.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Br.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Br.BLACK_ON_WHITE}return Br.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(_f,sC,oC),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===Br.BLACK_ON_WHITE?e.add(_f,sC):n===Br.WHITE_ON_BLACK&&e.add(_f,oC)}}static{this.\u0275fac=function(n){return new(n||i)(M($e),M(ge))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),hC=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(n){return new(n||i)(M(Tf))}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[iu]})}}return i})();var DN=new F("cdk-dir-doc",{providedIn:"root",factory:MN});function MN(){return U(ge)}var PN=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function ON(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?PN.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var zi=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new fe,e){let n=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=ON(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(M(DN,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var or=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({})}}return i})();var NN=["text"],FN=[[["mat-icon"]],"*"],LN=["mat-icon","*"];function VN(i,t){if(i&1&&oe(0,"mat-pseudo-checkbox",1),i&2){let e=Qe();se("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function UN(i,t){if(i&1&&oe(0,"mat-pseudo-checkbox",3),i&2){let e=Qe();se("disabled",e.disabled)}}function jN(i,t){if(i&1&&(j(0,"span",4),ze(1),z()),i&2){let e=Qe();H(),Sr("(",e.group.label,")")}}var BN=["mat-internal-form-field",""],zN=["*"];function $N(){return!0}var qN=new F("mat-sanity-checks",{providedIn:"root",factory:$N}),Oe=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return yc()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(n){return new(n||i)(M(Tf),M(qN,8),M(ge))}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[or,or]})}}return i})();var zr=class{constructor(t,e,n,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=n?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var eo=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ri=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(Ri||{}),Rf=class{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=Ri.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},mC=on({passive:!0,capture:!0}),xf=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=_i(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){let s=this._events.get(e);if(s){let o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,mC)})}removeHandler(t,e,n){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(n),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,mC)))}},pC={enterDuration:225,exitDuration:150},GN=800,fC=on({passive:!0,capture:!0}),gC=["mousedown","touchstart"],_C=["mouseup","mouseleave","touchend","touchcancel"],kf=class i{static{this._eventManager=new xf}constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ai(n))}fadeInRipple(t,e,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=O(O({},pC),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=n.radius||HN(t,e,r),a=t-r.left,l=e-r.top,d=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${a-o}px`,h.style.top=`${l-o}px`,h.style.height=`${o*2}px`,h.style.width=`${o*2}px`,n.color!=null&&(h.style.backgroundColor=n.color),h.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(h);let p=window.getComputedStyle(h),f=p.transitionProperty,w=p.transitionDuration,C=f==="none"||w==="0s"||w==="0s, 0s"||r.width===0&&r.height===0,D=new Rf(this,h,n,C);h.style.transform="scale3d(1, 1, 1)",D.state=Ri.FADING_IN,n.persistent||(this._mostRecentTransientRipple=D);let R=null;return!C&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let $=()=>{R&&(R.fallbackTimer=null),clearTimeout(Y),this._finishRippleTransition(D)},ee=()=>this._destroyRipple(D),Y=setTimeout(ee,d+100);h.addEventListener("transitionend",$),h.addEventListener("transitioncancel",ee),R={onTransitionEnd:$,onTransitionCancel:ee,fallbackTimer:Y}}),this._activeRipples.set(D,R),(C||!d)&&this._finishRippleTransition(D),D}fadeOutRipple(t){if(t.state===Ri.FADING_OUT||t.state===Ri.HIDDEN)return;let e=t.element,n=O(O({},pC),t.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=Ri.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=Ai(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,gC.forEach(n=>{i._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{_C.forEach(e=>{this._triggerElement.addEventListener(e,this,fC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Ri.FADING_IN?this._startFadeOutTransition(t):t.state===Ri.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=Ri.VISIBLE,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Ri.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Ef(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+GN;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Cf(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Ri.VISIBLE||t.config.terminateOnPointerUp&&t.state===Ri.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(gC.forEach(e=>i._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(_C.forEach(e=>t.removeEventListener(e,this,fC)),this._pointerUpEventsRegistered=!1))}};function HN(i,t,e){let n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}var Mf=new F("mat-ripple-global-options"),to=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new kf(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:O(O(O({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,n,O(O({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,O(O({},this.rippleConfig),e))}static{this.\u0275fac=function(n){return new(n||i)(x(re),x(V),x($e),x(Mf,8),x(St,8))}}static{this.\u0275dir=le({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){n&2&&Ee("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return i})(),qr=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe,Oe]})}}return i})(),Pf=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}static{this.\u0275fac=function(n){return new(n||i)(x(St,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(n,r){n&2&&Ee("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[be],decls:0,vars:0,template:function(n,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-app-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-app-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}}return i})(),WN=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe]})}}return i})(),Of=new F("MAT_OPTION_PARENT_COMPONENT");var Nf=new F("MatOptgroup");var KN=0,Df=class{constructor(t,e=!1){this.source=t,this.isUserInput=e}},io=(()=>{class i{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(e,n,r,s){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${KN++}`,this.onSelectionChange=new fe,this._stateChanges=new te}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,n){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Bi(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Df(this,e))}static{this.\u0275fac=function(n){return new(n||i)(x(re),x(lt),x(Of,8),x(Nf,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-option"]],viewQuery:function(n,r){if(n&1&&it(NN,7),n&2){let s;Ae(s=Re())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(n,r){n&1&&Ce("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),n&2&&(Sn("id",r.id),qe("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Ee("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",ae]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[ht,be],ngContentSelectors:LN,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,r){n&1&&(Nt(FN),Ie(0,VN,1,2,"mat-pseudo-checkbox",1),Be(1),j(2,"span",2,0),Be(4,1),z(),Ie(5,UN,1,1,"mat-pseudo-checkbox",3)(6,jN,2,1,"span",4),oe(7,"div",5)),n&2&&(je(r.multiple?0:-1),H(5),je(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),H(),je(r.group&&r.group._inert?6:-1),H(),se("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[Pf,to],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-app-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color);outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-app-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})();function wC(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}function IC(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}var Ff=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[qr,Oe,WN]})}}return i})(),vC={capture:!0},bC=["focus","mousedown","mouseenter","touchstart"],Sf="mat-ripple-loader-uninitialized",Af="mat-ripple-loader-class-name",yC="mat-ripple-loader-centered",uu="mat-ripple-loader-disabled",Lf=(()=>{class i{constructor(){this._document=U(ge,{optional:!0}),this._animationMode=U(St,{optional:!0}),this._globalRippleOptions=U(Mf,{optional:!0}),this._platform=U($e),this._ngZone=U(V),this._hosts=new Map,this._onInteraction=e=>{let n=_i(e);if(n instanceof HTMLElement){let r=n.closest(`[${Sf}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}},this._ngZone.runOutsideAngular(()=>{for(let e of bC)this._document?.addEventListener(e,this._onInteraction,vC)})}ngOnDestroy(){let e=this._hosts.keys();for(let n of e)this.destroyRipple(n);for(let n of bC)this._document?.removeEventListener(n,this._onInteraction,vC)}configureRipple(e,n){e.setAttribute(Sf,this._globalRippleOptions?.namespace??""),(n.className||!e.hasAttribute(Af))&&e.setAttribute(Af,n.className||""),n.centered&&e.setAttribute(yC,""),n.disabled&&e.setAttribute(uu,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,n){let r=this._hosts.get(e);if(r){r.disabled=n;return}n?e.setAttribute(uu,""):e.removeAttribute(uu)}_createRipple(e){if(!this._document)return;let n=this._hosts.get(e);if(n)return n;e.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(Af)),e.append(r);let s=new to(new re(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=e,s.centered=e.hasAttribute(yC),s.disabled=e.hasAttribute(uu),this.attachRipple(e,s),s}attachRipple(e,n){e.removeAttribute(Sf),this._hosts.set(e,n)}destroyRipple(e){let n=this._hosts.get(e);n&&(n.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),EC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=_e({type:i,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(n,r){n&2&&Ee("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[be],attrs:BN,ngContentSelectors:zN,decls:1,vars:0,template:function(n,r){n&1&&(Nt(),Be(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}}return i})();var YN=["mat-button",""],QN=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],XN=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var ZN=new F("MAT_BUTTON_CONFIG");var JN=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],e1=(()=>{class i{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,n,r,s){this._elementRef=e,this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=U(sr),this._rippleLoader=U(Lf),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let o=U(ZN,{optional:!0}),a=e.nativeElement,l=a.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:h}of JN)a.hasAttribute(d)&&l.add(...h)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(n){Ra()}}static{this.\u0275dir=le({type:i,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ae],disabled:[2,"disabled","disabled",ae],ariaDisabled:[2,"aria-disabled","ariaDisabled",ae],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ae]},features:[ht]})}}return i})();var mu=(()=>{class i extends e1{constructor(e,n,r,s){super(e,n,r,s)}static{this.\u0275fac=function(n){return new(n||i)(x(re),x($e),x(V),x(St,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,r){n&2&&(qe("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Tr(r.color?"mat-"+r.color:""),Ee("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[zt,be],attrs:YN,ngContentSelectors:XN,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){n&1&&(Nt(QN),oe(0,"span",0),Be(1),j(2,"span",1),Be(3,1),z(),Be(4,2),oe(5,"span",2)(6,"span",3)),n&2&&Ee("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return i})();var Vf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe,qr,Oe]})}}return i})();var no=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,n=!0,r){this._multiple=t,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new te,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,n=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!n.has(this._getConcreteValue(s,n))).forEach(s=>this._unmarkSelected(s));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let n of e)if(this.compareWith(t,n))return n;return t}else return t}};var t1=["button"],i1=["*"];function n1(i,t){if(i&1&&oe(0,"mat-pseudo-checkbox",3),i&2){let e=Qe();se("disabled",e.disabled)}}function r1(i,t){if(i&1&&oe(0,"mat-pseudo-checkbox",3),i&2){let e=Qe();se("disabled",e.disabled)}}var TC=new F("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:s1});function s1(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var SC=new F("MatButtonToggleGroup"),o1={provide:Fr,useExisting:Ei(()=>Uf),multi:!0},AC=0,pu=class{constructor(t,e){this.source=t,this.value=e}},Uf=(()=>{class i{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}constructor(e,n,r){this._changeDetector=e,this._dir=r,this._multiple=!1,this._disabled=!1,this._disabledInteractive=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name=`mat-button-toggle-group-${AC++}`,this.valueChange=new fe,this.change=new fe,this.appearance=n&&n.appearance?n.appearance:"standard",this.hideSingleSelectionIndicator=n?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=n?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new no(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;let r=e.target.id,s=this._buttonToggles.toArray().findIndex(a=>a.buttonId===r),o=null;switch(e.keyCode){case 32:case 13:o=this._buttonToggles.get(s)||null;break;case 38:o=this._getNextButton(s,-1);break;case 37:o=this._getNextButton(s,this.dir==="ltr"?-1:1);break;case 40:o=this._getNextButton(s,1);break;case 39:o=this._getNextButton(s,this.dir==="ltr"?1:-1);break;default:return}o&&(e.preventDefault(),o._onButtonClick(),o.focus())}_emitChangeEvent(e){let n=new pu(e,this.value);this._rawValue=n.value,this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(e,n,r=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,r)):this._updateModelValue(e,r)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>e.value!=null&&n===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let n=this._buttonToggles.get(e);if(!n.disabled){n.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,n){let r=this._buttonToggles;for(let s=1;s<=r.length;s++){let o=(e+n*s+r.length)%r.length,a=r.get(o);if(a&&!a.disabled)return a}return null}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e){let n=this._buttonToggles.find(r=>r.value!=null&&r.value===e);n&&(n.checked=!0,this._selectionModel.select(n),this.multiple||(n.tabIndex=0))}_updateModelValue(e,n){n&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static{this.\u0275fac=function(n){return new(n||i)(x(lt),x(TC,8),x(zi,8))}}static{this.\u0275dir=le({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(n,r,s){if(n&1&&ai(s,ro,5),n&2){let o;Ae(o=Re())&&(r._buttonToggles=o)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(n,r){n&1&&Ce("keydown",function(o){return r._keydown(o)}),n&2&&(qe("role",r.multiple?"group":"radiogroup")("aria-disabled",r.disabled),Ee("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard",r.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",ae],value:"value",multiple:[2,"multiple","multiple",ae],disabled:[2,"disabled","disabled",ae],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ae],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ae],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",ae]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],standalone:!0,features:[ct([o1,{provide:SC,useExisting:i}]),ht]})}}return i})(),ro=(()=>{class i{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=e,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}constructor(e,n,r,s,o,a){this._changeDetectorRef=n,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new fe;let l=Number(o);this.tabIndex=l||l===0?l:null,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard",this.disabledInteractive=a?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||`mat-button-toggle-${AC++}`,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let n=this.buttonToggleGroup._buttonToggles.find(r=>r.tabIndex===0);n&&(n.tabIndex=-1),this.tabIndex=0}this.change.emit(new pu(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static{this.\u0275fac=function(n){return new(n||i)(x(SC,8),x(lt),x(re),x(sr),Tn("tabindex"),x(TC,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(n,r){if(n&1&&it(t1,5),n&2){let s;Ae(s=Re())&&(r._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(n,r){n&1&&Ce("focus",function(){return r.focus()}),n&2&&(qe("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),Ee("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-disabled-interactive",r.disabledInteractive)("mat-button-toggle-appearance-standard",r.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",ae],appearance:"appearance",checked:[2,"checked","checked",ae],disabled:[2,"disabled","disabled",ae],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ae]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[ht,be],ngContentSelectors:i1,decls:8,vars:14,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,r){if(n&1){let s=pi();Nt(),j(0,"button",1,0),Ce("click",function(){return Rt(s),xt(r._onButtonClick())}),j(2,"span",2),Ie(3,n1,1,1,"mat-pseudo-checkbox",3)(4,r1,1,1,"mat-pseudo-checkbox",3),Be(5),z()(),oe(6,"span",4)(7,"span",5)}if(n&2){let s=An(1);se("id",r.buttonId)("disabled",r.disabled&&!r.disabledInteractive||null),qe("role",r.isSingleSelector()?"radio":"button")("tabindex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("aria-pressed",r.isSingleSelector()?null:r.checked)("aria-checked",r.isSingleSelector()?r.checked:null)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),H(3),je(r.buttonToggleGroup&&r.checked&&!r.buttonToggleGroup.multiple&&!r.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),H(),je(r.buttonToggleGroup&&r.checked&&r.buttonToggleGroup.multiple&&!r.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),H(3),se("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[to,Pf],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-app-on-surface));background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-app-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-app-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-app-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-app-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-app-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}"],encapsulation:2,changeDetection:0})}}return i})(),jf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe,qr,ro,Oe]})}}return i})();var c1=["switch"],l1=["*"];function d1(i,t){i&1&&(j(0,"span",10),Ca(),j(1,"svg",12),oe(2,"path",13),z(),j(3,"svg",14),oe(4,"path",15),z()())}var u1=new F("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),h1={provide:Fr,useExisting:Ei(()=>RC),multi:!0},fu=class{constructor(t,e){this.source=t,this.checked=e}},m1=0,RC=(()=>{class i{_createChangeEvent(e){return new fu(this,e)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,n,r,s,o,a){this._elementRef=e,this._focusMonitor=n,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new fe,this.toggleChange=new fe,this.tabIndex=parseInt(s)||0,this.color=o.color||"accent",this._noopAnimations=a==="NoopAnimations",this.id=this._uniqueId=`mat-mdc-slide-toggle-${++m1}`,this.hideIcon=o.hideIcon??!1,this.disabledInteractive=o.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new fu(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static{this.\u0275fac=function(n){return new(n||i)(x(re),x(sr),x(lt),Tn("tabindex"),x(u1),x(St,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(n,r){if(n&1&&it(c1,5),n&2){let s;Ae(s=Re())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(n,r){n&2&&(Sn("id",r.id),qe("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Tr(r.color?"mat-"+r.color:""),Ee("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",ae],color:"color",disabled:[2,"disabled","disabled",ae],disableRipple:[2,"disableRipple","disableRipple",ae],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Zi(e)],checked:[2,"checked","checked",ae],hideIcon:[2,"hideIcon","hideIcon",ae],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ae]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[ct([h1,{provide:Lr,useExisting:i,multi:!0}]),ht,At,be],ngContentSelectors:l1,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(n,r){if(n&1){let s=pi();Nt(),j(0,"div",1)(1,"button",2,0),Ce("click",function(){return Rt(s),xt(r._handleClick())}),oe(3,"span",3),j(4,"span",4)(5,"span",5)(6,"span",6),oe(7,"span",7),z(),j(8,"span",8),oe(9,"span",9),z(),Ie(10,d1,5,0,"span",10),z()()(),j(11,"label",11),Ce("click",function(a){return Rt(s),xt(a.stopPropagation())}),Be(12),z()()}if(n&2){let s=An(2);se("labelPosition",r.labelPosition),H(),Ee("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),se("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),qe("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),H(8),se("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),H(),je(r.hideIcon?-1:10),H(),se("for",r.buttonId),qe("id",r._labelId)}},dependencies:[to,EC],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape, var(--mat-app-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color, var(--mat-app-outline))}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-app-on-surface))}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-app-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-app-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-app-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-app-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-app-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-app-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-app-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-app-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-app-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-app-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-app-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-app-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-app-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color, var(--mat-app-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-app-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}}return i})();var Bf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[RC,Oe,Oe]})}}return i})();var xC=on({passive:!0}),kC=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Qi;let n=Ai(e),r=this._monitoredElements.get(n);if(r)return r.subject;let s=new te,o="cdk-text-field-autofilled",a=l=>{l.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(o)?(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0}))):l.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,xC),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,xC)}}),s}stopMonitoring(e){let n=Ai(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}static{this.\u0275fac=function(n){return new(n||i)(M($e),M(V))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var DC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({})}}return i})();var zf=class{constructor(t){this._box=t,this._destroyed=new te,this._resizeSubject=new te,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Ii(e=>{let n=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),n.unsubscribe(),this._elementObservables.delete(t)}}).pipe(vt(e=>e.some(n=>n.target===t)),Jm({bufferSize:1,refCount:!0}),Ue(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},MC=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=U(V),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,n){let r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new zf(r)),this._observers.get(r).observe(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var f1=["notch"],g1=["matFormFieldNotchedOutline",""],_1=["*"],v1=["textField"],b1=["iconPrefixContainer"],y1=["textPrefixContainer"],w1=["iconSuffixContainer"],I1=["textSuffixContainer"],E1=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],C1=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function T1(i,t){i&1&&oe(0,"span",21)}function S1(i,t){if(i&1&&(j(0,"label",20),Be(1,1),Ie(2,T1,1,0,"span",21),z()),i&2){let e=Qe(2);se("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),qe("for",e._control.disableAutomaticLabeling?null:e._control.id),H(2),je(!e.hideRequiredMarker&&e._control.required?2:-1)}}function A1(i,t){if(i&1&&Ie(0,S1,3,5,"label",20),i&2){let e=Qe();je(e._hasFloatingLabel()?0:-1)}}function R1(i,t){i&1&&oe(0,"div",7)}function x1(i,t){}function k1(i,t){if(i&1&&Ie(0,x1,0,0,"ng-template",13),i&2){Qe(2);let e=An(1);se("ngTemplateOutlet",e)}}function D1(i,t){if(i&1&&(j(0,"div",9),Ie(1,k1,1,1,null,13),z()),i&2){let e=Qe();se("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),H(),je(e._forceDisplayInfixLabel()?-1:1)}}function M1(i,t){i&1&&(j(0,"div",10,2),Be(2,2),z())}function P1(i,t){i&1&&(j(0,"div",11,3),Be(2,3),z())}function O1(i,t){}function N1(i,t){if(i&1&&Ie(0,O1,0,0,"ng-template",13),i&2){Qe();let e=An(1);se("ngTemplateOutlet",e)}}function F1(i,t){i&1&&(j(0,"div",14,4),Be(2,4),z())}function L1(i,t){i&1&&(j(0,"div",15,5),Be(2,5),z())}function V1(i,t){i&1&&oe(0,"div",16)}function U1(i,t){if(i&1&&(j(0,"div",18),Be(1,6),z()),i&2){let e=Qe();se("@transitionMessages",e._subscriptAnimationState)}}function j1(i,t){if(i&1&&(j(0,"mat-hint",22),ze(1),z()),i&2){let e=Qe(2);se("id",e._hintLabelId),H(),Ti(e.hintLabel)}}function B1(i,t){if(i&1&&(j(0,"div",19),Ie(1,j1,2,2,"mat-hint",22),Be(2,7),oe(3,"div",23),Be(4,8),z()),i&2){let e=Qe();se("@transitionMessages",e._subscriptAnimationState),H(),je(e.hintLabel?1:-1)}}var so=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=le({type:i,selectors:[["mat-label"]],standalone:!0})}}return i})();var z1=new F("MatError");var $1=0,PC=(()=>{class i{constructor(){this.align="start",this.id=`mat-mdc-hint-${$1++}`}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=le({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){n&2&&(Sn("id",r.id),qe("align",null),Ee("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return i})(),q1=new F("MatPrefix");var G1=new F("MatSuffix");var BC=new F("FloatingLabelParent"),OC=(()=>{class i{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=U(MC),this._ngZone=U(V),this._parent=U(BC),this._resizeSubscription=new ri}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return H1(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||i)(x(re))}}static{this.\u0275dir=le({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){n&2&&Ee("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return i})();function H1(i){let t=i;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let n=e.scrollWidth;return e.remove(),n}var NC="mdc-line-ripple--active",gu="mdc-line-ripple--deactivating",FC=(()=>{class i{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=r=>{let s=this._elementRef.nativeElement.classList,o=s.contains(gu);r.propertyName==="opacity"&&o&&s.remove(NC,gu)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(gu),e.add(NC)}deactivate(){this._elementRef.nativeElement.classList.add(gu)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||i)(x(re),x(V))}}static{this.\u0275dir=le({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return i})(),LC=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.open=!1}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(n){return new(n||i)(x(re),x(V))}}static{this.\u0275cmp=_e({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(n&1&&it(f1,5),n&2){let s;Ae(s=Re())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){n&2&&Ee("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[be],attrs:g1,ngContentSelectors:_1,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(n,r){n&1&&(Nt(),oe(0,"div",1),j(1,"div",2,0),Be(3),z(),oe(4,"div",3))},encapsulation:2,changeDetection:0})}}return i})(),W1={transitionMessages:Rr("transitionMessages",[pd("enter",Vi({opacity:1,transform:"translateY(0%)"})),er("void => enter",[Vi({opacity:0,transform:"translateY(-5px)"}),Jn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Sc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=le({type:i})}}return i})();var Ac=new F("MatFormField"),K1=new F("MAT_FORM_FIELD_DEFAULT_OPTIONS"),VC=0,UC="fill",Y1="auto",jC="fixed",Q1="translateY(-50%)",_u=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=cn(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Y1}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){let n=this._appearance,r=e||this._defaults?.appearance||UC;this._appearance=r,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||jC}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||jC}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,r,s,o,a,l,d){this._elementRef=e,this._changeDetectorRef=n,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._labelChild=z0(so),this._hideRequiredMarker=!1,this.color="primary",this._appearance=UC,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${VC++}`,this._hintLabelId=`mat-mdc-hint-${VC++}`,this._subscriptAnimationState="",this._destroyed=new te,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=U(ve),this.getLabelId=Rn(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=Rn(()=>!!this._labelChild()),a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let n=this._control,r="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(r+e.controlType),n.controlType&&this._elementRef.nativeElement.classList.add(r+n.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),n.ngControl&&n.ngControl.valueChanges&&(this._valueChanges=n.ngControl.valueChanges.pipe(Ue(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Qn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),ld(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Ue(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let n=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,r=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,a=n?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0,h=o?.getBoundingClientRect().width??0,p=this._dir.value==="rtl"?"-1":"1",f=`${a+l}px`,C=`calc(${p} * (${f} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${Q1} translateX(${C})
    )`;let D=a+l+d+h;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${D}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(n){return new(n||i)(x(re),x(lt),x(V),x(zi),x($e),x(K1,8),x(St,8),x(ge))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,s){if(n&1&&(H0(s,r._labelChild,so,5),ai(s,Sc,5),ai(s,q1,5),ai(s,G1,5),ai(s,z1,5),ai(s,PC,5)),n&2){W0();let o;Ae(o=Re())&&(r._formFieldControl=o.first),Ae(o=Re())&&(r._prefixChildren=o),Ae(o=Re())&&(r._suffixChildren=o),Ae(o=Re())&&(r._errorChildren=o),Ae(o=Re())&&(r._hintChildren=o)}},viewQuery:function(n,r){if(n&1&&(it(v1,5),it(b1,5),it(y1,5),it(w1,5),it(I1,5),it(OC,5),it(LC,5),it(FC,5)),n&2){let s;Ae(s=Re())&&(r._textField=s.first),Ae(s=Re())&&(r._iconPrefixContainer=s.first),Ae(s=Re())&&(r._textPrefixContainer=s.first),Ae(s=Re())&&(r._iconSuffixContainer=s.first),Ae(s=Re())&&(r._textSuffixContainer=s.first),Ae(s=Re())&&(r._floatingLabel=s.first),Ae(s=Re())&&(r._notchedOutline=s.first),Ae(s=Re())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,r){n&2&&Ee("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[ct([{provide:Ac,useExisting:i},{provide:BC,useExisting:i}]),be],ngContentSelectors:C1,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,r){if(n&1){let s=pi();Nt(E1),Ie(0,A1,1,1,"ng-template",null,0,X0),j(2,"div",6,1),Ce("click",function(a){return Rt(s),xt(r._control.onContainerClick(a))}),Ie(4,R1,1,0,"div",7),j(5,"div",8),Ie(6,D1,2,2,"div",9)(7,M1,3,0,"div",10)(8,P1,3,0,"div",11),j(9,"div",12),Ie(10,N1,1,1,null,13),Be(11),z(),Ie(12,F1,3,0,"div",14)(13,L1,3,0,"div",15),z(),Ie(14,V1,1,0,"div",16),z(),j(15,"div",17),Ie(16,U1,2,1,"div",18)(17,B1,5,2,"div",19),z()}if(n&2){let s;H(2),Ee("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),H(2),je(!r._hasOutline()&&!r._control.disabled?4:-1),H(2),je(r._hasOutline()?6:-1),H(),je(r._hasIconPrefix?7:-1),H(),je(r._hasTextPrefix?8:-1),H(2),je(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),H(2),je(r._hasTextSuffix?12:-1),H(),je(r._hasIconSuffix?13:-1),H(),je(r._hasOutline()?-1:14),H(),Ee("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),H(),je((s=r._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[OC,LC,aI,FC,PC],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[W1.transitionMessages]},changeDetection:0})}}return i})(),Rc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe,ti,iu,Oe]})}}return i})();var X1=new F("MAT_INPUT_VALUE_ACCESSOR"),Z1=["button","checkbox","file","hidden","image","radio","range","reset","submit"],J1=0,$C=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=cn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(sn.required)??!1}set required(e){this._required=cn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&ff().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=cn(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,r,s,o,a,l,d,h,p){this._elementRef=e,this._platform=n,this.ngControl=r,this._autofillMonitor=d,this._ngZone=h,this._formField=p,this._uid=`mat-input-${J1++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new te,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(C=>ff().has(C)),this._iOSKeyupListener=C=>{let D=C.target;!D.value&&D.selectionStart===0&&D.selectionEnd===0&&(D.setSelectionRange(1,1),D.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let f=this._elementRef.nativeElement,w=f.nodeName.toLowerCase();this._inputValueAccessor=l||f,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&h.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new zr(a,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=w==="select",this._isTextarea=w==="textarea",this._isInFormField=!!p,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Z1.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static{this.\u0275fac=function(n){return new(n||i)(x(re),x($e),x(ji,10),x(vc,8),x(Vr,8),x(eo),x(X1,10),x(kC),x(V),x(Ac,8))}}static{this.\u0275dir=le({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(n,r){n&1&&Ce("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),n&2&&(Sn("id",r.id)("disabled",r.disabled)("required",r.required),qe("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Ee("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[ct([{provide:Sc,useExisting:i}]),At]})}}return i})(),$f=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe,Rc,Rc,DC,Oe]})}}return i})();var qf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe,ti,Oe]})}}return i})();var tF=new F("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Gf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({providers:[eo,{provide:tF,useValue:{separatorKeyCodes:[13]}}],imports:[Oe,qr,Oe]})}}return i})();var iF=20,xc=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new te,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=iF){return this._platform.isBrowser?new Ii(n=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(Ym(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Z()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(vt(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=Ai(n),s=e.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return Km(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(M(V),M($e),M(ge,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var nF=20,ao=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new te,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),o=-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,a=-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(e=nF){return e>0?this._change.pipe(Ym(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(M($e),M(V),M(ge,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var oo=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({})}}return i})(),Hf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[or,oo,or,oo]})}}return i})();var kc=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Dc=class extends kc{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}},Mc=class extends kc{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Wf=class extends kc{constructor(t){super(),this.element=t instanceof re?t.nativeElement:t}},Kf=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Dc)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Mc)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Wf)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var vu=class extends Kf{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||ve.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);r!==-1&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var GC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({})}}return i})();var HC=JE(),Yf=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ft(-this._previousScrollPosition.left),t.style.top=ft(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,n=t.style,r=e.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),HC&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),HC&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var Qf=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(vt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},bu=class{enable(){}disable(){}attach(){}};function Xf(i,t){return t.some(e=>{let n=i.bottom<e.top,r=i.top>e.bottom,s=i.right<e.left,o=i.left>e.right;return n||r||s||o})}function WC(i,t){return t.some(e=>{let n=i.top<e.top,r=i.bottom>e.bottom,s=i.left<e.left,o=i.right>e.right;return n||r||s||o})}var Zf=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();Xf(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},rF=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new bu,this.close=o=>new Qf(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Yf(this._viewportRuler,this._document),this.reposition=o=>new Zf(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(n){return new(n||i)(M(xc),M(ao),M(V),M(ge))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),yu=class{constructor(t){if(this.scrollStrategy=new bu,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let n of e)t[n]!==void 0&&(this[n]=t[n])}}};var Jf=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var JC=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(M(ge))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),sF=(()=>{class i extends JC{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M(V,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),oF=(()=>{class i extends JC{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=_i(s)},this._clickListener=s=>{let o=_i(s),a=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){let h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(KC(h.overlayElement,o)||KC(h.overlayElement,a))break;let p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(e){if(super.add(e),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M($e),M(V,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function KC(i,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,n=t;for(;n;){if(n===i)return!0;n=e&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var eT=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||yc()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let n=this._document.createElement("div");n.classList.add(e),yc()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M($e))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),eg=class{constructor(t,e,n,r,s,o,a,l,d,h=!1,p){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._injector=p,this._backdropElement=null,this._backdropClick=new te,this._attachments=new te,this._detachments=new te,this._locationChanges=ri.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new te,this._outsidePointerEvents=new te,this._renders=new te,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Li(()=>ld(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Cr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=O(O({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Fe(O({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=ft(this._config.width),t.height=ft(this._config.height),t.minWidth=ft(this._config.minWidth),t.minHeight=ft(this._config.minHeight),t.maxWidth=ft(this._config.maxWidth),t.maxHeight=ft(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){let r=Zs(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(Ue(Qn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},YC="cdk-overlay-connected-position-bounding-box",aF=/([A-Za-z%]+)$/,tg=class{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new te,this._resizeSubscription=ri.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(YC),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),d=this._getOverlayPoint(l,e,a),h=this._getOverlayFit(d,e,n,a);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(h,d,n)){s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:d,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(let d of s){let h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>l&&(l=h,a=d)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Gr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YC),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=n.originX=="start"?o:a}e.left<0&&(r-=e.left);let s;return n.originY=="center"?s=t.top+t.height/2:s=n.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r;n.overlayX=="center"?r=-e.width/2:n.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return n.overlayY=="center"?s=-e.height/2:s=n.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){let s=XC(e),{x:o,y:a}=t,l=this._getOffset(r,"x"),d=this._getOffset(r,"y");l&&(o+=l),d&&(a+=d);let h=0-o,p=o+s.width-n.width,f=0-a,w=a+s.height-n.height,C=this._subtractOverflows(s.width,h,p),D=this._subtractOverflows(s.height,f,w),R=C*D;return{visibleArea:R,isCompletelyWithinViewport:s.width*s.height===R,fitsInViewportVertically:D===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){let r=n.bottom-e.y,s=n.right-e.x,o=QC(this._overlayRef.getConfig().minHeight),a=QC(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||o!=null&&o<=r,d=t.fitsInViewportHorizontally||a!=null&&a<=s;return l&&d}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=XC(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),d=Math.max(s.left-n.left-t.x,0),h=0,p=0;return r.width<=s.width?h=d||-o:h=t.x<this._viewportMargin?s.left-n.left-t.x:0,r.height<=s.height?p=l||-a:p=t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:h,y:p},{x:t.x+h,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!cF(this._lastScrollVisibility,n)){let r=new Jf(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){let n=this._viewportRect,r=this._isRtl(),s,o,a;if(e.overlayY==="top")o=t.y,s=n.height-o+this._viewportMargin;else if(e.overlayY==="bottom")a=n.height-t.y+this._viewportMargin*2,s=n.height-a+this._viewportMargin;else{let w=Math.min(n.bottom-t.y+n.top,t.y),C=this._lastBoundingBoxSize.height;s=w*2,o=t.y-w,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-C/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,d=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,h,p,f;if(d)f=n.width-t.x+this._viewportMargin*2,h=t.x-this._viewportMargin;else if(l)p=t.x,h=n.right-t.x;else{let w=Math.min(n.right-t.x+n.left,t.x),C=this._lastBoundingBoxSize.width;h=w*2,p=t.x-w,h>C&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-C/2)}return{top:o,left:p,bottom:a,right:f,width:h,height:s}}_setBoundingBoxStyles(t,e){let n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ft(n.height),r.top=ft(n.top),r.bottom=ft(n.bottom),r.width=ft(n.width),r.left=ft(n.left),r.right=ft(n.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=ft(s)),o&&(r.maxWidth=ft(o))}this._lastBoundingBoxSize=n,Gr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Gr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Gr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let h=this._viewportRuler.getViewportScrollPosition();Gr(n,this._getExactOverlayY(e,t,h)),Gr(n,this._getExactOverlayX(e,t,h))}else n.position="static";let a="",l=this._getOffset(e,"x"),d=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),d&&(a+=`translateY(${d}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=ft(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=ft(o.maxWidth):s&&(n.maxWidth="")),Gr(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=ft(s.y);return r}_getExactOverlayX(t,e,n){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=ft(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:WC(t,n),isOriginOutsideView:Xf(t,n),isOverlayClipped:WC(e,n),isOverlayOutsideView:Xf(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Zs(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof re)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}};function Gr(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function QC(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(aF);return!e||e==="px"?parseFloat(t):null}return i||null}function XC(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function cF(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var ZC="cdk-global-overlay-wrapper",ig=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(ZC),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),h=this._xPosition,p=this._xOffset,f=this._overlayRef.getConfig().direction==="rtl",w="",C="",D="";l?D="flex-start":h==="center"?(D="center",f?C=p:w=p):f?h==="left"||h==="end"?(D="flex-end",w=p):(h==="right"||h==="start")&&(D="flex-start",C=p):h==="left"||h==="start"?(D="flex-start",w=p):(h==="right"||h==="end")&&(D="flex-end",C=p),t.position=this._cssPosition,t.marginLeft=l?"0":w,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":C,e.justifyContent=D,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(ZC),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},lF=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new ig}flexibleConnectedTo(e){return new tg(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(M(ao),M(ge),M($e),M(eT))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),dF=0,xi=(()=>{class i{constructor(e,n,r,s,o,a,l,d,h,p,f,w){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=d,this._directionality=h,this._location=p,this._outsideClickDispatcher=f,this._animationsModuleType=w}create(e){let n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new yu(e);return o.direction=o.direction||this._directionality.value,new eg(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Ss))}position(){return this._positionBuilder}_createPaneElement(e){let n=this._document.createElement("div");return n.id=`cdk-overlay-${dF++}`,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ka)),new vu(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(M(rF),M(eT),M(xa),M(lF),M(sF),M(ve),M(V),M(ge),M(zi),M(ks),M(oF),M(St,8))}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),uF=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],tT=new F("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=U(xi);return()=>i.scrollStrategies.reposition()}}),Pc=(()=>{class i{constructor(e){this.elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(x(re))}}static{this.\u0275dir=le({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return i})(),sg=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,n,r,s,o){this._overlay=e,this._dir=o,this._backdropSubscription=ri.EMPTY,this._attachSubscription=ri.EMPTY,this._detachSubscription=ri.EMPTY,this._positionSubscription=ri.EMPTY,this._disposeOnNavigation=!1,this._ngZone=U(V),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new fe,this.positionChange=new fe,this.attach=new fe,this.detach=new fe,this.overlayKeydown=new fe,this.overlayOutsideClick=new fe,this._templatePortal=new Mc(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=uF);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Bi(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let r=this._getOriginElement(),s=_i(n);(!r||r!==s&&!r.contains(s))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new yu({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){let n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof Pc?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Pc?this.origin.elementRef.nativeElement:this.origin instanceof re?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(P0(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(x(xi),x(od),x(Zn),x(tT),x(zi,8))}}static{this.\u0275dir=le({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",ae],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",ae],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",ae],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",ae],push:[2,"cdkConnectedOverlayPush","push",ae],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",ae]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[ht,At]})}}return i})();function hF(i){return()=>i.scrollStrategies.reposition()}var mF={provide:tT,deps:[xi],useFactory:hF},wu=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({providers:[xi,mF],imports:[or,GC,Hf,Hf]})}}return i})();var fF=["trigger"],gF=["panel"],_F=[[["mat-select-trigger"]],"*"],vF=["mat-select-trigger","*"];function bF(i,t){if(i&1&&(j(0,"span",4),ze(1),z()),i&2){let e=Qe();H(),Ti(e.placeholder)}}function yF(i,t){i&1&&Be(0)}function wF(i,t){if(i&1&&(j(0,"span",11),ze(1),z()),i&2){let e=Qe(2);H(),Ti(e.triggerValue)}}function IF(i,t){if(i&1&&(j(0,"span",5),Ie(1,yF,1,0)(2,wF,2,1,"span",11),z()),i&2){let e=Qe();H(),je(e.customTrigger?1:2)}}function EF(i,t){if(i&1){let e=pi();j(0,"div",12,1),Ce("@transformPanel.done",function(r){Rt(e);let s=Qe();return xt(s._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){Rt(e);let s=Qe();return xt(s._handleKeydown(r))}),Be(2,1),z()}if(i&2){let e=Qe();G0("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),se("ngClass",e.panelClass)("@transformPanel","showing"),qe("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var CF={transformPanelWrap:Rr("transformPanelWrap",[er("* => void",Ma("@transformPanel",[dI()],{optional:!0}))]),transformPanel:Rr("transformPanel",[pd("void",Vi({opacity:0,transform:"scale(1, 0.8)"})),er("void => showing",Jn("120ms cubic-bezier(0, 0, 0.2, 1)",Vi({opacity:1,transform:"scale(1, 1)"}))),er("* => void",Jn("100ms linear",Vi({opacity:0})))])};var iT=0,nT=new F("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let i=U(xi);return()=>i.scrollStrategies.reposition()}});function TF(i){return()=>i.scrollStrategies.reposition()}var SF=new F("MAT_SELECT_CONFIG"),AF={provide:nT,deps:[xi],useFactory:TF},RF=new F("MatSelectTrigger"),og=class{constructor(t,e){this.source=t,this.value=e}},Iu=(()=>{class i{_scrollOptionIntoView(e){let n=this.options.toArray()[e];if(n){let r=this.panel.nativeElement,s=wC(e,this.options,this.optionGroups),o=n._getHostElement();e===0&&s===1?r.scrollTop=0:r.scrollTop=IC(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new og(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(sn.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,r,s,o,a,l,d,h,p,f,w,C,D){this._viewportRuler=e,this._changeDetectorRef=n,this._elementRef=o,this._dir=a,this._parentFormField=h,this.ngControl=p,this._liveAnnouncer=C,this._defaultOptions=D,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(R,$)=>R===$,this._uid=`mat-select-${iT++}`,this._triggerAriaLabelledBy=null,this._destroy=new te,this.stateChanges=new te,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${iT++}`,this._panelDoneAnimatingStream=new te,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new te,this.optionSelectionChanges=Ia(()=>{let R=this.options;return R?R.changes.pipe(Xi(R),Ot(()=>Qn(...R.map($=>$.onSelectionChange)))):this._initialized.pipe(Ot(()=>this.optionSelectionChanges))}),this.openedChange=new fe,this._openedStream=this.openedChange.pipe(vt(R=>R),pe(()=>{})),this._closedStream=this.openedChange.pipe(vt(R=>!R),pe(()=>{})),this.selectionChange=new fe,this.valueChange=new fe,this._trackedModal=null,this._skipPredicate=R=>this.panelOpen?!1:R.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),D?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=D.typeaheadDebounceInterval),this._errorStateTracker=new zr(s,p,d,l,this.stateChanges),this._scrollStrategyFactory=w,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(f)||0,this.id=this.id}ngOnInit(){this._selectionModel=new no(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Er(),Ue(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Ue(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Ue(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(Xi(null),Ue(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(this._previousControl!==void 0&&n.disabled!==null&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let n=`${this.id}-panel`;this._trackedModal&&du(this._trackedModal,"aria-owns",n),If(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;du(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let n=e.keyCode,r=n===40||n===38||n===37||n===39,s=n===13||n===32,o=this._keyManager;if(!o.isTyping()&&s&&!Bi(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;o.onKeydown(e);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){let n=this._keyManager,r=e.keyCode,s=r===40||r===38,o=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(!o&&(r===13||r===32)&&n.activeItem&&!Bi(e))e.preventDefault(),n.activeItem._selectViaInteraction();else if(!o&&this._multiple&&r===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Fi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{let n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return r.value!=null&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof Pc?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new au(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=Qn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ue(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Qn(...this.options.map(n=>n._stateChanges)).pipe(Ue(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){let r=this._selectionModel.isSelected(e);e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n;this.multiple?n=this.selected.map(r=>r.value):n=this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){e=n;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=e?e+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static{this.\u0275fac=function(n){return new(n||i)(x(ao),x(lt),x(V),x(eo),x(re),x(zi,8),x(vc,8),x(Vr,8),x(Ac,8),x(ji,10),Tn("tabindex"),x(nT),x(uC),x(SF,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-select"]],contentQueries:function(n,r,s){if(n&1&&(ai(s,RF,5),ai(s,io,5),ai(s,Nf,5)),n&2){let o;Ae(o=Re())&&(r.customTrigger=o.first),Ae(o=Re())&&(r.options=o),Ae(o=Re())&&(r.optionGroups=o)}},viewQuery:function(n,r){if(n&1&&(it(fF,5),it(gF,5),it(sg,5)),n&2){let s;Ae(s=Re())&&(r.trigger=s.first),Ae(s=Re())&&(r.panel=s.first),Ae(s=Re())&&(r._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,r){n&1&&Ce("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),n&2&&(qe("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),Ee("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",ae],disableRipple:[2,"disableRipple","disableRipple",ae],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Zi(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ae],placeholder:"placeholder",required:[2,"required","required",ae],multiple:[2,"multiple","multiple",ae],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",ae],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Zi],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[ct([{provide:Sc,useExisting:i},{provide:Of,useExisting:i}]),ht,At,be],ngContentSelectors:vF,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(n,r){if(n&1){let s=pi();Nt(_F),j(0,"div",2,0),Ce("click",function(){return Rt(s),xt(r.open())}),j(3,"div",3),Ie(4,bF,2,1,"span",4)(5,IF,3,1,"span",5),z(),j(6,"div",6)(7,"div",7),Ca(),j(8,"svg",8),oe(9,"path",9),z()()()(),Ie(10,EF,3,9,"ng-template",10),Ce("backdropClick",function(){return Rt(s),xt(r.close())})("attach",function(){return Rt(s),xt(r._onAttached())})("detach",function(){return Rt(s),xt(r.close())})}if(n&2){let s=An(1);H(3),qe("id",r._valueId),H(),je(r.empty?4:5),H(6),se("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[Pc,sg,md],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-app-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-app-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-app-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-app-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-app-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-app-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[CF.transformPanel]},changeDetection:0})}}return i})();var ag=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({providers:[AF],imports:[ti,wu,Ff,Oe,oo,Rc,Ff,Oe]})}}return i})();function xF(i,t){i&1&&oe(0,"div",2)}var kF=new F("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Eu=(()=>{class i{constructor(e,n,r,s,o){this._elementRef=e,this._ngZone=n,this._changeDetectorRef=r,this._animationMode=s,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new fe,this._mode="determinate",this._transitionendHandler=a=>{this.animationEnd.observers.length===0||!a.target||!a.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=s==="NoopAnimations",o&&(o.color&&(this.color=this._defaultColor=o.color),this.mode=o.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(e){this._color=e}get value(){return this._value}set value(e){this._value=sT(e||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=sT(e||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}static{this.\u0275fac=function(n){return new(n||i)(x(re),x(V),x(lt),x(St,8),x(kF,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(n,r){n&2&&(qe("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),Tr("mat-"+r.color),Ee("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Zi],bufferValue:[2,"bufferValue","bufferValue",Zi],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[ht,be],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(n,r){n&1&&(j(0,"div",0),oe(1,"div",1),Ie(2,xF,1,0,"div",2),z(),j(3,"div",3),oe(4,"span",4),z(),j(5,"div",5),oe(6,"span",4),z()),n&2&&(H(),dd("flex-basis",r._getBufferBarFlexBasis()),H(),je(r.mode==="buffer"?2:-1),H(),dd("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-app-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}}return i})();function sT(i,t=0,e=100){return Math.max(t,Math.min(e,i))}var cg=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({imports:[Oe]})}}return i})();var DF=["tooltip"],lT=20;var dT=new F("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let i=U(xi);return()=>i.scrollStrategies.reposition({scrollThrottle:lT})}});function MF(i){return()=>i.scrollStrategies.reposition({scrollThrottle:lT})}var PF={provide:dT,deps:[xi],useFactory:MF};function OF(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var NF=new F("mat-tooltip-default-options",{providedIn:"root",factory:OF});var aT="tooltip-panel",cT=on({passive:!0}),FF=8,LF=8,VF=24,UF=200,Cu=(()=>{class i{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=cn(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let n=cn(e);this._disabled!==n&&(this._disabled=n,n?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Xs(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Xs(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){let n=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(n)}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,n,r,s,o,a,l,d,h,p,f,w){this._overlay=e,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=d,this._dir=p,this._defaultOptions=f,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=jF,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new te,this._injector=U(ve),this._scrollStrategy=h,this._document=w,f&&(this._showDelay=f.showDelay,this._hideDelay=f.hideDelay,f.position&&(this.position=f.position),f.positionAtOrigin&&(this.positionAtOrigin=f.positionAtOrigin),f.touchGestures&&(this.touchGestures=f.touchGestures),f.tooltipClass&&(this.tooltipClass=f.tooltipClass)),p.change.pipe(Ue(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=FF}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ue(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{e.removeEventListener(n,r,cT)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(n);this._detach(),this._portal=this._portal||new Dc(this._tooltipComponent,this._viewContainerRef);let s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Ue(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(e)}hide(e=this.hideDelay){let n=this._tooltipInstance;n&&(n.isVisible()?n.hide(e):(n._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof re)return this._overlayRef;this._detach()}let n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Ue(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${aT}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ue(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ue(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Ue(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!Bi(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let n=e.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset(O(O({},r.main),s.main)),this._addOffset(O(O({},r.fallback),s.fallback))])}_addOffset(e){let n=LF,r=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-n:e.originY==="bottom"?e.offsetY=n:e.originX==="start"?e.offsetX=r?-n:n:e.originX==="end"&&(e.offsetX=r?n:-n),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"||n=="below"?r={originX:"center",originY:n=="above"?"top":"bottom"}:n=="before"||n=="left"&&e||n=="right"&&!e?r={originX:"start",originY:"center"}:(n=="after"||n=="right"&&e||n=="left"&&!e)&&(r={originX:"end",originY:"center"});let{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"?r={overlayX:"center",overlayY:"bottom"}:n=="below"?r={overlayX:"center",overlayY:"top"}:n=="before"||n=="left"&&e||n=="right"&&!e?r={overlayX:"end",overlayY:"center"}:(n=="after"||n=="right"&&e||n=="left"&&!e)&&(r={overlayX:"start",overlayY:"center"});let{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),Cr(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return this.position==="above"||this.position==="below"?n==="top"?n="bottom":n==="bottom"&&(n="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){let{overlayY:n,originX:r,originY:s}=e,o;if(n==="center"?this._dir&&this._dir.value==="rtl"?o=r==="end"?"left":"right":o=r==="start"?"left":"right":o=n==="bottom"&&s==="top"?"above":"below",o!==this._currentPosition){let a=this._overlayRef;if(a){let l=`${this._cssClassPrefix}-${aT}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let n;e.x!==void 0&&e.y!==void 0&&(n=e),this.show(void 0,n)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let n=e.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{let r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let n=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,cT)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let n=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let n=this._elementRef.nativeElement,r=n.style;(e==="on"||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(e==="on"||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}static{this.\u0275fac=function(n){return new(n||i)(x(xi),x(re),x(xc),x(Zn),x(V),x($e),x(lC),x(sr),x(dT),x(zi),x(NF,8),x(ge))}}static{this.\u0275dir=le({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(n,r){n&2&&Ee("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return i})(),jF=(()=>{class i{constructor(e,n,r){this._changeDetectorRef=e,this._elementRef=n,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new te,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=r==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>VF&&e.width>=UF}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(e?s:r),n.classList.add(e?r:s),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(n);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static{this.\u0275fac=function(n){return new(n||i)(x(lt),x(re),x(St,8))}}static{this.\u0275cmp=_e({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(n,r){if(n&1&&it(DF,7),n&2){let s;Ae(s=Re())&&(r._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(n,r){n&1&&Ce("mouseleave",function(o){return r._handleMouseLeave(o)})},standalone:!0,features:[be],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(n,r){if(n&1){let s=pi();j(0,"div",1,0),Ce("animationend",function(a){return Rt(s),xt(r._handleAnimationEnd(a))}),j(2,"div",2),ze(3),z()()}n&2&&(Ee("mdc-tooltip--multiline",r._isMultiline),se("ngClass",r.tooltipClass),H(3),Ti(r.message))},dependencies:[md],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return i})();var lg=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=Q({providers:[PF],imports:[hC,ti,wu,Oe,Oe,oo]})}}return i})();var ar=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=X({type:i});static \u0275inj=Q({imports:[Vf,Bf,$f,qf,Gf,cg,lg,ag,ro,jf,Vf,Bf,$f,qf,Gf,cg,lg,ag,jf]})};var BF="firebase",zF="10.13.2";K(BF,zF,"app");var Xe=new Rs("ANGULARFIRE2_VERSION"),lo=i=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${i} in the constructor, first ensure that ${i} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${i})\`.`;function It(i,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(i).getImmediate({optional:!0})}var gt=(i,t)=>{let e=t?[t]:vd(),n=[];return e.forEach(r=>{r.container.getProvider(i).instances.forEach(o=>{n.includes(o)||n.push(o)})}),n},di=class{constructor(){return gt($F)}},$F="app-check";function co(){}var Tu=class{zone;delegate;constructor(t,e=S0){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,n)}},dg=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",co,{},co,co)),e.pipe(bt({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},dt=(()=>{class i{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Tu(Zone.current)),this.insideAngular=e.run(()=>new Tu(Zone.current,T0)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||i)(M(V))};static \u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Su(){let i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return i}function qF(i){return Su().ngZone.runOutsideAngular(()=>i())}function Hr(i){return Su().ngZone.run(()=>i())}function GF(i){return HF(Su())(i)}function HF(i){return function(e){return e=e.lift(new dg(i.ngZone)),e.pipe(Wm(i.outsideAngular),Hm(i.insideAngular))}}var WF=(i,t)=>function(){let n=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),Hr(()=>i.apply(void 0,n))},xe=(i,t)=>function(){let e,n=arguments;for(let s=0;s<arguments.length;s++)typeof n[s]=="function"&&(t&&(e||=Hr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",co,{},co,co))),n[s]=WF(n[s],e));let r=qF(()=>i.apply(this,n));if(!t)if(r instanceof Ii){let s=Su();return r.pipe(Wm(s.outsideAngular),Hm(s.insideAngular))}else return Hr(()=>r);return r instanceof Ii?r.pipe(GF):r instanceof Promise?Hr(()=>new Promise((s,o)=>r.then(a=>Hr(()=>s(a)),a=>Hr(()=>o(a))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:Hr(()=>r)};var Je=class{constructor(t){return t}},rt=class{constructor(){return vd()}};function KF(i){return i&&i.length===1?i[0]:new Je(wt())}var ug=new F("angularfire2._apps"),YF={provide:Je,useFactory:KF,deps:[[new ne,ug]]},QF={provide:rt,deps:[[new ne,ug]]};function XF(i){return(t,e)=>{let n=e.get(Ci);K("angularfire",Xe.full,"core"),K("angularfire",Xe.full,"app"),K("angular",Z0.full,n.toString());let r=t.runOutsideAngular(()=>i(e));return new Je(r)}}function hT(i,...t){return We([YF,QF,{provide:ug,useFactory:XF(i),multi:!0,deps:[V,ve,dt,...t]}])}var mT=xe(SI,!0);function RT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xT=RT,kT=new en("auth","Firebase",RT());var Mu=new nn("@firebase/auth");function ZF(i,...t){Mu.logLevel<=qt.WARN&&Mu.warn(`Auth (${li}): ${i}`,...t)}function Ru(i,...t){Mu.logLevel<=qt.ERROR&&Mu.error(`Auth (${li}): ${i}`,...t)}function lr(i,...t){throw Dg(i,...t)}function Kr(i,...t){return Dg(i,...t)}function DT(i,t,e){let n=Object.assign(Object.assign({},xT()),{[t]:e});return new en("auth","Firebase",n).create(t,{appName:i.name})}function Wr(i){return DT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dg(i,...t){if(typeof i!="string"){let e=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(e,...n)}return kT.create(i,...t)}function ce(i,t,...e){if(!i)throw Dg(t,...e)}function On(i){let t="INTERNAL ASSERTION FAILED: "+i;throw Ru(t),new Error(t)}function dr(i,t){i||On(t)}function fg(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function JF(){return pT()==="http:"||pT()==="https:"}function pT(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function eL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JF()||Oa()||"connection"in navigator)?navigator.onLine:!0}function tL(){if(typeof navigator>"u")return null;let i=navigator;return i.languages&&i.languages[0]||i.language||null}var Yr=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,dr(e>t,"Short delay should be less than long delay!"),this.isMobile=Pa()||fd()}get(){return eL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Mg(i,t){dr(i.emulator,"Emulator should always be set here");let{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var Pu=class{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nL=new Yr(3e4,6e4);function Pg(i,t){return i.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:i.tenantId}):t}function ho(s,o,a,l){return v(this,arguments,function*(i,t,e,n,r={}){return MT(i,r,()=>v(this,null,function*(){let d={},h={};n&&(t==="GET"?h=n:d={body:JSON.stringify(n)});let p=Dr(Object.assign({key:i.config.apiKey},h)).slice(1),f=yield i._getAdditionalHeaders();f["Content-Type"]="application/json",i.languageCode&&(f["X-Firebase-Locale"]=i.languageCode);let w=Object.assign({method:t,headers:f},d);return _I()||(w.referrerPolicy="no-referrer"),Pu.fetch()(PT(i,i.config.apiHost,e,p),w)}))})}function MT(i,t,e){return v(this,null,function*(){i._canInitEmulator=!1;let n=Object.assign(Object.assign({},iL),t);try{let r=new gg(i),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Au(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[l,d]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Au(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Au(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw Au(i,"user-disabled",o);let h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw DT(i,h,d);lr(i,h)}}catch(r){if(r instanceof ci)throw r;lr(i,"network-request-failed",{message:String(r)})}})}function rL(s,o,a,l){return v(this,arguments,function*(i,t,e,n,r={}){let d=yield ho(i,t,e,n,r);return"mfaPendingCredential"in d&&lr(i,"multi-factor-auth-required",{_serverResponse:d}),d})}function PT(i,t,e,n){let r=`${t}${e}?${n}`;return i.config.emulator?Mg(i.config,r):`${i.config.apiScheme}://${r}`}var gg=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,n)=>{this.timer=setTimeout(()=>n(Kr(this.auth,"network-request-failed")),nL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Au(i,t,e){let n={appName:i.name};e.email&&(n.email=e.email),e.phoneNumber&&(n.phoneNumber=e.phoneNumber);let r=Kr(i,t,n);return r.customData._tokenResponse=e,r}function sL(i,t){return v(this,null,function*(){return ho(i,"POST","/v1/accounts:delete",t)})}function OT(i,t){return v(this,null,function*(){return ho(i,"POST","/v1/accounts:lookup",t)})}function Oc(i){if(i)try{let t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Og(i,t=!1){return v(this,null,function*(){let e=ye(i),n=yield e.getIdToken(t),r=Ng(n);ce(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:n,authTime:Oc(hg(r.auth_time)),issuedAtTime:Oc(hg(r.iat)),expirationTime:Oc(hg(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function hg(i){return Number(i)*1e3}function Ng(i){let[t,e,n]=i.split(".");if(t===void 0||e===void 0||n===void 0)return Ru("JWT malformed, contained fewer than 3 sections"),null;try{let r=pI(e);return r?JSON.parse(r):(Ru("Failed to decode base64 JWT payload"),null)}catch(r){return Ru("Caught error parsing JWT payload as JSON",r?.toString()),null}}function fT(i){let t=Ng(i);return ce(t,"internal-error"),ce(typeof t.exp<"u","internal-error"),ce(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Fc(i,t,e=!1){return v(this,null,function*(){if(e)return t;try{return yield t}catch(n){throw n instanceof ci&&oL(n)&&i.auth.currentUser===i&&(yield i.auth.signOut()),n}})}function oL({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}var _g=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),e)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Lc=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ou(i){return v(this,null,function*(){var t;let e=i.auth,n=yield i.getIdToken(),r=yield Fc(i,OT(e,{idToken:n}));ce(r?.users.length,e,"internal-error");let s=r.users[0];i._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?NT(s.providerUserInfo):[],a=aL(i.providerData,o),l=i.isAnonymous,d=!(i.email&&s.passwordHash)&&!a?.length,h=l?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(i,p)})}function Fg(i){return v(this,null,function*(){let t=ye(i);yield Ou(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function aL(i,t){return[...i.filter(n=>!t.some(r=>r.providerId===n.providerId)),...t]}function NT(i){return i.map(t=>{var{providerId:e}=t,n=Gm(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function cL(i,t){return v(this,null,function*(){let e=yield MT(i,{},()=>v(this,null,function*(){let n=Dr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=PT(i,r,"/v1/token",`key=${s}`),a=yield i._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Pu.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function lL(i,t){return v(this,null,function*(){return ho(i,"POST","/v2/accounts:revokeToken",Pg(i,t))})}var Nc=class i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ce(t.idToken,"internal-error"),ce(typeof t.idToken<"u","internal-error"),ce(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):fT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){ce(t.length!==0,"internal-error");let e=fT(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return v(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return v(this,null,function*(){let{accessToken:n,refreshToken:r,expiresIn:s}=yield cL(t,e);this.updateTokensAndExpiration(n,r,Number(s))})}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,e){let{refreshToken:n,accessToken:r,expirationTime:s}=e,o=new i;return n&&(ce(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),r&&(ce(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(ce(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new i,this.toJSON())}_performRefresh(){return On("not implemented")}};function cr(i,t){ce(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}var uo=class i{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,s=Gm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _g(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return v(this,null,function*(){let e=yield Fc(this,this.stsTokenManager.getToken(this.auth,t));return ce(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return Og(this,t)}reload(){return Fg(this)}_assign(t){this!==t&&(ce(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new i(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return v(this,null,function*(){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&(yield Ou(this)),yield this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(kn(this.auth.app))return Promise.reject(Wr(this.auth));let t=yield this.getIdToken();return yield Fc(this,sL(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,s,o,a,l,d,h;let p=(n=e.displayName)!==null&&n!==void 0?n:void 0,f=(r=e.email)!==null&&r!==void 0?r:void 0,w=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=e.photoURL)!==null&&o!==void 0?o:void 0,D=(a=e.tenantId)!==null&&a!==void 0?a:void 0,R=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,$=(d=e.createdAt)!==null&&d!==void 0?d:void 0,ee=(h=e.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:me,isAnonymous:_t,providerData:Pe,stsTokenManager:E}=e;ce(Y&&E,t,"internal-error");let _=Nc.fromJSON(this.name,E);ce(typeof Y=="string",t,"internal-error"),cr(p,t.name),cr(f,t.name),ce(typeof me=="boolean",t,"internal-error"),ce(typeof _t=="boolean",t,"internal-error"),cr(w,t.name),cr(C,t.name),cr(D,t.name),cr(R,t.name),cr($,t.name),cr(ee,t.name);let y=new i({uid:Y,auth:t,email:f,emailVerified:me,displayName:p,isAnonymous:_t,photoURL:C,phoneNumber:w,tenantId:D,stsTokenManager:_,createdAt:$,lastLoginAt:ee});return Pe&&Array.isArray(Pe)&&(y.providerData=Pe.map(I=>Object.assign({},I))),R&&(y._redirectEventId=R),y}static _fromIdTokenResponse(t,e,n=!1){return v(this,null,function*(){let r=new Nc;r.updateFromServerResponse(e);let s=new i({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return yield Ou(s),s})}static _fromGetAccountInfoResponse(t,e,n){return v(this,null,function*(){let r=e.users[0];ce(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?NT(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Nc;a.updateFromIdToken(n);let l=new i({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Lc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var gT=new Map;function Nn(i){dr(i instanceof Function,"Expected a class definition");let t=gT.get(i);return t?(dr(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,gT.set(i,t),t)}var dL=(()=>{class i{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(e,n){return v(this,null,function*(){this.storage[e]=n})}_get(e){return v(this,null,function*(){let n=this.storage[e];return n===void 0?null:n})}_remove(e){return v(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}return i.type="NONE",i})(),vg=dL;function xu(i,t,e){return`firebase:${i}:${t}:${e}`}var Nu=class i{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;let{config:r,name:s}=this.auth;this.fullUserKey=xu(this.userKey,r.apiKey,s),this.fullPersistenceKey=xu("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return v(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?uo._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return v(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,n="authUser"){return v(this,null,function*(){if(!e.length)return new i(Nn(vg),t,n);let r=(yield Promise.all(e.map(d=>v(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||Nn(vg),o=xu(n,t.config.apiKey,t.name),a=null;for(let d of e)try{let h=yield d._get(o);if(h){let p=uo._fromJSON(t,h);d!==s&&(a=p),s=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new i(s,t,n):(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(e.map(d=>v(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new i(s,t,n))})}};function _T(i){let t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(UT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(FT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(BT(t))return"Blackberry";if(zT(t))return"Webos";if(LT(t))return"Safari";if((t.includes("chrome/")||VT(t))&&!t.includes("edge/"))return"Chrome";if(jT(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(e);if(n?.length===2)return n[1]}return"Other"}function FT(i=$t()){return/firefox\//i.test(i)}function LT(i=$t()){let t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function VT(i=$t()){return/crios\//i.test(i)}function UT(i=$t()){return/iemobile/i.test(i)}function jT(i=$t()){return/android/i.test(i)}function BT(i=$t()){return/blackberry/i.test(i)}function zT(i=$t()){return/webos/i.test(i)}function Lg(i=$t()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function uL(i=$t()){var t;return Lg(i)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function hL(){return vI()&&document.documentMode===10}function $T(i=$t()){return Lg(i)||jT(i)||zT(i)||BT(i)||/windows phone/i.test(i)||UT(i)}function qT(i,t=[]){let e;switch(i){case"Browser":e=_T($t());break;case"Worker":e=`${_T($t())}-${i}`;break;default:e=i}let n=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${li}/${n}`}var bg=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let n=s=>new Promise((o,a)=>{try{let l=t(s);o(l)}catch(l){a(l)}});n.onAbort=e,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return v(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let n of this.queue)yield n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}})}};function mL(e){return v(this,arguments,function*(i,t={}){return ho(i,"GET","/v2/passwordPolicy",Pg(i,t))})}var pL=6,yg=class{constructor(t){var e,n,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:pL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,r,s,o,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,e){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let n;for(let r=0;r<t.length;r++)n=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var wg=class{constructor(t,e,n,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fu(this),this.idTokenSubscription=new Fu(this),this.beforeStateQueue=new bg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Nn(e)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var n,r;if(!this._deleted&&(this.persistenceManager=yield Nu.create(this,t),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return v(this,null,function*(){try{let e=yield OT(this,{idToken:t}),n=yield uo._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return v(this,null,function*(){var e;if(kn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,a=r?._redirectEventId,l=yield this.tryRedirectSignIn(t);(!o||o===a)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return v(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return v(this,null,function*(){try{yield Ou(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=tL()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return v(this,null,function*(){if(kn(this.app))return Promise.reject(Wr(this));let e=t?ye(t):null;return e&&ce(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return v(this,null,function*(){if(!this._deleted)return t&&ce(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return kn(this.app)?Promise.reject(Wr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return kn(this.app)?Promise.reject(Wr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Nn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let t=yield mL(this),e=new yg(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new en("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let n=this.onAuthStateChanged(()=>{n(),t()},e)}})}revokeAccessToken(t){return v(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(n.tenantId=this.tenantId),yield lL(this,n)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return v(this,null,function*(){let n=yield this.getOrInitRedirectPersistenceManager(e);return t===null?n.removeCurrentUser():n.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return v(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&Nn(t)||this._popupRedirectResolver;ce(e,this,"argument-error"),this.redirectPersistenceManager=yield Nu.create(this,[Nn(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return v(this,null,function*(){var e,n;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return v(this,null,function*(){if(t===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof e=="function"){let l=t.addObserver(e,n,r);return()=>{o=!0,l()}}else{let l=t.addObserver(e);return()=>{o=!0,l()}}}directlySetCurrentUser(t){return v(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=qT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return v(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&ZF(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Vg(i){return ye(i)}var Fu=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=EI(e=>this.observer=e)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ug={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fL(i){Ug=i}function gL(i){return Ug.loadJS(i)}function _L(){return Ug.gapiScript}function GT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function jg(i,t){let e=yt(i,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(Va(s,t??{}))return r;lr(r,"already-initialized")}return e.initialize({options:t})}function vL(i,t){let e=t?.persistence||[],n=(Array.isArray(e)?e:[e]).map(Nn);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(n,t?.popupRedirectResolver)}function Bg(i,t,e){let n=Vg(i);ce(n._canInitEmulator,n,"emulator-config-failed"),ce(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=HT(t),{host:o,port:a}=bL(t),l=a===null?"":`:${a}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||yL()}function HT(i){let t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function bL(i){let t=HT(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};let n=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){let s=r[1];return{host:s,port:vT(n.substr(s.length+1))}}else{let[s,o]=n.split(":");return{host:s,port:vT(o)}}}function vT(i){if(!i)return null;let t=Number(i);return isNaN(t)?null:t}function yL(){function i(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}var Lu=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return On("not implemented")}_getIdTokenResponse(t){return On("not implemented")}_linkToIdToken(t,e){return On("not implemented")}_getReauthenticationResolver(t){return On("not implemented")}};function mg(i,t){return v(this,null,function*(){return rL(i,"POST","/v1/accounts:signInWithIdp",Pg(i,t))})}var Vu=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Ig=class extends Vu{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var Vc=class i{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,n,r=!1){return v(this,null,function*(){let s=yield uo._fromIdTokenResponse(t,n,r),o=bT(n);return new i({user:s,providerId:o,_tokenResponse:n,operationType:e})})}static _forOperation(t,e,n){return v(this,null,function*(){yield t._updateTokensIfNecessary(n,!0);let r=bT(n);return new i({user:t,providerId:r,_tokenResponse:n,operationType:e})})}};function bT(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}var Eg=class i extends ci{constructor(t,e,n,r){var s;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,i.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new i(t,e,n,r)}};function WT(i,t,e,n){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Eg._fromErrorAndOperation(i,s,t,n):s})}function wL(i,t,e=!1){return v(this,null,function*(){let n=yield Fc(i,t._linkToIdToken(i.auth,yield i.getIdToken()),e);return Vc._forOperation(i,"link",n)})}function IL(i,t,e=!1){return v(this,null,function*(){let{auth:n}=i;if(kn(n.app))return Promise.reject(Wr(n));let r="reauthenticate";try{let s=yield Fc(i,WT(n,r,t,i),e);ce(s.idToken,n,"internal-error");let o=Ng(s.idToken);ce(o,n,"internal-error");let{sub:a}=o;return ce(i.uid===a,n,"user-mismatch"),Vc._forOperation(i,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&lr(n,"user-mismatch"),s}})}function EL(i,t,e=!1){return v(this,null,function*(){if(kn(i.app))return Promise.reject(Wr(i));let n="signIn",r=yield WT(i,n,t),s=yield Vc._fromIdTokenResponse(i,n,r);return e||(yield i._updateCurrentUser(s.user)),s})}function $u(i,t,e,n){return ye(i).onIdTokenChanged(t,e,n)}function zg(i,t,e){return ye(i).beforeAuthStateChanged(t,e)}function qu(i,t,e,n){return ye(i).onAuthStateChanged(t,e,n)}var Uu="__sak";var ju=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var CL=1e3,TL=10,SL=(()=>{class i extends ju{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$T(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,d)=>{this.notifyListeners(a,d)});return}let r=e.key;n?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);hL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TL):s()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return v(this,null,function*(){yield Yn(i.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return v(this,null,function*(){let n=yield Yn(i.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return v(this,null,function*(){yield Yn(i.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return i.type="LOCAL",i})(),KT=SL;var AL=(()=>{class i extends ju{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}return i.type="SESSION",i})(),$g=AL;function RL(i){return Promise.all(i.map(t=>v(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var xL=(()=>{class i{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;let r=new i(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return v(this,null,function*(){let n=e,{eventId:r,eventType:s,data:o}=n.data,a=this.handlersMap[s];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(a).map(h=>v(this,null,function*(){return h(n.origin,o)})),d=yield RL(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i.receivers=[];return i})();function YT(i="",t=10){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return i+e}var Cg=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,n=50){return v(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{let d=YT("",20);r.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(p){let f=p;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ln(){return window}function kL(i){ln().location.href=i}function QT(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}function DL(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function ML(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function PL(){return QT()?self:null}var XT="firebaseLocalStorageDb",OL=1,Bu="firebaseLocalStorage",ZT="fbase_key",Qr=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function Gu(i,t){return i.transaction([Bu],t?"readwrite":"readonly").objectStore(Bu)}function NL(){let i=indexedDB.deleteDatabase(XT);return new Qr(i).toPromise()}function Tg(){let i=indexedDB.open(XT,OL);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{let n=i.result;try{n.createObjectStore(Bu,{keyPath:ZT})}catch(r){e(r)}}),i.addEventListener("success",()=>v(this,null,function*(){let n=i.result;n.objectStoreNames.contains(Bu)?t(n):(n.close(),yield NL(),t(yield Tg()))}))})}function yT(i,t,e){return v(this,null,function*(){let n=Gu(i,!0).put({[ZT]:t,value:e});return new Qr(n).toPromise()})}function FL(i,t){return v(this,null,function*(){let e=Gu(i,!1).get(t),n=yield new Qr(e).toPromise();return n===void 0?null:n.value})}function wT(i,t){let e=Gu(i,!0).delete(t);return new Qr(e).toPromise()}var LL=800,VL=3,UL=(()=>{class i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Tg(),this.db)})}_withRetries(e){return v(this,null,function*(){let n=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(n++>VL)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return QT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=xL._getInstance(PL()),this.receiver._subscribe("keyChanged",(e,n)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var e,n;if(this.activeServiceWorker=yield DL(),!this.activeServiceWorker)return;this.sender=new Cg(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||ML()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let e=yield Tg();return yield yT(e,Uu,"1"),yield wT(e,Uu),!0}catch{}return!1})}_withPendingWrite(e){return v(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>yT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return v(this,null,function*(){let n=yield this._withRetries(r=>FL(r,e));return this.localCache[e]=n,n})}_remove(e){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(n=>wT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return v(this,null,function*(){let e=yield this._withRetries(s=>{let o=Gu(s,!1).getAll();return new Qr(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),LL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return i.type="LOCAL",i})(),JT=UL;var B9=GT("rcb"),z9=new Yr(3e4,6e4);function jL(i,t){return t?Nn(t):(ce(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}var Uc=class extends Lu{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mg(t,this._buildIdpRequest())}_linkToIdToken(t,e){return mg(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return mg(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function BL(i){return EL(i.auth,new Uc(i),i.bypassAuthState)}function zL(i){let{auth:t,user:e}=i;return ce(e,t,"internal-error"),IL(e,new Uc(i),i.bypassAuthState)}function $L(i){return v(this,null,function*(){let{auth:t,user:e}=i;return ce(e,t,"internal-error"),wL(e,new Uc(i),i.bypassAuthState)})}var Sg=class{constructor(t,e,n,r,s=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>v(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}onAuthEvent(t){return v(this,null,function*(){let{urlResponse:e,sessionId:n,postBody:r,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:e,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(d){this.reject(d)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return BL;case"linkViaPopup":case"linkViaRedirect":return $L;case"reauthViaPopup":case"reauthViaRedirect":return zL;default:lr(this.auth,"internal-error")}}resolve(t){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $9=new Yr(2e3,1e4);var qL="pendingRedirect",ku=new Map,Ag=class i extends Sg{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}execute(){return v(this,null,function*(){let t=ku.get(this.auth._key());if(!t){try{let n=(yield GL(this.resolver,this.auth))?yield Yn(i.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}ku.set(this.auth._key(),t)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return v(this,null,function*(){if(t.type==="signInViaRedirect")return Yn(i.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,Yn(i.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function GL(i,t){return v(this,null,function*(){let e=KL(t),n=WL(i);if(!(yield n._isAvailable()))return!1;let r=(yield n._get(e))==="true";return yield n._remove(e),r})}function HL(i,t){ku.set(i._key(),t)}function WL(i){return Nn(i._redirectPersistence)}function KL(i){return xu(qL,i.config.apiKey,i.name)}function YL(i,t,e=!1){return v(this,null,function*(){if(kn(i.app))return Promise.reject(Wr(i));let n=Vg(i),r=jL(n,t),o=yield new Ag(n,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield n._persistUserIfCurrent(o.user),yield n._setRedirectUser(null,t)),o})}var QL=10*60*1e3,Rg=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!XL(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!eS(t)){let r=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";e.onError(Kr(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let n=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=QL&&this.cachedEventUids.clear(),this.cachedEventUids.has(IT(t))}saveEventToCache(t){this.cachedEventUids.add(IT(t)),this.lastProcessedEventTime=Date.now()}};function IT(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function eS({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function XL(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(i);default:return!1}}function ZL(e){return v(this,arguments,function*(i,t={}){return ho(i,"GET","/v1/projects",t)})}var JL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eV=/^https?/;function tV(i){return v(this,null,function*(){if(i.config.emulator)return;let{authorizedDomains:t}=yield ZL(i);for(let e of t)try{if(iV(e))return}catch{}lr(i,"unauthorized-domain")})}function iV(i){let t=fg(),{protocol:e,hostname:n}=new URL(t);if(i.startsWith("chrome-extension://")){let o=new URL(i);return o.hostname===""&&n===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===n}if(!eV.test(e))return!1;if(JL.test(i))return n===i;let r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}var nV=new Yr(3e4,6e4);function ET(){let i=ln().___jsl;if(i?.H){for(let t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function rV(i){return new Promise((t,e)=>{var n,r,s;function o(){ET(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ET(),e(Kr(i,"network-request-failed"))},timeout:nV.get()})}if(!((r=(n=ln().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=ln().gapi)===null||s===void 0)&&s.load)o();else{let a=GT("iframefcb");return ln()[a]=()=>{gapi.load?o():e(Kr(i,"network-request-failed"))},gL(`${_L()}?onload=${a}`).catch(l=>e(l))}}).catch(t=>{throw Du=null,t})}var Du=null;function sV(i){return Du=Du||rV(i),Du}var oV=new Yr(5e3,15e3),aV="__/auth/iframe",cV="emulator/auth/iframe",lV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uV(i){let t=i.config;ce(t.authDomain,i,"auth-domain-config-required");let e=t.emulator?Mg(t,cV):`https://${i.config.authDomain}/${aV}`,n={apiKey:t.apiKey,appName:i.name,v:li},r=dV.get(i.config.apiHost);r&&(n.eid=r);let s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${e}?${Dr(n).slice(1)}`}function hV(i){return v(this,null,function*(){let t=yield sV(i),e=ln().gapi;return ce(e,i,"internal-error"),t.open({where:document.body,url:uV(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lV,dontclear:!0},n=>new Promise((r,s)=>v(this,null,function*(){yield n.restyle({setHideOnLeave:!1});let o=Kr(i,"network-request-failed"),a=ln().setTimeout(()=>{s(o)},oV.get());function l(){ln().clearTimeout(a),r(n)}n.ping(l).then(l,()=>{s(o)})})))})}var mV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pV=500,fV=600,gV="_blank",_V="http://localhost",zu=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function vV(i,t,e,n=pV,r=fV){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString(),a="",l=Object.assign(Object.assign({},mV),{width:n.toString(),height:r.toString(),top:s,left:o}),d=$t().toLowerCase();e&&(a=VT(d)?gV:e),FT(d)&&(t=t||_V,l.scrollbars="yes");let h=Object.entries(l).reduce((f,[w,C])=>`${f}${w}=${C},`,"");if(uL(d)&&a!=="_self")return bV(t||"",a),new zu(null);let p=window.open(t||"",a,h);ce(p,i,"popup-blocked");try{p.focus()}catch{}return new zu(p)}function bV(i,t){let e=document.createElement("a");e.href=i,e.target=t;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n)}var yV="__/auth/handler",wV="emulator/auth/handler",IV=encodeURIComponent("fac");function CT(i,t,e,n,r,s){return v(this,null,function*(){ce(i.config.authDomain,i,"auth-domain-config-required"),ce(i.config.apiKey,i,"invalid-api-key");let o={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:n,v:li,eventId:r};if(t instanceof Vu){t.setDefaultLanguage(i.languageCode),o.providerId=t.providerId||"",Fa(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(t instanceof Ig){let h=t.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}i.tenantId&&(o.tid=i.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let l=yield i._getAppCheckToken(),d=l?`#${IV}=${encodeURIComponent(l)}`:"";return`${EV(i)}?${Dr(a).slice(1)}${d}`})}function EV({config:i}){return i.emulator?Mg(i,wV):`https://${i.authDomain}/${yV}`}var pg="webStorageSupport",xg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$g,this._completeRedirectFn=YL,this._overrideRedirectResult=HL}_openPopup(t,e,n,r){return v(this,null,function*(){var s;dr((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield CT(t,e,n,fg(),r);return vV(t,o,YT())})}_openRedirect(t,e,n,r){return v(this,null,function*(){yield this._originValidation(t);let s=yield CT(t,e,n,fg(),r);return kL(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(dr(s,"If manager is not set, promise should be"),s)}let n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}initAndGetManager(t){return v(this,null,function*(){let e=yield hV(t),n=new Rg(t);return e.register("authEvent",r=>(ce(r?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(pg,{type:pg},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[pg];o!==void 0&&e(!!o),lr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=tV(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return $T()||LT()||Lg()}},tS=xg;var TT="@firebase/auth",ST="1.7.9";var kg=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function CV(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TV(i){pt(new mt("auth",(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let l={apiKey:o,authDomain:a,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qT(i)},d=new wg(n,r,s,l);return vL(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),pt(new mt("auth-internal",t=>{let e=Vg(t.getProvider("auth").getImmediate());return(n=>new kg(n))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),K(TT,ST,CV(i)),K(TT,ST,"esm2017")}var SV=5*60,AV=sp("authIdTokenMaxAge")||SV,AT=null,RV=i=>t=>v(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),n=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>AV)return;let r=e?.token;AT!==r&&(AT=r,yield fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function qg(i=wt()){let t=yt(i,"auth");if(t.isInitialized())return t.getImmediate();let e=jg(i,{popupRedirectResolver:tS,persistence:[JT,KT,$g]}),n=sp("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(n,location.origin);if(location.origin===s.origin){let o=RV(s.toString());zg(e,o,()=>o(e.currentUser)),$u(e,a=>o(a))}}let r=gI("auth");return r&&Bg(e,`http://${r}`),e}function xV(){var i,t;return(t=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:document}fL({loadJS(i){return new Promise((t,e)=>{let n=document.createElement("script");n.setAttribute("src",i),n.onload=t,n.onerror=r=>{let s=Kr("internal-error");s.customData=r,e(s)},n.type="text/javascript",n.charset="UTF-8",xV().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TV("Browser");function nS(i){return new Ii(function(t){var e=qu(i,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:e}})}var rS="auth",Xr=class{constructor(t){return t}},$i=class{constructor(){return gt(rS)}};var Gg=new F("angularfire2.auth-instances");function wU(i,t){let e=It(rS,i,t);return e&&new Xr(e)}function IU(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new Xr(n)}}var EU={provide:$i,deps:[[new ne,Gg]]},CU={provide:Xr,useFactory:wU,deps:[[new ne,Gg],Je]};function sS(i,...t){return K("angularfire",Xe.full,"auth"),We([CU,EU,{provide:Gg,useFactory:IU(i),multi:!0,deps:[V,ve,dt,rt,[new ne,di],...t]}])}var oS=xe(nS,!0);var aS=xe(qg,!0);var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lS={};var ur,Hg;(function(){var i;function t(E,_){function y(){}y.prototype=_.prototype,E.D=_.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(I,T,A){for(var b=Array(arguments.length-2),yn=2;yn<arguments.length;yn++)b[yn-2]=arguments[yn];return _.prototype[T].apply(I,b)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,y){y||(y=0);var I=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)I[T]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(T=0;16>T;++T)I[T]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=E.g[0],y=E.g[1],T=E.g[2];var A=E.g[3],b=_+(A^y&(T^A))+I[0]+3614090360&4294967295;_=y+(b<<7&4294967295|b>>>25),b=A+(T^_&(y^T))+I[1]+3905402710&4294967295,A=_+(b<<12&4294967295|b>>>20),b=T+(y^A&(_^y))+I[2]+606105819&4294967295,T=A+(b<<17&4294967295|b>>>15),b=y+(_^T&(A^_))+I[3]+3250441966&4294967295,y=T+(b<<22&4294967295|b>>>10),b=_+(A^y&(T^A))+I[4]+4118548399&4294967295,_=y+(b<<7&4294967295|b>>>25),b=A+(T^_&(y^T))+I[5]+1200080426&4294967295,A=_+(b<<12&4294967295|b>>>20),b=T+(y^A&(_^y))+I[6]+2821735955&4294967295,T=A+(b<<17&4294967295|b>>>15),b=y+(_^T&(A^_))+I[7]+4249261313&4294967295,y=T+(b<<22&4294967295|b>>>10),b=_+(A^y&(T^A))+I[8]+1770035416&4294967295,_=y+(b<<7&4294967295|b>>>25),b=A+(T^_&(y^T))+I[9]+2336552879&4294967295,A=_+(b<<12&4294967295|b>>>20),b=T+(y^A&(_^y))+I[10]+4294925233&4294967295,T=A+(b<<17&4294967295|b>>>15),b=y+(_^T&(A^_))+I[11]+2304563134&4294967295,y=T+(b<<22&4294967295|b>>>10),b=_+(A^y&(T^A))+I[12]+1804603682&4294967295,_=y+(b<<7&4294967295|b>>>25),b=A+(T^_&(y^T))+I[13]+4254626195&4294967295,A=_+(b<<12&4294967295|b>>>20),b=T+(y^A&(_^y))+I[14]+2792965006&4294967295,T=A+(b<<17&4294967295|b>>>15),b=y+(_^T&(A^_))+I[15]+1236535329&4294967295,y=T+(b<<22&4294967295|b>>>10),b=_+(T^A&(y^T))+I[1]+4129170786&4294967295,_=y+(b<<5&4294967295|b>>>27),b=A+(y^T&(_^y))+I[6]+3225465664&4294967295,A=_+(b<<9&4294967295|b>>>23),b=T+(_^y&(A^_))+I[11]+643717713&4294967295,T=A+(b<<14&4294967295|b>>>18),b=y+(A^_&(T^A))+I[0]+3921069994&4294967295,y=T+(b<<20&4294967295|b>>>12),b=_+(T^A&(y^T))+I[5]+3593408605&4294967295,_=y+(b<<5&4294967295|b>>>27),b=A+(y^T&(_^y))+I[10]+38016083&4294967295,A=_+(b<<9&4294967295|b>>>23),b=T+(_^y&(A^_))+I[15]+3634488961&4294967295,T=A+(b<<14&4294967295|b>>>18),b=y+(A^_&(T^A))+I[4]+3889429448&4294967295,y=T+(b<<20&4294967295|b>>>12),b=_+(T^A&(y^T))+I[9]+568446438&4294967295,_=y+(b<<5&4294967295|b>>>27),b=A+(y^T&(_^y))+I[14]+3275163606&4294967295,A=_+(b<<9&4294967295|b>>>23),b=T+(_^y&(A^_))+I[3]+4107603335&4294967295,T=A+(b<<14&4294967295|b>>>18),b=y+(A^_&(T^A))+I[8]+1163531501&4294967295,y=T+(b<<20&4294967295|b>>>12),b=_+(T^A&(y^T))+I[13]+2850285829&4294967295,_=y+(b<<5&4294967295|b>>>27),b=A+(y^T&(_^y))+I[2]+4243563512&4294967295,A=_+(b<<9&4294967295|b>>>23),b=T+(_^y&(A^_))+I[7]+1735328473&4294967295,T=A+(b<<14&4294967295|b>>>18),b=y+(A^_&(T^A))+I[12]+2368359562&4294967295,y=T+(b<<20&4294967295|b>>>12),b=_+(y^T^A)+I[5]+4294588738&4294967295,_=y+(b<<4&4294967295|b>>>28),b=A+(_^y^T)+I[8]+2272392833&4294967295,A=_+(b<<11&4294967295|b>>>21),b=T+(A^_^y)+I[11]+1839030562&4294967295,T=A+(b<<16&4294967295|b>>>16),b=y+(T^A^_)+I[14]+4259657740&4294967295,y=T+(b<<23&4294967295|b>>>9),b=_+(y^T^A)+I[1]+2763975236&4294967295,_=y+(b<<4&4294967295|b>>>28),b=A+(_^y^T)+I[4]+1272893353&4294967295,A=_+(b<<11&4294967295|b>>>21),b=T+(A^_^y)+I[7]+4139469664&4294967295,T=A+(b<<16&4294967295|b>>>16),b=y+(T^A^_)+I[10]+3200236656&4294967295,y=T+(b<<23&4294967295|b>>>9),b=_+(y^T^A)+I[13]+681279174&4294967295,_=y+(b<<4&4294967295|b>>>28),b=A+(_^y^T)+I[0]+3936430074&4294967295,A=_+(b<<11&4294967295|b>>>21),b=T+(A^_^y)+I[3]+3572445317&4294967295,T=A+(b<<16&4294967295|b>>>16),b=y+(T^A^_)+I[6]+76029189&4294967295,y=T+(b<<23&4294967295|b>>>9),b=_+(y^T^A)+I[9]+3654602809&4294967295,_=y+(b<<4&4294967295|b>>>28),b=A+(_^y^T)+I[12]+3873151461&4294967295,A=_+(b<<11&4294967295|b>>>21),b=T+(A^_^y)+I[15]+530742520&4294967295,T=A+(b<<16&4294967295|b>>>16),b=y+(T^A^_)+I[2]+3299628645&4294967295,y=T+(b<<23&4294967295|b>>>9),b=_+(T^(y|~A))+I[0]+4096336452&4294967295,_=y+(b<<6&4294967295|b>>>26),b=A+(y^(_|~T))+I[7]+1126891415&4294967295,A=_+(b<<10&4294967295|b>>>22),b=T+(_^(A|~y))+I[14]+2878612391&4294967295,T=A+(b<<15&4294967295|b>>>17),b=y+(A^(T|~_))+I[5]+4237533241&4294967295,y=T+(b<<21&4294967295|b>>>11),b=_+(T^(y|~A))+I[12]+1700485571&4294967295,_=y+(b<<6&4294967295|b>>>26),b=A+(y^(_|~T))+I[3]+2399980690&4294967295,A=_+(b<<10&4294967295|b>>>22),b=T+(_^(A|~y))+I[10]+4293915773&4294967295,T=A+(b<<15&4294967295|b>>>17),b=y+(A^(T|~_))+I[1]+2240044497&4294967295,y=T+(b<<21&4294967295|b>>>11),b=_+(T^(y|~A))+I[8]+1873313359&4294967295,_=y+(b<<6&4294967295|b>>>26),b=A+(y^(_|~T))+I[15]+4264355552&4294967295,A=_+(b<<10&4294967295|b>>>22),b=T+(_^(A|~y))+I[6]+2734768916&4294967295,T=A+(b<<15&4294967295|b>>>17),b=y+(A^(T|~_))+I[13]+1309151649&4294967295,y=T+(b<<21&4294967295|b>>>11),b=_+(T^(y|~A))+I[4]+4149444226&4294967295,_=y+(b<<6&4294967295|b>>>26),b=A+(y^(_|~T))+I[11]+3174756917&4294967295,A=_+(b<<10&4294967295|b>>>22),b=T+(_^(A|~y))+I[2]+718787259&4294967295,T=A+(b<<15&4294967295|b>>>17),b=y+(A^(T|~_))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+A&4294967295}n.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var y=_-this.blockSize,I=this.B,T=this.h,A=0;A<_;){if(T==0)for(;A<=y;)r(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<_;)if(I[T++]=E.charCodeAt(A++),T==this.blockSize){r(this,I),T=0;break}}else for(;A<_;)if(I[T++]=E[A++],T==this.blockSize){r(this,I),T=0;break}}this.h=T,this.o+=_},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var y=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=y&255,y/=256;for(this.u(E),E=Array(16),_=y=0;4>_;++_)for(var I=0;32>I;I+=8)E[y++]=this.g[_]>>>I&255;return E};function s(E,_){var y=a;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=_(E)}function o(E,_){this.h=_;for(var y=[],I=!0,T=E.length-1;0<=T;T--){var A=E[T]|0;I&&A==_||(y[T]=A,I=!1)}this.g=y}var a={};function l(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(d(-E));for(var _=[],y=1,I=0;E>=y;I++)_[I]=E/y|0,y*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return R(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(_,8)),I=p,T=0;T<E.length;T+=8){var A=Math.min(8,E.length-T),b=parseInt(E.substring(T,T+A),_);8>A?(A=d(Math.pow(_,A)),I=I.j(A).add(d(b))):(I=I.j(y),I=I.add(d(b)))}return I}var p=l(0),f=l(1),w=l(16777216);i=o.prototype,i.m=function(){if(D(this))return-R(this).m();for(var E=0,_=1,y=0;y<this.g.length;y++){var I=this.i(y);E+=(0<=I?I:4294967296+I)*_,_*=4294967296}return E},i.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(D(this))return"-"+R(this).toString(E);for(var _=d(Math.pow(E,6)),y=this,I="";;){var T=me(y,_).g;y=$(y,T.j(_));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=T,C(y))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},i.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function D(E){return E.h==-1}i.l=function(E){return E=$(this,E),D(E)?-1:C(E)?0:1};function R(E){for(var _=E.g.length,y=[],I=0;I<_;I++)y[I]=~E.g[I];return new o(y,~E.h).add(f)}i.abs=function(){return D(this)?R(this):this},i.add=function(E){for(var _=Math.max(this.g.length,E.g.length),y=[],I=0,T=0;T<=_;T++){var A=I+(this.i(T)&65535)+(E.i(T)&65535),b=(A>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);I=b>>>16,A&=65535,b&=65535,y[T]=b<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function $(E,_){return E.add(R(_))}i.j=function(E){if(C(this)||C(E))return p;if(D(this))return D(E)?R(this).j(R(E)):R(R(this).j(E));if(D(E))return R(this.j(R(E)));if(0>this.l(w)&&0>E.l(w))return d(this.m()*E.m());for(var _=this.g.length+E.g.length,y=[],I=0;I<2*_;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<E.g.length;T++){var A=this.i(I)>>>16,b=this.i(I)&65535,yn=E.i(T)>>>16,ea=E.i(T)&65535;y[2*I+2*T]+=b*ea,ee(y,2*I+2*T),y[2*I+2*T+1]+=A*ea,ee(y,2*I+2*T+1),y[2*I+2*T+1]+=b*yn,ee(y,2*I+2*T+1),y[2*I+2*T+2]+=A*yn,ee(y,2*I+2*T+2)}for(I=0;I<_;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=_;I<2*_;I++)y[I]=0;return new o(y,0)};function ee(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function Y(E,_){this.g=E,this.h=_}function me(E,_){if(C(_))throw Error("division by zero");if(C(E))return new Y(p,p);if(D(E))return _=me(R(E),_),new Y(R(_.g),R(_.h));if(D(_))return _=me(E,R(_)),new Y(R(_.g),_.h);if(30<E.g.length){if(D(E)||D(_))throw Error("slowDivide_ only works with positive integers.");for(var y=f,I=_;0>=I.l(E);)y=_t(y),I=_t(I);var T=Pe(y,1),A=Pe(I,1);for(I=Pe(I,2),y=Pe(y,2);!C(I);){var b=A.add(I);0>=b.l(E)&&(T=T.add(y),A=b),I=Pe(I,1),y=Pe(y,1)}return _=$(E,T.j(_)),new Y(T,_)}for(T=p;0<=E.l(_);){for(y=Math.max(1,Math.floor(E.m()/_.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=d(y),b=A.j(_);D(b)||0<b.l(E);)y-=I,A=d(y),b=A.j(_);C(A)&&(A=f),T=T.add(A),E=$(E,b)}return new Y(T,E)}i.A=function(E){return me(this,E).h},i.and=function(E){for(var _=Math.max(this.g.length,E.g.length),y=[],I=0;I<_;I++)y[I]=this.i(I)&E.i(I);return new o(y,this.h&E.h)},i.or=function(E){for(var _=Math.max(this.g.length,E.g.length),y=[],I=0;I<_;I++)y[I]=this.i(I)|E.i(I);return new o(y,this.h|E.h)},i.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),y=[],I=0;I<_;I++)y[I]=this.i(I)^E.i(I);return new o(y,this.h^E.h)};function _t(E){for(var _=E.g.length+1,y=[],I=0;I<_;I++)y[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(y,E.h)}function Pe(E,_){var y=_>>5;_%=32;for(var I=E.g.length-y,T=[],A=0;A<I;A++)T[A]=0<_?E.i(A+y)>>>_|E.i(A+y+1)<<32-_:E.i(A+y);return new o(T,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Hg=lS.Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ur=lS.Integer=o}).apply(typeof cS<"u"?cS:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fn={};var Wg,Kg,mo,Yg,jc,Wu,Qg,Xg,Zg;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,u,m){return c==Array.prototype||c==Object.prototype||(c[u]=m.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var u=0;u<c.length;++u){var m=c[u];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var n=e(this);function r(c,u){if(u)e:{var m=n;c=c.split(".");for(var g=0;g<c.length-1;g++){var S=c[g];if(!(S in m))break e;m=m[S]}c=c[c.length-1],g=m[c],u=u(g),u!=g&&u!=null&&t(m,c,{configurable:!0,writable:!0,value:u})}}function s(c,u){c instanceof String&&(c+="");var m=0,g=!1,S={next:function(){if(!g&&m<c.length){var k=m++;return{value:u(k,c[k]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}r("Array.prototype.values",function(c){return c||function(){return s(this,function(u,m){return m})}});var o=o||{},a=this||self;function l(c){var u=typeof c;return u=u!="object"?u:c?Array.isArray(c)?"array":u:"null",u=="array"||u=="object"&&typeof c.length=="number"}function d(c){var u=typeof c;return u=="object"&&c!=null||u=="function"}function h(c,u,m){return c.call.apply(c.bind,arguments)}function p(c,u,m){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),c.apply(u,S)}}return function(){return c.apply(u,arguments)}}function f(c,u,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,f.apply(null,arguments)}function w(c,u){var m=Array.prototype.slice.call(arguments,1);return function(){var g=m.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,u){function m(){}m.prototype=u.prototype,c.aa=u.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(g,S,k){for(var L=Array(arguments.length-2),He=2;He<arguments.length;He++)L[He-2]=arguments[He];return u.prototype[S].apply(g,L)}}function D(c){let u=c.length;if(0<u){let m=Array(u);for(let g=0;g<u;g++)m[g]=c[g];return m}return[]}function R(c,u){for(let m=1;m<arguments.length;m++){let g=arguments[m];if(l(g)){let S=c.length||0,k=g.length||0;c.length=S+k;for(let L=0;L<k;L++)c[S+L]=g[L]}else c.push(g)}}class ${constructor(u,m){this.i=u,this.j=m,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function ee(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function me(c){return me[" "](c),c}me[" "]=function(){};var _t=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function Pe(c,u,m){for(let g in c)u.call(m,c[g],g,c)}function E(c,u){for(let m in c)u.call(void 0,c[m],m,c)}function _(c){let u={};for(let m in c)u[m]=c[m];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,u){let m,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(m in g)c[m]=g[m];for(let k=0;k<y.length;k++)m=y[k],Object.prototype.hasOwnProperty.call(g,m)&&(c[m]=g[m])}}function T(c){var u=1;c=c.split(":");let m=[];for(;0<u&&c.length;)m.push(c.shift()),u--;return c.length&&m.push(c.join(":")),m}function A(c){a.setTimeout(()=>{throw c},0)}function b(){var c=bm;let u=null;return c.g&&(u=c.g,c.g=c.g.next,c.g||(c.h=null),u.next=null),u}class yn{constructor(){this.h=this.g=null}add(u,m){let g=ea.get();g.set(u,m),this.h?this.h.next=g:this.g=g,this.h=g}}var ea=new $(()=>new ND,c=>c.reset());class ND{constructor(){this.next=this.g=this.h=null}set(u,m){this.h=u,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ta,ia=!1,bm=new yn,Iw=()=>{let c=a.Promise.resolve(void 0);ta=()=>{c.then(FD)}};var FD=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(m){A(m)}var u=ea;u.j(c),100>u.h&&(u.h++,c.next=u.g,u.g=c)}ia=!1};function Gn(){this.s=this.s,this.C=this.C}Gn.prototype.s=!1,Gn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(c,u){this.type=c,this.g=this.target=u,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var LD=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,u=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let m=()=>{};a.addEventListener("test",m,u),a.removeEventListener("test",m,u)}catch{}return c}();function na(c,u){if(Vt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=u,u=c.relatedTarget){if(_t){e:{try{me(u.nodeName);var S=!0;break e}catch{}S=!1}S||(u=null)}}else m=="mouseover"?u=c.fromElement:m=="mouseout"&&(u=c.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:VD[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&na.aa.h.call(this)}}C(na,Vt);var VD={2:"touch",3:"pen",4:"mouse"};na.prototype.h=function(){na.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ra="closure_listenable_"+(1e6*Math.random()|0),UD=0;function jD(c,u,m,g,S){this.listener=c,this.proxy=null,this.src=u,this.type=m,this.capture=!!g,this.ha=S,this.key=++UD,this.da=this.fa=!1}function Ll(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vl(c){this.src=c,this.g={},this.h=0}Vl.prototype.add=function(c,u,m,g,S){var k=c.toString();c=this.g[k],c||(c=this.g[k]=[],this.h++);var L=wm(c,u,g,S);return-1<L?(u=c[L],m||(u.fa=!1)):(u=new jD(u,this.src,k,!!g,S),u.fa=m,c.push(u)),u};function ym(c,u){var m=u.type;if(m in c.g){var g=c.g[m],S=Array.prototype.indexOf.call(g,u,void 0),k;(k=0<=S)&&Array.prototype.splice.call(g,S,1),k&&(Ll(u),c.g[m].length==0&&(delete c.g[m],c.h--))}}function wm(c,u,m,g){for(var S=0;S<c.length;++S){var k=c[S];if(!k.da&&k.listener==u&&k.capture==!!m&&k.ha==g)return S}return-1}var Im="closure_lm_"+(1e6*Math.random()|0),Em={};function Ew(c,u,m,g,S){if(g&&g.once)return Tw(c,u,m,g,S);if(Array.isArray(u)){for(var k=0;k<u.length;k++)Ew(c,u[k],m,g,S);return null}return m=Am(m),c&&c[ra]?c.K(u,m,d(g)?!!g.capture:!!g,S):Cw(c,u,m,!1,g,S)}function Cw(c,u,m,g,S,k){if(!u)throw Error("Invalid event type");var L=d(S)?!!S.capture:!!S,He=Tm(c);if(He||(c[Im]=He=new Vl(c)),m=He.add(u,m,g,L,k),m.proxy)return m;if(g=BD(),m.proxy=g,g.src=c,g.listener=m,c.addEventListener)LD||(S=L),S===void 0&&(S=!1),c.addEventListener(u.toString(),g,S);else if(c.attachEvent)c.attachEvent(Aw(u.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return m}function BD(){function c(m){return u.call(c.src,c.listener,m)}let u=zD;return c}function Tw(c,u,m,g,S){if(Array.isArray(u)){for(var k=0;k<u.length;k++)Tw(c,u[k],m,g,S);return null}return m=Am(m),c&&c[ra]?c.L(u,m,d(g)?!!g.capture:!!g,S):Cw(c,u,m,!0,g,S)}function Sw(c,u,m,g,S){if(Array.isArray(u))for(var k=0;k<u.length;k++)Sw(c,u[k],m,g,S);else g=d(g)?!!g.capture:!!g,m=Am(m),c&&c[ra]?(c=c.i,u=String(u).toString(),u in c.g&&(k=c.g[u],m=wm(k,m,g,S),-1<m&&(Ll(k[m]),Array.prototype.splice.call(k,m,1),k.length==0&&(delete c.g[u],c.h--)))):c&&(c=Tm(c))&&(u=c.g[u.toString()],c=-1,u&&(c=wm(u,m,g,S)),(m=-1<c?u[c]:null)&&Cm(m))}function Cm(c){if(typeof c!="number"&&c&&!c.da){var u=c.src;if(u&&u[ra])ym(u.i,c);else{var m=c.type,g=c.proxy;u.removeEventListener?u.removeEventListener(m,g,c.capture):u.detachEvent?u.detachEvent(Aw(m),g):u.addListener&&u.removeListener&&u.removeListener(g),(m=Tm(u))?(ym(m,c),m.h==0&&(m.src=null,u[Im]=null)):Ll(c)}}}function Aw(c){return c in Em?Em[c]:Em[c]="on"+c}function zD(c,u){if(c.da)c=!0;else{u=new na(u,this);var m=c.listener,g=c.ha||c.src;c.fa&&Cm(c),c=m.call(g,u)}return c}function Tm(c){return c=c[Im],c instanceof Vl?c:null}var Sm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Am(c){return typeof c=="function"?c:(c[Sm]||(c[Sm]=function(u){return c.handleEvent(u)}),c[Sm])}function Ut(){Gn.call(this),this.i=new Vl(this),this.M=this,this.F=null}C(Ut,Gn),Ut.prototype[ra]=!0,Ut.prototype.removeEventListener=function(c,u,m,g){Sw(this,c,u,m,g)};function Zt(c,u){var m,g=c.F;if(g)for(m=[];g;g=g.F)m.push(g);if(c=c.M,g=u.type||u,typeof u=="string")u=new Vt(u,c);else if(u instanceof Vt)u.target=u.target||c;else{var S=u;u=new Vt(g,c),I(u,S)}if(S=!0,m)for(var k=m.length-1;0<=k;k--){var L=u.g=m[k];S=Ul(L,g,!0,u)&&S}if(L=u.g=c,S=Ul(L,g,!0,u)&&S,S=Ul(L,g,!1,u)&&S,m)for(k=0;k<m.length;k++)L=u.g=m[k],S=Ul(L,g,!1,u)&&S}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var c=this.i,u;for(u in c.g){for(var m=c.g[u],g=0;g<m.length;g++)Ll(m[g]);delete c.g[u],c.h--}}this.F=null},Ut.prototype.K=function(c,u,m,g){return this.i.add(String(c),u,!1,m,g)},Ut.prototype.L=function(c,u,m,g){return this.i.add(String(c),u,!0,m,g)};function Ul(c,u,m,g){if(u=c.i.g[String(u)],!u)return!0;u=u.concat();for(var S=!0,k=0;k<u.length;++k){var L=u[k];if(L&&!L.da&&L.capture==m){var He=L.listener,Pt=L.ha||L.src;L.fa&&ym(c.i,L),S=He.call(Pt,g)!==!1&&S}}return S&&!g.defaultPrevented}function Rw(c,u,m){if(typeof c=="function")m&&(c=f(c,m));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:a.setTimeout(c,u||0)}function xw(c){c.g=Rw(()=>{c.g=null,c.i&&(c.i=!1,xw(c))},c.l);let u=c.h;c.h=null,c.m.apply(null,u)}class $D extends Gn{constructor(u,m){super(),this.m=u,this.l=m,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:xw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(c){Gn.call(this),this.h=c,this.g={}}C(sa,Gn);var kw=[];function Dw(c){Pe(c.g,function(u,m){this.g.hasOwnProperty(m)&&Cm(u)},c),c.g={}}sa.prototype.N=function(){sa.aa.N.call(this),Dw(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rm=a.JSON.stringify,qD=a.JSON.parse,GD=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function xm(){}xm.prototype.h=null;function Mw(c){return c.h||(c.h=c.i())}function Pw(){}var oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function km(){Vt.call(this,"d")}C(km,Vt);function Dm(){Vt.call(this,"c")}C(Dm,Vt);var br={},Ow=null;function jl(){return Ow=Ow||new Ut}br.La="serverreachability";function Nw(c){Vt.call(this,br.La,c)}C(Nw,Vt);function aa(c){let u=jl();Zt(u,new Nw(u))}br.STAT_EVENT="statevent";function Fw(c,u){Vt.call(this,br.STAT_EVENT,c),this.stat=u}C(Fw,Vt);function Jt(c){let u=jl();Zt(u,new Fw(u,c))}br.Ma="timingevent";function Lw(c,u){Vt.call(this,br.Ma,c),this.size=u}C(Lw,Vt);function ca(c,u){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},u)}function la(){this.g=!0}la.prototype.xa=function(){this.g=!1};function HD(c,u,m,g,S,k){c.info(function(){if(c.g)if(k)for(var L="",He=k.split("&"),Pt=0;Pt<He.length;Pt++){var Ne=He[Pt].split("=");if(1<Ne.length){var jt=Ne[0];Ne=Ne[1];var Bt=jt.split("_");L=2<=Bt.length&&Bt[1]=="type"?L+(jt+"="+Ne+"&"):L+(jt+"=redacted&")}}else L=null;else L=k;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+u+`
`+m+`
`+L})}function WD(c,u,m,g,S,k,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+u+`
`+m+`
`+k+" "+L})}function ys(c,u,m,g){c.info(function(){return"XMLHTTP TEXT ("+u+"): "+YD(c,m)+(g?" "+g:"")})}function KD(c,u){c.info(function(){return"TIMEOUT: "+u})}la.prototype.info=function(){};function YD(c,u){if(!c.g)return u;if(!u)return null;try{var m=JSON.parse(u);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var g=m[c];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var k=S[0];if(k!="noop"&&k!="stop"&&k!="close")for(var L=1;L<S.length;L++)S[L]=""}}}}return Rm(m)}catch{return u}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mm;function zl(){}C(zl,xm),zl.prototype.g=function(){return new XMLHttpRequest},zl.prototype.i=function(){return{}},Mm=new zl;function Hn(c,u,m,g){this.j=c,this.i=u,this.l=m,this.R=g||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uw}function Uw(){this.i=null,this.g="",this.h=!1}var jw={},Pm={};function Om(c,u,m){c.L=1,c.v=Hl(wn(u)),c.m=m,c.P=!0,Bw(c,null)}function Bw(c,u){c.F=Date.now(),$l(c),c.A=wn(c.v);var m=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),t0(m.i,"t",g),c.C=0,m=c.j.J,c.h=new Uw,c.g=b0(c.j,m?u:null,!c.m),0<c.O&&(c.M=new $D(f(c.Y,c,c.g),c.O)),u=c.U,m=c.g,g=c.ca;var S="readystatechange";Array.isArray(S)||(S&&(kw[0]=S.toString()),S=kw);for(var k=0;k<S.length;k++){var L=Ew(m,S[k],g||u.handleEvent,!1,u.h||u);if(!L)break;u.g[L.key]=L}u=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,u)):(c.u="GET",c.g.ea(c.A,c.u,null,u)),aa(),HD(c.i,c.u,c.A,c.l,c.R,c.m)}Hn.prototype.ca=function(c){c=c.target;let u=this.M;u&&In(c)==3?u.j():this.Y(c)},Hn.prototype.Y=function(c){try{if(c==this.g)e:{let Bt=In(this.g);var u=this.g.Ba();let Es=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||c0(this.g)))){this.J||Bt!=4||u==7||(u==8||0>=Es?aa(3):aa(2)),Nm(this);var m=this.g.Z();this.X=m;t:if(zw(this)){var g=c0(this.g);c="";var S=g.length,k=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yr(this),da(this);var L="";break t}this.h.i=new a.TextDecoder}for(u=0;u<S;u++)this.h.h=!0,c+=this.h.i.decode(g[u],{stream:!(k&&u==S-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=m==200,WD(this.i,this.u,this.A,this.l,this.R,Bt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Pt=this.g;if((He=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(He)){var Ne=He;break t}}Ne=null}if(m=Ne)ys(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fm(this,m);else{this.o=!1,this.s=3,Jt(12),yr(this),da(this);break e}}if(this.P){m=!0;let Ni;for(;!this.J&&this.C<L.length;)if(Ni=QD(this,L),Ni==Pm){Bt==4&&(this.s=4,Jt(14),m=!1),ys(this.i,this.l,null,"[Incomplete Response]");break}else if(Ni==jw){this.s=4,Jt(15),ys(this.i,this.l,L,"[Invalid Chunk]"),m=!1;break}else ys(this.i,this.l,Ni,null),Fm(this,Ni);if(zw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||L.length!=0||this.h.h||(this.s=1,Jt(16),m=!1),this.o=this.o&&m,!m)ys(this.i,this.l,L,"[Invalid Chunked Response]"),yr(this),da(this);else if(0<L.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),zm(jt),jt.M=!0,Jt(11))}}else ys(this.i,this.l,L,null),Fm(this,L);Bt==4&&yr(this),this.o&&!this.J&&(Bt==4?f0(this.j,this):(this.o=!1,$l(this)))}else mM(this.g),m==400&&0<L.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),yr(this),da(this)}}}catch{}finally{}};function zw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function QD(c,u){var m=c.C,g=u.indexOf(`
`,m);return g==-1?Pm:(m=Number(u.substring(m,g)),isNaN(m)?jw:(g+=1,g+m>u.length?Pm:(u=u.slice(g,g+m),c.C=g+m,u)))}Hn.prototype.cancel=function(){this.J=!0,yr(this)};function $l(c){c.S=Date.now()+c.I,$w(c,c.I)}function $w(c,u){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ca(f(c.ba,c),u)}function Nm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Hn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(KD(this.i,this.A),this.L!=2&&(aa(),Jt(17)),yr(this),this.s=2,da(this)):$w(this,this.S-c)};function da(c){c.j.G==0||c.J||f0(c.j,c)}function yr(c){Nm(c);var u=c.M;u&&typeof u.ma=="function"&&u.ma(),c.M=null,Dw(c.U),c.g&&(u=c.g,c.g=null,u.abort(),u.ma())}function Fm(c,u){try{var m=c.j;if(m.G!=0&&(m.g==c||Lm(m.h,c))){if(!c.K&&Lm(m.h,c)&&m.G==3){try{var g=m.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)Xl(m),Yl(m);else break e;Bm(m),Jt(18)}}else m.za=S[1],0<m.za-m.T&&37500>S[2]&&m.F&&m.v==0&&!m.C&&(m.C=ca(f(m.Za,m),6e3));if(1>=Hw(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ir(m,11)}else if((c.K||m.g==c)&&Xl(m),!ee(u))for(S=m.Da.g.parse(u),u=0;u<S.length;u++){let Ne=S[u];if(m.T=Ne[0],Ne=Ne[1],m.G==2)if(Ne[0]=="c"){m.K=Ne[1],m.ia=Ne[2];let jt=Ne[3];jt!=null&&(m.la=jt,m.j.info("VER="+m.la));let Bt=Ne[4];Bt!=null&&(m.Aa=Bt,m.j.info("SVER="+m.Aa));let Es=Ne[5];Es!=null&&typeof Es=="number"&&0<Es&&(g=1.5*Es,m.L=g,m.j.info("backChannelRequestTimeoutMs_="+g)),g=m;let Ni=c.g;if(Ni){let Jl=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var k=g.h;k.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Vm(k,k.h),k.h=null))}if(g.D){let $m=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;$m&&(g.ya=$m,Ze(g.I,g.D,$m))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),g=m;var L=c;if(g.qa=v0(g,g.J?g.ia:null,g.W),L.K){Ww(g.h,L);var He=L,Pt=g.L;Pt&&(He.I=Pt),He.B&&(Nm(He),$l(He)),g.g=L}else m0(g);0<m.i.length&&Ql(m)}else Ne[0]!="stop"&&Ne[0]!="close"||Ir(m,7);else m.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Ir(m,7):jm(m):Ne[0]!="noop"&&m.l&&m.l.ta(Ne),m.v=0)}}aa(4)}catch{}}var XD=class{constructor(c,u){this.g=c,this.map=u}};function qw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Hw(c){return c.h?1:c.g?c.g.size:0}function Lm(c,u){return c.h?c.h==u:c.g?c.g.has(u):!1}function Vm(c,u){c.g?c.g.add(u):c.h=u}function Ww(c,u){c.h&&c.h==u?c.h=null:c.g&&c.g.has(u)&&c.g.delete(u)}qw.prototype.cancel=function(){if(this.i=Kw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Kw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let u=c.i;for(let m of c.g.values())u=u.concat(m.D);return u}return D(c.i)}function ZD(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var u=[],m=c.length,g=0;g<m;g++)u.push(c[g]);return u}u=[],m=0;for(g in c)u[m++]=c[g];return u}function JD(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var u=[];c=c.length;for(var m=0;m<c;m++)u.push(m);return u}u=[],m=0;for(let g in c)u[m++]=g;return u}}}function Yw(c,u){if(c.forEach&&typeof c.forEach=="function")c.forEach(u,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,u,void 0);else for(var m=JD(c),g=ZD(c),S=g.length,k=0;k<S;k++)u.call(void 0,g[k],m&&m[k],c)}var Qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eM(c,u){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var g=c[m].indexOf("="),S=null;if(0<=g){var k=c[m].substring(0,g);S=c[m].substring(g+1)}else k=c[m];u(k,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function wr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof wr){this.h=c.h,ql(this,c.j),this.o=c.o,this.g=c.g,Gl(this,c.s),this.l=c.l;var u=c.i,m=new ma;m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),Xw(this,m),this.m=c.m}else c&&(u=String(c).match(Qw))?(this.h=!1,ql(this,u[1]||"",!0),this.o=ua(u[2]||""),this.g=ua(u[3]||"",!0),Gl(this,u[4]),this.l=ua(u[5]||"",!0),Xw(this,u[6]||"",!0),this.m=ua(u[7]||"")):(this.h=!1,this.i=new ma(null,this.h))}wr.prototype.toString=function(){var c=[],u=this.j;u&&c.push(ha(u,Zw,!0),":");var m=this.g;return(m||u=="file")&&(c.push("//"),(u=this.o)&&c.push(ha(u,Zw,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(ha(m,m.charAt(0)=="/"?nM:iM,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",ha(m,sM)),c.join("")};function wn(c){return new wr(c)}function ql(c,u,m){c.j=m?ua(u,!0):u,c.j&&(c.j=c.j.replace(/:$/,""))}function Gl(c,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);c.s=u}else c.s=null}function Xw(c,u,m){u instanceof ma?(c.i=u,oM(c.i,c.h)):(m||(u=ha(u,rM)),c.i=new ma(u,c.h))}function Ze(c,u,m){c.i.set(u,m)}function Hl(c){return Ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ua(c,u){return c?u?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ha(c,u,m){return typeof c=="string"?(c=encodeURI(c).replace(u,tM),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function tM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Zw=/[#\/\?@]/g,iM=/[#\?:]/g,nM=/[#\?]/g,rM=/[#\?@]/g,sM=/#/g;function ma(c,u){this.h=this.g=null,this.i=c||null,this.j=!!u}function Wn(c){c.g||(c.g=new Map,c.h=0,c.i&&eM(c.i,function(u,m){c.add(decodeURIComponent(u.replace(/\+/g," ")),m)}))}i=ma.prototype,i.add=function(c,u){Wn(this),this.i=null,c=ws(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(u),this.h+=1,this};function Jw(c,u){Wn(c),u=ws(c,u),c.g.has(u)&&(c.i=null,c.h-=c.g.get(u).length,c.g.delete(u))}function e0(c,u){return Wn(c),u=ws(c,u),c.g.has(u)}i.forEach=function(c,u){Wn(this),this.g.forEach(function(m,g){m.forEach(function(S){c.call(u,S,g,this)},this)},this)},i.na=function(){Wn(this);let c=Array.from(this.g.values()),u=Array.from(this.g.keys()),m=[];for(let g=0;g<u.length;g++){let S=c[g];for(let k=0;k<S.length;k++)m.push(u[g])}return m},i.V=function(c){Wn(this);let u=[];if(typeof c=="string")e0(this,c)&&(u=u.concat(this.g.get(ws(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)u=u.concat(c[m])}return u},i.set=function(c,u){return Wn(this),this.i=null,c=ws(this,c),e0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[u]),this.h+=1,this},i.get=function(c,u){return c?(c=this.V(c),0<c.length?String(c[0]):u):u};function t0(c,u,m){Jw(c,u),0<m.length&&(c.i=null,c.g.set(ws(c,u),D(m)),c.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],u=Array.from(this.g.keys());for(var m=0;m<u.length;m++){var g=u[m];let k=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var S=k;L[g]!==""&&(S+="="+encodeURIComponent(String(L[g]))),c.push(S)}}return this.i=c.join("&")};function ws(c,u){return u=String(u),c.j&&(u=u.toLowerCase()),u}function oM(c,u){u&&!c.j&&(Wn(c),c.i=null,c.g.forEach(function(m,g){var S=g.toLowerCase();g!=S&&(Jw(this,g),t0(this,S,m))},c)),c.j=u}function aM(c,u){let m=new la;if(a.Image){let g=new Image;g.onload=w(Kn,m,"TestLoadImage: loaded",!0,u,g),g.onerror=w(Kn,m,"TestLoadImage: error",!1,u,g),g.onabort=w(Kn,m,"TestLoadImage: abort",!1,u,g),g.ontimeout=w(Kn,m,"TestLoadImage: timeout",!1,u,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else u(!1)}function cM(c,u){let m=new la,g=new AbortController,S=setTimeout(()=>{g.abort(),Kn(m,"TestPingServer: timeout",!1,u)},1e4);fetch(c,{signal:g.signal}).then(k=>{clearTimeout(S),k.ok?Kn(m,"TestPingServer: ok",!0,u):Kn(m,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(S),Kn(m,"TestPingServer: error",!1,u)})}function Kn(c,u,m,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(m)}catch{}}function lM(){this.g=new GD}function dM(c,u,m){let g=m||"";try{Yw(c,function(S,k){let L=S;d(S)&&(L=Rm(S)),u.push(g+k+"="+encodeURIComponent(L))})}catch(S){throw u.push(g+"type="+encodeURIComponent("_badmap")),S}}function pa(c){this.l=c.Ub||null,this.j=c.eb||!1}C(pa,xm),pa.prototype.g=function(){return new Wl(this.l,this.j)},pa.prototype.i=function(c){return function(){return c}}({});function Wl(c,u){Ut.call(this),this.D=c,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Wl,Ut),i=Wl.prototype,i.open=function(c,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=u,this.readyState=1,ga(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(u.body=c),(this.D||a).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fa(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;i0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function i0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var u=c.value?c.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!c.done}))&&(this.response=this.responseText+=u)}c.done?fa(this):ga(this),this.readyState==3&&i0(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,fa(this))},i.Qa=function(c){this.g&&(this.response=c,fa(this))},i.ga=function(){this.g&&fa(this)};function fa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ga(c)}i.setRequestHeader=function(c,u){this.u.append(c,u)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],u=this.h.entries();for(var m=u.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=u.next();return c.join(`\r
`)};function ga(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function n0(c){let u="";return Pe(c,function(m,g){u+=g,u+=":",u+=m,u+=`\r
`}),u}function Um(c,u,m){e:{for(g in m){var g=!1;break e}g=!0}g||(m=n0(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Ze(c,u,m))}function at(c){Ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(at,Ut);var uM=/^https?$/i,hM=["POST","PUT"];i=at.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,u,m,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);u=u?u.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mm.g(),this.v=this.o?Mw(this.o):Mw(Mm),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(u,String(c),!0),this.B=!1}catch(k){r0(this,k);return}if(c=m||"",m=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)m.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let k of g.keys())m.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(m.keys()).find(k=>k.toLowerCase()=="content-type"),S=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hM,u,void 0))||g||S||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,L]of m)this.g.setRequestHeader(k,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{a0(this),this.u=!0,this.g.send(c),this.u=!1}catch(k){r0(this,k)}};function r0(c,u){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=u,c.m=5,s0(c),Kl(c)}function s0(c){c.A||(c.A=!0,Zt(c,"complete"),Zt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Zt(this,"complete"),Zt(this,"abort"),Kl(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kl(this,!0)),at.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?o0(this):this.bb())},i.bb=function(){o0(this)};function o0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||In(c)!=4||c.Z()!=2)){if(c.u&&In(c)==4)Rw(c.Ea,0,c);else if(Zt(c,"readystatechange"),In(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var m;if(!(m=u)){var g;if(g=L===0){var S=String(c.D).match(Qw)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),g=!uM.test(S?S.toLowerCase():"")}m=g}if(m)Zt(c,"complete"),Zt(c,"success");else{c.m=6;try{var k=2<In(c)?c.g.statusText:""}catch{k=""}c.l=k+" ["+c.Z()+"]",s0(c)}}finally{Kl(c)}}}}function Kl(c,u){if(c.g){a0(c);let m=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,u||Zt(c,"ready");try{m.onreadystatechange=g}catch{}}}function a0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function In(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var u=this.g.responseText;return c&&u.indexOf(c)==0&&(u=u.substring(c.length)),qD(u)}};function c0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function mM(c){let u={};c=(c.g&&2<=In(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(ee(c[g]))continue;var m=T(c[g]);let S=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let k=u[S]||[];u[S]=k,k.push(m)}E(u,function(g){return g.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _a(c,u,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||u}function l0(c){this.Aa=0,this.i=[],this.j=new la,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_a("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_a("baseRetryDelayMs",5e3,c),this.cb=_a("retryDelaySeedMs",1e4,c),this.Wa=_a("forwardChannelMaxRetries",2,c),this.wa=_a("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new qw(c&&c.concurrentRequestLimit),this.Da=new lM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=l0.prototype,i.la=8,i.G=1,i.connect=function(c,u,m,g){Jt(0),this.W=c,this.H=u||{},m&&g!==void 0&&(this.H.OSID=m,this.H.OAID=g),this.F=this.X,this.I=v0(this,null,this.W),Ql(this)};function jm(c){if(d0(c),c.G==3){var u=c.U++,m=wn(c.I);if(Ze(m,"SID",c.K),Ze(m,"RID",u),Ze(m,"TYPE","terminate"),va(c,m),u=new Hn(c,c.j,u),u.L=2,u.v=Hl(wn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(u.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=u.v,m=!0),m||(u.g=b0(u.j,null),u.g.ea(u.v)),u.F=Date.now(),$l(u)}_0(c)}function Yl(c){c.g&&(zm(c),c.g.cancel(),c.g=null)}function d0(c){Yl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Xl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ql(c){if(!Gw(c.h)&&!c.s){c.s=!0;var u=c.Ga;ta||Iw(),ia||(ta(),ia=!0),bm.add(u,c),c.B=0}}function pM(c,u){return Hw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=u.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ca(f(c.Ga,c,u),g0(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let S=new Hn(this,this.j,c),k=this.o;if(this.S&&(k?(k=_(k),I(k,this.S)):k=this.S),this.m!==null||this.O||(S.H=k,k=null),this.P)e:{for(var u=0,m=0;m<this.i.length;m++){t:{var g=this.i[m];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=m;break e}if(u===4096||m===this.i.length-1){u=m+1;break e}}u=1e3}else u=1e3;u=h0(this,S,u),m=wn(this.I),Ze(m,"RID",c),Ze(m,"CVER",22),this.D&&Ze(m,"X-HTTP-Session-Id",this.D),va(this,m),k&&(this.O?u="headers="+encodeURIComponent(String(n0(k)))+"&"+u:this.m&&Um(m,this.m,k)),Vm(this.h,S),this.Ua&&Ze(m,"TYPE","init"),this.P?(Ze(m,"$req",u),Ze(m,"SID","null"),S.T=!0,Om(S,m,null)):Om(S,m,u),this.G=2}}else this.G==3&&(c?u0(this,c):this.i.length==0||Gw(this.h)||u0(this))};function u0(c,u){var m;u?m=u.l:m=c.U++;let g=wn(c.I);Ze(g,"SID",c.K),Ze(g,"RID",m),Ze(g,"AID",c.T),va(c,g),c.m&&c.o&&Um(g,c.m,c.o),m=new Hn(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),u&&(c.i=u.D.concat(c.i)),u=h0(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Vm(c.h,m),Om(m,g,u)}function va(c,u){c.H&&Pe(c.H,function(m,g){Ze(u,g,m)}),c.l&&Yw({},function(m,g){Ze(u,g,m)})}function h0(c,u,m){m=Math.min(c.i.length,m);var g=c.l?f(c.l.Na,c.l,c):null;e:{var S=c.i;let k=-1;for(;;){let L=["count="+m];k==-1?0<m?(k=S[0].g,L.push("ofs="+k)):k=0:L.push("ofs="+k);let He=!0;for(let Pt=0;Pt<m;Pt++){let Ne=S[Pt].g,jt=S[Pt].map;if(Ne-=k,0>Ne)k=Math.max(0,S[Pt].g-100),He=!1;else try{dM(jt,L,"req"+Ne+"_")}catch{g&&g(jt)}}if(He){g=L.join("&");break e}}}return c=c.i.splice(0,m),u.D=c,g}function m0(c){if(!c.g&&!c.u){c.Y=1;var u=c.Fa;ta||Iw(),ia||(ta(),ia=!0),bm.add(u,c),c.v=0}}function Bm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ca(f(c.Fa,c),g0(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,p0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ca(f(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),Yl(this),p0(this))};function zm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function p0(c){c.g=new Hn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var u=wn(c.qa);Ze(u,"RID","rpc"),Ze(u,"SID",c.K),Ze(u,"AID",c.T),Ze(u,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ze(u,"TO",c.ja),Ze(u,"TYPE","xmlhttp"),va(c,u),c.m&&c.o&&Um(u,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=Hl(wn(u)),m.m=null,m.P=!0,Bw(m,c)}i.Za=function(){this.C!=null&&(this.C=null,Yl(this),Bm(this),Jt(19))};function Xl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function f0(c,u){var m=null;if(c.g==u){Xl(c),zm(c),c.g=null;var g=2}else if(Lm(c.h,u))m=u.D,Ww(c.h,u),g=1;else return;if(c.G!=0){if(u.o)if(g==1){m=u.m?u.m.length:0,u=Date.now()-u.F;var S=c.B;g=jl(),Zt(g,new Lw(g,m)),Ql(c)}else m0(c);else if(S=u.s,S==3||S==0&&0<u.X||!(g==1&&pM(c,u)||g==2&&Bm(c)))switch(m&&0<m.length&&(u=c.h,u.i=u.i.concat(m)),S){case 1:Ir(c,5);break;case 4:Ir(c,10);break;case 3:Ir(c,6);break;default:Ir(c,2)}}}function g0(c,u){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*u}function Ir(c,u){if(c.j.info("Error code "+u),u==2){var m=f(c.fb,c),g=c.Xa;let S=!g;g=new wr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ql(g,"https"),Hl(g),S?aM(g.toString(),m):cM(g.toString(),m)}else Jt(2);c.G=0,c.l&&c.l.sa(u),_0(c),d0(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function _0(c){if(c.G=0,c.ka=[],c.l){let u=Kw(c.h);(u.length!=0||c.i.length!=0)&&(R(c.ka,u),R(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function v0(c,u,m){var g=m instanceof wr?wn(m):new wr(m);if(g.g!="")u&&(g.g=u+"."+g.g),Gl(g,g.s);else{var S=a.location;g=S.protocol,u=u?u+"."+S.hostname:S.hostname,S=+S.port;var k=new wr(null);g&&ql(k,g),u&&(k.g=u),S&&Gl(k,S),m&&(k.l=m),g=k}return m=c.D,u=c.ya,m&&u&&Ze(g,m,u),Ze(g,"VER",c.la),va(c,g),g}function b0(c,u,m){if(u&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=c.Ca&&!c.pa?new at(new pa({eb:m})):new at(c.pa),u.Ha(c.J),u}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function y0(){}i=y0.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Zl(){}Zl.prototype.g=function(c,u){return new mi(c,u)};function mi(c,u){Ut.call(this),this.g=new l0(u),this.l=c,this.h=u&&u.messageUrlParams||null,c=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(c?c["X-WebChannel-Content-Type"]=u.messageContentType:c={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(c?c["X-WebChannel-Client-Profile"]=u.va:c={"X-WebChannel-Client-Profile":u.va}),this.g.S=c,(c=u&&u.Sb)&&!ee(c)&&(this.g.m=c),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!ee(u)&&(this.g.D=u,c=this.h,c!==null&&u in c&&(c=this.h,u in c&&delete c[u])),this.j=new Is(this)}C(mi,Ut),mi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mi.prototype.close=function(){jm(this.g)},mi.prototype.o=function(c){var u=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=Rm(c),c=m);u.i.push(new XD(u.Ya++,c)),u.G==3&&Ql(u)},mi.prototype.N=function(){this.g.l=null,delete this.j,jm(this.g),delete this.g,mi.aa.N.call(this)};function w0(c){km.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var u=c.__sm__;if(u){e:{for(let m in u){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,u=u!==null&&c in u?u[c]:void 0),this.data=u}else this.data=c}C(w0,km);function I0(){Dm.call(this),this.status=1}C(I0,Dm);function Is(c){this.g=c}C(Is,y0),Is.prototype.ua=function(){Zt(this.g,"a")},Is.prototype.ta=function(c){Zt(this.g,new w0(c))},Is.prototype.sa=function(c){Zt(this.g,new I0)},Is.prototype.ra=function(){Zt(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,mi.prototype.send=mi.prototype.o,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,Zg=Fn.createWebChannelTransport=function(){return new Zl},Xg=Fn.getStatEventTarget=function(){return jl()},Qg=Fn.Event=br,Wu=Fn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,jc=Fn.ErrorCode=Bl,Vw.COMPLETE="complete",Yg=Fn.EventType=Vw,Pw.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,mo=Fn.WebChannel=Pw,Kg=Fn.FetchXmlHttpFactory=pa,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Wg=Fn.XhrIo=at}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});var dS="@firebase/firestore";var Dt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");var Oo="10.13.2";var ts=new nn("@firebase/firestore");function Bc(){return ts.logLevel}function W(i,...t){if(ts.logLevel<=qt.DEBUG){let e=t.map(Uv);ts.debug(`Firestore (${Oo}): ${i}`,...e)}}function Ln(i,...t){if(ts.logLevel<=qt.ERROR){let e=t.map(Uv);ts.error(`Firestore (${Oo}): ${i}`,...e)}}function yo(i,...t){if(ts.logLevel<=qt.WARN){let e=t.map(Uv);ts.warn(`Firestore (${Oo}): ${i}`,...e)}}function Uv(i){if(typeof i=="string")return i;try{return function(e){return JSON.stringify(e)}(i)}catch{return i}}function ie(i="Unexpected state"){let t=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+i;throw Ln(t),new Error(t)}function Ke(i,t){i||ie()}function de(i,t){return i}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends ci{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var un=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Zu=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},n_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Dt.UNAUTHENTICATED))}shutdown(){}},r_=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},s_=class{constructor(t){this.t=t,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i,r=l=>this.i!==n?(n=this.i,e(l)):Promise.resolve(),s=new un;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new un,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;t.enqueueRetryable(()=>v(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new un)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ke(typeof n.accessToken=="string"),new Zu(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return Ke(t===null||typeof t=="string"),new Dt(t)}},o_=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},a_=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new o_(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},c_=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},l_=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let n=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};let r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ke(typeof e.token=="string"),this.R=e.token,new c_(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function SU(i){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}var Ju=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";for(;n.length<20;){let r=SU(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}};function Le(i,t){return i<t?-1:i>t?1:0}function wo(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}var Lt=class i{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return i.fromMillis(Date.now())}static fromDate(t){return i.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new i(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Le(this.nanoseconds,t.nanoseconds):Le(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class i{constructor(t){this.timestamp=t}static fromTimestamp(t){return new i(t)}static min(){return new i(new Lt(0,0))}static max(){return new i(new Lt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var eh=class i{constructor(t,e,n){e===void 0?e=0:e>t.length&&ie(),n===void 0?n=t.length-e:n>t.length-e&&ie(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return i.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof i?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},st=class i extends eh{construct(t,e,n){return new i(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let n of t){if(n.indexOf("//")>=0)throw new G(P.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new i(e)}static emptyPath(){return new i([])}},AU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bi=class i extends eh{construct(t,e,n){return new i(t,e,n)}static isValidIdentifier(t){return AU.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),i.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new i(["__name__"])}static fromServerFormat(t){let e=[],n="",r=0,s=()=>{if(n.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""},o=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new G(P.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(n+=a,r++):(s(),r++)}if(s(),o)throw new G(P.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new i(e)}static emptyPath(){return new i([])}};var J=class i{constructor(t){this.path=t}static fromPath(t){return new i(st.fromString(t))}static fromName(t){return new i(st.fromString(t).popFirst(5))}static empty(){return new i(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&st.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return st.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new i(new st(t.slice()))}};var d_=class{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}};d_.UNKNOWN_ID=-1;function RU(i,t){let e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=ue.fromTimestamp(n===1e9?new Lt(e+1,0):new Lt(e,n));return new is(r,J.empty(),t)}function xU(i){return new is(i.readTime,i.key,-1)}var is=class i{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new i(ue.min(),J.empty(),-1)}static max(){return new i(ue.max(),J.empty(),-1)}};function kU(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=J.comparator(i.documentKey,t.documentKey),e!==0?e:Le(i.largestBatchId,t.largestBatchId))}var DU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",u_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function ol(i){return v(this,null,function*(){if(i.code!==P.FAILED_PRECONDITION||i.message!==DU)throw i;W("LocalStore","Unexpectedly lost primary lease")})}var N=class i{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new i((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof i?e:i.resolve(e)}catch(e){return i.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):i.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):i.reject(e)}static resolve(t){return new i((e,n)=>{e(t)})}static reject(t){return new i((e,n)=>{n(t)})}static waitFor(t){return new i((e,n)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},l=>n(l))}),o=!0,s===r&&e()})}static or(t){let e=i.resolve(!1);for(let n of t)e=e.next(r=>r?i.resolve(r):n());return e}static forEach(t,e){let n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new i((n,r)=>{let s=t.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let d=l;e(t[d]).next(h=>{o[d]=h,++a,a===s&&n(o)},h=>r(h))}})}static doWhile(t,e){return new i((n,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}};function MU(i){let t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function al(i){return i.name==="IndexedDbTransactionError"}var qS=(()=>{class i{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return i.oe=-1,i})();function kh(i){return i==null}function Wc(i){return i===0&&1/i==-1/0}function PU(i){return typeof i=="number"&&Number.isInteger(i)&&!Wc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var OU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],W6=[...OU,"documentOverlays"],NU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],FU=NU,LU=[...FU,"indexConfiguration","indexState","indexEntries"];var K6=[...LU,"globals"];function uS(i){let t=0;for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function cs(i,t){for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function GS(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}var ut=class i{constructor(t,e){this.comparator=t,this.root=e||hn.EMPTY}insert(t,e){return new i(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(t){return new i(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){let t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _o(this.root,t,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _o(this.root,t,this.comparator,!0)}},_o=class{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},hn=class i{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??i.RED,this.left=r??i.EMPTY,this.right=s??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new i(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this,s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return i.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let t=this.left.check();if(t!==this.right.check())throw ie();return t+(this.isRed()?0:1)}};hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(t,e,n,r,s){return this}insert(t,e,n){return new hn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ht=class i{constructor(t){this.comparator=t,this.data=new ut(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new th(this.data.getIterator())}getIteratorFrom(t){return new th(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof i)||this.size!==t.size)return!1;let e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new i(this.comparator);return e.data=t,e}},th=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ki=class i{constructor(t){this.fields=t,t.sort(bi.comparator)}static empty(){return new i([])}unionWith(t){let e=new Ht(bi.comparator);for(let n of this.fields)e=e.add(n);for(let n of t)e=e.add(n);return new i(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return wo(this.fields,t.fields,(e,n)=>e.isEqual(n))}};var ih=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Kt=class i{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ih("Invalid base64 string: "+s):s}}(t);return new i(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new i(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Le(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Kt.EMPTY_BYTE_STRING=new Kt("");var VU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vn(i){if(Ke(!!i),typeof i=="string"){let t=0,e=VU.exec(i);if(Ke(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function mr(i){return typeof i=="string"?Kt.fromBase64String(i):Kt.fromUint8Array(i)}function jv(i){var t,e;return((e=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Bv(i){let t=i.mapValue.fields.__previous_value__;return jv(t)?Bv(t):t}function Kc(i){let t=Vn(i.mapValue.fields.__local_write_time__.timestampValue);return new Lt(t.seconds,t.nanos)}var h_=class{constructor(t,e,n,r,s,o,a,l,d){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=d}},nh=class i{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof i&&t.projectId===this.projectId&&t.database===this.database}};var Ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ns(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?jv(i)?4:WS(i)?9007199254740991:HS(i)?10:11:ie()}function gn(i,t){if(i===t)return!0;let e=ns(i);if(e!==ns(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Kc(i).isEqual(Kc(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Vn(r.timestampValue),a=Vn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return mr(r.bytesValue).isEqual(mr(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return nt(r.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(r.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return nt(r.integerValue)===nt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=nt(r.doubleValue),a=nt(s.doubleValue);return o===a?Wc(o)===Wc(a):isNaN(o)&&isNaN(a)}return!1}(i,t);case 9:return wo(i.arrayValue.values||[],t.arrayValue.values||[],gn);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(uS(o)!==uS(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!gn(o[l],a[l])))return!1;return!0}(i,t);default:return ie()}}function Yc(i,t){return(i.values||[]).find(e=>gn(e,t))!==void 0}function Io(i,t){if(i===t)return 0;let e=ns(i),n=ns(t);if(e!==n)return Le(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,t.booleanValue);case 2:return function(s,o){let a=nt(s.integerValue||s.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(i,t);case 3:return hS(i.timestampValue,t.timestampValue);case 4:return hS(Kc(i),Kc(t));case 5:return Le(i.stringValue,t.stringValue);case 6:return function(s,o){let a=mr(s),l=mr(o);return a.compareTo(l)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let d=0;d<a.length&&d<l.length;d++){let h=Le(a[d],l[d]);if(h!==0)return h}return Le(a.length,l.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){let a=Le(nt(s.latitude),nt(o.latitude));return a!==0?a:Le(nt(s.longitude),nt(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return mS(i.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,d,h;let p=s.fields||{},f=o.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(l=f.value)===null||l===void 0?void 0:l.arrayValue,D=Le(((d=w?.values)===null||d===void 0?void 0:d.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return D!==0?D:mS(w,C)}(i.mapValue,t.mapValue);case 11:return function(s,o){if(s===Ku.mapValue&&o===Ku.mapValue)return 0;if(s===Ku.mapValue)return 1;if(o===Ku.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let f=Le(l[p],h[p]);if(f!==0)return f;let w=Io(a[l[p]],d[h[p]]);if(w!==0)return w}return Le(l.length,h.length)}(i.mapValue,t.mapValue);default:throw ie()}}function hS(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Le(i,t);let e=Vn(i),n=Vn(t),r=Le(e.seconds,n.seconds);return r!==0?r:Le(e.nanos,n.nanos)}function mS(i,t){let e=i.values||[],n=t.values||[];for(let r=0;r<e.length&&r<n.length;++r){let s=Io(e[r],n[r]);if(s)return s}return Le(e.length,n.length)}function Eo(i){return m_(i)}function m_(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){let n=Vn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return mr(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return J.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(let s of e.values||[])r?r=!1:n+=",",n+=m_(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){let n=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let o of n)s?s=!1:r+=",",r+=`${o}:${m_(e.fields[o])}`;return r+"}"}(i.mapValue):ie()}function pS(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function p_(i){return!!i&&"integerValue"in i}function zv(i){return!!i&&"arrayValue"in i}function fS(i){return!!i&&"nullValue"in i}function gS(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Qu(i){return!!i&&"mapValue"in i}function HS(i){var t,e;return((e=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function $c(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){let t={mapValue:{fields:{}}};return cs(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=$c(n)),t}if(i.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=$c(i.arrayValue.values[e]);return t}return Object.assign({},i)}function WS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vi=class i{constructor(t){this.value=t}static empty(){return new i({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Qu(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=$c(e)}setAll(t){let e=bi.emptyPath(),n={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){let l=this.getFieldsMap(e);this.applyChanges(l,n,r),n={},r=[],e=a.popLast()}o?n[a.lastSegment()]=$c(o):r.push(a.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){let e=this.field(t.popLast());Qu(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return gn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Qu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){cs(e,(r,s)=>t[r]=s);for(let r of n)delete t[r]}clone(){return new i($c(this.value))}};function KS(i){let t=[];return cs(i.fields,(e,n)=>{let r=new bi([e]);if(Qu(n)){let s=KS(n.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new ki(t)}var qi=class i{constructor(t,e,n,r,s,o,a){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new i(t,0,ue.min(),ue.min(),ue.min(),vi.empty(),0)}static newFoundDocument(t,e,n,r){return new i(t,1,e,ue.min(),n,r,0)}static newNoDocument(t,e){return new i(t,2,e,ue.min(),ue.min(),vi.empty(),0)}static newUnknownDocument(t,e){return new i(t,3,e,ue.min(),ue.min(),vi.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof i&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Co=class{constructor(t,e){this.position=t,this.inclusive=e}};function _S(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){let s=t[r],o=i.position[r];if(s.field.isKeyField()?n=J.comparator(J.fromName(o.referenceValue),e.key):n=Io(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function vS(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!gn(i.position[e],t.position[e]))return!1;return!0}var To=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function UU(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}var rh=class{},Tt=class i extends rh{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new g_(t,e,n):e==="array-contains"?new b_(t,n):e==="in"?new y_(t,n):e==="not-in"?new w_(t,n):e==="array-contains-any"?new I_(t,n):new i(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new __(t,n):new v_(t,n)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Io(e,this.value)):e!==null&&ns(this.value)===ns(e)&&this.matchesComparison(Io(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gi=class i extends rh{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new i(t,e)}matches(t){return YS(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function YS(i){return i.op==="and"}function QS(i){return jU(i)&&YS(i)}function jU(i){for(let t of i.filters)if(t instanceof Gi)return!1;return!0}function f_(i){if(i instanceof Tt)return i.field.canonicalString()+i.op.toString()+Eo(i.value);if(QS(i))return i.filters.map(t=>f_(t)).join(",");{let t=i.filters.map(e=>f_(e)).join(",");return`${i.op}(${t})`}}function XS(i,t){return i instanceof Tt?function(n,r){return r instanceof Tt&&n.op===r.op&&n.field.isEqual(r.field)&&gn(n.value,r.value)}(i,t):i instanceof Gi?function(n,r){return r instanceof Gi&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,a)=>s&&XS(o,r.filters[a]),!0):!1}(i,t):void ie()}function ZS(i){return i instanceof Tt?function(e){return`${e.field.canonicalString()} ${e.op} ${Eo(e.value)}`}(i):i instanceof Gi?function(e){return e.op.toString()+" {"+e.getFilters().map(ZS).join(" ,")+"}"}(i):"Filter"}var g_=class extends Tt{constructor(t,e,n){super(t,e,n),this.key=J.fromName(n.referenceValue)}matches(t){let e=J.comparator(t.key,this.key);return this.matchesComparison(e)}},__=class extends Tt{constructor(t,e){super(t,"in",e),this.keys=JS("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},v_=class extends Tt{constructor(t,e){super(t,"not-in",e),this.keys=JS("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function JS(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>J.fromName(n.referenceValue))}var b_=class extends Tt{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return zv(e)&&Yc(e.arrayValue,this.value)}},y_=class extends Tt{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Yc(this.value.arrayValue,e)}},w_=class extends Tt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Yc(this.value.arrayValue,e)}},I_=class extends Tt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!zv(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Yc(this.value.arrayValue,n))}};var E_=class{constructor(t,e=null,n=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function bS(i,t=null,e=[],n=[],r=null,s=null,o=null){return new E_(i,t,e,n,r,s,o)}function $v(i){let t=de(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>f_(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),kh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Eo(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Eo(n)).join(",")),t.ue=e}return t.ue}function qv(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!UU(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!XS(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!vS(i.startAt,t.startAt)&&vS(i.endAt,t.endAt)}function C_(i){return J.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}var rs=class{constructor(t,e=null,n=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function BU(i,t,e,n,r,s,o,a){return new rs(i,t,e,n,r,s,o,a)}function Dh(i){return new rs(i)}function yS(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function eA(i){return i.collectionGroup!==null}function qc(i){let t=de(i);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ht(bi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new To(s,n))}),e.has(bi.keyField().canonicalString())||t.ce.push(new To(bi.keyField(),n))}return t.ce}function mn(i){let t=de(i);return t.le||(t.le=zU(t,qc(i))),t.le}function zU(i,t){if(i.limitType==="F")return bS(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new To(r.field,s)});let e=i.endAt?new Co(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Co(i.startAt.position,i.startAt.inclusive):null;return bS(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function T_(i,t){let e=i.filters.concat([t]);return new rs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function S_(i,t,e){return new rs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Mh(i,t){return qv(mn(i),mn(t))&&i.limitType===t.limitType}function tA(i){return`${$v(mn(i))}|lt:${i.limitType}`}function po(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>ZS(r)).join(", ")}]`),kh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Eo(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Eo(r)).join(",")),`Target(${n})`}(mn(i))}; limitType=${i.limitType})`}function Ph(i,t){return t.isFoundDocument()&&function(n,r){let s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):J.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(let s of qc(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(let s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,a,l){let d=_S(o,a,l);return o.inclusive?d<=0:d<0}(n.startAt,qc(n),r)||n.endAt&&!function(o,a,l){let d=_S(o,a,l);return o.inclusive?d>=0:d>0}(n.endAt,qc(n),r))}(i,t)}function $U(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function iA(i){return(t,e)=>{let n=!1;for(let r of qc(i)){let s=qU(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function qU(i,t,e){let n=i.field.isKeyField()?J.comparator(t.key,e.key):function(s,o,a){let l=o.data.field(s),d=a.data.field(s);return l!==null&&d!==null?Io(l,d):ie()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return ie()}}var pr=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(let[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){cs(this.inner,(e,n)=>{for(let[r,s]of n)t(r,s)})}isEmpty(){return GS(this.inner)}size(){return this.innerSize}};var GU=new ut(J.comparator);function Un(){return GU}var nA=new ut(J.comparator);function zc(...i){let t=nA;for(let e of i)t=t.insert(e.key,e);return t}function rA(i){let t=nA;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Zr(){return Gc()}function sA(){return Gc()}function Gc(){return new pr(i=>i.toString(),(i,t)=>i.isEqual(t))}var HU=new ut(J.comparator),WU=new Ht(J.comparator);function Te(...i){let t=WU;for(let e of i)t=t.add(e);return t}var KU=new Ht(Le);function YU(){return KU}function Gv(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(t)?"-0":t}}function oA(i){return{integerValue:""+i}}function QU(i,t){return PU(t)?oA(t):Gv(i,t)}var So=class{constructor(){this._=void 0}};function XU(i,t,e){return i instanceof Ao?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&jv(s)&&(s=Bv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof ss?cA(i,t):i instanceof os?lA(i,t):function(r,s){let o=aA(r,s),a=wS(o)+wS(r.Pe);return p_(o)&&p_(r.Pe)?oA(a):Gv(r.serializer,a)}(i,t)}function ZU(i,t,e){return i instanceof ss?cA(i,t):i instanceof os?lA(i,t):e}function aA(i,t){return i instanceof Ro?function(n){return p_(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}var Ao=class extends So{},ss=class extends So{constructor(t){super(),this.elements=t}};function cA(i,t){let e=dA(t);for(let n of i.elements)e.some(r=>gn(r,n))||e.push(n);return{arrayValue:{values:e}}}var os=class extends So{constructor(t){super(),this.elements=t}};function lA(i,t){let e=dA(t);for(let n of i.elements)e=e.filter(r=>!gn(r,n));return{arrayValue:{values:e}}}var Ro=class extends So{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function wS(i){return nt(i.integerValue||i.doubleValue)}function dA(i){return zv(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function JU(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof ss&&r instanceof ss||n instanceof os&&r instanceof os?wo(n.elements,r.elements,gn):n instanceof Ro&&r instanceof Ro?gn(n.Pe,r.Pe):n instanceof Ao&&r instanceof Ao}(i.transform,t.transform)}var A_=class{constructor(t,e){this.version=t,this.transformResults=e}},pn=class i{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new i}static exists(t){return new i(void 0,t)}static updateTime(t){return new i(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Xu(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}var xo=class{};function uA(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Qc(i.key,pn.none()):new as(i.key,i.data,pn.none());{let e=i.data,n=vi.empty(),r=new Ht(bi.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new _n(i.key,n,new ki(r.toArray()),pn.none())}}function ej(i,t,e){i instanceof as?function(r,s,o){let a=r.value.clone(),l=ES(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(i,t,e):i instanceof _n?function(r,s,o){if(!Xu(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=ES(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(hA(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Hc(i,t,e,n){return i instanceof as?function(s,o,a,l){if(!Xu(s.precondition,o))return a;let d=s.value.clone(),h=CS(s.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(i,t,e,n):i instanceof _n?function(s,o,a,l){if(!Xu(s.precondition,o))return a;let d=CS(s.fieldTransforms,l,o),h=o.data;return h.setAll(hA(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(i,t,e,n):function(s,o,a){return Xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(i,t,e)}function tj(i,t){let e=null;for(let n of i.fieldTransforms){let r=t.data.field(n.field),s=aA(n.transform,r||null);s!=null&&(e===null&&(e=vi.empty()),e.set(n.field,s))}return e||null}function IS(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&wo(n,r,(s,o)=>JU(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}var as=class extends xo{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},_n=class extends xo{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function hA(i){let t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let n=i.data.field(e);t.set(e,n)}}),t}function ES(i,t,e){let n=new Map;Ke(i.length===e.length);for(let r=0;r<e.length;r++){let s=i[r],o=s.transform,a=t.data.field(s.field);n.set(s.field,ZU(o,a,e[r]))}return n}function CS(i,t,e){let n=new Map;for(let r of i){let s=r.transform,o=e.data.field(r.field);n.set(r.field,XU(s,o,t))}return n}var Qc=class extends xo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},R_=class extends xo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var x_=class{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){let n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&ej(s,t,n[r])}}applyToLocalView(t,e){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(e=Hc(n,t,e,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(e=Hc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let n=sA();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;let l=uA(o,a);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Te())}isEqual(t){return this.batchId===t.batchId&&wo(this.mutations,t.mutations,(e,n)=>IS(e,n))&&wo(this.baseMutations,t.baseMutations,(e,n)=>IS(e,n))}},k_=class i{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Ke(t.mutations.length===n.length);let r=function(){return HU}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new i(t,e,n,r)}};var D_=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var M_=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Et,ke;function ij(i){switch(i){default:return ie();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function mA(i){if(i===void 0)return Ln("GRPC error has no .code"),P.UNKNOWN;switch(i){case Et.OK:return P.OK;case Et.CANCELLED:return P.CANCELLED;case Et.UNKNOWN:return P.UNKNOWN;case Et.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Et.INTERNAL:return P.INTERNAL;case Et.UNAVAILABLE:return P.UNAVAILABLE;case Et.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Et.NOT_FOUND:return P.NOT_FOUND;case Et.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Et.ABORTED:return P.ABORTED;case Et.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Et.DATA_LOSS:return P.DATA_LOSS;default:return ie()}}(ke=Et||(Et={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";var TS=null;function nj(){return new TextEncoder}var rj=new ur([4294967295,4294967295],0);function SS(i){let t=nj().encode(i),e=new Hg;return e.update(t),new Uint8Array(e.digest())}function AS(i){let t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ur([e,n],0),new ur([r,s],0)]}var P_=class i{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Jr(`Invalid padding: ${e}`);if(n<0)throw new Jr(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Jr(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Jr(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=ur.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(ur.fromNumber(n)));return r.compare(rj)===1&&(r=new ur([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=SS(t),[n,r]=AS(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new i(s,r,e);return n.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;let e=SS(t),[n,r]=AS(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){let e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}},Jr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sh=class i{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){let r=new Map;return r.set(t,Xc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new i(ue.min(),r,new ut(Le),Un(),Te())}},Xc=class i{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new i(n,e,Te(),Te(),Te())}};var vo=class{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}},oh=class{constructor(t,e){this.targetId=t,this.me=e}},ah=class{constructor(t,e,n=Kt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}},ch=class{constructor(){this.fe=0,this.ge=xS(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Te(),e=Te(),n=Te();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ie()}}),new Xc(this.pe,this.ye,t,e,n)}Ce(){this.we=!1,this.ge=xS()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},O_=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=Un(),this.qe=RS(),this.Qe=new ut(Le)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:ie()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,n=t.me.count,r=this.Je(e);if(r){let s=r.target;if(C_(s))if(n===0){let o=new J(s.path);this.Ue(e,o,qi.newNoDocument(o,ue.min()))}else Ke(n===1);else{let o=this.Ye(e);if(o!==n){let a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(e);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,d)}TS?.et(function(h,p,f,w,C){var D,R,$,ee,Y,me;let _t={localCacheCount:h,existenceFilterCount:p.count,databaseId:f.database,projectId:f.projectId},Pe=p.unchangedNames;return Pe&&(_t.bloomFilter={applied:C===0,hashCount:(D=Pe?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(ee=($=(R=Pe?.bits)===null||R===void 0?void 0:R.bitmap)===null||$===void 0?void 0:$.length)!==null&&ee!==void 0?ee:0,padding:(me=(Y=Pe?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&me!==void 0?me:0,mightContain:E=>{var _;return(_=w?.mightContain(E))!==null&&_!==void 0&&_}}),_t}(o,t.me,this.Le.tt(),a,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e,o,a;try{o=mr(n).toUint8Array()}catch(l){if(l instanceof ih)return yo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new P_(o,r,s)}catch(l){return yo(l instanceof Jr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){let n=this.Le.getRemoteKeysForTarget(e),r=0;return n.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&C_(a.target)){let l=new J(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,qi.newNoDocument(l,t))}s.be&&(e.set(o,s.ve()),s.Ce())}});let n=Te();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));let r=new sh(t,e,this.Qe,this.ke,n);return this.ke=Un(),this.qe=RS(),this.Qe=new ut(Le),r}$e(t,e){if(!this.ze(t))return;let n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new ch,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Ht(Le),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||W("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new ch),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function RS(){return new ut(J.comparator)}function xS(){return new ut(J.comparator)}var sj={asc:"ASCENDING",desc:"DESCENDING"},oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aj={and:"AND",or:"OR"},N_=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function F_(i,t){return i.useProto3Json||kh(t)?t:{value:t}}function lh(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pA(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function cj(i,t){return lh(i,t.toTimestamp())}function fn(i){return Ke(!!i),ue.fromTimestamp(function(e){let n=Vn(e);return new Lt(n.seconds,n.nanos)}(i))}function Hv(i,t){return L_(i,t).canonicalString()}function L_(i,t){let e=function(r){return new st(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function fA(i){let t=st.fromString(i);return Ke(yA(t)),t}function V_(i,t){return Hv(i.databaseId,t.path)}function Jg(i,t){let e=fA(t);if(e.get(1)!==i.databaseId.projectId)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new J(_A(e))}function gA(i,t){return Hv(i.databaseId,t)}function lj(i){let t=fA(i);return t.length===4?st.emptyPath():_A(t)}function U_(i){return new st(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function _A(i){return Ke(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function kS(i,t,e){return{name:V_(i,t),fields:e.value.mapValue.fields}}function dj(i,t){let e;if("targetChange"in t){t.targetChange;let n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ie()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ke(h===void 0||typeof h=="string"),Kt.fromBase64String(h||"")):(Ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Kt.fromUint8Array(h||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(d){let h=d.code===void 0?P.UNKNOWN:mA(d.code);return new G(h,d.message||"")}(o);e=new ah(n,r,s,a||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let r=Jg(i,n.document.name),s=fn(n.document.updateTime),o=n.document.createTime?fn(n.document.createTime):ue.min(),a=new vi({mapValue:{fields:n.document.fields}}),l=qi.newFoundDocument(r,s,o,a),d=n.targetIds||[],h=n.removedTargetIds||[];e=new vo(d,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let r=Jg(i,n.document),s=n.readTime?fn(n.readTime):ue.min(),o=qi.newNoDocument(r,s),a=n.removedTargetIds||[];e=new vo([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let r=Jg(i,n.document),s=n.removedTargetIds||[];e=new vo([],s,r,null)}else{if(!("filter"in t))return ie();{t.filter;let n=t.filter;n.targetId;let{count:r=0,unchangedNames:s}=n,o=new M_(r,s),a=n.targetId;e=new oh(a,o)}}return e}function uj(i,t){let e;if(t instanceof as)e={update:kS(i,t.key,t.value)};else if(t instanceof Qc)e={delete:V_(i,t.key)};else if(t instanceof _n)e={update:kS(i,t.key,t.data),updateMask:yj(t.fieldMask)};else{if(!(t instanceof R_))return ie();e={verify:V_(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){let a=o.transform;if(a instanceof Ao)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ss)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof os)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ro)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:cj(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(i,t.precondition)),e}function hj(i,t){return i&&i.length>0?(Ke(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?fn(r.updateTime):fn(s);return o.isEqual(ue.min())&&(o=fn(s)),new A_(o,r.transformResults||[])}(e,t))):[]}function mj(i,t){return{documents:[gA(i,t.path)]}}function pj(i,t){let e={structuredQuery:{}},n=t.path,r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=gA(i,r);let s=function(d){if(d.length!==0)return bA(Gi.create(d,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(h=>function(f){return{field:fo(f.field),direction:_j(f.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);let a=F_(i,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{_t:e,parent:r}}function fj(i){let t=lj(i.parent),e=i.structuredQuery,n=e.from?e.from.length:0,r=null;if(n>0){Ke(n===1);let h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];e.where&&(s=function(p){let f=vA(p);return f instanceof Gi&&QS(f)?f.getFilters():[f]}(e.where));let o=[];e.orderBy&&(o=function(p){return p.map(f=>function(C){return new To(go(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(f))}(e.orderBy));let a=null;e.limit&&(a=function(p){let f;return f=typeof p=="object"?p.value:p,kh(f)?null:f}(e.limit));let l=null;e.startAt&&(l=function(p){let f=!!p.before,w=p.values||[];return new Co(w,f)}(e.startAt));let d=null;return e.endAt&&(d=function(p){let f=!p.before,w=p.values||[];return new Co(w,f)}(e.endAt)),BU(t,r,o,s,a,"F",l,d)}function gj(i,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function vA(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let n=go(e.unaryFilter.field);return Tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=go(e.unaryFilter.field);return Tt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=go(e.unaryFilter.field);return Tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=go(e.unaryFilter.field);return Tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(i):i.fieldFilter!==void 0?function(e){return Tt.create(go(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return Gi.create(e.compositeFilter.filters.map(n=>vA(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ie()}}(e.compositeFilter.op))}(i):ie()}function _j(i){return sj[i]}function vj(i){return oj[i]}function bj(i){return aj[i]}function fo(i){return{fieldPath:i.canonicalString()}}function go(i){return bi.fromServerFormat(i.fieldPath)}function bA(i){return i instanceof Tt?function(e){if(e.op==="=="){if(gS(e.value))return{unaryFilter:{field:fo(e.field),op:"IS_NAN"}};if(fS(e.value))return{unaryFilter:{field:fo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(gS(e.value))return{unaryFilter:{field:fo(e.field),op:"IS_NOT_NAN"}};if(fS(e.value))return{unaryFilter:{field:fo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(e.field),op:vj(e.op),value:e.value}}}(i):i instanceof Gi?function(e){let n=e.getFilters().map(r=>bA(r));return n.length===1?n[0]:{compositeFilter:{op:bj(e.op),filters:n}}}(i):ie()}function yj(i){let t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function yA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}var Zc=class i{constructor(t,e,n,r,s=ue.min(),o=ue.min(),a=Kt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var j_=class{constructor(t){this.ct=t}};function wj(i){let t=fj({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?S_(t,t.limit,"L"):t}var dh=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(nt(t.integerValue));else if("doubleValue"in t){let n=nt(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),Wc(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),typeof n=="string"&&(n=Vn(n)),e.Rt(`${n.seconds||""}`),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(mr(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?WS(t)?this.dt(e,Number.MAX_SAFE_INTEGER):HS(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):ie()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let n=t.fields||{};this.dt(e,55);for(let r of Object.keys(n))this.Vt(r,e),this.Tt(n[r],e)}wt(t,e){var n,r;let s=t.fields||{};this.dt(e,53);let o="value",a=((r=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(nt(a)),this.Vt(o,e),this.Tt(s[o],e)}bt(t,e){let n=t.values||[];this.dt(e,50);for(let r of n)this.Tt(r,e)}yt(t,e){this.dt(e,37),J.fromName(t).path.forEach(n=>{this.dt(e,60),this.Dt(n,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};dh.vt=new dh;var B_=class{constructor(){this.un=new z_}addToCollectionParentIndex(t,e){return this.un.add(e),N.resolve()}getCollectionParents(t,e){return N.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return N.resolve()}deleteFieldIndex(t,e){return N.resolve()}deleteAllFieldIndexes(t){return N.resolve()}createTargetIndexes(t,e){return N.resolve()}getDocumentsMatchingTarget(t,e){return N.resolve(null)}getIndexType(t,e){return N.resolve(0)}getFieldIndexes(t,e){return N.resolve([])}getNextCollectionGroupToUpdate(t){return N.resolve(null)}getMinOffset(t,e){return N.resolve(is.min())}getMinOffsetFromCollectionGroup(t,e){return N.resolve(is.min())}updateCollectionGroup(t,e,n){return N.resolve()}updateIndexEntries(t,e){return N.resolve()}},z_=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ht(st.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Ht(st.comparator)).toArray()}};var Q6=new Uint8Array(0);var dn=class i{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new i(t,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(41943040,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var Jc=class i{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new i(0)}static kn(){return new i(-1)}};var $_=class{constructor(){this.changes=new pr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,qi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let n=this.changes.get(e);return n!==void 0?N.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var q_=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var G_=class{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&Hc(n.mutation,r,ki.empty(),Lt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,Te()).next(()=>n))}getLocalViewOfDocuments(t,e,n=Te()){let r=Zr();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=zc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let n=Zr();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,Te()))}populateOverlays(t,e,n){let r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,n,r){let s=Un(),o=Gc(),a=function(){return Gc()}();return e.forEach((l,d)=>{let h=n.get(d.key);r.has(d.key)&&(h===void 0||h.mutation instanceof _n)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Hc(h.mutation,d,h.mutation.getFieldMask(),Lt.now())):o.set(d.key,ki.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((d,h)=>o.set(d,h)),e.forEach((d,h)=>{var p;return a.set(d,new q_(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(t,e){let n=Gc(),r=new ut((o,a)=>o-a),s=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let a of o)a.keys().forEach(l=>{let d=e.get(l);if(d===null)return;let h=n.get(l)||ki.empty();h=a.applyToLocalView(d,h),n.set(l,h);let p=(r.get(a.batchId)||Te()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),d=l.key,h=l.value,p=sA();h.forEach(f=>{if(!s.has(f)){let w=uA(e.get(f),n.get(f));w!==null&&p.set(f,w),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,d,p))}return N.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):eA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):N.resolve(Zr()),a=-1,l=s;return o.next(d=>N.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?N.resolve():this.remoteDocumentCache.getEntry(t,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(t,d,s)).next(()=>this.computeViews(t,l,d,Te())).next(h=>({batchId:a,changes:rA(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new J(e)).next(n=>{let r=zc();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){let s=e.collectionGroup,o=zc();return this.indexManager.getCollectionParents(t,s).next(a=>N.forEach(a,l=>{let d=function(p,f){return new rs(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,d,n,r).next(h=>{h.forEach((p,f)=>{o=o.insert(p,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((l,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,qi.newInvalidDocument(h)))});let a=zc();return o.forEach((l,d)=>{let h=s.get(l);h!==void 0&&Hc(h.mutation,d,ki.empty(),Lt.now()),Ph(e,d)&&(a=a.insert(l,d))}),a})}};var H_=class{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return N.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:fn(r.createTime)}}(e)),N.resolve()}getNamedQuery(t,e){return N.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(r){return{name:r.name,query:wj(r.bundledQuery),readTime:fn(r.readTime)}}(e)),N.resolve()}};var W_=class{constructor(){this.overlays=new ut(J.comparator),this.Ir=new Map}getOverlay(t,e){return N.resolve(this.overlays.get(e))}getOverlays(t,e){let n=Zr();return N.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),N.resolve()}removeOverlaysForBatchId(t,e,n){let r=this.Ir.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),N.resolve()}getOverlaysForCollection(t,e,n){let r=Zr(),s=e.length+1,o=new J(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,d=l.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>n&&r.set(l.getKey(),l)}return N.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new ut((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>n){let h=s.get(d.largestBatchId);h===null&&(h=Zr(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Zr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=r)););return N.resolve(a)}ht(t,e,n){let r=this.overlays.get(n.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new D_(e,n));let s=this.Ir.get(e);s===void 0&&(s=Te(),this.Ir.set(e,s)),this.Ir.set(e,s.add(n.key))}};var K_=class{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(t){return N.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,N.resolve()}};var el=class{constructor(){this.Tr=new Ht(Ct.Er),this.dr=new Ht(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){let n=new Ct(t,e);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Vr(new Ct(t,e))}mr(t,e){t.forEach(n=>this.removeReference(n,e))}gr(t){let e=new J(new st([])),n=new Ct(e,t),r=new Ct(e,t+1),s=[];return this.dr.forEachInRange([n,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let e=new J(new st([])),n=new Ct(e,t),r=new Ct(e,t+1),s=Te();return this.dr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new Ct(t,0),n=this.Tr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}},Ct=class{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return J.comparator(t.key,e.key)||Le(t.wr,e.wr)}static Ar(t,e){return Le(t.wr,e.wr)||J.comparator(t.key,e.key)}};var Y_=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Ht(Ct.Er)}checkEmpty(t){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new x_(s,e,n,r);this.mutationQueue.push(o);for(let a of r)this.br=this.br.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(t,e){return N.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){let n=e+1,r=this.vr(n),s=r<0?0:r;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let n=new Ct(e,0),r=new Ct(e,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],o=>{let a=this.Dr(o.wr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ht(Le);return e.forEach(r=>{let s=new Ct(r,0),o=new Ct(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{n=n.add(a.wr)})}),N.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){let n=e.path,r=n.length+1,s=n;J.isDocumentKey(s)||(s=s.child(""));let o=new Ct(new J(s),0),a=new Ht(Le);return this.br.forEachWhile(l=>{let d=l.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(a=a.add(l.wr)),!0)},o),N.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(n=>{let r=this.Dr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Ke(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return N.forEach(e.mutations,r=>{let s=new Ct(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=n})}On(t){}containsKey(t,e){let n=new Ct(e,0),r=this.br.firstAfterOrEqual(n);return N.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,N.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){let e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Q_=class{constructor(t){this.Mr=t,this.docs=function(){return new ut(J.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.Mr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let n=this.docs.get(e);return N.resolve(n?n.document.mutableCopy():qi.newInvalidDocument(e))}getEntries(t,e){let n=Un();return e.forEach(r=>{let s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():qi.newInvalidDocument(r))}),N.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=Un(),o=e.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||kU(xU(h),n)<=0||(r.has(h.key)||Ph(e,h))&&(s=s.insert(h.key,h.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(t,e,n,r){ie()}Or(t,e){return N.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new X_(this)}getSize(t){return N.resolve(this.size)}},X_=class extends $_{constructor(t){super(),this.cr=t}applyChanges(t){let e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(n)}),N.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}};var Z_=class{constructor(t){this.persistence=t,this.Nr=new pr(e=>$v(e),qv),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new el,this.targetCount=0,this.kr=Jc.Bn()}forEachTarget(t,e){return this.Nr.forEach((n,r)=>e(r)),N.resolve()}getLastRemoteSnapshotVersion(t){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return N.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Lr&&(this.Lr=e),N.resolve()}Kn(t){this.Nr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.kr=new Jc(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,N.resolve()}updateTargetData(t,e){return this.Kn(e),N.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,N.resolve()}removeTargets(t,e,n){let r=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=e&&n.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),N.waitFor(s).next(()=>r)}getTargetCount(t){return N.resolve(this.targetCount)}getTargetData(t,e){let n=this.Nr.get(e)||null;return N.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Rr(e,n),N.resolve()}removeMatchingKeys(t,e,n){this.Br.mr(e,n);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),N.resolve()}getMatchingKeysForTargetId(t,e){let n=this.Br.yr(e);return N.resolve(n)}containsKey(t,e){return N.resolve(this.Br.containsKey(e))}};var J_=class{constructor(t,e){this.qr={},this.overlays={},this.Qr=new qS(0),this.Kr=!1,this.Kr=!0,this.$r=new K_,this.referenceDelegate=t(this),this.Ur=new Z_(this),this.indexManager=new B_,this.remoteDocumentCache=function(r){return new Q_(r)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new j_(e),this.Gr=new H_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new W_,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.qr[t.toKey()];return n||(n=new Y_(e,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,n){W("MemoryPersistence","Starting transaction:",t);let r=new ev(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(t,e){return N.or(Object.values(this.qr).map(n=>()=>n.containsKey(t,e)))}},ev=class extends u_{constructor(t){super(),this.currentSequenceNumber=t}},tv=class i{constructor(t){this.persistence=t,this.Jr=new el,this.Yr=null}static Zr(t){return new i(t)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(t,e,n){return this.Jr.addReference(n,e),this.Xr.delete(n.toString()),N.resolve()}removeReference(t,e,n){return this.Jr.removeReference(n,e),this.Xr.add(n.toString()),N.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),N.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(r=>this.Xr.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,n=>{let r=J.fromPath(n);return this.ei(t,r).next(s=>{s||e.removeEntry(r,ue.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(n=>{n?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return N.or([()=>N.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}};var iv=class i{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.$i=n,this.Ui=r}static Wi(t,e){let n=Te(),r=Te();for(let s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new i(t,e.fromCache,n,r)}};var nv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var rv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bI()?8:MU($t())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,n,r){let s={result:null};return this.Yi(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new nv;return this.Xi(t,e,o).next(a=>{if(s.result=a,this.zi)return this.es(t,e,o,a.size)})}).next(()=>s.result)}es(t,e,n,r){return n.documentReadCount<this.ji?(Bc()<=qt.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",po(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(Bc()<=qt.DEBUG&&W("QueryEngine","Query:",po(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Bc()<=qt.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",po(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mn(e))):N.resolve())}Yi(t,e){if(yS(e))return N.resolve(null);let n=mn(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=S_(e,null,"F"),n=mn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{let o=Te(...s);return this.Ji.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,n).next(l=>{let d=this.ts(e,a);return this.ns(e,d,o,l.readTime)?this.Yi(t,S_(e,null,"F")):this.rs(t,d,e,l)}))})))}Zi(t,e,n,r){return yS(e)||r.isEqual(ue.min())?N.resolve(null):this.Ji.getDocuments(t,n).next(s=>{let o=this.ts(e,s);return this.ns(e,o,n,r)?N.resolve(null):(Bc()<=qt.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),po(e)),this.rs(t,o,e,RU(r,-1)).next(a=>a))})}ts(t,e){let n=new Ht(iA(t));return e.forEach((r,s)=>{Ph(t,s)&&(n=n.add(s))}),n}ns(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(t,e,n){return Bc()<=qt.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",po(e)),this.Ji.getDocumentsMatchingQuery(t,e,is.min(),n)}rs(t,e,n,r){return this.Ji.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var sv=class{constructor(t,e,n,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new ut(Le),this._s=new pr(s=>$v(s),qv),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new G_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}};function Ij(i,t,e,n){return new sv(i,t,e,n)}function wA(i,t){return v(this,null,function*(){let e=de(i);return yield e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e.ls(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{let o=[],a=[],l=Te();for(let d of r){o.push(d.batchId);for(let h of d.mutations)l=l.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)l=l.add(h.key)}return e.localDocuments.getDocuments(n,l).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})}function Ej(i,t){let e=de(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=t.batch.keys(),s=e.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,d,h){let p=d.batch,f=p.keys(),w=N.resolve();return f.forEach(C=>{w=w.next(()=>h.getEntry(l,C)).next(D=>{let R=d.docVersions.get(C);Ke(R!==null),D.version.compareTo(R)<0&&(p.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),h.addEntry(D)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=Te();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(l=l.add(a.batch.mutations[d].key));return l}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function IA(i){let t=de(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Cj(i,t){let e=de(i),n=t.snapshotVersion,r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;let a=[];t.targetChanges.forEach((h,p)=>{let f=r.get(p);if(!f)return;a.push(e.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>e.Ur.addMatchingKeys(s,h.addedDocuments,p)));let w=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?w=w.withResumeToken(Kt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,n)),r=r.insert(p,w),function(D,R,$){return D.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(f,w,h)&&a.push(e.Ur.updateTargetData(s,w))});let l=Un(),d=Te();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Tj(s,o,t.documentUpdates).next(h=>{l=h.Ps,d=h.Is})),!n.isEqual(ue.min())){let h=e.Ur.getLastRemoteSnapshotVersion(s).next(p=>e.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(h)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(e.os=r,s))}function Tj(i,t,e){let n=Te(),r=Te();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=Un();return e.forEach((a,l)=>{let d=s.get(a);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function Sj(i,t){let e=de(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Aj(i,t){let e=de(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Ur.getTargetData(n,t).next(s=>s?(r=s,N.resolve(r)):e.Ur.allocateTargetId(n).next(o=>(r=new Zc(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Ur.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=e.os.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(n.targetId,n),e._s.set(t,n.targetId)),n})}function ov(i,t,e){return v(this,null,function*(){let n=de(i),r=n.os.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!al(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.os=n.os.remove(t),n._s.delete(r.target)})}function DS(i,t,e){let n=de(i),r=ue.min(),s=Te();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){let p=de(l),f=p._s.get(h);return f!==void 0?N.resolve(p.os.get(f)):p.Ur.getTargetData(d,h)}(n,o,mn(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>n.ss.getDocumentsMatchingQuery(o,t,e?r:ue.min(),e?s:Te())).next(a=>(Rj(n,$U(t),a),{documents:a,Ts:s})))}function Rj(i,t,e){let n=i.us.get(t)||ue.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.us.set(t,n)}var uh=class{constructor(){this.activeTargetIds=YU()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var av=class{constructor(){this.so=new uh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,n){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new uh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var cv=class{_o(t){}shutdown(){}};var hh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ho)t(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Yu=null;function e_(){return Yu===null?Yu=function(){return 268435456+Math.round(2147483648*Math.random())}():Yu++,"0x"+Yu.toString(16)}var xj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var lv=class{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}};var Gt="WebChannelConnection",dv=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+e.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(e,n,r,s,o){let a=e_(),l=this.xo(e,n.toUriEncodedString());W("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(e,l,d,r).then(h=>(W("RestConnection",`Received RPC '${e}' ${a}: `,h),h),h=>{throw yo("RestConnection",`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(e,n,r,s,o,a){return this.Mo(e,n,r,s,o)}Oo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}xo(e,n){let r=xj[e];return`${this.Do}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,n,r){let s=e_();return new Promise((o,a)=>{let l=new Wg;l.setWithCredentials(!0),l.listenOnce(Yg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jc.NO_ERROR:let h=l.getResponseJson();W(Gt,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),o(h);break;case jc.TIMEOUT:W(Gt,`RPC '${t}' ${s} timed out`),a(new G(P.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:let p=l.getStatus();if(W(Gt,`RPC '${t}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);let w=f?.error;if(w&&w.status&&w.message){let C=function(R){let $=R.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf($)>=0?$:P.UNKNOWN}(w.status);a(new G(C,w.message))}else a(new G(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(P.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{W(Gt,`RPC '${t}' ${s} completed.`)}});let d=JSON.stringify(r);W(Gt,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",d,n,15)})}Bo(t,e,n){let r=e_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Zg(),a=Xg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new Kg({})),this.Oo(l.initMessageHeaders,e,n),l.encodeInitMessageHeaders=!0;let h=s.join("");W(Gt,`Creating RPC '${t}' stream ${r}: ${h}`,l);let p=o.createWebChannel(h,l),f=!1,w=!1,C=new lv({Io:R=>{w?W(Gt,`Not sending because RPC '${t}' stream ${r} is closed:`,R):(f||(W(Gt,`Opening RPC '${t}' stream ${r} transport.`),p.open(),f=!0),W(Gt,`RPC '${t}' stream ${r} sending:`,R),p.send(R))},To:()=>p.close()}),D=(R,$,ee)=>{R.listen($,Y=>{try{ee(Y)}catch(me){setTimeout(()=>{throw me},0)}})};return D(p,mo.EventType.OPEN,()=>{w||(W(Gt,`RPC '${t}' stream ${r} transport opened.`),C.yo())}),D(p,mo.EventType.CLOSE,()=>{w||(w=!0,W(Gt,`RPC '${t}' stream ${r} transport closed`),C.So())}),D(p,mo.EventType.ERROR,R=>{w||(w=!0,yo(Gt,`RPC '${t}' stream ${r} transport errored:`,R),C.So(new G(P.UNAVAILABLE,"The operation could not be completed")))}),D(p,mo.EventType.MESSAGE,R=>{var $;if(!w){let ee=R.data[0];Ke(!!ee);let Y=ee,me=Y.error||(($=Y[0])===null||$===void 0?void 0:$.error);if(me){W(Gt,`RPC '${t}' stream ${r} received error:`,me);let _t=me.status,Pe=function(y){let I=Et[y];if(I!==void 0)return mA(I)}(_t),E=me.message;Pe===void 0&&(Pe=P.INTERNAL,E="Unknown error status: "+_t+" with message "+me.message),w=!0,C.So(new G(Pe,E)),p.close()}else W(Gt,`RPC '${t}' stream ${r} received:`,ee),C.bo(ee)}}),D(a,Qg.STAT_EVENT,R=>{R.stat===Wu.PROXY?W(Gt,`RPC '${t}' stream ${r} detected buffering proxy`):R.stat===Wu.NOPROXY&&W(Gt,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function t_(){return typeof document<"u"?document:null}function Oh(i){return new N_(i,!0)}var mh=class{constructor(t,e,n=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=e,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-n);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ph=class{constructor(t,e,n,r,s,o,a,l){this.ui=t,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mh(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,e){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===P.RESOURCE_EXHAUSTED?(Ln(e.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(e)})}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Yo===e&&this.P_(n,r)},n=>{t(()=>{let r=new G(P.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(r)})})}P_(t,e){let n=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{n(()=>this.I_(r))}),this.stream.onMessage(r=>{n(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(t){return W("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uv=class extends ph{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();let e=dj(this.serializer,t),n=function(s){if(!("targetChange"in s))return ue.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?fn(o.readTime):ue.min()}(t);return this.listener.d_(e,n)}A_(t){let e={};e.database=U_(this.serializer),e.addTarget=function(s,o){let a,l=o.target;if(a=C_(l)?{documents:mj(s,l)}:{query:pj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pA(s,o.resumeToken);let d=F_(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=lh(s,o.snapshotVersion.toTimestamp());let d=F_(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,t);let n=gj(this.serializer,t);n&&(e.labels=n),this.a_(e)}R_(t){let e={};e.database=U_(this.serializer),e.removeTarget=t,this.a_(e)}},hv=class extends ph{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return Ke(!!t.streamToken),this.lastStreamToken=t.streamToken,Ke(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Ke(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();let e=hj(t.writeResults,t.commitTime),n=fn(t.commitTime);return this.listener.g_(n,e)}p_(){let t={};t.database=U_(this.serializer),this.a_(t)}m_(t){let e={streamToken:this.lastStreamToken,writes:t.map(n=>uj(this.serializer,n))};this.a_(e)}};var mv=class extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(t,L_(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(P.UNKNOWN,s.toString())})}Lo(t,e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(t,L_(e,n),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},pv=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ln(e),this.D_=!1):W("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var fv=class{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(()=>v(this,null,function*(){ls(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(l){return v(this,null,function*(){let d=de(l);d.L_.add(4),yield cl(d),d.q_.set("Unknown"),d.L_.delete(4),yield Nh(d)})}(this))}))}),this.q_=new pv(n,r)}};function Nh(i){return v(this,null,function*(){if(ls(i))for(let t of i.B_)yield t(!0)})}function cl(i){return v(this,null,function*(){for(let t of i.B_)yield t(!1)})}function EA(i,t){let e=de(i);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),Qv(e)?Yv(e):No(e).r_()&&Kv(e,t))}function Wv(i,t){let e=de(i),n=No(e);e.N_.delete(t),n.r_()&&CA(e,t),e.N_.size===0&&(n.r_()?n.o_():ls(e)&&e.q_.set("Unknown"))}function Kv(i,t){if(i.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ue.min())>0){let e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}No(i).A_(t)}function CA(i,t){i.Q_.xe(t),No(i).R_(t)}function Yv(i){i.Q_=new O_({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.N_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),No(i).start(),i.q_.v_()}function Qv(i){return ls(i)&&!No(i).n_()&&i.N_.size>0}function ls(i){return de(i).L_.size===0}function TA(i){i.Q_=void 0}function kj(i){return v(this,null,function*(){i.q_.set("Online")})}function Dj(i){return v(this,null,function*(){i.N_.forEach((t,e)=>{Kv(i,t)})})}function Mj(i,t){return v(this,null,function*(){TA(i),Qv(i)?(i.q_.M_(t),Yv(i)):i.q_.set("Unknown")})}function Pj(i,t,e){return v(this,null,function*(){if(i.q_.set("Online"),t instanceof ah&&t.state===2&&t.cause)try{yield function(r,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))})}(i,t)}catch(n){W("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield fh(i,n)}else if(t instanceof vo?i.Q_.Ke(t):t instanceof oh?i.Q_.He(t):i.Q_.We(t),!e.isEqual(ue.min()))try{let n=yield IA(i.localStore);e.compareTo(n)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let h=s.N_.get(d);h&&s.N_.set(d,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,d)=>{let h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Kt.EMPTY_BYTE_STRING,h.snapshotVersion)),CA(s,l);let p=new Zc(h.target,l,d,h.sequenceNumber);Kv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(i,e))}catch(n){W("RemoteStore","Failed to raise snapshot:",n),yield fh(i,n)}})}function fh(i,t,e){return v(this,null,function*(){if(!al(t))throw t;i.L_.add(1),yield cl(i),i.q_.set("Offline"),e||(e=()=>IA(i.localStore)),i.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield e(),i.L_.delete(1),yield Nh(i)}))})}function SA(i,t){return t().catch(e=>fh(i,e,t))}function Fh(i){return v(this,null,function*(){let t=de(i),e=fr(t),n=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Oj(t);)try{let r=yield Sj(t.localStore,n);if(r===null){t.O_.length===0&&e.o_();break}n=r.batchId,Nj(t,r)}catch(r){yield fh(t,r)}AA(t)&&RA(t)})}function Oj(i){return ls(i)&&i.O_.length<10}function Nj(i,t){i.O_.push(t);let e=fr(i);e.r_()&&e.V_&&e.m_(t.mutations)}function AA(i){return ls(i)&&!fr(i).n_()&&i.O_.length>0}function RA(i){fr(i).start()}function Fj(i){return v(this,null,function*(){fr(i).p_()})}function Lj(i){return v(this,null,function*(){let t=fr(i);for(let e of i.O_)t.m_(e.mutations)})}function Vj(i,t,e){return v(this,null,function*(){let n=i.O_.shift(),r=k_.from(n,t,e);yield SA(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),yield Fh(i)})}function Uj(i,t){return v(this,null,function*(){t&&fr(i).V_&&(yield function(n,r){return v(this,null,function*(){if(function(o){return ij(o)&&o!==P.ABORTED}(r.code)){let s=n.O_.shift();fr(n).s_(),yield SA(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Fh(n)}})}(i,t)),AA(i)&&RA(i)})}function MS(i,t){return v(this,null,function*(){let e=de(i);e.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let n=ls(e);e.L_.add(3),yield cl(e),n&&e.q_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),yield Nh(e)})}function jj(i,t){return v(this,null,function*(){let e=de(i);t?(e.L_.delete(2),yield Nh(e)):t||(e.L_.add(2),yield cl(e),e.q_.set("Unknown"))})}function No(i){return i.K_||(i.K_=function(e,n,r){let s=de(e);return s.w_(),new uv(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:kj.bind(null,i),Ro:Dj.bind(null,i),mo:Mj.bind(null,i),d_:Pj.bind(null,i)}),i.B_.push(t=>v(this,null,function*(){t?(i.K_.s_(),Qv(i)?Yv(i):i.q_.set("Unknown")):(yield i.K_.stop(),TA(i))}))),i.K_}function fr(i){return i.U_||(i.U_=function(e,n,r){let s=de(e);return s.w_(),new hv(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Fj.bind(null,i),mo:Uj.bind(null,i),f_:Lj.bind(null,i),g_:Vj.bind(null,i)}),i.B_.push(t=>v(this,null,function*(){t?(i.U_.s_(),yield Fh(i)):(yield i.U_.stop(),i.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}var gv=class i{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){let o=Date.now()+n,a=new i(t,e,o,r,s);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(P.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Xv(i,t){if(Ln("AsyncQueue",`${t}: ${i}`),al(i))return new G(P.UNAVAILABLE,`${t}: ${i}`);throw i}var gh=class i{constructor(t){this.comparator=t?(e,n)=>t(e,n)||J.comparator(e.key,n.key):(e,n)=>J.comparator(e.key,n.key),this.keyedMap=zc(),this.sortedSet=new ut(this.comparator)}static emptySet(t){return new i(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof i)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let n=new i;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}};var _h=class{constructor(){this.W_=new ut(J.comparator)}track(t){let e=t.doc.key,n=this.W_.get(e);n?t.type!==0&&n.type===3?this.W_=this.W_.insert(e,t):t.type===3&&n.type!==1?this.W_=this.W_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.W_=this.W_.remove(e):t.type===1&&n.type===2?this.W_=this.W_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):ie():this.W_=this.W_.insert(e,t)}G_(){let t=[];return this.W_.inorderTraversal((e,n)=>{t.push(n)}),t}},ko=class i{constructor(t,e,n,r,s,o,a,l,d){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(t,e,n,r,s){let o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new i(t,e,gh.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Mh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}};var _v=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}},vv=class{constructor(){this.queries=PS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,n){let r=de(e),s=r.queries;r.queries=PS(),s.forEach((o,a)=>{for(let l of a.j_)l.onError(n)})})(this,new G(P.ABORTED,"Firestore shutting down"))}};function PS(){return new pr(i=>tA(i),Mh)}function xA(i,t){return v(this,null,function*(){let e=de(i),n=3,r=t.query,s=e.queries.get(r);s?!s.H_()&&t.J_()&&(n=2):(s=new _v,n=t.J_()?0:1);try{switch(n){case 0:s.z_=yield e.onListen(r,!0);break;case 1:s.z_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){let a=Xv(o,`Initialization of query '${po(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.j_.push(t),t.Z_(e.onlineState),s.z_&&t.X_(s.z_)&&Zv(e)})}function kA(i,t){return v(this,null,function*(){let e=de(i),n=t.query,r=3,s=e.queries.get(n);if(s){let o=s.j_.indexOf(t);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=t.J_()?0:1:!s.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}})}function Bj(i,t){let e=de(i),n=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let a of o.j_)a.X_(r)&&(n=!0);o.z_=r}}n&&Zv(e)}function zj(i,t,e){let n=de(i),r=n.queries.get(t);if(r)for(let s of r.j_)s.onError(e);n.queries.delete(t)}function Zv(i){i.Y_.forEach(t=>{t.next()})}var bv,OS;(OS=bv||(bv={})).ea="default",OS.Cache="cache";var vh=class{constructor(t,e,n){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){let n=[];for(let r of t.docChanges)r.type!==3&&n.push(r);t=new ko(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;let n=e!=="Offline";return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;let e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=ko.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==bv.Cache}};var bh=class{constructor(t){this.key=t}},yh=class{constructor(t){this.key=t}},yv=class{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Te(),this.mutatedKeys=Te(),this.Aa=iA(t),this.Ra=new gh(this.Aa)}get Va(){return this.Ta}ma(t,e){let n=e?e.fa:new _h,r=e?e.Ra:this.Ra,s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,p)=>{let f=r.get(h),w=Ph(this.query,p)?p:null,C=!!f&&this.mutatedKeys.has(f.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),R=!1;f&&w?f.data.isEqual(w.data)?C!==D&&(n.track({type:3,doc:w}),R=!0):this.ga(f,w)||(n.track({type:2,doc:w}),R=!0,(l&&this.Aa(w,l)>0||d&&this.Aa(w,d)<0)&&(a=!0)):!f&&w?(n.track({type:0,doc:w}),R=!0):f&&!w&&(n.track({type:1,doc:f}),R=!0,(l||d)&&(a=!0)),R&&(w?(o=o.add(w),s=D?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:a,mutatedKeys:s}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){let s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;let o=t.fa.G_();o.sort((h,p)=>function(w,C){let D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return D(w)-D(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(n),r=r!=null&&r;let a=e&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,d=l!==this.Ea;return this.Ea=l,o.length!==0||d?{snapshot:new ko(this.query,t.Ra,s,o,t.mutatedKeys,l===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _h,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];let t=this.da;this.da=Te(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});let e=[];return t.forEach(n=>{this.da.has(n)||e.push(new yh(n))}),this.da.forEach(n=>{t.has(n)||e.push(new bh(n))}),e}ba(t){this.Ta=t.Ts,this.da=Te();let e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},wv=class{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}},Iv=class{constructor(t){this.key=t,this.va=!1}},Ev=class{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new pr(a=>tA(a),Mh),this.Ma=new Map,this.xa=new Set,this.Oa=new ut(J.comparator),this.Na=new Map,this.La=new el,this.Ba={},this.ka=new Map,this.qa=Jc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function $j(i,t,e=!0){return v(this,null,function*(){let n=FA(i),r,s=n.Fa.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield DA(n,t,e,!0),r})}function qj(i,t){return v(this,null,function*(){let e=FA(i);yield DA(e,t,!0,!1)})}function DA(i,t,e,n){return v(this,null,function*(){let r=yield Aj(i.localStore,mn(t)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,e),a;return n&&(a=yield Gj(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&EA(i.remoteStore,r),a})}function Gj(i,t,e,n,r){return v(this,null,function*(){i.Ka=(p,f,w)=>function(D,R,$,ee){return v(this,null,function*(){let Y=R.view.ma($);Y.ns&&(Y=yield DS(D.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,Y)));let me=ee&&ee.targetChanges.get(R.targetId),_t=ee&&ee.targetMismatches.get(R.targetId)!=null,Pe=R.view.applyChanges(Y,D.isPrimaryClient,me,_t);return FS(D,R.targetId,Pe.wa),Pe.snapshot})}(i,p,f,w);let s=yield DS(i.localStore,t,!0),o=new yv(t,s.Ts),a=o.ma(s.documents),l=Xc.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),d=o.applyChanges(a,i.isPrimaryClient,l);FS(i,e,d.wa);let h=new wv(t,e,o);return i.Fa.set(t,h),i.Ma.has(e)?i.Ma.get(e).push(t):i.Ma.set(e,[t]),d.snapshot})}function Hj(i,t,e){return v(this,null,function*(){let n=de(i),r=n.Fa.get(t),s=n.Ma.get(r.targetId);if(s.length>1)return n.Ma.set(r.targetId,s.filter(o=>!Mh(o,t))),void n.Fa.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ov(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&Wv(n.remoteStore,r.targetId),Cv(n,r.targetId)}).catch(ol))):(Cv(n,r.targetId),yield ov(n.localStore,r.targetId,!0))})}function Wj(i,t){return v(this,null,function*(){let e=de(i),n=e.Fa.get(t),r=e.Ma.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),Wv(e.remoteStore,n.targetId))})}function Kj(i,t,e){return v(this,null,function*(){let n=tB(i);try{let r=yield function(o,a){let l=de(o),d=Lt.now(),h=a.reduce((w,C)=>w.add(C.key),Te()),p,f;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=Un(),D=Te();return l.cs.getEntries(w,h).next(R=>{C=R,C.forEach(($,ee)=>{ee.isValidDocument()||(D=D.add($))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,C)).next(R=>{p=R;let $=[];for(let ee of a){let Y=tj(ee,p.get(ee.key).overlayedDocument);Y!=null&&$.push(new _n(ee.key,Y,KS(Y.value.mapValue),pn.exists(!0)))}return l.mutationQueue.addMutationBatch(w,d,$,a)}).next(R=>{f=R;let $=R.applyToLocalDocumentSet(p,D);return l.documentOverlayCache.saveOverlays(w,R.batchId,$)})}).then(()=>({batchId:f.batchId,changes:rA(p)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let d=o.Ba[o.currentUser.toKey()];d||(d=new ut(Le)),d=d.insert(a,l),o.Ba[o.currentUser.toKey()]=d}(n,r.batchId,e),yield ll(n,r.changes),yield Fh(n.remoteStore)}catch(r){let s=Xv(r,"Failed to persist write");e.reject(s)}})}function MA(i,t){return v(this,null,function*(){let e=de(i);try{let n=yield Cj(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.Na.get(s);o&&(Ke(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Ke(o.va):r.removedDocuments.size>0&&(Ke(o.va),o.va=!1))}),yield ll(e,n,t)}catch(n){yield ol(n)}})}function NS(i,t,e){let n=de(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){let r=[];n.Fa.forEach((s,o)=>{let a=o.view.Z_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){let l=de(o);l.onlineState=a;let d=!1;l.queries.forEach((h,p)=>{for(let f of p.j_)f.Z_(a)&&(d=!0)}),d&&Zv(l)}(n.eventManager,t),r.length&&n.Ca.d_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}function Yj(i,t,e){return v(this,null,function*(){let n=de(i);n.sharedClientState.updateQueryState(t,"rejected",e);let r=n.Na.get(t),s=r&&r.key;if(s){let o=new ut(J.comparator);o=o.insert(s,qi.newNoDocument(s,ue.min()));let a=Te().add(s),l=new sh(ue.min(),new Map,new ut(Le),o,a);yield MA(n,l),n.Oa=n.Oa.remove(s),n.Na.delete(t),Jv(n)}else yield ov(n.localStore,t,!1).then(()=>Cv(n,t,e)).catch(ol)})}function Qj(i,t){return v(this,null,function*(){let e=de(i),n=t.batch.batchId;try{let r=yield Ej(e.localStore,t);OA(e,n,null),PA(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),yield ll(e,r)}catch(r){yield ol(r)}})}function Xj(i,t,e){return v(this,null,function*(){let n=de(i);try{let r=yield function(o,a){let l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,a).next(p=>(Ke(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(d,p))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(n.localStore,t);OA(n,t,e),PA(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),yield ll(n,r)}catch(r){yield ol(r)}})}function PA(i,t){(i.ka.get(t)||[]).forEach(e=>{e.resolve()}),i.ka.delete(t)}function OA(i,t,e){let n=de(i),r=n.Ba[n.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.Ba[n.currentUser.toKey()]=r}}function Cv(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(let n of i.Ma.get(t))i.Fa.delete(n),e&&i.Ca.$a(n,e);i.Ma.delete(t),i.isPrimaryClient&&i.La.gr(t).forEach(n=>{i.La.containsKey(n)||NA(i,n)})}function NA(i,t){i.xa.delete(t.path.canonicalString());let e=i.Oa.get(t);e!==null&&(Wv(i.remoteStore,e),i.Oa=i.Oa.remove(t),i.Na.delete(e),Jv(i))}function FS(i,t,e){for(let n of e)n instanceof bh?(i.La.addReference(n.key,t),Zj(i,n)):n instanceof yh?(W("SyncEngine","Document no longer in limbo: "+n.key),i.La.removeReference(n.key,t),i.La.containsKey(n.key)||NA(i,n.key)):ie()}function Zj(i,t){let e=t.key,n=e.path.canonicalString();i.Oa.get(e)||i.xa.has(n)||(W("SyncEngine","New document in limbo: "+e),i.xa.add(n),Jv(i))}function Jv(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){let t=i.xa.values().next().value;i.xa.delete(t);let e=new J(st.fromString(t)),n=i.qa.next();i.Na.set(n,new Iv(e)),i.Oa=i.Oa.insert(e,n),EA(i.remoteStore,new Zc(mn(Dh(e.path)),n,"TargetPurposeLimboResolution",qS.oe))}}function ll(i,t,e){return v(this,null,function*(){let n=de(i),r=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((a,l)=>{o.push(n.Ka(l,t,e).then(d=>{var h;if((d||e)&&n.isPrimaryClient){let p=d?!d.fromCache:(h=e?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(d){r.push(d);let p=iv.Wi(l.targetId,d);s.push(p)}}))}),yield Promise.all(o),n.Ca.d_(r),yield function(l,d){return v(this,null,function*(){let h=de(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(d,f=>N.forEach(f.$i,w=>h.persistence.referenceDelegate.addReference(p,f.targetId,w)).next(()=>N.forEach(f.Ui,w=>h.persistence.referenceDelegate.removeReference(p,f.targetId,w)))))}catch(p){if(!al(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let f=p.targetId;if(!p.fromCache){let w=h.os.get(f),C=w.snapshotVersion,D=w.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(f,D)}}})}(n.localStore,s))})}function Jj(i,t){return v(this,null,function*(){let e=de(i);if(!e.currentUser.isEqual(t)){W("SyncEngine","User change. New user:",t.toKey());let n=yield wA(e.localStore,t);e.currentUser=t,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(P.CANCELLED,o))})}),s.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),yield ll(e,n.hs)}})}function eB(i,t){let e=de(i),n=e.Na.get(t);if(n&&n.va)return Te().add(n.key);{let r=Te(),s=e.Ma.get(t);if(!s)return r;for(let o of s){let a=e.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function FA(i){let t=de(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=MA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eB.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yj.bind(null,t),t.Ca.d_=Bj.bind(null,t.eventManager),t.Ca.$a=zj.bind(null,t.eventManager),t}function tB(i){let t=de(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qj.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xj.bind(null,t),t}var wh=class{constructor(){this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Oh(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Ij(this.persistence,new rv,t.initialUser,this.serializer)}createPersistence(t){return new J_(tv.Zr,this.serializer)}createSharedClientState(t){return new av}terminate(){return v(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Tv=class{initialize(t,e){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>NS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jj.bind(null,this.syncEngine),yield jj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new vv}()}createDatastore(t){let e=Oh(t.databaseInfo.databaseId),n=function(s){return new dv(s)}(t.databaseInfo);return function(s,o,a,l){return new mv(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,a){return new fv(n,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,e=>NS(this.syncEngine,e,0),function(){return hh.D()?new hh:new cv}())}createSyncEngine(t,e){return function(r,s,o,a,l,d,h){let p=new Ev(r,s,o,a,l,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return v(this,null,function*(){var t,e;yield function(r){return v(this,null,function*(){let s=de(r);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield cl(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};var Ih=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):Ln("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var Sv=class{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Dt.UNAUTHENTICATED,this.clientId=Ju.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,s=>v(this,null,function*(){W("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let n=Xv(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}};function i_(i,t){return v(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let e=i.configuration;yield t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(r=>v(this,null,function*(){n.isEqual(r)||(yield wA(t.localStore,r),n=r)})),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t})}function LS(i,t){return v(this,null,function*(){i.asyncQueue.verifyOperationInProgress();let e=yield nB(i);W("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>MS(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>MS(t.remoteStore,r)),i._onlineComponents=t})}function iB(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}function nB(i){return v(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield i_(i,i._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!iB(e))throw e;yo("Error using user provided cache. Falling back to memory cache: "+e),yield i_(i,new wh)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield i_(i,new wh);return i._offlineComponents})}function LA(i){return v(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield LS(i,i._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield LS(i,new Tv))),i._onlineComponents})}function rB(i){return LA(i).then(t=>t.syncEngine)}function Av(i){return v(this,null,function*(){let t=yield LA(i),e=t.eventManager;return e.onListen=$j.bind(null,t.syncEngine),e.onUnlisten=Hj.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=qj.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Wj.bind(null,t.syncEngine),e})}function sB(i,t,e={}){let n=new un;return i.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,l,d){let h=new Ih({next:f=>{o.enqueueAndForget(()=>kA(s,p));let w=f.docs.has(a);!w&&f.fromCache?d.reject(new G(P.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&l&&l.source==="server"?d.reject(new G(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),p=new vh(Dh(a.path),h,{includeMetadataChanges:!0,_a:!0});return xA(s,p)}(yield Av(i),i.asyncQueue,t,e,n)})),n.promise}function VA(i){let t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}var VS=new Map;function UA(i,t,e){if(!e)throw new G(P.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function oB(i,t,e,n){if(t===!0&&n===!0)throw new G(P.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function US(i){if(!J.isDocumentKey(i))throw new G(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function jS(i){if(J.isDocumentKey(i))throw new G(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Lh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":ie()}function Di(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new G(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Lh(i);throw new G(P.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}var Eh=class{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new G(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new G(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}oB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VA((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Do=class{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new G(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eh(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new n_;switch(n.type){case"firstParty":return new a_(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new G(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=VS.get(e);n&&(W("ComponentProvider","Removing Datastore"),VS.delete(e),n.terminate())}(this),Promise.resolve()}};function jA(i,t,e,n={}){var r;let s=(i=Di(i,Do))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=Dt.MOCK_USER;else{a=Ps(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new G(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Dt(d)}i._authCredentials=new r_(new Zu(a,l))}}var Mo=class i{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new i(this.firestore,t,this._query)}},Wt=class i{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new i(this.firestore,t,this._key)}},hr=class i extends Mo{constructor(t,e,n){super(t,e,Dh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Wt(this.firestore,null,new J(t))}withConverter(t){return new i(this.firestore,t,this._path)}};function BA(i,t,...e){if(i=ye(i),UA("collection","path",t),i instanceof Do){let n=st.fromString(t,...e);return jS(n),new hr(i,null,n)}{if(!(i instanceof Wt||i instanceof hr))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(st.fromString(t,...e));return jS(n),new hr(i.firestore,null,n)}}function eb(i,t,...e){if(i=ye(i),arguments.length===1&&(t=Ju.newId()),UA("doc","path",t),i instanceof Do){let n=st.fromString(t,...e);return US(n),new Wt(i,null,new J(n))}{if(!(i instanceof Wt||i instanceof hr))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(st.fromString(t,...e));return US(n),new Wt(i.firestore,i instanceof hr?i.converter:null,new J(n))}}var Rv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new mh(this,"async_queue_retry"),this.Eu=()=>{let e=t_();e&&W("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()};let t=t_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;let e=t_();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});let e=new un;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){return v(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!al(t))throw t;W("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(t){let e=this.au.then(()=>(this.Pu=!0,t().catch(n=>{this.hu=n,this.Pu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw Ln("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.Pu=!1,n))));return this.au=e,e}enqueueAfterDelay(t,e,n){this.du(),this.Tu.indexOf(t)>-1&&(e=0);let r=gv.createAndSchedule(this,t,e,n,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&ie()}verifyOperationInProgress(){}mu(){return v(this,null,function*(){let t;do t=this.au,yield t;while(t!==this.au)})}fu(t){for(let e of this.lu)if(e.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(let e of this.lu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){let e=this.lu.indexOf(t);this.lu.splice(e,1)}};function BS(i){return function(e,n){if(typeof e!="object"||e===null)return!1;let r=e;for(let s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}var vn=class extends Do{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new Rv}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$A(this),this._firestoreClient.terminate()}};function zA(i,t){let e=typeof i=="object"?i:wt(),n=typeof i=="string"?i:t||"(default)",r=yt(e,"firestore").getImmediate({identifier:n});if(!r._initialized){let s=tr("firestore");s&&jA(r,...s)}return r}function tb(i){return i._firestoreClient||$A(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function $A(i){var t,e,n;let r=i._freezeSettings(),s=function(a,l,d,h){return new h_(a,l,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VA(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new Sv(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var tl=class i{constructor(t){this._byteString=t}static fromBase64String(t){try{return new i(Kt.fromBase64String(t))}catch(e){throw new G(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new i(Kt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Po=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new G(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var il=class{constructor(t){this._methodName=t}};var nl=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new G(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new G(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Le(this._lat,t._lat)||Le(this._long,t._long)}};var rl=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,t._values)}};var aB=/^__.*__$/,xv=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new _n(t,this.data,this.fieldMask,e,this.fieldTransforms):new as(t,this.data,e,this.fieldTransforms)}},Ch=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new _n(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function qA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var kv=class i{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new i(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:n,Du:!1});return r.vu(t),r}Cu(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:n,Du:!1});return r.yu(),r}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return Sh(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(t.length===0)throw this.Mu("Document fields must not be empty");if(qA(this.wu)&&aB.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}},Dv=class{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Oh(t)}Nu(t,e,n,r=!1){return new kv({wu:t,methodName:e,Ou:n,path:bi.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Vh(i){let t=i._freezeSettings(),e=Oh(i._databaseId);return new Dv(i._databaseId,!!t.ignoreUndefinedProperties,e)}function GA(i,t,e,n,r,s={}){let o=i.Nu(s.merge||s.mergeFields?2:0,t,e,r);ib("Data must be an object, but it was:",o,n);let a=HA(n,o),l,d;if(s.merge)l=new ki(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let f=Mv(t,p,e);if(!o.contains(f))throw new G(P.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);KA(h,f)||h.push(f)}l=new ki(h),d=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,d=o.fieldTransforms;return new xv(new vi(a),l,d)}var Th=class i extends il{_toFieldTransform(t){if(t.wu!==2)throw t.wu===1?t.Mu(`${this._methodName}() can only appear at the top level of your update data`):t.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof i}};function cB(i,t,e,n){let r=i.Nu(1,t,e);ib("Data must be an object, but it was:",r,n);let s=[],o=vi.empty();cs(n,(l,d)=>{let h=nb(t,l,e);d=ye(d);let p=r.Cu(h);if(d instanceof Th)s.push(h);else{let f=dl(d,p);f!=null&&(s.push(h),o.set(h,f))}});let a=new ki(s);return new Ch(o,a,r.fieldTransforms)}function lB(i,t,e,n,r,s){let o=i.Nu(1,t,e),a=[Mv(t,n,e)],l=[r];if(s.length%2!=0)throw new G(P.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Mv(t,s[f])),l.push(s[f+1]);let d=[],h=vi.empty();for(let f=a.length-1;f>=0;--f)if(!KA(d,a[f])){let w=a[f],C=l[f];C=ye(C);let D=o.Cu(w);if(C instanceof Th)d.push(w);else{let R=dl(C,D);R!=null&&(d.push(w),h.set(w,R))}}let p=new ki(d);return new Ch(h,p,o.fieldTransforms)}function dB(i,t,e,n=!1){return dl(e,i.Nu(n?4:3,t))}function dl(i,t){if(WA(i=ye(i)))return ib("Unsupported field value:",t,i),HA(i,t);if(i instanceof il)return function(n,r){if(!qA(r.wu))throw r.Mu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${n._methodName}() is not currently supported inside arrays`);let s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.Du&&t.wu!==4)throw t.Mu("Nested arrays are not supported");return function(n,r){let s=[],o=0;for(let a of n){let l=dl(a,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=ye(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return QU(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let s=Lt.fromDate(n);return{timestampValue:lh(r.serializer,s)}}if(n instanceof Lt){let s=new Lt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:lh(r.serializer,s)}}if(n instanceof nl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof tl)return{bytesValue:pA(r.serializer,n._byteString)};if(n instanceof Wt){let s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hv(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof rl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return Gv(a.serializer,l)})}}}}}}(n,r);throw r.Mu(`Unsupported field value: ${Lh(n)}`)}(i,t)}function HA(i,t){let e={};return GS(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cs(i,(n,r)=>{let s=dl(r,t.bu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function WA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Lt||i instanceof nl||i instanceof tl||i instanceof Wt||i instanceof il||i instanceof rl)}function ib(i,t,e){if(!WA(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let n=Lh(e);throw n==="an object"?t.Mu(i+" a custom object"):t.Mu(i+" "+n)}}function Mv(i,t,e){if((t=ye(t))instanceof Po)return t._internalPath;if(typeof t=="string")return nb(i,t);throw Sh("Field path arguments must be of type string or ",i,!1,void 0,e)}var uB=new RegExp("[~\\*/\\[\\]]");function nb(i,t,e){if(t.search(uB)>=0)throw Sh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new Po(...t.split("."))._internalPath}catch{throw Sh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Sh(i,t,e,n,r){let s=n&&!n.isEmpty(),o=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new G(P.INVALID_ARGUMENT,a+i+l)}function KA(i,t){return i.some(e=>e.isEqual(t))}var Ah=class{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Pv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(YA("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Pv=class extends Ah{data(){return super.data()}};function YA(i,t){return typeof t=="string"?nb(i,t):t instanceof Po?t._internalPath:t._delegate._internalPath}function hB(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new G(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sl=class{},Ov=class extends sl{};function QA(i,t,...e){let n=[];t instanceof sl&&n.push(t),n=n.concat(e),function(s){let o=s.filter(l=>l instanceof Fv).length,a=s.filter(l=>l instanceof Nv).length;if(o>1||o>0&&a>0)throw new G(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let r of n)i=r._apply(i);return i}var Nv=class i extends Ov{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new i(t,e,n)}_apply(t){let e=this._parse(t);return XA(t._query,e),new Mo(t.firestore,t.converter,T_(t._query,e))}_parse(t){let e=Vh(t.firestore);return function(s,o,a,l,d,h,p){let f;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$S(p,h);let w=[];for(let C of p)w.push(zS(l,s,C));f={arrayValue:{values:w}}}else f=zS(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$S(p,h),f=dB(a,o,p,h==="in"||h==="not-in");return Tt.create(d,h,f)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};var Fv=class i extends sl{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new i(t,e)}_parse(t){let e=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return e.length===1?e[0]:Gi.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let l of a)XA(o,l),o=T_(o,l)}(t._query,e),new Mo(t.firestore,t.converter,T_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function zS(i,t,e){if(typeof(e=ye(e))=="string"){if(e==="")throw new G(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eA(t)&&e.indexOf("/")!==-1)throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let n=t.path.child(st.fromString(e));if(!J.isDocumentKey(n))throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return pS(i,new J(n))}if(e instanceof Wt)return pS(i,e._key);throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lh(e)}.`)}function $S(i,t){if(!Array.isArray(i)||i.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function XA(i,t){let e=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var Lv=class{convertValue(t,e="none"){switch(ns(t)){case 0:return null;case 1:return t.booleanValue;case 2:return nt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(mr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ie()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let n={};return cs(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertVectorValue(t){var e,n,r;let s=(r=(n=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(o=>nt(o.doubleValue));return new rl(s)}convertGeoPoint(t){return new nl(nt(t.latitude),nt(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":let n=Bv(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Kc(t));default:return null}}convertTimestamp(t){let e=Vn(t);return new Lt(e.seconds,e.nanos)}convertDocumentKey(t,e){let n=st.fromString(t);Ke(yA(n));let r=new nh(n.get(1),n.get(3)),s=new J(n.popFirst(5));return r.isEqual(e)||Ln(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function ZA(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}var es=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Rh=class extends Ah{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new bo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let n=this._document.data.field(YA("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}},bo=class extends Rh{data(t={}){return super.data(t)}},Vv=class{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new es(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new bo(this._firestore,this._userDataWriter,n.key,n,new es(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new G(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let l=new bo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new es(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new bo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new es(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:mB(a.type),doc:l,oldIndex:d,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function mB(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function JA(i){i=Di(i,Wt);let t=Di(i.firestore,vn);return sB(tb(t),i._key).then(e=>sR(t,i,e))}var xh=class extends Lv{constructor(t){super(),this.firestore=t}convertBytes(t){return new tl(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wt(this.firestore,null,e)}};function eR(i,t,e){i=Di(i,Wt);let n=Di(i.firestore,vn),r=ZA(i.converter,t,e);return Uh(n,[GA(Vh(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,pn.none())])}function tR(i,t,e,...n){i=Di(i,Wt);let r=Di(i.firestore,vn),s=Vh(r),o;return o=typeof(t=ye(t))=="string"||t instanceof Po?lB(s,"updateDoc",i._key,t,e,n):cB(s,"updateDoc",i._key,t),Uh(r,[o.toMutation(i._key,pn.exists(!0))])}function iR(i){return Uh(Di(i.firestore,vn),[new Qc(i._key,pn.none())])}function nR(i,t){let e=Di(i.firestore,vn),n=eb(i),r=ZA(i.converter,t);return Uh(e,[GA(Vh(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,pn.exists(!1))]).then(()=>n)}function rR(i,...t){var e,n,r;i=ye(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||BS(t[o])||(s=t[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(BS(t[o])){let p=t[o];t[o]=(e=p.next)===null||e===void 0?void 0:e.bind(p),t[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),t[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,d,h;if(i instanceof Wt)d=Di(i.firestore,vn),h=Dh(i._key.path),l={next:p=>{t[o]&&t[o](sR(d,i,p))},error:t[o+1],complete:t[o+2]};else{let p=Di(i,Mo);d=Di(p.firestore,vn),h=p._query;let f=new xh(d);l={next:w=>{t[o]&&t[o](new Vv(d,f,p,w))},error:t[o+1],complete:t[o+2]},hB(i._query)}return function(f,w,C,D){let R=new Ih(D),$=new vh(w,R,C);return f.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return xA(yield Av(f),$)})),()=>{R.za(),f.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return kA(yield Av(f),$)}))}}(tb(d),h,a,l)}function Uh(i,t){return function(n,r){let s=new un;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Kj(yield rB(n),r,s)})),s.promise}(tb(i),t)}function sR(i,t,e){let n=e.docs.get(t._key),r=new xh(i);return new Rh(i,r,t._key,n,new es(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Oo=r})(li),pt(new mt("firestore",(n,{instanceIdentifier:r,options:s})=>{let o=n.getProvider("app").getImmediate(),a=new vn(new s_(n.getProvider("auth-internal")),new l_(n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nh(d.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),K(dS,"4.7.2",t),K(dS,"4.7.2","esm2017")})();var Hi=class{constructor(t){return t}},oR="firestore",rb=class{constructor(){return gt(oR)}};var sb=new F("angularfire2.firestore-instances");function pB(i,t){let e=It(oR,i,t);return e&&new Hi(e)}function fB(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new Hi(n)}}var aR={provide:rb,deps:[[new ne,sb]]},cR={provide:Hi,useFactory:pB,deps:[[new ne,sb],Je]},jh=(()=>{class i{constructor(){K("angularfire",Xe.full,"fst")}static \u0275fac=function(n){return new(n||i)};static \u0275mod=X({type:i});static \u0275inj=Q({providers:[cR,aR]})}return i})();function lR(i,...t){return K("angularfire",Xe.full,"fst"),We([cR,aR,{provide:sb,useFactory:fB(i),multi:!0,deps:[V,ve,dt,rt,[new ne,$i],[new ne,di],...t]}])}var dR=xe(nR,!0);var ds=xe(BA,!0);var uR=xe(iR,!0);var Bh=xe(eb,!0);var hR=xe(JA,!0);var mR=xe(zA,!0);var zh=xe(rR,!0);var $h=xe(QA,!0);var pR=xe(eR,!0);var fR=xe(tR,!0);function gB(i,t){if(i&1&&(j(0,"mat-option",7),ze(1),z()),i&2){let e=t.$implicit;se("value",e.value),H(),Sr(" ",e.viewValue," ")}}function _B(i,t){if(i&1&&(j(0,"div",8)(1,"div",9)(2,"p",10),ze(3),z()(),oe(4,"mat-progress-bar",11),z()),i&2){let e=t.$implicit;H(3),Ti(e.chunk),H(),se("mode",(e.point===10,"buffer"))("value",e.point*10)("matTooltip",e.point.toString())("color",e.type==="F"?"primary":e.type==="B"?"accent":"warn")}}var vB=Rr("listAnimation",[er("* <=> *",[Ma(":enter",[Vi({opacity:0}),uI("20ms",Jn("600ms ease-out",Vi({opacity:1})))],{optional:!0}),Ma(":leave",Jn("200ms",Vi({opacity:0})),{optional:!0})])]),qh=class i{constructor(t){this.firestore=t}visibility=!1;chunks=[];categories=[{value:"All",viewValue:"All"},{value:"F",viewValue:"Frontend"},{value:"B",viewValue:"Backend"},{value:"Dev",viewValue:"DevOps"}];set selectedCategory(t){this.getChunks(t==="All"?"":t)}ngOnInit(){this.getChunks()}getChunks(t=""){this.chunks.length=0;let e=ds(this.firestore,"chunks"),n=$h(e);zh(n,r=>{let s=[];r.forEach(o=>{let a=o.data(),l={$key:o.id,chunk:a.chunk,point:a.point,type:a.type};s.push(l)}),this.chunks=s.filter(o=>t?o.type===t:!0)})}reorder(){this.chunks=this.chunks.sort((t,e)=>{var n=t.point-e.point<0;return n?1:0})}shuffle(){this.chunks=this.shufflestuff(this.chunks)}shufflestuff(t){let e=t==null?0:t.length;if(!e)return[];let n=-1,r=e-1,s=this.copyArray(t);for(;++n<e;){let o=n+Math.floor(Math.random()*(r-n+1)),a=s[o];s[o]=s[n],s[n]=a}return s}copyArray(t,e){let n=-1,r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e}static \u0275fac=function(e){return new(e||i)(x(Hi))};static \u0275cmp=_e({type:i,selectors:[["app-tech"]],standalone:!0,features:[be],decls:14,vars:4,consts:[[1,"tech-header"],[1,"action-btns"],["matNativeControl","","name","category",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center","font-size","12px"],[1,"tech-bar-list",3,"click"],["class","tech-bar-item","transition-group-item","",4,"ngFor","ngForOf"],[3,"value"],["transition-group-item","",1,"tech-bar-item"],[1,"chunk-word"],[1,"chunk-name"],[1,"chunk-bar",3,"mode","value","matTooltip","color"]],template:function(e,n){e&1&&(j(0,"div")(1,"div",0)(2,"h1"),ze(3,"Skills"),z(),j(4,"div",1)(5,"mat-form-field")(6,"mat-label"),ze(7,"Fields"),z(),j(8,"mat-select",2),Q0("ngModelChange",function(s){return Y0(n.selectedCategory,s)||(n.selectedCategory=s),s}),Ie(9,gB,2,2,"mat-option",3),z()()()(),j(10,"div",4),ze(11," using Angular v18, data hosted by Firebase Firestore "),z(),j(12,"div",5),Ce("click",function(){return n.shuffle()}),Ie(13,_B,5,5,"div",6),z()()),e&2&&(H(8),K0("ngModel",n.selectedCategory),H(),se("ngForOf",n.categories),H(3),se("@listAnimation",n.chunks),H(),se("ngForOf",n.chunks))},dependencies:[jh,ti,Ds,Ys,Zd,df,ar,_u,so,Eu,Cu,Iu,io],styles:[".tech-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px}.tech-bar-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin:auto;padding:24px;width:100%;max-width:640px}@media (max-width: 600px){.tech-bar-list[_ngcontent-%COMP%]{padding:16px}}.tech-bar-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin:4px 16px}@media (max-width: 600px){.tech-bar-item[_ngcontent-%COMP%]{width:100%}}.chunk-word[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chunk-word[_ngcontent-%COMP%]   .chunk-name[_ngcontent-%COMP%]{margin:0}.chunk-bar[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}@media (max-width: 600px){.chunk-bar[_ngcontent-%COMP%]{height:24px;width:100%}}.action-btns[_ngcontent-%COMP%]{display:flex}.action-btns[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{max-width:120px;padding:4px;margin-bottom:16px;margin-right:8px}.chip-list[_ngcontent-%COMP%]{margin-right:16px}"],data:{animation:[vB]}})};var Gh=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_e({type:i,selectors:[["app-miss"]],standalone:!0,features:[be],decls:2,vars:0,consts:[[1,"title"]],template:function(e,n){e&1&&(j(0,"h1",0),ze(1,'404: *ngIf="isExisting"'),z())},styles:[".title[_ngcontent-%COMP%]{font-size:3rem;margin:80px auto;text-align:center}@media (max-width: 600px){.title[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 300px){.title[_ngcontent-%COMP%]{font-size:1rem}}"]})};var gr=class i{_isOk=!1;get isOk(){return this._isOk}setIsOk(t){this._isOk=t}static \u0275fac=function(e){return new(e||i)};static \u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})};var Fo=class i{constructor(t){this.statusService=t}inputSequence="";targetSequence="sisyphus";handleKeyboardEvent(t){this.inputSequence+=t.key,console.log(t.key),this.inputSequence===this.targetSequence&&this.onAdminEntered(),this.inputSequence.length>=this.targetSequence.length&&(this.inputSequence="")}onAdminEntered(){this.statusService.setIsOk(!0)}static \u0275fac=function(e){return new(e||i)(x(gr))};static \u0275cmp=_e({type:i,selectors:[["app-keyboard-listener"]],hostBindings:function(e,n){e&1&&Ce("keydown",function(s){return n.handleKeyboardEvent(s)},!1,U0)},standalone:!0,features:[be],decls:0,vars:0,template:function(e,n){},encapsulation:2})};var Lo=class i{constructor(t){this.firestore=t}getChunks(){return ds(this.firestore,"chunks")}addChunk(t){return dR(ds(this.firestore,"chunks"),t)}checkAndAddChunk(t){return v(this,null,function*(){let e=Bh(this.firestore,"chunks",t.chunk);if((yield hR(e)).exists())throw new Error("Document ID already exists");return pR(e,t)})}updateChunk(t){let r=t,{$key:e}=r,n=E0(r,["$key"]);return fR(Bh(this.firestore,"chunks"),n)}deleteChunk(t){return uR(Bh(this.firestore,"chunks",t))}static \u0275fac=function(e){return new(e||i)(M(Hi))};static \u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})};function bB(i,t){if(i&1&&(j(0,"mat-button-toggle",8),ze(1),z()),i&2){let e=t.$implicit;se("value",e),H(),Sr(" ",e," ")}}function yB(i,t){if(i&1&&(j(0,"mat-option",8),ze(1),z()),i&2){let e=t.$implicit;se("value",e),H(),Sr(" ",e," ")}}var Hh=class i{constructor(t,e,n){this.fb=t;this.chunkService=e;this.adminService=n}chunkForm;types=["F","B","Dev"];points=[1,2,3,4,5,6,7,8,9,10];ngOnInit(){this.chunkForm=this.fb.group({chunk:["",sn.required],type:["",sn.required],point:[0,sn.required]})}onSubmit(){if(this.chunkForm.valid&&this.adminService.isOk){let t=this.chunkForm.value;console.log(t),this.chunkService.checkAndAddChunk(t).then(()=>{console.log("Chunk added successfully"),this.chunkForm.reset()}).catch(e=>console.error("Error adding chunk: ",e))}}static \u0275fac=function(e){return new(e||i)(x(QE),x(Lo),x(gr))};static \u0275cmp=_e({type:i,selectors:[["app-add-skill"]],standalone:!0,features:[be],decls:15,vars:4,consts:[[1,"form",3,"ngSubmit","formGroup"],["appearance","fill",1,"full"],["matInput","","formControlName","chunk","required",""],["formControlName","type","aria-label","Type",1,"toggleBtns"],[3,"value",4,"ngFor","ngForOf"],[1,"full"],["matNativeControl","","formControlName","point","required",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(e,n){e&1&&(j(0,"form",0),Ce("ngSubmit",function(){return n.onSubmit()}),j(1,"mat-form-field",1)(2,"mat-label"),ze(3,"Chunk"),z(),oe(4,"input",2),z(),j(5,"mat-button-toggle-group",3),Ie(6,bB,2,2,"mat-button-toggle",4),z(),j(7,"mat-form-field",5)(8,"mat-label"),ze(9,"Point"),z(),j(10,"mat-select",6),Ie(11,yB,2,2,"mat-option",4),z()(),j(12,"button",7),ze(13," Submit "),z()(),oe(14,"app-keyboard-listener")),e&2&&(se("formGroup",n.chunkForm),H(6),se("ngForOf",n.types),H(5),se("ngForOf",n.points),H(),se("disabled",!n.chunkForm.valid))},dependencies:[ti,Ds,Ys,WE,Qd,Zd,VE,hf,ar,mu,$C,_u,so,Iu,io,ro,Uf,XE,Vr,uf,Fo],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:400px;margin:120px auto}.toggleBtns[_ngcontent-%COMP%]{margin-bottom:16px}.full[_ngcontent-%COMP%]{width:100%}"]})};function wB(i,t){if(i&1){let e=pi();j(0,"div",2)(1,"p",3),ze(2),z(),oe(3,"mat-progress-bar",4),j(4,"button",5),Ce("click",function(){let r=Rt(e).$implicit,s=Qe();return xt(s.delete(r.$key))}),ze(5,"delete"),z()()}if(i&2){let e=t.$implicit;H(2),Ti(e.chunk+"("+e.$key+")"),H(),se("mode",(e.point===10,"buffer"))("value",e.point*10)("matTooltip",e.point.toString())("color",e.type==="F"?"primary":e.type==="B"?"accent":"warn")}}var Wh=class i{constructor(t,e,n){this.firestore=t;this.chunkService=e;this.statusService=n}chunks=[];ngOnInit(){this.getChunks()}getChunks(t=""){this.chunks.length=0;let e=ds(this.firestore,"chunks"),n=$h(e);zh(n,r=>{let s=[];r.forEach(o=>{let a=o.data(),l={$key:o.id,chunk:a.chunk,point:a.point,type:a.type};s.push(l)}),this.chunks=s.filter(o=>t?o.type===t:!0)})}delete(t=""){this.statusService.isOk&&this.chunkService.deleteChunk(t)}static \u0275fac=function(e){return new(e||i)(x(Hi),x(Lo),x(gr))};static \u0275cmp=_e({type:i,selectors:[["app-delete-skill"]],standalone:!0,features:[be],decls:3,vars:2,consts:[[1,"list"],["class","chunk","transition-group-item","",4,"ngFor","ngForOf"],["transition-group-item","",1,"chunk"],[1,"chunk-name"],[1,"chunk-bar",3,"mode","value","matTooltip","color"],["mat-raised-button","",3,"click"]],template:function(e,n){e&1&&(j(0,"div",0),Ie(1,wB,6,5,"div",1),oe(2,"app-keyboard-listener"),z()),e&2&&(se("@listAnimation",n.chunks),H(),se("ngForOf",n.chunks))},dependencies:[jh,ti,Ds,Ys,ar,mu,Eu,Cu,Fo],styles:[".list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:600px;margin:120px auto}"]})};var _R=[{path:"",component:qh},{path:"sub",component:jd},{path:"write",component:Hh},{path:"delete",component:Wh},{component:Gh,path:"**"}];var Kh="analytics",IB="firebase_id",EB="origin",CB=60*1e3,TB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pb="https://www.googletagmanager.com/gtag/js";var ii=new nn("@firebase/analytics");var SB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yi=new en("analytics","Analytics",SB);function AB(i){if(!i.startsWith(pb)){let t=yi.create("invalid-gtag-resource",{gtagURL:i});return ii.warn(t.message),""}return i}function CR(i){return Promise.all(i.map(t=>t.catch(e=>e)))}function RB(i,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(i,t)),e}function xB(i,t){let e=RB("firebase-js-sdk-policy",{createScriptURL:AB}),n=document.createElement("script"),r=`${pb}?l=${i}&id=${t}`;n.src=e?e?.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function kB(i){let t=[];return Array.isArray(window[i])?t=window[i]:window[i]=t,t}function DB(i,t,e,n,r,s){return v(this,null,function*(){let o=n[r];try{if(o)yield t[o];else{let l=(yield CR(e)).find(d=>d.measurementId===r);l&&(yield t[l.appId])}}catch(a){ii.error(a)}i("config",r,s)})}function MB(i,t,e,n,r){return v(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let a=yield CR(e);for(let l of o){let d=a.find(p=>p.measurementId===l),h=d&&t[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(t)),yield Promise.all(s),i("event",n,r||{})}catch(s){ii.error(s)}})}function PB(i,t,e,n){function r(s,...o){return v(this,null,function*(){try{if(s==="event"){let[a,l]=o;yield MB(i,t,e,a,l)}else if(s==="config"){let[a,l]=o;yield DB(i,t,e,n,a,l)}else if(s==="consent"){let[a,l]=o;i("consent",a,l)}else if(s==="get"){let[a,l,d]=o;i("get",a,l,d)}else if(s==="set"){let[a]=o;i("set",a)}else i(s,...o)}catch(a){ii.error(a)}})}return r}function OB(i,t,e,n,r){let s=function(...o){window[n].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=PB(s,i,t,e),{gtagCore:s,wrappedGtag:window[r]}}function NB(i){let t=window.document.getElementsByTagName("script");for(let e of Object.values(t))if(e.src&&e.src.includes(pb)&&e.src.includes(i))return e;return null}var FB=30,LB=1e3,lb=class{constructor(t={},e=LB){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},TR=new lb;function VB(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}function UB(i){return v(this,null,function*(){var t;let{appId:e,apiKey:n}=i,r={method:"GET",headers:VB(n)},s=TB.replace("{app-id}",e),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{let l=yield o.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw yi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function jB(n){return v(this,arguments,function*(i,t=TR,e){let{appId:r,apiKey:s,measurementId:o}=i.options;if(!r)throw yi.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw yi.create("no-api-key")}let a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new db;return setTimeout(()=>v(this,null,function*(){l.abort()}),e!==void 0?e:CB),SR({appId:r,apiKey:s,measurementId:o},a,l,t)})}function SR(s,o,a){return v(this,arguments,function*(i,{throttleEndTimeMillis:t,backoffCount:e},n,r=TR){var l;let{appId:d,measurementId:h}=i;try{yield BB(n,t)}catch(p){if(h)return ii.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:d,measurementId:h};throw p}try{let p=yield UB(i);return r.deleteThrottleMetadata(d),p}catch(p){let f=p;if(!zB(f)){if(r.deleteThrottleMetadata(d),h)return ii.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:d,measurementId:h};throw p}let w=Number((l=f?.customData)===null||l===void 0?void 0:l.httpStatus)===503?ja(e,r.intervalMillis,FB):ja(e,r.intervalMillis),C={throttleEndTimeMillis:Date.now()+w,backoffCount:e+1};return r.setThrottleMetadata(d,C),ii.debug(`Calling attemptFetch again in ${w} millis`),SR(i,C,n,r)}})}function BB(i,t){return new Promise((e,n)=>{let r=Math.max(t-Date.now(),0),s=setTimeout(e,r);i.addEventListener(()=>{clearTimeout(s),n(yi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function zB(i){if(!(i instanceof ci)||!i.customData)return!1;let t=Number(i.customData.httpStatus);return t===429||t===500||t===503||t===504}var db=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var ub;function $B(i,t,e,n,r){return v(this,null,function*(){if(r&&r.global){i("event",e,n);return}else{let s=yield t,o=Object.assign(Object.assign({},n),{send_to:s});i("event",e,o)}})}function qB(i,t,e,n){return v(this,null,function*(){if(n&&n.global)return i("set",{user_id:e}),Promise.resolve();{let r=yield t;i("config",r,{update:!0,user_id:e})}})}var hb;function GB(i){hb=i}function HB(i){ub=i}function WB(){return v(this,null,function*(){if(xn())try{yield xr()}catch(i){return ii.warn(yi.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return ii.warn(yi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function KB(i,t,e,n,r,s,o){return v(this,null,function*(){var a;let l=jB(i);l.then(w=>{e[w.measurementId]=w.appId,i.options.measurementId&&w.measurementId!==i.options.measurementId&&ii.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>ii.error(w)),t.push(l);let d=WB().then(w=>{if(w)return n.getId()}),[h,p]=yield Promise.all([l,d]);NB(s)||xB(s,h.measurementId),hb&&(r("consent","default",hb),GB(void 0)),r("js",new Date);let f=(a=o?.config)!==null&&a!==void 0?a:{};return f[EB]="firebase",f.update=!0,p!=null&&(f[IB]=p),r("config",h.measurementId,f),ub&&(r("set",ub),HB(void 0)),h.measurementId})}var mb=class{constructor(t){this.app=t}_delete(){return delete Vo[this.app.options.appId],Promise.resolve()}},Vo={},vR=[],bR={},cb="dataLayer",YB="gtag",yR,fb,wR=!1;function QB(){let i=[];if(Oa()&&i.push("This is a browser extension environment."),Na()||i.push("Cookies are not available."),i.length>0){let t=i.map((n,r)=>`(${r+1}) ${n}`).join(" "),e=yi.create("invalid-analytics-context",{errorInfo:t});ii.warn(e.message)}}function XB(i,t,e){QB();let n=i.options.appId;if(!n)throw yi.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)ii.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yi.create("no-api-key");if(Vo[n]!=null)throw yi.create("already-exists",{id:n});if(!wR){kB(cb);let{wrappedGtag:s,gtagCore:o}=OB(Vo,vR,bR,cb,YB);fb=s,yR=o,wR=!0}return Vo[n]=KB(i,vR,bR,t,yR,cb,e),new mb(i)}function AR(i=wt()){i=ye(i);let t=yt(i,Kh);return t.isInitialized()?t.getImmediate():RR(i)}function RR(i,t={}){let e=yt(i,Kh);if(e.isInitialized()){let r=e.getImmediate();if(Va(t,e.getOptions()))return r;throw yi.create("already-initialized")}return e.initialize({options:t})}function xR(){return v(this,null,function*(){if(Oa()||!Na()||!xn())return!1;try{return yield xr()}catch{return!1}})}function kR(i,t,e){i=ye(i),qB(fb,Vo[i.app.options.appId],t,e).catch(n=>ii.error(n))}function gb(i,t,e,n){i=ye(i),$B(fb,Vo[i.app.options.appId],t,e,n).catch(r=>ii.error(r))}var IR="@firebase/analytics",ER="0.10.8";function ZB(){pt(new mt(Kh,(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return XB(n,r,e)},"PUBLIC")),pt(new mt("analytics-internal",i,"PRIVATE")),K(IR,ER),K(IR,ER,"esm2017");function i(t){try{let e=t.getProvider(Kh).getImmediate();return{logEvent:(n,r,s)=>gb(e,n,r,s)}}catch(e){throw yi.create("interop-component-reg-failed",{reason:e})}}}ZB();var us=class{constructor(t){return t}},PR="analytics",vb=class{constructor(){return gt(PR)}};var bb="__angularfire_symbol__analyticsIsSupportedValue",OR="__angularfire_symbol__analyticsIsSupported";globalThis[OR]||=xR().then(i=>globalThis[bb]=i).catch(()=>globalThis[bb]=!1);var Yh={async:()=>globalThis[OR],sync:()=>{let i=globalThis[bb];if(i===void 0)throw new Error(lo("Analytics"));return i}},NR=Yh.async,FR=xe(AR,!0);var JB=xe(gb,!0);var e2=xe(kR,!0);var wb=(()=>{class i{initialized;disposables=[];constructor(e,n,r){K("angularfire",Xe.full,"user-tracking");let s;this.initialized=n.runOutsideAngular(()=>new Promise(o=>{s=o})),NR().then(()=>{let o=r.get(us);o?this.disposables=[oS(e).subscribe(a=>{e2(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(e=>e.unsubscribe())}static \u0275fac=function(n){return new(n||i)(M(Xr),M(V),M(ve))};static \u0275prov=q({token:i,factory:i.\u0275fac})}return i})(),t2="firebase_event_origin",i2="firebase_previous_class",n2="firebase_previous_id",r2="firebase_previous_screen",s2="firebase_screen_class",DR="firebase_screen_id",o2="firebase_screen",yb="outlet",a2="page_path",c2="page_title",ul="screen_class",MR="screen_name",l2="screen_view",d2="auto",u2="#",h2=Math.floor(Math.random()*(2**32-1))-2**31,_b={},m2=i=>{let t=[i[ul],i[yb]].join(u2);if(_b.hasOwnProperty(t))return _b[t];{let e=h2++;return _b[t]=e,e}},p2=(i,t,e)=>i.events.pipe(vt(r=>r instanceof ic)).pipe(Ot(r=>{let o=i.parseUrl(i.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",a=i.routerState.root.children.map(f=>f).find(f=>f.outlet===r.snapshot.outlet);if(!a)return Z(null);let l=a;for(;l.firstChild;)l=l.firstChild;let d=l.pathFromRoot.map(f=>f.routeConfig?.path).filter(f=>f).join("/")||"/",h={[MR]:d,[a2]:`/${o}`,[t2]:d2,[o2]:d,[yb]:r.snapshot.outlet};t&&(h[c2]=t.getTitle());let p=a.component;if(p){if(p===Yp){let f=r.snapshot;for(;f.firstChild;)f=f.firstChild;p=f.component}}else p=r.snapshot.component;if(typeof p=="string")return Z(Fe(O({},h),{[ul]:p}));if(p){let f=e.resolveComponentFactory(p);return Z(Fe(O({},h),{[ul]:f.selector}))}return Z(null)}),vt(r=>!!r),pe(r=>O({[s2]:r[ul],[DR]:m2(r)},r)),k0(r=>r[yb]),oi(r=>r.pipe(Er((s,o)=>JSON.stringify(s)===JSON.stringify(o)),Xi(void 0),Zm(),pe(([s,o])=>s?O({[i2]:s[ul],[r2]:s[MR],[n2]:s[DR]},o):o)))),LR=(()=>{class i{disposable;constructor(e,n,r,s,o,a){K("angularfire",Xe.full,"screen-tracking"),NR().then(()=>{let l=a.get(us);!e||!l||s.runOutsideAngular(()=>{this.disposable=p2(e,n,r).pipe(Ot(d=>v(this,null,function*(){return o&&(yield o.initialized),JB(l,l2,d)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(n){return new(n||i)(M(Ud,8),M(Id,8),M(xa),M(V),M(wb,8),M(ve))};static \u0275prov=q({token:i,factory:i.\u0275fac})}return i})(),Ib=new F("angularfire2.analytics-instances");function f2(i,t){if(!Yh.sync())return null;let e=It(PR,i,t);return e&&new us(e)}function g2(i){return(t,e)=>{if(!Yh.sync())return null;let n=t.runOutsideAngular(()=>i(e));return new us(n)}}var _2={provide:vb,deps:[[new ne,Ib]]},v2={provide:us,useFactory:f2,deps:[[new ne,Ib],Je]};function VR(i,...t){return K("angularfire",Xe.full,"analytics"),We([v2,_2,{provide:Ar,useValue:Yh.async,multi:!0},{provide:Ib,useFactory:g2(i),multi:!0,deps:[V,ve,dt,rt,...t]}])}var UR="@firebase/database",jR="1.0.8";var yy="";function b2(i){yy=i}var kb=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),kt(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:gd(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Db=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return tn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var vx=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new kb(t)}}catch{}return new Db},ms=vx("localStorage"),Mb=vx("sessionStorage");var zo=new nn("@firebase/database"),y2=function(){let i=1;return function(){return i++}}(),bx=function(i){let t=TI(i),e=new II;e.update(t);let n=e.digest();return hI.encodeByteArray(n)},Cl=function(...i){let t="";for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=Cl.apply(null,n):typeof n=="object"?t+=kt(n):t+=n,t+=" "}return t},ps=null,BR=!0,w2=function(i,t){B(!t||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(zo.logLevel=qt.VERBOSE,ps=zo.log.bind(zo),t&&Mb.set("logging_enabled",!0)):typeof i=="function"?ps=i:(ps=null,Mb.remove("logging_enabled"))},Yt=function(...i){if(BR===!0&&(BR=!1,ps===null&&Mb.get("logging_enabled")===!0&&w2(!0)),ps){let t=Cl.apply(null,i);ps(t)}},Tl=function(i){return function(...t){Yt(i,...t)}},Pb=function(...i){let t="FIREBASE INTERNAL ERROR: "+Cl(...i);zo.error(t)},Bn=function(...i){let t=`FIREBASE FATAL ERROR: ${Cl(...i)}`;throw zo.error(t),new Error(t)},wi=function(...i){let t="FIREBASE WARNING: "+Cl(...i);zo.warn(t)},I2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&wi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yx=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},E2=function(i){if(Ji()||document.readyState==="complete")i();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},qo="[MIN_NAME]",fs="[MAX_NAME]",Xo=function(i,t){if(i===t)return 0;if(i===qo||t===fs)return-1;if(t===qo||i===fs)return 1;{let e=zR(i),n=zR(t);return e!==null?n!==null?e-n===0?i.length-t.length:e-n:-1:n!==null?1:i<t?-1:1}},C2=function(i,t){return i===t?0:i<t?-1:1},hl=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+kt(t))},wy=function(i){if(typeof i!="object"||i===null)return kt(i);let t=[];for(let n in i)t.push(n);t.sort();let e="{";for(let n=0;n<t.length;n++)n!==0&&(e+=","),e+=kt(t[n]),e+=":",e+=wy(i[t[n]]);return e+="}",e},wx=function(i,t){let e=i.length;if(e<=t)return[i];let n=[];for(let r=0;r<e;r+=t)r+t>e?n.push(i.substring(r,e)):n.push(i.substring(r,r+t));return n};function Oi(i,t){for(let e in i)i.hasOwnProperty(e)&&t(e,i[e])}var Ix=function(i){B(!yx(i),"Invalid JSON number");let t=11,e=52,n=(1<<t-1)-1,r,s,o,a,l;i===0?(s=0,o=0,r=1/i===-1/0?1:0):(r=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(i)/Math.LN2),n),s=a+n,o=Math.round(i*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(i/Math.pow(2,1-n-e))));let d=[];for(l=e;l;l-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let h=d.join(""),p="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),p=p+f}return p.toLowerCase()},T2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},S2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var A2=new RegExp("^-?(0*)\\d{1,10}$"),R2=-2147483648,x2=2147483647,zR=function(i){if(A2.test(i)){let t=Number(i);if(t>=R2&&t<=x2)return t}return null},Sl=function(i){try{i()}catch(t){setTimeout(()=>{let e=t.stack||"";throw wi("Exception was thrown by user callback.",e),t},Math.floor(0))}},k2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_l=function(i,t){let e=setTimeout(i,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var Ob=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(n=>this.appCheck=n)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){wi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Nb=class{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Yt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wi(t)}},vl=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),Xh="5",Ex="v",Cx="s",Tx="r",Sx="f",Ax=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rx="ls",xx="p",Fb="ac",kx="websocket",Dx="long_polling";var Zh=class{constructor(t,e,n,r,s=!1,o="",a=!1,l=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ms.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ms.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function D2(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Mx(i,t,e){B(typeof t=="string","typeof type must == string"),B(typeof e=="object","typeof params must == object");let n;if(t===kx)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===Dx)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);D2(i)&&(e.ns=i.namespace);let r=[];return Oi(e,(s,o)=>{r.push(s+"="+o)}),n+r.join("&")}var Lb=class{constructor(){this.counters_={}}incrementCounter(t,e=1){tn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return fI(this.counters_)}};var Eb={},Cb={};function Iy(i){let t=i.toString();return Eb[t]||(Eb[t]=new Lb),Eb[t]}function M2(i,t){let e=i.toString();return Cb[e]||(Cb[e]=t()),Cb[e]}var Vb=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Sl(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var $R="start",P2="close",O2="pLPCommand",N2="pRTLPCB",Px="id",Ox="pw",Nx="ser",F2="cb",L2="seg",V2="ts",U2="d",j2="dframe",Fx=1870,Lx=30,B2=Fx-Lx,z2=25e3,$2=3e4,Ub=class i{constructor(t,e,n,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tl(t),this.stats_=Iy(e),this.urlFn=l=>(this.appCheckToken&&(l[Fb]=this.appCheckToken),Mx(e,Dx,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Vb(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($2)),E2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jb((...s)=>{let[o,a,l,d,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===$R)this.id=a,this.password=l;else if(o===P2)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let n={};n[$R]="t",n[Nx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[F2]=this.scriptTagHolder.uniqueCallbackIdentifier),n[Ex]=Xh,this.transportSessionId&&(n[Cx]=this.transportSessionId),this.lastSessionId&&(n[Rx]=this.lastSessionId),this.applicationId&&(n[xx]=this.applicationId),this.appCheckToken&&(n[Fb]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ax.test(location.hostname)&&(n[Tx]=Sx);let r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return Ji()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!T2()&&!S2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=kt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let n=mI(e),r=wx(n,B2);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(Ji())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[j2]="t",n[Px]=t,n[Ox]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=kt(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},jb=class i{constructor(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ji())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=y2(),window[O2+this.uniqueCallbackIdentifier]=t,window[N2+this.uniqueCallbackIdentifier]=e,this.myIFrame=i.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Yt("frame writing exception"),a.stack&&Yt(a.stack),Yt(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Yt("No IE domain setting required")}catch{let n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[Px]=this.myID,t[Ox]=this.myPW,t[Nx]=this.currentSerial;let e=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Lx+n.length<=Fx;){let o=this.pendingSegs.shift();n=n+"&"+L2+r+"="+o.seg+"&"+V2+r+"="+o.ts+"&"+U2+r+"="+o.d,r++}return e=e+n,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(z2)),s=()=>{clearTimeout(r),n()};this.addTag(t,s)}addTag(t,e){Ji()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){let r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{Yt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var q2=16384,G2=45e3,Jh=null;typeof MozWebSocket<"u"?Jh=MozWebSocket:typeof WebSocket<"u"&&(Jh=WebSocket);var ml=(()=>{class i{constructor(e,n,r,s,o,a,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tl(this.connId),this.stats_=Iy(n),this.connURL=i.connectionURL_(n,a,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,o){let a={};return a[Ex]=Xh,!Ji()&&typeof location<"u"&&location.hostname&&Ax.test(location.hostname)&&(a[Tx]=Sx),n&&(a[Cx]=n),r&&(a[Rx]=r),s&&(a[Fb]=s),o&&(a[xx]=o),Mx(e,kx,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ms.set("previous_websocket_failure",!0);try{let r;if(Ji()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Xh}/${yy}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Jh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Jh!==null&&!i.forceDisallow_}static previouslyFailed(){return ms.isInMemoryStorage||ms.get("previous_websocket_failure")===!0}markConnectionHealthy(){ms.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let r=gd(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){let n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let n=kt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=wx(n,q2);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(G2))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4;return i})(),H2=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ub,ml]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let n=ml&&ml.isAvailable(),r=n&&!ml.previouslyFailed();if(e.webSocketOnly&&(n||wi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ml];else{let s=this.transports_=[];for(let o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),W2=6e4,K2=5e3,Y2=10*1024,Q2=100*1024,Tb="t",qR="d",X2="s",GR="r",Z2="e",HR="o",WR="a",KR="n",YR="p",J2="h",Bb=class{constructor(t,e,n,r,s,o,a,l,d,h){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=d,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tl("c:"+this.id+":"),this.transportManager_=new H2(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=_l(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Q2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Y2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Tb in t){let e=t[Tb];e===WR?this.upgradeIfSecondaryHealthy_():e===GR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===HR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=hl("t",t),n=hl("d",t);if(e==="c")this.onSecondaryControl_(n);else if(e==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:YR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:WR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=hl("t",t),n=hl("d",t);e==="c"?this.onControl_(n):e==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=hl(Tb,t);if(qR in t){let n=t[qR];if(e===J2){let r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===KR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===X2?this.onConnectionShutdown_(n):e===GR?this.onReset_(n):e===Z2?Pb("Server Error: "+n):e===HR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Pb("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Xh!==n&&wi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),_l(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(W2))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_l(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(K2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:YR,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ms.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var em=class{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}};var tm=class{constructor(t){this.allowedEvents_=t,this.listeners_={},B(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let n=[...this.listeners_[t]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});let r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(t){B(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var im=class i extends tm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Pa()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i}getInitialEvent(t){return B(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var QR=32,XR=768,Ye=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Ge(){return new Ye("")}function De(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function vr(i){return i.pieces_.length-i.pieceNum_}function et(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Ye(i.pieces_,t)}function Vx(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function ez(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)i.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}function Ux(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function jx(i){if(i.pieceNum_>=i.pieces_.length)return null;let t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new Ye(t,0)}function Mt(i,t){let e=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)e.push(i.pieces_[n]);if(t instanceof Ye)for(let n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{let n=t.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&e.push(n[r])}return new Ye(e,0)}function Se(i){return i.pieceNum_>=i.pieces_.length}function Mi(i,t){let e=De(i),n=De(t);if(e===null)return t;if(e===n)return Mi(et(i),et(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function Bx(i,t){if(vr(i)!==vr(t))return!1;for(let e=i.pieceNum_,n=t.pieceNum_;e<=i.pieces_.length;e++,n++)if(i.pieces_[e]!==t.pieces_[n])return!1;return!0}function Ki(i,t){let e=i.pieceNum_,n=t.pieceNum_;if(vr(i)>vr(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0}var zb=class{constructor(t,e){this.errorPrefix_=e,this.parts_=Ux(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Ua(this.parts_[n]);zx(this)}};function tz(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=Ua(t),zx(i)}function iz(i){let t=i.parts_.pop();i.byteLength_-=Ua(t),i.parts_.length>0&&(i.byteLength_-=1)}function zx(i){if(i.byteLength_>XR)throw new Error(i.errorPrefix_+"has a key path longer than "+XR+" bytes ("+i.byteLength_+").");if(i.parts_.length>QR)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+QR+") or object contains a cycle "+hs(i))}function hs(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var $b=class i extends tm{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new i}getInitialEvent(t){return B(t==="visible","Unknown event type: "+t),[this.visible_]}};var pl=1e3,nz=60*5*1e3,ZR=30*1e3,rz=1.3,sz=3e4,oz="server_kill",JR=3,Ey=(()=>{class i extends em{constructor(e,n,r,s,o,a,l,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=d,this.id=i.nextPersistentConnectionId_++,this.log_=Tl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pl,this.maxReconnectDelay_=nz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!Ji())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$b.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&im.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){let s=++this.requestNumber_,o={r:s,a:e,b:n};this.log_(kt(o)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let n=new op,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,r,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){let n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){let n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,l=>{let d=l.d,h=l.s;i.warnOnListenWarnings_(d,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),h!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(h,d))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&tn(e,"w")){let r=kr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();wi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||wI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,n=yI(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);let o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){let o={p:n,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,o){this.initConnection_();let a={p:n,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){let n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+kt(e));let n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Pb("Unrecognized action received from server: "+kt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>sz&&(this.reconnectDelay_=pl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*rz)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+i.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,d=function(){l?l.close():(a=!0,r())},h=function(f){B(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:d,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,w]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Yt("getToken() completed but was canceled"):(Yt("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=w&&w.token,l=new Bb(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,C=>{wi(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(oz)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&wi(f),d())}}})}interrupt(e){Yt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Yt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Fa(this.interruptReasons_)&&(this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(o=>wy(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){let r=new Ye(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Yt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=JR&&(this.reconnectDelay_=ZR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Yt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=JR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},n="js";Ji()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),e["sdk."+n+"."+yy.replace(/\./g,"-")]=1,Pa()?e["framework.cordova"]=1:fd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=im.getInstance().currentlyOnline();return Fa(this.interruptReasons_)&&e}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),Me=class i{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new i(t,e)}};var Go=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let n=new Me(qo,t),r=new Me(qo,e);return this.compare(n,r)!==0}minPost(){return Me.MIN}};var Qh,nm=class extends Go{static get __EMPTY_NODE(){return Qh}static set __EMPTY_NODE(t){Qh=t}compare(t,e){return Xo(t.name,e.name)}isDefinedOn(t){throw Ms("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Me.MIN}maxPost(){return new Me(fs,Qh)}makePost(t,e){return B(typeof t=="string","KeyIndex indexValue must always be a string."),new Me(t,Qh)}toString(){return".key"}},$o=new nm;var jo=class{constructor(t,e,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Wi=(()=>{class i{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??i.RED,this.left=s??Pi.EMPTY_NODE,this.right=o??Pi.EMPTY_NODE}copy(e,n,r,s,o){return new i(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Pi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),qb=class{copy(t,e,n,r,s){return this}insert(t,e,n){return new Wi(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Pi=class i{constructor(t,e=i.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new i(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Wi.BLACK,null,null))}remove(t){return new i(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Wi.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),e===0)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;for(;!n.isEmpty();)if(e=this.comparator_(t,n.key),e===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else e<0?n=n.left:e>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new jo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new jo(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new jo(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new jo(this.root_,null,this.comparator_,!0,t)}};Pi.EMPTY_NODE=new qb;function az(i,t){return Xo(i.name,t.name)}function Cy(i,t){return Xo(i,t)}var Gb;function cz(i){Gb=i}var $x=function(i){return typeof i=="number"?"number:"+Ix(i):"string:"+i},qx=function(i){if(i.isLeafNode()){let t=i.val();B(typeof t=="string"||typeof t=="number"||typeof t=="object"&&tn(t,".sv"),"Priority must be a string or number.")}else B(i===Gb||i.isEmpty(),"priority of unexpected type.");B(i===Gb||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var ex,Ho=(()=>{class i{constructor(e,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qx(this.priorityNode_)}static set __childrenNodeConstructor(e){ex=e}static get __childrenNodeConstructor(){return ex}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Se(e)?this:De(e)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){let r=De(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||vr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(et(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$x(this.priorityNode_.val())+":");let n=typeof this.value_;e+=n+":",n==="number"?e+=Ix(this.value_):e+=this.value_,this.lazyHash_=bx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let n=typeof e.value_,r=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(n),o=i.VALUE_TYPE_ORDER.indexOf(r);return B(s>=0,"Unknown leaf type: "+n),B(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),Gx,Hx;function lz(i){Gx=i}function dz(i){Hx=i}var Hb=class extends Go{compare(t,e){let n=t.node.getPriority(),r=e.node.getPriority(),s=n.compareTo(r);return s===0?Xo(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(fs,new Ho("[PRIORITY-POST]",Hx))}makePost(t,e){let n=Gx(t);return new Me(e,new Ho("[PRIORITY-POST]",n))}toString(){return".priority"}},Xt=new Hb;var uz=Math.log(2),Wb=class{constructor(t){let e=s=>parseInt(Math.log(s)/uz,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=n(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},rm=function(i,t,e,n){i.sort(t);let r=function(l,d){let h=d-l,p,f;if(h===0)return null;if(h===1)return p=i[l],f=e?e(p):p,new Wi(f,p.node,Wi.BLACK,null,null);{let w=parseInt(h/2,10)+l,C=r(l,w),D=r(w+1,d);return p=i[w],f=e?e(p):p,new Wi(f,p.node,Wi.BLACK,C,D)}},s=function(l){let d=null,h=null,p=i.length,f=function(C,D){let R=p-C,$=p;p-=C;let ee=r(R+1,$),Y=i[R],me=e?e(Y):Y;w(new Wi(me,Y.node,D,null,ee))},w=function(C){d?(d.left=C,d=C):(h=C,d=C)};for(let C=0;C<l.count;++C){let D=l.nextBitIsOne(),R=Math.pow(2,l.count-(C+1));D?f(R,Wi.BLACK):(f(R,Wi.BLACK),f(R,Wi.RED))}return h},o=new Wb(i.length),a=s(o);return new Pi(n||t,a)};var Sb,Uo={},Wo=class i{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return B(Uo&&Xt,"ChildrenNode.ts has not been loaded"),Sb=Sb||new i({".priority":Uo},{".priority":Xt}),Sb}get(t){let e=kr(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pi?e:null}hasIndex(t){return tn(this.indexSet_,t.toString())}addIndex(t,e){B(t!==$o,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,s=e.getIterator(Me.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),n.push(o),o=s.getNext();let a;r?a=rm(n,t.getCompare()):a=Uo;let l=t.toString(),d=Object.assign({},this.indexSet_);d[l]=t;let h=Object.assign({},this.indexes_);return h[l]=a,new i(h,d)}addToIndexes(t,e){let n=La(this.indexes_,(r,s)=>{let o=kr(this.indexSet_,s);if(B(o,"Missing index implementation for "+s),r===Uo)if(o.isDefinedOn(t.node)){let a=[],l=e.getIterator(Me.Wrap),d=l.getNext();for(;d;)d.name!==t.name&&a.push(d),d=l.getNext();return a.push(t),rm(a,o.getCompare())}else return Uo;else{let a=e.get(t.name),l=r;return a&&(l=l.remove(new Me(t.name,a))),l.insert(t,t.node)}});return new i(n,this.indexSet_)}removeFromIndexes(t,e){let n=La(this.indexes_,r=>{if(r===Uo)return r;{let s=e.get(t.name);return s?r.remove(new Me(t.name,s)):r}});return new i(n,this.indexSet_)}};var fl,ot=(()=>{class i{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&qx(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fl||(fl=new i(new Pi(Cy),null,Wo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fl}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let n=this.children_.get(e);return n===null?fl:n}}getChild(e){let n=De(e);return n===null?this:this.getImmediateChild(n).getChild(et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{let r=new Me(e,n),s,o;n.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?fl:this.priorityNode_;return new i(s,a,o)}}updateChild(e,n){let r=De(e);if(r===null)return n;{B(De(e)!==".priority"||vr(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(et(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let n={},r=0,s=0,o=!0;if(this.forEachChild(Xt,(a,l)=>{n[a]=l.val(e),r++,o&&i.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){let a=[];for(let l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$x(this.getPriority().val())+":"),this.forEachChild(Xt,(n,r)=>{let s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":bx(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new Me(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let n=this.resolveIndex_(e);if(n){let r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let n=this.getFirstChildName(e);return n?new Me(n,this.children_.get(n)):null}getLastChildName(e){let n=this.resolveIndex_(e);if(n){let r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let n=this.getLastChildName(e);return n?new Me(n,this.children_.get(n)):null}forEachChild(e,n){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){let r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,Me.Wrap),o=s.peek();for(;o!=null&&n.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){let r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,Me.Wrap),o=s.peek();for(;o!=null&&n.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Al?-1:0}withIndex(e){if(e===$o||this.indexMap_.hasIndex(e))return this;{let n=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===$o||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let r=this.getIterator(Xt),s=n.getIterator(Xt),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===$o?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),Kb=class extends ot{constructor(){super(new Pi(Cy),ot.EMPTY_NODE,Wo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ot.EMPTY_NODE}isEmpty(){return!1}},Al=new Kb;Object.defineProperties(Me,{MIN:{value:new Me(qo,ot.EMPTY_NODE)},MAX:{value:new Me(fs,Al)}});nm.__EMPTY_NODE=ot.EMPTY_NODE;Ho.__childrenNodeConstructor=ot;cz(Al);dz(Al);var hz=!0;function Qt(i,t=null){if(i===null)return ot.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),B(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let e=i;return new Ho(e,Qt(t))}if(!(i instanceof Array)&&hz){let e=[],n=!1;if(Oi(i,(o,a)=>{if(o.substring(0,1)!=="."){let l=Qt(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),e.push(new Me(o,l)))}}),e.length===0)return ot.EMPTY_NODE;let s=rm(e,az,o=>o.name,Cy);if(n){let o=rm(e,Xt.getCompare());return new ot(s,Qt(t),new Wo({".priority":o},{".priority":Xt}))}else return new ot(s,Qt(t),Wo.Default)}else{let e=ot.EMPTY_NODE;return Oi(i,(n,r)=>{if(tn(i,n)&&n.substring(0,1)!=="."){let s=Qt(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(n,s))}}),e.updatePriority(Qt(t))}}lz(Qt);var Yb=class extends Go{constructor(t){super(),this.indexPath_=t,B(!Se(t)&&De(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let n=this.extractChild(t.node),r=this.extractChild(e.node),s=n.compareTo(r);return s===0?Xo(t.name,e.name):s}makePost(t,e){let n=Qt(t),r=ot.EMPTY_NODE.updateChild(this.indexPath_,n);return new Me(e,r)}maxPost(){let t=ot.EMPTY_NODE.updateChild(this.indexPath_,Al);return new Me(fs,t)}toString(){return Ux(this.indexPath_,0).join("/")}};var Qb=class extends Go{compare(t,e){let n=t.node.compareTo(e.node);return n===0?Xo(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(t,e){let n=Qt(t);return new Me(e,n)}toString(){return".value"}},mz=new Qb;function pz(i){return{type:"value",snapshotNode:i}}function fz(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function gz(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function tx(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}function _z(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}var Xb=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qo}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xt}copy(){let t=new i;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function ix(i){let t={};if(i.isDefault())return t;let e;if(i.index_===Xt?e="$priority":i.index_===mz?e="$value":i.index_===$o?e="$key":(B(i.index_ instanceof Yb,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=kt(e),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";t[n]=kt(i.indexStartValue_),i.startNameSet_&&(t[n]+=","+kt(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";t[n]=kt(i.indexEndValue_),i.endNameSet_&&(t[n]+=","+kt(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function nx(i){let t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;e===""&&(i.isViewFromLeft()?e="l":e="r"),t.vf=e}return i.index_!==Xt&&(t.i=i.index_.toString()),t}var Zb=class i extends em{constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Tl("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(B(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=i.getListenId_(t,n),a={};this.listens_[o]=a;let l=ix(t._queryParams);this.restRequest_(s+".json",l,(d,h)=>{let p=h;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(s,p,!1,n),kr(this.listens_,o)===a){let f;d?d===401?f="permission_denied":f="rest_error:"+d:f="ok",r(f,null)}})}unlisten(t,e){let n=i.getListenId_(t,e);delete this.listens_[n]}get(t){let e=ix(t._queryParams),n=t._path.toString(),r=new op;return this.restRequest_(n+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(n,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Dr(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=gd(a.responseText)}catch{wi("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&wi("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}};var Jb=class{constructor(){this.rootNode_=ot.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function sm(){return{value:null,children:new Map}}function Wx(i,t,e){if(Se(t))i.value=e,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,e);else{let n=De(t);i.children.has(n)||i.children.set(n,sm());let r=i.children.get(n);t=et(t),Wx(r,t,e)}}function ey(i,t,e){i.value!==null?e(t,i.value):vz(i,(n,r)=>{let s=new Ye(t.toString()+"/"+n);ey(r,s,e)})}function vz(i,t){i.children.forEach((e,n)=>{t(n,e)})}var ty=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Oi(this.last_,(n,r)=>{e[n]=e[n]-r}),this.last_=t,e}};var rx=10*1e3,bz=30*1e3,yz=5*60*1e3,iy=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ty(t);let n=rx+(bz-rx)*Math.random();_l(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let t=this.statsListener_.get(),e={},n=!1;Oi(t,(r,s)=>{s>0&&tn(this.statsToReport_,r)&&(e[r]=s,n=!0)}),n&&this.server_.reportStats(e),_l(this.reportStats_.bind(this),Math.floor(Math.random()*2*yz))}};var jn=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(jn||{});function Kx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qx(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var ny=class i{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=jn.ACK_USER_WRITE,this.source=Kx()}operationForChild(t){if(Se(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new Ye(t));return new i(Ge(),e,this.revert)}}else return B(De(this.path)===t,"operationForChild called for unrelated child."),new i(et(this.path),this.affectedTree,this.revert)}};var Ko=class i{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=jn.OVERWRITE}operationForChild(t){return Se(this.path)?new i(this.source,Ge(),this.snap.getImmediateChild(t)):new i(this.source,et(this.path),this.snap)}};var om=class i{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=jn.MERGE}operationForChild(t){if(Se(this.path)){let e=this.children.subtree(new Ye(t));return e.isEmpty()?null:e.value?new Ko(this.source,Ge(),e.value):new i(this.source,Ge(),e)}else return B(De(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new i(this.source,et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var wl=class{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Se(t))return this.isFullyInitialized()&&!this.filtered_;let e=De(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function wz(i,t,e,n){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(_z(o.childName,o.snapshotNode))}),gl(i,r,"child_removed",t,n,e),gl(i,r,"child_added",t,n,e),gl(i,r,"child_moved",s,n,e),gl(i,r,"child_changed",t,n,e),gl(i,r,"value",t,n,e),r}function gl(i,t,e,n,r,s){let o=n.filter(a=>a.type===e);o.sort((a,l)=>Ez(i,a,l)),o.forEach(a=>{let l=Iz(i,a,s);r.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(l,i.query_))})})}function Iz(i,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function Ez(i,t,e){if(t.childName==null||e.childName==null)throw Ms("Should only compare child_ events.");let n=new Me(t.childName,t.snapshotNode),r=new Me(e.childName,e.snapshotNode);return i.index_.compare(n,r)}function Xx(i,t){return{eventCache:i,serverCache:t}}function bl(i,t,e,n){return Xx(new wl(t,e,n),i.serverCache)}function Zx(i,t,e,n){return Xx(i.eventCache,new wl(t,e,n))}function ry(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function gs(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var Ab,Cz=()=>(Ab||(Ab=new Pi(C2)),Ab),ui=class i{constructor(t,e=Cz()){this.value=t,this.children=e}static fromObject(t){let e=new i(null);return Oi(t,(n,r)=>{e=e.set(new Ye(n),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Ge(),value:this.value};if(Se(t))return null;{let n=De(t),r=this.children.get(n);if(r!==null){let s=r.findRootMostMatchingPathAndValue(et(t),e);return s!=null?{path:Mt(new Ye(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Se(t))return this;{let e=De(t),n=this.children.get(e);return n!==null?n.subtree(et(t)):new i(null)}}set(t,e){if(Se(t))return new i(e,this.children);{let n=De(t),s=(this.children.get(n)||new i(null)).set(et(t),e),o=this.children.insert(n,s);return new i(this.value,o)}}remove(t){if(Se(t))return this.children.isEmpty()?new i(null):new i(null,this.children);{let e=De(t),n=this.children.get(e);if(n){let r=n.remove(et(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new i(null):new i(this.value,s)}else return this}}get(t){if(Se(t))return this.value;{let e=De(t),n=this.children.get(e);return n?n.get(et(t)):null}}setTree(t,e){if(Se(t))return e;{let n=De(t),s=(this.children.get(n)||new i(null)).setTree(et(t),e),o;return s.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,s),new i(this.value,o)}}fold(t){return this.fold_(Ge(),t)}fold_(t,e){let n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(Mt(t,r),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,Ge(),e)}findOnPath_(t,e,n){let r=this.value?n(e,this.value):!1;if(r)return r;if(Se(t))return null;{let s=De(t),o=this.children.get(s);return o?o.findOnPath_(et(t),Mt(e,s),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ge(),e)}foreachOnPath_(t,e,n){if(Se(t))return this;{this.value&&n(e,this.value);let r=De(t),s=this.children.get(r);return s?s.foreachOnPath_(et(t),Mt(e,r),n):new i(null)}}foreach(t){this.foreach_(Ge(),t)}foreach_(t,e){this.children.inorderTraversal((n,r)=>{r.foreach_(Mt(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}};var Yi=class i{constructor(t){this.writeTree_=t}static empty(){return new i(new ui(null))}};function yl(i,t,e){if(Se(t))return new Yi(new ui(e));{let n=i.writeTree_.findRootMostValueAndPath(t);if(n!=null){let r=n.path,s=n.value,o=Mi(r,t);return s=s.updateChild(o,e),new Yi(i.writeTree_.set(r,s))}else{let r=new ui(e),s=i.writeTree_.setTree(t,r);return new Yi(s)}}}function sx(i,t,e){let n=i;return Oi(e,(r,s)=>{n=yl(n,Mt(t,r),s)}),n}function ox(i,t){if(Se(t))return Yi.empty();{let e=i.writeTree_.setTree(t,new ui(null));return new Yi(e)}}function sy(i,t){return _s(i,t)!=null}function _s(i,t){let e=i.writeTree_.findRootMostValueAndPath(t);return e!=null?i.writeTree_.get(e.path).getChild(Mi(e.path,t)):null}function ax(i){let t=[],e=i.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Xt,(n,r)=>{t.push(new Me(n,r))}):i.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&t.push(new Me(n,r.value))}),t}function _r(i,t){if(Se(t))return i;{let e=_s(i,t);return e!=null?new Yi(new ui(e)):new Yi(i.writeTree_.subtree(t))}}function oy(i){return i.writeTree_.isEmpty()}function Yo(i,t){return Jx(Ge(),i.writeTree_,t)}function Jx(i,t,e){if(t.value!=null)return e.updateChild(i,t.value);{let n=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(B(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):e=Jx(Mt(i,r),s,e)}),!e.getChild(i).isEmpty()&&n!==null&&(e=e.updateChild(Mt(i,".priority"),n)),e}}function ek(i,t){return sk(t,i)}function Tz(i,t,e,n,r){B(n>i.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),i.allWrites.push({path:t,snap:e,writeId:n,visible:r}),r&&(i.visibleWrites=yl(i.visibleWrites,t,e)),i.lastWriteId=n}function Sz(i,t){for(let e=0;e<i.allWrites.length;e++){let n=i.allWrites[e];if(n.writeId===t)return n}return null}function Az(i,t){let e=i.allWrites.findIndex(a=>a.writeId===t);B(e>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[e];i.allWrites.splice(e,1);let r=n.visible,s=!1,o=i.allWrites.length-1;for(;r&&o>=0;){let a=i.allWrites[o];a.visible&&(o>=e&&Rz(a,n.path)?r=!1:Ki(n.path,a.path)&&(s=!0)),o--}if(r){if(s)return xz(i),!0;if(n.snap)i.visibleWrites=ox(i.visibleWrites,n.path);else{let a=n.children;Oi(a,l=>{i.visibleWrites=ox(i.visibleWrites,Mt(n.path,l))})}return!0}else return!1}function Rz(i,t){if(i.snap)return Ki(i.path,t);for(let e in i.children)if(i.children.hasOwnProperty(e)&&Ki(Mt(i.path,e),t))return!0;return!1}function xz(i){i.visibleWrites=tk(i.allWrites,kz,Ge()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function kz(i){return i.visible}function tk(i,t,e){let n=Yi.empty();for(let r=0;r<i.length;++r){let s=i[r];if(t(s)){let o=s.path,a;if(s.snap)Ki(e,o)?(a=Mi(e,o),n=yl(n,a,s.snap)):Ki(o,e)&&(a=Mi(o,e),n=yl(n,Ge(),s.snap.getChild(a)));else if(s.children){if(Ki(e,o))a=Mi(e,o),n=sx(n,a,s.children);else if(Ki(o,e))if(a=Mi(o,e),Se(a))n=sx(n,Ge(),s.children);else{let l=kr(s.children,De(a));if(l){let d=l.getChild(et(a));n=yl(n,Ge(),d)}}}else throw Ms("WriteRecord should have .snap or .children")}}return n}function ik(i,t,e,n,r){if(!n&&!r){let s=_s(i.visibleWrites,t);if(s!=null)return s;{let o=_r(i.visibleWrites,t);if(oy(o))return e;if(e==null&&!sy(o,Ge()))return null;{let a=e||ot.EMPTY_NODE;return Yo(o,a)}}}else{let s=_r(i.visibleWrites,t);if(!r&&oy(s))return e;if(!r&&e==null&&!sy(s,Ge()))return null;{let o=function(d){return(d.visible||r)&&(!n||!~n.indexOf(d.writeId))&&(Ki(d.path,t)||Ki(t,d.path))},a=tk(i.allWrites,o,t),l=e||ot.EMPTY_NODE;return Yo(a,l)}}}function Dz(i,t,e){let n=ot.EMPTY_NODE,r=_s(i.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Xt,(s,o)=>{n=n.updateImmediateChild(s,o)}),n;if(e){let s=_r(i.visibleWrites,t);return e.forEachChild(Xt,(o,a)=>{let l=Yo(_r(s,new Ye(o)),a);n=n.updateImmediateChild(o,l)}),ax(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{let s=_r(i.visibleWrites,t);return ax(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function Mz(i,t,e,n,r){B(n||r,"Either existingEventSnap or existingServerSnap must exist");let s=Mt(t,e);if(sy(i.visibleWrites,s))return null;{let o=_r(i.visibleWrites,s);return oy(o)?r.getChild(e):Yo(o,r.getChild(e))}}function Pz(i,t,e,n){let r=Mt(t,e),s=_s(i.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(e)){let o=_r(i.visibleWrites,r);return Yo(o,n.getNode().getImmediateChild(e))}else return null}function Oz(i,t){return _s(i.visibleWrites,t)}function Nz(i,t,e,n,r,s,o){let a,l=_r(i.visibleWrites,t),d=_s(l,Ge());if(d!=null)a=d;else if(e!=null)a=Yo(l,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=o.getCompare(),f=s?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),w=f.getNext();for(;w&&h.length<r;)p(w,n)!==0&&h.push(w),w=f.getNext();return h}else return[]}function Fz(){return{visibleWrites:Yi.empty(),allWrites:[],lastWriteId:-1}}function ay(i,t,e,n){return ik(i.writeTree,i.treePath,t,e,n)}function nk(i,t){return Dz(i.writeTree,i.treePath,t)}function cx(i,t,e,n){return Mz(i.writeTree,i.treePath,t,e,n)}function am(i,t){return Oz(i.writeTree,Mt(i.treePath,t))}function Lz(i,t,e,n,r,s){return Nz(i.writeTree,i.treePath,t,e,n,r,s)}function Ty(i,t,e){return Pz(i.writeTree,i.treePath,t,e)}function rk(i,t){return sk(Mt(i.treePath,t),i.writeTree)}function sk(i,t){return{treePath:i,writeTree:t}}var cy=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,n=t.childName;B(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),B(n!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(n,tx(n,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(n,gz(n,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(n,fz(n,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(n,tx(n,t.snapshotNode,r.oldSnap));else throw Ms("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}};var ly=class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}},ok=new ly,Il=class{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let n=this.optCompleteServerCache_!=null?new wl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ty(this.writes_,t,n)}}getChildAfterChild(t,e,n){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gs(this.viewCache_),s=Lz(this.writes_,r,e,1,n,t);return s.length===0?null:s[0]}};function Vz(i,t){B(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),B(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function Uz(i,t,e,n,r){let s=new cy,o,a;if(e.type===jn.OVERWRITE){let d=e;d.source.fromUser?o=dy(i,t,d.path,d.snap,n,r,s):(B(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!Se(d.path),o=cm(i,t,d.path,d.snap,n,r,a,s))}else if(e.type===jn.MERGE){let d=e;d.source.fromUser?o=Bz(i,t,d.path,d.children,n,r,s):(B(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=uy(i,t,d.path,d.children,n,r,a,s))}else if(e.type===jn.ACK_USER_WRITE){let d=e;d.revert?o=qz(i,t,d.path,n,r,s):o=zz(i,t,d.path,d.affectedTree,n,r,s)}else if(e.type===jn.LISTEN_COMPLETE)o=$z(i,t,e.path,n,s);else throw Ms("Unknown operation type: "+e.type);let l=s.getChanges();return jz(t,o,l),{viewCache:o,changes:l}}function jz(i,t,e){let n=t.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=ry(i);(e.length>0||!i.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&e.push(pz(ry(t)))}}function ak(i,t,e,n,r,s){let o=t.eventCache;if(am(n,e)!=null)return t;{let a,l;if(Se(e))if(B(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let d=gs(t),h=d instanceof ot?d:ot.EMPTY_NODE,p=nk(n,h);a=i.filter.updateFullNode(t.eventCache.getNode(),p,s)}else{let d=ay(n,gs(t));a=i.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{let d=De(e);if(d===".priority"){B(vr(e)===1,"Can't have a priority with additional path components");let h=o.getNode();l=t.serverCache.getNode();let p=cx(n,e,h,l);p!=null?a=i.filter.updatePriority(h,p):a=o.getNode()}else{let h=et(e),p;if(o.isCompleteForChild(d)){l=t.serverCache.getNode();let f=cx(n,e,o.getNode(),l);f!=null?p=o.getNode().getImmediateChild(d).updateChild(h,f):p=o.getNode().getImmediateChild(d)}else p=Ty(n,d,t.serverCache);p!=null?a=i.filter.updateChild(o.getNode(),d,p,h,r,s):a=o.getNode()}}return bl(t,a,o.isFullyInitialized()||Se(e),i.filter.filtersNodes())}}function cm(i,t,e,n,r,s,o,a){let l=t.serverCache,d,h=o?i.filter:i.filter.getIndexedFilter();if(Se(e))d=h.updateFullNode(l.getNode(),n,null);else if(h.filtersNodes()&&!l.isFiltered()){let w=l.getNode().updateChild(e,n);d=h.updateFullNode(l.getNode(),w,null)}else{let w=De(e);if(!l.isCompleteForPath(e)&&vr(e)>1)return t;let C=et(e),R=l.getNode().getImmediateChild(w).updateChild(C,n);w===".priority"?d=h.updatePriority(l.getNode(),R):d=h.updateChild(l.getNode(),w,R,C,ok,null)}let p=Zx(t,d,l.isFullyInitialized()||Se(e),h.filtersNodes()),f=new Il(r,p,s);return ak(i,p,e,r,f,a)}function dy(i,t,e,n,r,s,o){let a=t.eventCache,l,d,h=new Il(r,t,s);if(Se(e))d=i.filter.updateFullNode(t.eventCache.getNode(),n,o),l=bl(t,d,!0,i.filter.filtersNodes());else{let p=De(e);if(p===".priority")d=i.filter.updatePriority(t.eventCache.getNode(),n),l=bl(t,d,a.isFullyInitialized(),a.isFiltered());else{let f=et(e),w=a.getNode().getImmediateChild(p),C;if(Se(f))C=n;else{let D=h.getCompleteChild(p);D!=null?Vx(f)===".priority"&&D.getChild(jx(f)).isEmpty()?C=D:C=D.updateChild(f,n):C=ot.EMPTY_NODE}if(w.equals(C))l=t;else{let D=i.filter.updateChild(a.getNode(),p,C,f,h,o);l=bl(t,D,a.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function lx(i,t){return i.eventCache.isCompleteForChild(t)}function Bz(i,t,e,n,r,s,o){let a=t;return n.foreach((l,d)=>{let h=Mt(e,l);lx(t,De(h))&&(a=dy(i,a,h,d,r,s,o))}),n.foreach((l,d)=>{let h=Mt(e,l);lx(t,De(h))||(a=dy(i,a,h,d,r,s,o))}),a}function dx(i,t,e){return e.foreach((n,r)=>{t=t.updateChild(n,r)}),t}function uy(i,t,e,n,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,d;Se(e)?d=n:d=new ui(null).setTree(e,n);let h=t.serverCache.getNode();return d.children.inorderTraversal((p,f)=>{if(h.hasChild(p)){let w=t.serverCache.getNode().getImmediateChild(p),C=dx(i,w,f);l=cm(i,l,new Ye(p),C,r,s,o,a)}}),d.children.inorderTraversal((p,f)=>{let w=!t.serverCache.isCompleteForChild(p)&&f.value===null;if(!h.hasChild(p)&&!w){let C=t.serverCache.getNode().getImmediateChild(p),D=dx(i,C,f);l=cm(i,l,new Ye(p),D,r,s,o,a)}}),l}function zz(i,t,e,n,r,s,o){if(am(r,e)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(n.value!=null){if(Se(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return cm(i,t,e,l.getNode().getChild(e),r,s,a,o);if(Se(e)){let d=new ui(null);return l.getNode().forEachChild($o,(h,p)=>{d=d.set(new Ye(h),p)}),uy(i,t,e,d,r,s,a,o)}else return t}else{let d=new ui(null);return n.foreach((h,p)=>{let f=Mt(e,h);l.isCompleteForPath(f)&&(d=d.set(h,l.getNode().getChild(f)))}),uy(i,t,e,d,r,s,a,o)}}function $z(i,t,e,n,r){let s=t.serverCache,o=Zx(t,s.getNode(),s.isFullyInitialized()||Se(e),s.isFiltered());return ak(i,o,e,n,ok,r)}function qz(i,t,e,n,r,s){let o;if(am(n,e)!=null)return t;{let a=new Il(n,t,r),l=t.eventCache.getNode(),d;if(Se(e)||De(e)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=ay(n,gs(t));else{let p=t.serverCache.getNode();B(p instanceof ot,"serverChildren would be complete if leaf node"),h=nk(n,p)}h=h,d=i.filter.updateFullNode(l,h,s)}else{let h=De(e),p=Ty(n,h,t.serverCache);p==null&&t.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),p!=null?d=i.filter.updateChild(l,h,p,et(e),a,s):t.eventCache.getNode().hasChild(h)?d=i.filter.updateChild(l,h,ot.EMPTY_NODE,et(e),a,s):d=l,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ay(n,gs(t)),o.isLeafNode()&&(d=i.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||am(n,Ge())!=null,bl(t,d,o,i.filter.filtersNodes())}}function Gz(i,t){let e=gs(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!Se(t)&&!e.getImmediateChild(De(t)).isEmpty())?e.getChild(t):null}function ux(i,t,e,n){t.type===jn.MERGE&&t.source.queryId!==null&&(B(gs(i.viewCache_),"We should always have a full cache before handling merges"),B(ry(i.viewCache_),"Missing event cache, even though we have a server cache"));let r=i.viewCache_,s=Uz(i.processor_,r,t,e,n);return Vz(i.processor_,s.viewCache),B(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,Hz(i,s.changes,s.viewCache.eventCache.getNode(),null)}function Hz(i,t,e,n){let r=n?[n]:i.eventRegistrations_;return wz(i.eventGenerator_,t,e,r)}var hx;function Wz(i){B(!hx,"__referenceConstructor has already been defined"),hx=i}function Sy(i,t,e,n){let r=t.source.queryId;if(r!==null){let s=i.views.get(r);return B(s!=null,"SyncTree gave us an op for an invalid query."),ux(s,t,e,n)}else{let s=[];for(let o of i.views.values())s=s.concat(ux(o,t,e,n));return s}}function Ay(i,t){let e=null;for(let n of i.views.values())e=e||Gz(n,t);return e}var mx;function Kz(i){B(!mx,"__referenceConstructor has already been defined"),mx=i}var lm=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ui(null),this.pendingWriteTree_=Fz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Yz(i,t,e,n,r){return Tz(i.pendingWriteTree_,t,e,n,r),r?um(i,new Ko(Kx(),t,e)):[]}function Bo(i,t,e=!1){let n=Sz(i.pendingWriteTree_,t);if(Az(i.pendingWriteTree_,t)){let s=new ui(null);return n.snap!=null?s=s.set(Ge(),!0):Oi(n.children,o=>{s=s.set(new Ye(o),!0)}),um(i,new ny(n.path,s,e))}else return[]}function dm(i,t,e){return um(i,new Ko(Yx(),t,e))}function Qz(i,t,e){let n=ui.fromObject(e);return um(i,new om(Yx(),t,n))}function Xz(i,t,e,n){let r=uk(i,n);if(r!=null){let s=hk(r),o=s.path,a=s.queryId,l=Mi(o,t),d=new Ko(Qx(a),l,e);return mk(i,o,d)}else return[]}function Zz(i,t,e,n){let r=uk(i,n);if(r){let s=hk(r),o=s.path,a=s.queryId,l=Mi(o,t),d=ui.fromObject(e),h=new om(Qx(a),l,d);return mk(i,o,h)}else return[]}function ck(i,t,e){let r=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(t,(o,a)=>{let l=Mi(o,t),d=Ay(a,l);if(d)return d});return ik(r,t,s,e,!0)}function um(i,t){return lk(t,i.syncPointTree_,null,ek(i.pendingWriteTree_,Ge()))}function lk(i,t,e,n){if(Se(i.path))return dk(i,t,e,n);{let r=t.get(Ge());e==null&&r!=null&&(e=Ay(r,Ge()));let s=[],o=De(i.path),a=i.operationForChild(o),l=t.children.get(o);if(l&&a){let d=e?e.getImmediateChild(o):null,h=rk(n,o);s=s.concat(lk(a,l,d,h))}return r&&(s=s.concat(Sy(r,i,n,e))),s}}function dk(i,t,e,n){let r=t.get(Ge());e==null&&r!=null&&(e=Ay(r,Ge()));let s=[];return t.children.inorderTraversal((o,a)=>{let l=e?e.getImmediateChild(o):null,d=rk(n,o),h=i.operationForChild(o);h&&(s=s.concat(dk(h,a,l,d)))}),r&&(s=s.concat(Sy(r,i,n,e))),s}function uk(i,t){return i.tagToQueryMap.get(t)}function hk(i){let t=i.indexOf("$");return B(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Ye(i.substr(0,t))}}function mk(i,t,e){let n=i.syncPointTree_.get(t);B(n,"Missing sync point for query tag that we're tracking");let r=ek(i.pendingWriteTree_,t);return Sy(n,e,r,null)}var hy=class i{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new i(e)}node(){return this.node_}},my=class i{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=Mt(this.path_,t);return new i(this.syncTree_,e)}node(){return ck(this.syncTree_,this.path_)}},Jz=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},px=function(i,t,e){if(!i||typeof i!="object")return i;if(B(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return e$(i[".sv"],t,e);if(typeof i[".sv"]=="object")return t$(i[".sv"],t);B(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},e$=function(i,t,e){switch(i){case"timestamp":return e.timestamp;default:B(!1,"Unexpected server value: "+i)}},t$=function(i,t,e){i.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&B(!1,"Unexpected increment value: "+n);let r=t.node();if(B(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let o=r.getValue();return typeof o!="number"?n:o+n},i$=function(i,t,e,n){return Ry(t,new my(e,i),n)},n$=function(i,t,e){return Ry(i,new hy(t),e)};function Ry(i,t,e){let n=i.getPriority().val(),r=px(n,t.getImmediateChild(".priority"),e),s;if(i.isLeafNode()){let o=i,a=px(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new Ho(a,Qt(r)):i}else{let o=i;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ho(r))),o.forEachChild(Xt,(a,l)=>{let d=Ry(l,t.getImmediateChild(a),e);d!==l&&(s=s.updateImmediateChild(a,d))}),s}}var El=class{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}};function xy(i,t){let e=t instanceof Ye?t:new Ye(t),n=i,r=De(e);for(;r!==null;){let s=kr(n.node.children,r)||{children:{},childCount:0};n=new El(r,n,s),e=et(e),r=De(e)}return n}function Zo(i){return i.node.value}function pk(i,t){i.node.value=t,py(i)}function fk(i){return i.node.childCount>0}function r$(i){return Zo(i)===void 0&&!fk(i)}function hm(i,t){Oi(i.node.children,(e,n)=>{t(new El(e,i,n))})}function gk(i,t,e,n){e&&!n&&t(i),hm(i,r=>{gk(r,t,!0,n)}),e&&n&&t(i)}function s$(i,t,e){let n=e?i:i.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function Rl(i){return new Ye(i.parent===null?i.name:Rl(i.parent)+"/"+i.name)}function py(i){i.parent!==null&&o$(i.parent,i.name,i)}function o$(i,t,e){let n=r$(e),r=tn(i.node.children,t);n&&r?(delete i.node.children[t],i.node.childCount--,py(i)):!n&&!r&&(i.node.children[t]=e.node,i.node.childCount++,py(i))}var a$=/[\[\].#$\/\u0000-\u001F\u007F]/,c$=/[\[\].#$\u0000-\u001F\u007F]/,Rb=10*1024*1024,_k=function(i){return typeof i=="string"&&i.length!==0&&!a$.test(i)},l$=function(i){return typeof i=="string"&&i.length!==0&&!c$.test(i)},d$=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),l$(i)};var vk=function(i,t,e){let n=e instanceof Ye?new zb(e,i):e;if(t===void 0)throw new Error(i+"contains undefined "+hs(n));if(typeof t=="function")throw new Error(i+"contains a function "+hs(n)+" with contents = "+t.toString());if(yx(t))throw new Error(i+"contains "+t.toString()+" "+hs(n));if(typeof t=="string"&&t.length>Rb/3&&Ua(t)>Rb)throw new Error(i+"contains a string greater than "+Rb+" utf8 bytes "+hs(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(Oi(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!_k(o)))throw new Error(i+" contains an invalid key ("+o+") "+hs(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);tz(n,o),vk(i,a,n),iz(n)}),r&&s)throw new Error(i+' contains ".value" child '+hs(n)+" in addition to actual children.")}};var u$=function(i,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!_k(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!d$(e))throw new Error(CI(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var fy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function h$(i,t){let e=null;for(let n=0;n<t.length;n++){let r=t[n],s=r.getPath();e!==null&&!Bx(s,e.path)&&(i.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&i.eventLists_.push(e)}function vs(i,t,e){h$(i,e),m$(i,n=>Ki(n,t)||Ki(t,n))}function m$(i,t){i.recursionDepth_++;let e=!0;for(let n=0;n<i.eventLists_.length;n++){let r=i.eventLists_[n];if(r){let s=r.path;t(s)?(p$(i.eventLists_[n]),i.eventLists_[n]=null):e=!1}}e&&(i.eventLists_=[]),i.recursionDepth_--}function p$(i){for(let t=0;t<i.events.length;t++){let e=i.events[t];if(e!==null){i.events[t]=null;let n=e.getEventRunner();ps&&Yt("event: "+e.toString()),Sl(n)}}}var f$="repo_interrupt",g$=25,gy=class{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sm(),this.transactionQueueTree_=new El,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function _$(i,t,e){if(i.stats_=Iy(i.repoInfo_),i.forceRestClient_||k2())i.server_=new Zb(i.repoInfo_,(n,r,s,o)=>{fx(i,n,r,s,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>gx(i,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{kt(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new Ey(i.repoInfo_,t,(n,r,s,o)=>{fx(i,n,r,s,o)},n=>{gx(i,n)},n=>{b$(i,n)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=M2(i.repoInfo_,()=>new iy(i.stats_,i.server_)),i.infoData_=new Jb,i.infoSyncTree_=new lm({startListening:(n,r,s,o)=>{let a=[],l=i.infoData_.getNode(n._path);return l.isEmpty()||(a=dm(i.infoSyncTree_,n._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ky(i,"connected",!1),i.serverSyncTree_=new lm({startListening:(n,r,s,o)=>(i.server_.listen(n,s,r,(a,l)=>{let d=o(a,l);vs(i.eventQueue_,n._path,d)}),[]),stopListening:(n,r)=>{i.server_.unlisten(n,r)}})}function v$(i){let e=i.infoData_.getNode(new Ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function bk(i){return Jz({timestamp:v$(i)})}function fx(i,t,e,n,r){i.dataUpdateCount++;let s=new Ye(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(n){let l=La(e,d=>Qt(d));o=Zz(i.serverSyncTree_,s,l,r)}else{let l=Qt(e);o=Xz(i.serverSyncTree_,s,l,r)}else if(n){let l=La(e,d=>Qt(d));o=Qz(i.serverSyncTree_,s,l)}else{let l=Qt(e);o=dm(i.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=My(i,s)),vs(i.eventQueue_,a,o)}function gx(i,t){ky(i,"connected",t),t===!1&&w$(i)}function b$(i,t){Oi(t,(e,n)=>{ky(i,e,n)})}function ky(i,t,e){let n=new Ye("/.info/"+t),r=Qt(e);i.infoData_.updateSnapshot(n,r);let s=dm(i.infoSyncTree_,n,r);vs(i.eventQueue_,n,s)}function y$(i){return i.nextWriteId_++}function w$(i){yk(i,"onDisconnectEvents");let t=bk(i),e=sm();ey(i.onDisconnect_,Ge(),(r,s)=>{let o=i$(r,s,i.serverSyncTree_,t);Wx(e,r,o)});let n=[];ey(e,Ge(),(r,s)=>{n=n.concat(dm(i.serverSyncTree_,r,s));let o=T$(i,r);My(i,o)}),i.onDisconnect_=sm(),vs(i.eventQueue_,Ge(),n)}function I$(i){i.persistentConnection_&&i.persistentConnection_.interrupt(f$)}function yk(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),Yt(e,...t)}function wk(i,t,e){return ck(i.serverSyncTree_,t,e)||ot.EMPTY_NODE}function Dy(i,t=i.transactionQueueTree_){if(t||mm(i,t),Zo(t)){let e=Ek(i,t);B(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&E$(i,Rl(t),e)}else fk(t)&&hm(t,e=>{Dy(i,e)})}function E$(i,t,e){let n=e.map(d=>d.currentWriteId),r=wk(i,t,n),s=r,o=r.hash();for(let d=0;d<e.length;d++){let h=e[d];B(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=Mi(t,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}let a=s.val(!0),l=t;i.server_.put(l.toString(),a,d=>{yk(i,"transaction put response",{path:l.toString(),status:d});let h=[];if(d==="ok"){let p=[];for(let f=0;f<e.length;f++)e[f].status=2,h=h.concat(Bo(i.serverSyncTree_,e[f].currentWriteId)),e[f].onComplete&&p.push(()=>e[f].onComplete(null,!0,e[f].currentOutputSnapshotResolved)),e[f].unwatcher();mm(i,xy(i.transactionQueueTree_,t)),Dy(i,i.transactionQueueTree_),vs(i.eventQueue_,t,h);for(let f=0;f<p.length;f++)Sl(p[f])}else{if(d==="datastale")for(let p=0;p<e.length;p++)e[p].status===3?e[p].status=4:e[p].status=0;else{wi("transaction at "+l.toString()+" failed: "+d);for(let p=0;p<e.length;p++)e[p].status=4,e[p].abortReason=d}My(i,t)}},o)}function My(i,t){let e=Ik(i,t),n=Rl(e),r=Ek(i,e);return C$(i,r,n),n}function C$(i,t,e){if(t.length===0)return;let n=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],d=Mi(e,l.path),h=!1,p;if(B(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,p=l.abortReason,r=r.concat(Bo(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=g$)h=!0,p="maxretry",r=r.concat(Bo(i.serverSyncTree_,l.currentWriteId,!0));else{let f=wk(i,l.path,o);l.currentInputSnapshot=f;let w=t[a].update(f.val());if(w!==void 0){vk("transaction failed: Data returned ",w,l.path);let C=Qt(w);typeof w=="object"&&w!=null&&tn(w,".priority")||(C=C.updatePriority(f.getPriority()));let R=l.currentWriteId,$=bk(i),ee=n$(C,f,$);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=ee,l.currentWriteId=y$(i),o.splice(o.indexOf(R),1),r=r.concat(Yz(i.serverSyncTree_,l.path,ee,l.currentWriteId,l.applyLocally)),r=r.concat(Bo(i.serverSyncTree_,R,!0))}else h=!0,p="nodata",r=r.concat(Bo(i.serverSyncTree_,l.currentWriteId,!0))}vs(i.eventQueue_,e,r),r=[],h&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(p==="nodata"?n.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):n.push(()=>t[a].onComplete(new Error(p),!1,null))))}mm(i,i.transactionQueueTree_);for(let a=0;a<n.length;a++)Sl(n[a]);Dy(i,i.transactionQueueTree_)}function Ik(i,t){let e,n=i.transactionQueueTree_;for(e=De(t);e!==null&&Zo(n)===void 0;)n=xy(n,e),t=et(t),e=De(t);return n}function Ek(i,t){let e=[];return Ck(i,t,e),e.sort((n,r)=>n.order-r.order),e}function Ck(i,t,e){let n=Zo(t);if(n)for(let r=0;r<n.length;r++)e.push(n[r]);hm(t,r=>{Ck(i,r,e)})}function mm(i,t){let e=Zo(t);if(e){let n=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[n]=e[r],n++);e.length=n,pk(t,e.length>0?e:void 0)}hm(t,n=>{mm(i,n)})}function T$(i,t){let e=Rl(Ik(i,t)),n=xy(i.transactionQueueTree_,t);return s$(n,r=>{xb(i,r)}),xb(i,n),gk(n,r=>{xb(i,r)}),e}function xb(i,t){let e=Zo(t);if(e){let n=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(B(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(B(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(Bo(i.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?pk(t,void 0):e.length=s+1,vs(i.eventQueue_,Rl(t),r);for(let o=0;o<n.length;o++)Sl(n[o])}}function S$(i){let t="",e=i.split("/");for(let n=0;n<e.length;n++)if(e[n].length>0){let r=e[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function A$(i){let t={};i.charAt(0)==="?"&&(i=i.substring(1));for(let e of i.split("&")){if(e.length===0)continue;let n=e.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):wi(`Invalid query segment '${e}' in query '${i}'`)}return t}var _x=function(i,t){let e=R$(i),n=e.namespace;e.domain==="firebase.com"&&Bn(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&e.domain!=="localhost"&&Bn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||I2();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new Zh(e.host,e.secure,n,r,t,"",n!==e.subdomain),path:new Ye(e.pathString)}},R$=function(i){let t="",e="",n="",r="",s="",o=!0,a="https",l=443;if(typeof i=="string"){let d=i.indexOf("//");d>=0&&(a=i.substring(0,d-1),i=i.substring(d+2));let h=i.indexOf("/");h===-1&&(h=i.length);let p=i.indexOf("?");p===-1&&(p=i.length),t=i.substring(0,Math.min(h,p)),h<p&&(r=S$(i.substring(h,p)));let f=A$(i.substring(Math.min(i.length,p)));d=t.indexOf(":"),d>=0?(o=a==="https"||a==="wss",l=parseInt(t.substring(d+1),10)):d=t.length;let w=t.slice(0,d);if(w.toLowerCase()==="localhost")e="localhost";else if(w.split(".").length<=2)e=w;else{let C=t.indexOf(".");n=t.substring(0,C).toLowerCase(),e=t.substring(C+1),s=n}"ns"in f&&(s=f.ns)}return{host:t,port:l,domain:e,subdomain:n,secure:o,scheme:a,pathString:r,namespace:s}};var _y=class i{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return Se(this._path)?null:Vx(this._path)}get ref(){return new Qo(this._repo,this._path)}get _queryIdentifier(){let t=nx(this._queryParams),e=wy(t);return e==="{}"?"default":e}get _queryObject(){return nx(this._queryParams)}isEqual(t){if(t=ye(t),!(t instanceof i))return!1;let e=this._repo===t._repo,n=Bx(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+ez(this._path)}};var Qo=class i extends _y{constructor(t,e){super(t,e,new Xb,!1)}get parent(){let t=jx(this._path);return t===null?null:new i(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};Wz(Qo);Kz(Qo);var x$="FIREBASE_DATABASE_EMULATOR_HOST",vy={},k$=!1;function D$(i,t,e,n){i.repoInfo_=new Zh(`${t}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),n&&(i.authTokenProvider_=n)}function M$(i,t,e,n,r){let s=n||i.options.databaseURL;s===void 0&&(i.options.projectId||Bn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yt("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=_x(s,r),a=o.repoInfo,l,d;typeof process<"u"&&process.env&&(d=process.env[x$]),d?(l=!0,s=`http://${d}?ns=${a.namespace}`,o=_x(s,r),a=o.repoInfo):l=!o.repoInfo.secure;let h=r&&l?new vl(vl.OWNER):new Nb(i.name,i.options,t);u$("Invalid Firebase Database URL",o),Se(o.path)||Bn("Database URL must point to the root of a Firebase Database (not including a child path).");let p=O$(a,i,h,new Ob(i.name,e));return new by(p,i)}function P$(i,t){let e=vy[t];(!e||e[i.key]!==i)&&Bn(`Database ${t}(${i.repoInfo_}) has already been deleted.`),I$(i),delete e[i.key]}function O$(i,t,e,n){let r=vy[t.name];r||(r={},vy[t.name]=r);let s=r[i.toURLString()];return s&&Bn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new gy(i,k$,e,n),r[i.toURLString()]=s,s}var by=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_$(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qo(this._repo,Ge())),this._rootInternal}_delete(){return this._rootInternal!==null&&(P$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Bn("Cannot call "+t+" on a deleted database.")}};function Tk(i=wt(),t){let e=yt(i,"database").getImmediate({identifier:t});if(!e._instanceStarted){let n=tr("database");n&&Sk(e,...n)}return e}function Sk(i,t,e,n={}){i=ye(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&Bn("Cannot call useEmulator() after instance has already been initialized.");let r=i._repoInternal,s;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&Bn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new vl(vl.OWNER);else if(n.mockUserToken){let o=typeof n.mockUserToken=="string"?n.mockUserToken:Ps(n.mockUserToken,i.app.options.projectId);s=new vl(o)}D$(r,t,e,s)}function N$(i){b2(li),pt(new mt("database",(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return M$(n,r,s,e)},"PUBLIC").setMultipleInstances(!0)),K(UR,jR,i),K(UR,jR,"esm2017")}Ey.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};Ey.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};N$();var xl=class{constructor(t){return t}},Ak="database",Py=class{constructor(){return gt(Ak)}};var Oy=new F("angularfire2.database-instances");function F$(i,t){let e=It(Ak,i,t);return e&&new xl(e)}function L$(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new xl(n)}}var V$={provide:Py,deps:[[new ne,Oy]]},U$={provide:xl,useFactory:F$,deps:[[new ne,Oy],Je]};function Rk(i,...t){return K("angularfire",Xe.full,"rtdb"),We([U$,V$,{provide:Oy,useFactory:L$(i),multi:!0,deps:[V,ve,dt,rt,[new ne,$i],[new ne,di],...t]}])}var xk=xe(Tk,!0);var Mk="functions";var Ny=class{constructor(t,e,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(r=>this.auth=r,()=>{}),this.messaging||e.get().then(r=>this.messaging=r,()=>{}),this.appCheck||n.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return v(this,null,function*(){if(this.auth)try{let t=yield this.auth.getToken();return t?.accessToken}catch{return}})}getMessagingToken(){return v(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(t){return v(this,null,function*(){if(this.appCheck){let e=t?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return e.error?null:e.token}return null})}getContext(t){return v(this,null,function*(){let e=yield this.getAuthToken(),n=yield this.getMessagingToken(),r=yield this.getAppCheckToken(t);return{authToken:e,messagingToken:n,appCheckToken:r}})}};var Fy="us-central1";var Ly=class{constructor(t,e,n,r,s=Fy,o){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Ny(e,n,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Fy}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){let e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}};function j$(i,t,e){i.emulatorOrigin=`http://${t}:${e}`}var kk="@firebase/functions",Dk="0.11.8";var B$="auth-internal",z$="app-check-internal",$$="messaging-internal";function q$(i,t){let e=(n,{instanceIdentifier:r})=>{let s=n.getProvider("app").getImmediate(),o=n.getProvider(B$),a=n.getProvider($$),l=n.getProvider(z$);return new Ly(s,o,a,l,r,i)};pt(new mt(Mk,e,"PUBLIC").setMultipleInstances(!0)),K(kk,Dk,t),K(kk,Dk,"esm2017")}function Pk(i=wt(),t=Fy){let n=yt(ye(i),Mk).getImmediate({identifier:t}),r=tr("functions");return r&&Ok(n,...r),n}function Ok(i,t,e){j$(ye(i),t,e)}q$(fetch.bind(self));var kl=class{constructor(t){return t}},Nk="functions",Vy=class{constructor(){return gt(Nk)}};var Uy=new F("angularfire2.functions-instances");function G$(i,t){let e=It(Nk,i,t);return e&&new kl(e)}function H$(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new kl(n)}}var W$={provide:Vy,deps:[[new ne,Uy]]},K$={provide:kl,useFactory:G$,deps:[[new ne,Uy],Je]};function Fk(i,...t){return K("angularfire",Xe.full,"fn"),We([K$,W$,{provide:Uy,useFactory:H$(i),multi:!0,deps:[V,ve,dt,rt,[new ne,$i],[new ne,di],...t]}])}var Lk=xe(Pk,!0);var Y$="/firebase-messaging-sw.js",Q$="/firebase-cloud-messaging-push-scope",$k="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",X$="https://fcmregistrations.googleapis.com/v1",qk="google.c.a.c_id",Z$="google.c.a.c_l",J$="google.c.a.ts",eq="google.c.a.e";var pm=function(i){return i.PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked",i}(pm||{});function zn(i){let t=new Uint8Array(i);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tq(i){let t="=".repeat((4-i.length%4)%4),e=(i+t).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}var jy="fcm_token_details_db",iq=5,Vk="fcm_token_object_Store";function nq(i){return v(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(jy))return null;let t=null;return(yield ap(jy,iq,{upgrade:(n,r,s,o)=>v(this,null,function*(){var a;if(r<2||!n.objectStoreNames.contains(Vk))return;let l=o.objectStore(Vk),d=yield l.index("fcmSenderId").get(i);if(yield l.clear(),!!d){if(r===2){let h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;t={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:zn(h.vapidKey)}}}else if(r===3){let h=d;t={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:zn(h.auth),p256dh:zn(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:zn(h.vapidKey)}}}else if(r===4){let h=d;t={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:zn(h.auth),p256dh:zn(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:zn(h.vapidKey)}}}}})})).close(),yield _d(jy),yield _d("fcm_vapid_details_db"),yield _d("undefined"),rq(t)?t:null})}function rq(i){if(!i||!i.subscriptionOptions)return!1;let{subscriptionOptions:t}=i;return typeof i.createTime=="number"&&i.createTime>0&&typeof i.token=="string"&&i.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}var sq="firebase-messaging-database",oq=1,Dl="firebase-messaging-store",By=null;function Gk(){return By||(By=ap(sq,oq,{upgrade:(i,t)=>{switch(t){case 0:i.createObjectStore(Dl)}}})),By}function aq(i){return v(this,null,function*(){let t=Hk(i),n=yield(yield Gk()).transaction(Dl).objectStore(Dl).get(t);if(n)return n;{let r=yield nq(i.appConfig.senderId);if(r)return yield qy(i,r),r}})}function qy(i,t){return v(this,null,function*(){let e=Hk(i),r=(yield Gk()).transaction(Dl,"readwrite");return yield r.objectStore(Dl).put(t,e),yield r.done,t})}function Hk({appConfig:i}){return i.appId}var cq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ni=new en("messaging","Messaging",cq);function lq(i,t){return v(this,null,function*(){let e=yield Hy(i),n=Wk(t),r={method:"POST",headers:e,body:JSON.stringify(n)},s;try{s=yield(yield fetch(Gy(i.appConfig),r)).json()}catch(o){throw ni.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw ni.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw ni.create("token-subscribe-no-token");return s.token})}function dq(i,t){return v(this,null,function*(){let e=yield Hy(i),n=Wk(t.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},s;try{s=yield(yield fetch(`${Gy(i.appConfig)}/${t.token}`,r)).json()}catch(o){throw ni.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw ni.create("token-update-failed",{errorInfo:o})}if(!s.token)throw ni.create("token-update-no-token");return s.token})}function uq(i,t){return v(this,null,function*(){let n={method:"DELETE",headers:yield Hy(i)};try{let s=yield(yield fetch(`${Gy(i.appConfig)}/${t}`,n)).json();if(s.error){let o=s.error.message;throw ni.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw ni.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function Gy({projectId:i}){return`${X$}/projects/${i}/registrations`}function Hy(e){return v(this,arguments,function*({appConfig:i,installations:t}){let n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})}function Wk({p256dh:i,auth:t,endpoint:e,vapidKey:n}){let r={web:{endpoint:e,auth:t,p256dh:i}};return n!==$k&&(r.web.applicationPubKey=n),r}var hq=7*24*60*60*1e3;function mq(i){return v(this,null,function*(){let t=yield fq(i.swRegistration,i.vapidKey),e={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:t.endpoint,auth:zn(t.getKey("auth")),p256dh:zn(t.getKey("p256dh"))},n=yield aq(i.firebaseDependencies);if(n){if(gq(n.subscriptionOptions,e))return Date.now()>=n.createTime+hq?pq(i,{token:n.token,createTime:Date.now(),subscriptionOptions:e}):n.token;try{yield uq(i.firebaseDependencies,n.token)}catch(r){console.warn(r)}return Uk(i.firebaseDependencies,e)}else return Uk(i.firebaseDependencies,e)})}function pq(i,t){return v(this,null,function*(){try{let e=yield dq(i.firebaseDependencies,t),n=Object.assign(Object.assign({},t),{token:e,createTime:Date.now()});return yield qy(i.firebaseDependencies,n),e}catch(e){throw e}})}function Uk(i,t){return v(this,null,function*(){let n={token:yield lq(i,t),createTime:Date.now(),subscriptionOptions:t};return yield qy(i,n),n.token})}function fq(i,t){return v(this,null,function*(){let e=yield i.pushManager.getSubscription();return e||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tq(t)})})}function gq(i,t){let e=t.vapidKey===i.vapidKey,n=t.endpoint===i.endpoint,r=t.auth===i.auth,s=t.p256dh===i.p256dh;return e&&n&&r&&s}function jk(i){let t={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return _q(t,i),vq(t,i),bq(t,i),t}function _q(i,t){if(!t.notification)return;i.notification={};let e=t.notification.title;e&&(i.notification.title=e);let n=t.notification.body;n&&(i.notification.body=n);let r=t.notification.image;r&&(i.notification.image=r);let s=t.notification.icon;s&&(i.notification.icon=s)}function vq(i,t){t.data&&(i.data=t.data)}function bq(i,t){var e,n,r,s,o;if(!t.fcmOptions&&!(!((e=t.notification)===null||e===void 0)&&e.click_action))return;i.fcmOptions={};let a=(r=(n=t.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&r!==void 0?r:(s=t.notification)===null||s===void 0?void 0:s.click_action;a&&(i.fcmOptions.link=a);let l=(o=t.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(i.fcmOptions.analyticsLabel=l)}function yq(i){return typeof i=="object"&&!!i&&qk in i}Kk("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Kk("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Kk(i,t){let e=[];for(let n=0;n<i.length;n++)e.push(i.charAt(n)),n<t.length&&e.push(t.charAt(n));return e.join("")}function wq(i){if(!i||!i.options)throw zy("App Configuration Object");if(!i.name)throw zy("App Name");let t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=i;for(let n of t)if(!e[n])throw zy(n);return{appName:i.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function zy(i){return ni.create("missing-app-config-values",{valueName:i})}var $y=class{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=wq(t);this.firebaseDependencies={app:t,appConfig:r,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}};function Iq(i){return v(this,null,function*(){try{i.swRegistration=yield navigator.serviceWorker.register(Y$,{scope:Q$}),i.swRegistration.update().catch(()=>{})}catch(t){throw ni.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}})}function Eq(i,t){return v(this,null,function*(){if(!t&&!i.swRegistration&&(yield Iq(i)),!(!t&&i.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw ni.create("invalid-sw-registration");i.swRegistration=t}})}function Cq(i,t){return v(this,null,function*(){t?i.vapidKey=t:i.vapidKey||(i.vapidKey=$k)})}function Tq(i,t){return v(this,null,function*(){if(!navigator)throw ni.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw ni.create("permission-blocked");return yield Cq(i,t?.vapidKey),yield Eq(i,t?.serviceWorkerRegistration),mq(i)})}function Sq(i,t,e){return v(this,null,function*(){let n=Aq(t);(yield i.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:e[qk],message_name:e[Z$],message_time:e[J$],message_device_time:Math.floor(Date.now()/1e3)})})}function Aq(i){switch(i){case pm.NOTIFICATION_CLICKED:return"notification_open";case pm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Rq(i,t){return v(this,null,function*(){let e=t.data;if(!e.isFirebaseMessaging)return;i.onMessageHandler&&e.messageType===pm.PUSH_RECEIVED&&(typeof i.onMessageHandler=="function"?i.onMessageHandler(jk(e)):i.onMessageHandler.next(jk(e)));let n=e.data;yq(n)&&n[eq]==="1"&&(yield Sq(i,e.messageType,n))})}var Bk="@firebase/messaging",zk="0.12.11";var xq=i=>{let t=new $y(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>Rq(t,e)),t},kq=i=>{let t=i.getProvider("messaging").getImmediate();return{getToken:n=>Tq(t,n)}};function Dq(){pt(new mt("messaging",xq,"PUBLIC")),pt(new mt("messaging-internal",kq,"PRIVATE")),K(Bk,zk),K(Bk,zk,"esm2017")}function Wy(){return v(this,null,function*(){try{yield xr()}catch{return!1}return typeof window<"u"&&xn()&&Na()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Yk(i=wt()){return Wy().then(t=>{if(!t)throw ni.create("unsupported-browser")},t=>{throw ni.create("indexed-db-unsupported")}),yt(ye(i),"messaging").getImmediate()}Dq();var Ml=class{constructor(t){return t}},Qk="messaging",Ky=class{constructor(){return gt(Qk)}};var Xk="__angularfire_symbol__messagingIsSupported",Yy="__angularfire_symbol__messagingIsSupportedValue";globalThis[Xk]||=Wy().then(i=>globalThis[Yy]=i).catch(()=>globalThis[Yy]=!1);var fm={async:()=>globalThis[Xk],sync:()=>{let i=globalThis[Yy];if(i===void 0)throw new Error(lo("Messaging"));return i}},Qy=new F("angularfire2.messaging-instances");function Mq(i,t){if(!fm.sync())return null;let e=It(Qk,i,t);return e&&new Ml(e)}function Pq(i){return(t,e)=>{if(!fm.sync())return null;let n=t.runOutsideAngular(()=>i(e));return new Ml(n)}}var Oq={provide:Ky,deps:[[new ne,Qy]]},Nq={provide:Ml,useFactory:Mq,deps:[[new ne,Qy],Je]};function Zk(i,...t){return K("angularfire",Xe.full,"fcm"),We([Nq,Oq,{provide:Ar,useValue:fm.async,multi:!0},{provide:Qy,useFactory:Pq(i),multi:!0,deps:[V,ve,dt,rt,...t]}])}var hX=fm.async;var Jk=xe(Yk,!0);var Pl=class{constructor(t){return t}},eD="performance",Xy=class{constructor(){return gt(eD)}};var Zy=new F("angularfire2.performance-instances");function Fq(i,t,e){if(!Da(e))return null;let n=It(eD,i,t);return n&&new Pl(n)}function Lq(i){return(t,e,n)=>{if(!Da(e))return null;let r=t.runOutsideAngular(()=>i(n));return new Pl(r)}}var Vq={provide:Xy,deps:[[new ne,Zy]]},Uq={provide:Pl,useFactory:Fq,deps:[[new ne,Zy],Je,Ci]};function tD(i,...t){return K("angularfire",Xe.full,"perf"),We([Uq,Vq,{provide:Zy,useFactory:Lq(i),multi:!0,deps:[V,Ci,ve,dt,rt,...t]}])}var iD=xe(AI,!0);var cD="firebasestorage.googleapis.com",jq="storageBucket",Bq=2*60*1e3,zq=10*60*1e3;var bn=class i extends ci{constructor(t,e,n=0){super(Jy(t),`Firebase Storage: ${e} (${Jy(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,i.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Jy(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},qn=function(i){return i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment",i}(qn||{});function Jy(i){return"storage/"+i}function $q(){let i="An unknown error occurred, please check the error payload for server response.";return new bn(qn.UNKNOWN,i)}function qq(){return new bn(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gq(){return new bn(qn.CANCELED,"User canceled the upload/download.")}function Hq(i){return new bn(qn.INVALID_URL,"Invalid URL '"+i+"'.")}function Wq(i){return new bn(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function nD(i){return new bn(qn.INVALID_ARGUMENT,i)}function lD(){return new bn(qn.APP_DELETED,"The Firebase app was deleted.")}function Kq(i){return new bn(qn.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var $n=class i{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=i.makeFromUrl(t,e)}catch{return new i(t,"")}if(n.path==="")return n;throw Wq(t)}static makeFromUrl(t,e){let n=null,r="([A-Za-z0-9.\\-_]+)";function s(me){me.path.charAt(me.path.length-1)==="/"&&(me.path_=me.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function d(me){me.path_=decodeURIComponent(me.path)}let h="v[A-Za-z0-9_]+",p=e.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${h}/b/${r}/o${f}`,"i"),C={bucket:1,path:3},D=e===cD?"(?:storage.googleapis.com|storage.cloud.google.com)":e,R="([^?#]*)",$=new RegExp(`^https?://${D}/${r}/${R}`,"i"),Y=[{regex:a,indices:l,postModify:s},{regex:w,indices:C,postModify:d},{regex:$,indices:{bucket:1,path:2},postModify:d}];for(let me=0;me<Y.length;me++){let _t=Y[me],Pe=_t.regex.exec(t);if(Pe){let E=Pe[_t.indices.bucket],_=Pe[_t.indices.path];_||(_=""),n=new i(E,_),_t.postModify(n);break}}if(n==null)throw Hq(t);return n}},ew=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function Yq(i,t,e){let n=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let d=!1;function h(...R){d||(d=!0,t.apply(null,R))}function p(R){r=setTimeout(()=>{r=null,i(w,l())},R)}function f(){s&&clearTimeout(s)}function w(R,...$){if(d){f();return}if(R){f(),h.call(null,R,...$);return}if(l()||o){f(),h.call(null,R,...$);return}n<64&&(n*=2);let Y;a===1?(a=2,Y=0):Y=(n+Math.random())*1e3,p(Y)}let C=!1;function D(R){C||(C=!0,f(),!d&&(r!==null?(R||(a=2),clearTimeout(r),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,D(!0)},e),D}function Qq(i){i(!1)}function Xq(i){return i!==void 0}function rD(i,t,e,n){if(n<t)throw nD(`Invalid value for '${i}'. Expected ${t} or greater.`);if(n>e)throw nD(`Invalid value for '${i}'. Expected ${e} or less.`)}function Zq(i){let t=encodeURIComponent,e="?";for(let n in i)if(i.hasOwnProperty(n)){let r=t(n)+"="+t(i[n]);e=e+r+"&"}return e=e.slice(0,-1),e}var tw=function(i){return i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT",i}(tw||{});function Jq(i,t){let e=i>=500&&i<600,r=[408,429].indexOf(i)!==-1,s=t.indexOf(i)!==-1;return e||r||s}var iw=class{constructor(t,e,n,r,s,o,a,l,d,h,p,f=!0){this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,C)=>{this.resolve_=w,this.reject_=C,this.start_()})}start_(){let t=(n,r)=>{if(r){n(!1,new Jo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let l=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===tw.NO_ERROR,l=s.getStatus();if(!a||Jq(l,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===tw.ABORT;n(!1,new Jo(!1,null,h));return}let d=this.successCodes_.indexOf(l)!==-1;n(!0,new Jo(d,s))})},e=(n,r)=>{let s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());Xq(l)?s(l):s()}catch(l){o(l)}else if(a!==null){let l=$q();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){let l=this.appDelete_?lD():Gq();o(l)}else{let l=qq();o(l)}};this.canceled_?e(!1,new Jo(!1,null,!0)):this.backoffId_=Yq(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Qq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Jo=class{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}};function eG(i,t){t!==null&&t.length>0&&(i.Authorization="Firebase "+t)}function tG(i,t){i["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function iG(i,t){t&&(i["X-Firebase-GMPID"]=t)}function nG(i,t){t!==null&&(i["X-Firebase-AppCheck"]=t)}function rG(i,t,e,n,r,s,o=!0){let a=Zq(i.urlParams),l=i.url+a,d=Object.assign({},i.headers);return iG(d,t),eG(d,e),tG(d,s),nG(d,n),new iw(l,i.method,d,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,r,o)}function sG(i){if(i.length===0)return null;let t=i.lastIndexOf("/");return t===-1?"":i.slice(0,t)}function oG(i){let t=i.lastIndexOf("/",i.length-2);return t===-1?i:i.slice(t+1)}var xX=256*1024;var nw=class i{constructor(t,e){this._service=t,e instanceof $n?this._location=e:this._location=$n.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new i(t,e)}get root(){let t=new $n(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oG(this._location.path)}get storage(){return this._service}get parent(){let t=sG(this._location.path);if(t===null)return null;let e=new $n(this._location.bucket,t);return new i(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw Kq(t)}};function sD(i,t){let e=t?.[jq];return e==null?null:$n.makeFromBucketSpec(e,i)}function aG(i,t,e,n={}){i.host=`${t}:${e}`,i._protocol="http";let{mockUserToken:r}=n;r&&(i._overrideAuthToken=typeof r=="string"?r:Ps(r,i.app.options.projectId))}var rw=class{constructor(t,e,n,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=cD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bq,this._maxUploadRetryTime=zq,this._requests=new Set,r!=null?this._bucket=$n.makeFromBucketSpec(r,this._host):this._bucket=sD(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,t):this._bucket=sD(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){rD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){rD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let e=yield t.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new nw(this,t)}_makeRequest(t,e,n,r,s=!0){if(this._deleted)return new ew(lD());{let o=rG(t,this._appId,n,r,e,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){return v(this,null,function*(){let[n,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,r).getPromise()})}},oD="@firebase/storage",aD="0.13.2";var dD="storage";function uD(i=wt(),t){i=ye(i);let n=yt(i,dD).getImmediate({identifier:t}),r=tr("storage");return r&&hD(n,...r),n}function hD(i,t,e,n={}){aG(i,t,e,n)}function cG(i,{instanceIdentifier:t}){let e=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new rw(e,n,r,t,li)}function lG(){pt(new mt(dD,cG,"PUBLIC").setMultipleInstances(!0)),K(oD,aD,""),K(oD,aD,"esm2017")}lG();var Ol=class{constructor(t){return t}},mD="storage",sw=class{constructor(){return gt(mD)}};var ow=new F("angularfire2.storage-instances");function dG(i,t){let e=It(mD,i,t);return e&&new Ol(e)}function uG(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new Ol(n)}}var hG={provide:sw,deps:[[new ne,ow]]},mG={provide:Ol,useFactory:dG,deps:[[new ne,ow],Je]};function pD(i,...t){return K("angularfire",Xe.full,"gcs"),We([mG,hG,{provide:ow,useFactory:uG(i),multi:!0,deps:[V,ve,dt,rt,[new ne,$i],[new ne,di],...t]}])}var fD=xe(uD,!0);var aw="@firebase/remote-config",gD="0.4.9";var _D="remote-config";var pG={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},hi=new en("remoteconfig","Remote Config",pG);function vD(i=wt()){return i=ye(i),yt(i,_D).getImmediate()}function bD(i){let t=ye(i);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}var cw=class{constructor(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let n=Date.now()-e,r=n<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${r}.`),r}fetch(t){return v(this,null,function*(){let[e,n]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e))return n;t.eTag=n&&n.eTag;let r=yield this.client.fetch(t),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(s),r})}};function fG(i=navigator){return i.languages&&i.languages[0]||i.language}var lw=class{constructor(t,e,n,r,s,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=s,this.appId=o}fetch(t){return v(this,null,function*(){let[e,n]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:n,app_id:this.appId,language_code:fG()},l={method:"POST",headers:o,body:JSON.stringify(a)},d=fetch(s,l),h=new Promise((R,$)=>{t.signal.addEventListener(()=>{let ee=new Error("The operation was aborted.");ee.name="AbortError",$(ee)})}),p;try{yield Promise.race([d,h]),p=yield d}catch(R){let $="fetch-client-network";throw R?.name==="AbortError"&&($="fetch-timeout"),hi.create($,{originalErrorMessage:R?.message})}let f=p.status,w=p.headers.get("ETag")||void 0,C,D;if(p.status===200){let R;try{R=yield p.json()}catch($){throw hi.create("fetch-client-parse",{originalErrorMessage:$?.message})}C=R.entries,D=R.state}if(D==="INSTANCE_STATE_UNSPECIFIED"?f=500:D==="NO_CHANGE"?f=304:(D==="NO_TEMPLATE"||D==="EMPTY_CONFIG")&&(C={}),f!==304&&f!==200)throw hi.create("fetch-status",{httpStatus:f});return{status:f,eTag:w,config:C}})}};function gG(i,t){return new Promise((e,n)=>{let r=Math.max(t-Date.now(),0),s=setTimeout(e,r);i.addEventListener(()=>{clearTimeout(s),n(hi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function _G(i){if(!(i instanceof ci)||!i.customData)return!1;let t=Number(i.customData.httpStatus);return t===429||t===500||t===503||t===504}var dw=class{constructor(t,e){this.client=t,this.storage=e}fetch(t){return v(this,null,function*(){let e=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,e)})}attemptFetch(r,s){return v(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n}){yield gG(t.signal,e);try{let o=yield this.client.fetch(t);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!_G(o))throw o;let a={throttleEndTimeMillis:Date.now()+ja(n),backoffCount:n+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(t,a)}})}};var vG=60*1e3,bG=12*60*60*1e3,uw=class{constructor(t,e,n,r,s){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:vG,minimumFetchIntervalMillis:bG},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function gm(i,t){let e=i.target.error||void 0;return hi.create(t,{originalErrorMessage:e&&e?.message})}var bs="app_namespace_store",yG="firebase_remote_config",wG=1;function IG(){return new Promise((i,t)=>{try{let e=indexedDB.open(yG,wG);e.onerror=n=>{t(gm(n,"storage-open"))},e.onsuccess=n=>{i(n.target.result)},e.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(bs,{keyPath:"compositeKey"})}}}catch(e){t(hi.create("storage-open",{originalErrorMessage:e?.message}))}})}var hw=class{constructor(t,e,n,r=IG()){this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){return v(this,null,function*(){let e=yield this.openDbPromise;return new Promise((n,r)=>{let o=e.transaction([bs],"readonly").objectStore(bs),a=this.createCompositeKey(t);try{let l=o.get(a);l.onerror=d=>{r(gm(d,"storage-get"))},l.onsuccess=d=>{let h=d.target.result;n(h?h.value:void 0)}}catch(l){r(hi.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(t,e){return v(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,s)=>{let a=n.transaction([bs],"readwrite").objectStore(bs),l=this.createCompositeKey(t);try{let d=a.put({compositeKey:l,value:e});d.onerror=h=>{s(gm(h,"storage-set"))},d.onsuccess=()=>{r()}}catch(d){s(hi.create("storage-set",{originalErrorMessage:d?.message}))}})})}delete(t){return v(this,null,function*(){let e=yield this.openDbPromise;return new Promise((n,r)=>{let o=e.transaction([bs],"readwrite").objectStore(bs),a=this.createCompositeKey(t);try{let l=o.delete(a);l.onerror=d=>{r(gm(d,"storage-delete"))},l.onsuccess=()=>{n()}}catch(l){r(hi.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}};var mw=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return v(this,null,function*(){let t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=yield t;r&&(this.lastFetchStatus=r);let s=yield e;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield n;o&&(this.activeConfig=o)})}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}};function EG(){pt(new mt(_D,i,"PUBLIC").setMultipleInstances(!0)),K(aw,gD),K(aw,gD,"esm2017");function i(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw hi.create("registration-window");if(!xn())throw hi.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=n.options;if(!s)throw hi.create("registration-project-id");if(!o)throw hi.create("registration-api-key");if(!a)throw hi.create("registration-app-id");e=e||"firebase";let l=new hw(a,n.name,e),d=new mw(l),h=new nn(aw);h.logLevel=qt.ERROR;let p=new lw(r,li,e,s,o,a),f=new dw(p,l),w=new cw(f,l,d,h),C=new uw(n,w,d,l,h);return bD(C),C}}function yD(){return v(this,null,function*(){if(!xn())return!1;try{return yield xr()}catch{return!1}})}EG();var Nl=class{constructor(t){return t}},wD="remote-config",pw=class{constructor(){return gt(wD)}};var fw="__angularfire_symbol__remoteConfigIsSupportedValue",ID="__angularfire_symbol__remoteConfigIsSupported";globalThis[ID]||=yD().then(i=>globalThis[fw]=i).catch(()=>globalThis[fw]=!1);var _m={async:()=>globalThis[ID],sync:()=>{let i=globalThis[fw];if(i===void 0)throw new Error(lo("RemoteConfig"));return i}},gw=new F("angularfire2.remote-config-instances");function CG(i,t){if(!_m.sync())return null;let e=It(wD,i,t);return e&&new Nl(e)}function TG(i){return(t,e)=>{if(!_m.sync())return null;let n=t.runOutsideAngular(()=>i(e));return new Nl(n)}}var SG={provide:pw,deps:[[new ne,gw]]},AG={provide:Nl,useFactory:CG,deps:[[new ne,gw],Je]};function ED(i,...t){return K("angularfire",Xe.full,"rc"),We([AG,SG,{provide:Ar,useValue:_m.async,multi:!0},{provide:gw,useFactory:TG(i),multi:!0,deps:[V,ve,dt,rt,...t]}])}var SZ=_m.async;var CD=xe(vD,!0);var TD="@firebase/vertexai-preview",SD="0.0.4";var AD="vertexAI",RD="us-central1";var _w=class{constructor(t,e,n,r){var s;this.app=t,this.options=r;let o=n?.getImmediate({optional:!0}),a=e?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||RD}_delete(){return Promise.resolve()}};var vw=function(i){return i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.OTHER="OTHER",i}(vw||{});var MZ=[vw.RECITATION,vw.SAFETY];function xD(i=wt(),t){return i=ye(i),yt(i,AD).getImmediate({identifier:t?.location||RD})}function RG(){pt(new mt(AD,(i,{instanceIdentifier:t})=>{let e=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new _w(e,n,r,{location:t})},"PUBLIC").setMultipleInstances(!0)),K(TD,SD),K(TD,SD,"esm2017")}RG();var Fl=class{constructor(t){return t}},kD="vertexai",bw=class{constructor(){return gt(kD)}};var yw=new F("angularfire2.vertexai-instances");function xG(i,t){let e=It(kD,i,t);return e&&new Fl(e)}function kG(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new Fl(n)}}var DG={provide:bw,deps:[[new ne,yw]]},MG={provide:Fl,useFactory:xG,deps:[[new ne,yw],Je]};function DD(i,...t){return K("angularfire",Xe.full,"vertexai"),We([MG,DG,{provide:yw,useFactory:kG(i),multi:!0,deps:[V,ve,dt,rt,[new ne,di],...t]}])}var MD=xe(xD,!0);var PG="@",OG=(()=>{class i{constructor(e,n,r,s,o){this.doc=e,this.delegate=n,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=U(j0,{optional:!0}),this.loadingSchedulerFn=U(NG,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-AZG7CHXL.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(r=>{throw new tt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new ww(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let a=o.createRenderer(e,n);s.use(a),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(n){Ra()}}static{this.\u0275prov=q({token:i,factory:i.\u0275fac})}}return i})(),ww=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,r){this.delegate.insertBefore(t,e,n,r)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n)),this.delegate.listen(t,e,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(PG)}},NG=new F("");function PD(i="animations"){return B0("NgAsyncAnimations"),We([{provide:ad,useFactory:(t,e,n)=>new OG(t,e,n,i),deps:[ge,yd,V]},{provide:St,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var OD={providers:[eI({eventCoalescing:!0}),_E(_R),hT(()=>mT({projectId:"chunks-versatile",appId:"1:303209244036:web:558f76e23fdcac43a3a9d1",databaseURL:"https://chunks-versatile.firebaseio.com",storageBucket:"chunks-versatile.appspot.com",apiKey:"AIzaSyCfooycLyNte5WizejI5GVWGF5wYLaJXH4",authDomain:"chunks-versatile.firebaseapp.com",messagingSenderId:"303209244036",measurementId:"G-718SMS4TDL"})),sS(()=>aS()),VR(()=>FR()),LR,wb,lR(()=>mR()),Rk(()=>xk()),Fk(()=>Lk()),Zk(()=>Jk()),tD(()=>iD()),pD(()=>fD()),ED(()=>CD()),DD(()=>MD()),PD()]};var vm=class i{title="angular-chunks";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_e({type:i,selectors:[["app-root"]],standalone:!0,features:[be],decls:1,vars:0,template:function(e,n){e&1&&oe(0,"router-outlet")},dependencies:[Hp]})};OI(vm,OD).catch(i=>console.error(i));
