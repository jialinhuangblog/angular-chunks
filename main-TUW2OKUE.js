import{$ as H,A as Xw,B as Zw,C as Ui,D as dr,E as ia,F as na,G as ra,H as ur,I as Jw,J as eI,K as tI,L as iI,M as sa,N as oa,O as de,P as nt,Q as Mt,R as ji,S as Jh,T as El,U as rt,V as lt,W as cn,X as Jt,Y as nI,Z as dt,_ as Cl,a as L,aa as rI,b as us,c as $w,d as qw,e as Hw,f as Gw,g as Ww,h as On,i as Xh,j as Zh,k as hs,l as Pt,m as Jo,n as Kw,o as ea,p as wl,q as Yw,r as Li,s as Qw,t as an,u as lr,v as ta,w as Zt,x as Vi,y as Il,z as vt}from"./chunk-F5LKORDS.js";import{$ as V,$a as ss,$b as Zo,A as kt,Aa as vw,Ab as as,B as Uh,Ba as fi,Bb as kw,C as es,Ca as $t,Cb as yl,D as ts,Da as Wo,Db as bl,E as jh,Ea as Ko,Eb as cr,F as Bh,Fa as ae,Fb as Dw,G as nn,Ga as M,Gb as Xo,H as dw,Ha as pl,Hb as Yh,I as $o,Ia as yw,Ib as Pw,J as fl,Ja as Yo,Jb as Dt,K as Dn,Ka as gl,Kb as Mw,L as uw,La as ns,Lb as Nw,M as zh,Ma as or,Mb as Xt,N as hw,Na as bw,Nb as cs,O as $h,Oa as rs,Ob as sn,P as fw,Pa as ww,Pb as Ti,Q as qh,Qa as Yt,Qb as ls,R as ml,Ra as oi,Rb as Ow,S as nr,Sa as Iw,Sb as Fw,T as Kt,Ta as Ew,Tb as fe,U as Xe,Ua as $e,Ub as ds,V as pt,Va as _l,Vb as Lw,W as je,Wa as ar,Wb as Vw,X as Oi,Xa as It,Xb as Uw,Y as z,Ya as qe,Yb as jw,Z as X,Za as vl,Zb as on,_ as mw,_a as Me,_b as Bw,a as tn,aa as Hh,ab as ct,ac as Qh,b as sw,ba as P,bb as ee,bc as zw,c as Ii,ca as $,cb as ie,d as Ph,da as J,db as Se,e as Mh,ea as qo,eb as os,ec as Tl,f as ue,fa as tt,fb as Pn,fc as aa,g as Gt,ga as Z,gb as Ze,h as ow,ha as he,hb as Ei,hc as hr,i as aw,ia as ke,ib as Ci,ic as sI,j as Ni,ja as pw,jb as gt,jc as Al,k as Nh,ka as is,kb as Mn,kc as ef,l as Oh,la as rn,lb as Et,lc as oI,m as Fh,ma as si,mb as He,n as zt,na as rr,nb as Ge,o as Y,oa as sr,ob as Cw,p as Bo,pa as Gh,pb as Tw,q as dl,qa as Fi,qb as Qo,r as cw,ra as Ho,rb as Qt,s as pe,sa as ce,sb as Nn,t as zo,ta as gw,tb as Kh,u as Wt,ua as ze,ub as Aw,v as ul,va as U,vb as Sw,w as Lh,wa as Wh,wb as Rw,x as lw,xa as le,xb as _t,y as Vh,ya as _w,yb as it,z as hl,za as Go,zb as xw}from"./chunk-4HSPYGMA.js";import{a as N,b as Ce,c as rw,d as kn,e as v}from"./chunk-ACKELEN3.js";var rf=class extends Fw{constructor(){super(...arguments),this.supportsDOMEvents=!0}},sf=class i extends rf{static makeCurrent(){Ow(new i)}onAndCancel(e,t,n){return e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Ok();return t==null?null:Fk(t)}resetBaseElement(){ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Lw(document.cookie,e)}},ca=null;function Ok(){return ca=ca||document.querySelector("base"),ca?ca.getAttribute("href"):null}function Fk(i){return new URL(i,document.baseURI).pathname}var Lk=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})(),Sl=new V(""),lI=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(s=>s.supports(t)),!n)throw new je(5101,!1);return this._eventNameToPlugin.set(t,n),n}static{this.\u0275fac=function(n){return new(n||i)(P(Sl),P(U))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})(),la=class{constructor(e){this._doc=e}},tf="ng-app-id",dI=(()=>{class i{constructor(t,n,r,s={}){this.doc=t,this.appId=n,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Qh(s),this.resetHostNodes()}addStyles(t){for(let n of t)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(t){for(let n of t)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(n=>n.remove()),t.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){let n=this.styleRef;n.get(t)?.elements?.forEach(r=>r.remove()),n.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${tf}="${this.appId}"]`);if(t?.length){let n=new Map;return t.forEach(r=>{r.textContent!=null&&n.set(r.textContent,r)}),n}return null}changeUsageCount(t,n){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=n,s.usage}return r.set(t,{usage:n,elements:[]}),n}getStyleElement(t,n){let r=this.styleNodesInDOM,s=r?.get(n);if(s?.parentNode===t)return r.delete(n),s.removeAttribute(tf),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(tf,this.appId),t.appendChild(o),o}}addStyleToHost(t,n){let r=this.getStyleElement(t,n),s=this.styleRef,o=s.get(n)?.elements;o?o.push(r):s.set(n,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)(P(fe),P(Go),P(Wo,8),P(fi))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})(),nf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},af=/%COMP%/g,uI="%COMP%",Vk=`_nghost-${uI}`,Uk=`_ngcontent-${uI}`,jk=!0,Bk=new V("",{providedIn:"root",factory:()=>jk});function zk(i){return Uk.replace(af,i)}function $k(i){return Vk.replace(af,i)}function hI(i,e){return e.map(t=>t.replace(af,i))}var Rl=(()=>{class i{constructor(t,n,r,s,o,c,l,d=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Qh(c),this.defaultRenderer=new da(t,o,l,this.platformIsServer)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===qo.ShadowDom&&(n=Ce(N({},n),{encapsulation:qo.Emulated}));let r=this.getOrCreateRenderer(t,n);return r instanceof xl?r.applyToHost(t):r instanceof ua&&r.applyStyles(),r}getOrCreateRenderer(t,n){let r=this.rendererByCompId,s=r.get(n.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(n.encapsulation){case qo.Emulated:s=new xl(l,d,n,this.appId,h,o,c,m);break;case qo.ShadowDom:return new of(l,d,t,n,o,c,this.nonce,m);default:s=new ua(l,d,n,h,o,c,m);break}r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)(P(lI),P(dI),P(Go),P(Bk),P(fe),P(fi),P(U),P(Wo))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})(),da=class{constructor(e,t,n,r){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(nf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(aI(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(aI(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){t.remove()}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new je(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;let s=nf[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let r=nf[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(Ko.DashCase|Ko.Important)?e.style.setProperty(t,n,r&Ko.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Ko.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n){if(typeof e=="string"&&(e=ls().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(n))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function aI(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var of=class extends da{constructor(e,t,n,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=hI(r.id,r.styles);for(let h of d){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=h,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ua=class extends da{constructor(e,t,n,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?hI(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xl=class extends ua{constructor(e,t,n,r,s,o,c,l){let d=r+"-"+n.id;super(e,t,n,s,o,c,l,d),this.contentAttr=zk(d),this.hostAttr=$k(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}},qk=(()=>{class i extends la{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)(P(fe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})(),Hk=(()=>{class i extends la{constructor(t){super(t),this.delegate=$(Nw,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,n,r){return this.delegate.addEventListener(t,n,r)}removeEventListener(t,n,r){return this.delegate.removeEventListener(t,n,r)}static{this.\u0275fac=function(n){return new(n||i)(P(fe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})(),cI=["alt","control","meta","shift"],Gk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wk={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},Kk=(()=>{class i extends la{constructor(t){super(t)}supports(t){return i.parseEventName(t)!=null}addEventListener(t,n,r){let s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ls().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let n=t.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let s=i._normalizeKey(n.pop()),o="",c=n.indexOf("code");if(c>-1&&(n.splice(c,1),o="code."),cI.forEach(d=>{let h=n.indexOf(d);h>-1&&(n.splice(h,1),o+=d+".")}),o+=s,n.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,n){let r=Gk[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),cI.forEach(o=>{if(o!==r){let c=Wk[o];c(t)&&(s+=o+".")}}),s+=r,s===n)}static eventCallback(t,n,r){return s=>{i.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(n){return new(n||i)(P(fe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})();function fI(i,e){return Mw(N({rootComponent:i},Yk(e)))}function Yk(i){return{appProviders:[...eD,...i?.providers??[]],platformProviders:Jk}}function Qk(){sf.makeCurrent()}function Xk(){return new Wh}function Zk(){return _w(document),document}var Jk=[{provide:fi,useValue:Bw},{provide:vw,useValue:Qk,multi:!0},{provide:fe,useFactory:Zk,deps:[]}];var eD=[{provide:pw,useValue:"root"},{provide:Wh,useFactory:Xk,deps:[]},{provide:Sl,useClass:qk,multi:!0,deps:[fe,U,fi]},{provide:Sl,useClass:Kk,multi:!0,deps:[fe]},{provide:Sl,useClass:Hk,multi:!0},Rl,dI,lI,{provide:gl,useExisting:Rl},{provide:zw,useClass:Lk,deps:[]},[]];var kl=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(n){return new(n||i)(P(fe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var se="primary",xa=Symbol("RouteTitle"),hf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function vs(i){return new hf(i)}function tD(i,e,t){let n=t.path.split("/");if(n.length>i.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let o=n[s],c=i[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function iD(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Bi(i[t],e[t]))return!1;return!0}function Bi(i,e){let t=i?ff(i):void 0,n=e?ff(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!II(i[r],e[r]))return!1;return!0}function ff(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function II(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;let t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}else return i===e}function EI(i){return i.length>0?i[i.length-1]:null}function Fn(i){return dl(i)?i:bl(i)?zt(Promise.resolve(i)):Y(i)}var nD={exact:TI,subset:AI},CI={exact:rD,subset:sD,ignored:()=>!0};function pI(i,e,t){return nD[t.paths](i.root,e.root,t.matrixParams)&&CI[t.queryParams](i.queryParams,e.queryParams)&&!(t.fragment==="exact"&&i.fragment!==e.fragment)}function rD(i,e){return Bi(i,e)}function TI(i,e,t){if(!mr(i.segments,e.segments)||!Ml(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!i.children[n]||!TI(i.children[n],e.children[n],t))return!1;return!0}function sD(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>II(i[t],e[t]))}function AI(i,e,t){return SI(i,e,e.segments,t)}function SI(i,e,t,n){if(i.segments.length>t.length){let r=i.segments.slice(0,t.length);return!(!mr(r,t)||e.hasChildren()||!Ml(r,t,n))}else if(i.segments.length===t.length){if(!mr(i.segments,t)||!Ml(i.segments,t,n))return!1;for(let r in e.children)if(!i.children[r]||!AI(i.children[r],e.children[r],n))return!1;return!0}else{let r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!mr(i.segments,r)||!Ml(i.segments,r,n)||!i.children[se]?!1:SI(i.children[se],e,s,n)}}function Ml(i,e,t){return e.every((n,r)=>CI[t](i[r].parameters,n.parameters))}var dn=class{constructor(e=new Te([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){return cD.serialize(this)}},Te=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nl(this)}},fr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=vs(this.parameters),this._parameterMap}toString(){return xI(this)}};function oD(i,e){return mr(i,e)&&i.every((t,n)=>Bi(t.parameters,e[n].parameters))}function mr(i,e){return i.length!==e.length?!1:i.every((t,n)=>t.path===e[n].path)}function aD(i,e){let t=[];return Object.entries(i.children).forEach(([n,r])=>{n===se&&(t=t.concat(e(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==se&&(t=t.concat(e(r,n)))}),t}var Vf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:()=>new va,providedIn:"root"})}}return i})(),va=class{parse(e){let t=new pf(e);return new dn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ha(e.root,!0)}`,n=uD(e.queryParams),r=typeof e.fragment=="string"?`#${lD(e.fragment)}`:"";return`${t}${n}${r}`}},cD=new va;function Nl(i){return i.segments.map(e=>xI(e)).join("/")}function ha(i,e){if(!i.hasChildren())return Nl(i);if(e){let t=i.children[se]?ha(i.children[se],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==se&&n.push(`${r}:${ha(s,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=aD(i,(n,r)=>r===se?[ha(i.children[se],!1)]:[`${r}:${ha(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[se]!=null?`${Nl(i)}/${t[0]}`:`${Nl(i)}/(${t.join("//")})`}}function RI(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dl(i){return RI(i).replace(/%3B/gi,";")}function lD(i){return encodeURI(i)}function mf(i){return RI(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ol(i){return decodeURIComponent(i)}function gI(i){return Ol(i.replace(/\+/g,"%20"))}function xI(i){return`${mf(i.path)}${dD(i.parameters)}`}function dD(i){return Object.entries(i).map(([e,t])=>`;${mf(e)}=${mf(t)}`).join("")}function uD(i){let e=Object.entries(i).map(([t,n])=>Array.isArray(n)?n.map(r=>`${Dl(t)}=${Dl(r)}`).join("&"):`${Dl(t)}=${Dl(n)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var hD=/^[^\/()?;#]+/;function cf(i){let e=i.match(hD);return e?e[0]:""}var fD=/^[^\/()?;=#]+/;function mD(i){let e=i.match(fD);return e?e[0]:""}var pD=/^[^=?&#]+/;function gD(i){let e=i.match(pD);return e?e[0]:""}var _D=/^[^&#]+/;function vD(i){let e=i.match(_D);return e?e[0]:""}var pf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[se]=new Te(e,t)),n}parseSegment(){let e=cf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new je(4009,!1);return this.capture(e),new fr(Ol(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=mD(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let r=cf(this.remaining);r&&(n=r,this.capture(n))}e[Ol(t)]=Ol(n)}parseQueryParam(e){let t=gD(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let o=vD(this.remaining);o&&(n=o,this.capture(n))}let r=gI(t),s=gI(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=cf(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new je(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=se);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[se]:new Te([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new je(4011,!1)}};function kI(i){return i.segments.length>0?new Te([],{[se]:i}):i}function DI(i){let e={};for(let[n,r]of Object.entries(i.children)){let s=DI(r);if(n===se&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[n]=s)}let t=new Te(i.segments,e);return yD(t)}function yD(i){if(i.numberOfChildren===1&&i.children[se]){let e=i.children[se];return new Te(i.segments.concat(e.segments),e.children)}return i}function ya(i){return i instanceof dn}function bD(i,e,t=null,n=null){let r=PI(i);return MI(r,e,t,n)}function PI(i){let e;function t(s){let o={};for(let l of s.children){let d=t(l);o[l.outlet]=d}let c=new Te(s.url,o);return s===i&&(e=c),c}let n=t(i.root),r=kI(n);return e??r}function MI(i,e,t,n){let r=i;for(;r.parent;)r=r.parent;if(e.length===0)return lf(r,r,r,t,n);let s=wD(e);if(s.toRoot())return lf(r,r,new Te([],{}),t,n);let o=ID(s,r,i),c=o.processChildren?pa(o.segmentGroup,o.index,s.commands):OI(o.segmentGroup,o.index,s.commands);return lf(r,o.segmentGroup,c,t,n)}function Fl(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function ba(i){return typeof i=="object"&&i!=null&&i.outlets}function lf(i,e,t,n,r){let s={};n&&Object.entries(n).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;i===e?o=t:o=NI(i,e,t);let c=kI(DI(o));return new dn(c,s,r)}function NI(i,e,t){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===e?n[r]=t:n[r]=NI(s,e,t)}),new Te(i.segments,n)}var Ll=class{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Fl(n[0]))throw new je(4003,!1);let r=n.find(ba);if(r&&r!==EI(n))throw new je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wD(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new Ll(!0,0,i);let e=0,t=!1,n=i.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Ll(t,e,n)}var ps=class{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function ID(i,e,t){if(i.isAbsolute)return new ps(e,!0,0);if(!t)return new ps(e,!1,NaN);if(t.parent===null)return new ps(t,!0,0);let n=Fl(i.commands[0])?0:1,r=t.segments.length-1+n;return ED(t,r,i.numberOfDoubleDots)}function ED(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new je(4005,!1);r=n.segments.length}return new ps(n,!1,r-s)}function CD(i){return ba(i[0])?i[0].outlets:{[se]:i}}function OI(i,e,t){if(i??=new Te([],{}),i.segments.length===0&&i.hasChildren())return pa(i,e,t);let n=TD(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new Te(i.segments.slice(0,n.pathIndex),{});return s.children[se]=new Te(i.segments.slice(n.pathIndex),i.children),pa(s,0,r)}else return n.match&&r.length===0?new Te(i.segments,{}):n.match&&!i.hasChildren()?gf(i,e,t):n.match?pa(i,0,r):gf(i,e,t)}function pa(i,e,t){if(t.length===0)return new Te(i.segments,{});{let n=CD(t),r={};if(Object.keys(n).some(s=>s!==se)&&i.children[se]&&i.numberOfChildren===1&&i.children[se].segments.length===0){let s=pa(i.children[se],e,t);return new Te(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=OI(i.children[s],e,o))}),Object.entries(i.children).forEach(([s,o])=>{n[s]===void 0&&(r[s]=o)}),new Te(i.segments,r)}}function TD(i,e,t){let n=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;let o=i.segments[r],c=t[n];if(ba(c))break;let l=`${c}`,d=n<t.length-1?t[n+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!vI(l,d,o))return s;n+=2}else{if(!vI(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function gf(i,e,t){let n=i.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(ba(s)){let l=AD(s.outlets);return new Te(n,l)}if(r===0&&Fl(t[0])){let l=i.segments[e];n.push(new fr(l.path,_I(t[0]))),r++;continue}let o=ba(s)?s.outlets[se]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Fl(c)?(n.push(new fr(o,_I(c))),r+=2):(n.push(new fr(o,{})),r++)}return new Te(n,{})}function AD(i){let e={};return Object.entries(i).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=gf(new Te([],{}),0,n))}),e}function _I(i){let e={};return Object.entries(i).forEach(([t,n])=>e[t]=`${n}`),e}function vI(i,e,t){return i==t.path&&Bi(e,t.parameters)}var ga="imperative",Ct=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Ct||{}),mi=class{constructor(e,t){this.id=e,this.url=t}},wa=class extends mi{constructor(e,t,n="imperative",r=null){super(e,t),this.type=Ct.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pr=class extends mi{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=Ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ci=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(ci||{}),_f=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(_f||{}),ln=class extends mi{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=Ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gr=class extends mi{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=Ct.NavigationSkipped}},Ia=class extends mi{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=Ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vl=class extends mi{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class extends mi{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yf=class extends mi{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=Ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bf=class extends mi{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wf=class extends mi{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},If=class{constructor(e){this.route=e,this.type=Ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ef=class{constructor(e){this.route=e,this.type=Ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cf=class{constructor(e){this.snapshot=e,this.type=Ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{constructor(e){this.snapshot=e,this.type=Ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Af=class{constructor(e){this.snapshot=e,this.type=Ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ea=class{constructor(e){this.snapshot=e,this.type=Ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ca=class{},ys=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function SD(i,e){return i.providers&&!i._injector&&(i._injector=Ew(i.providers,e,`Route: ${i.path}`)),i._injector??e}function Ai(i){return i.outlet||se}function RD(i,e){let t=i.filter(n=>Ai(n)===e);return t.push(...i.filter(n=>Ai(n)!==e)),t}function ka(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Sf=class{get injector(){return ka(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Hl(this.rootInjector),this.attachRef=null}},Hl=(()=>{class i{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,n){let r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Sf(this.rootInjector),this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(n){return new(n||i)(P(is))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ul=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Rf(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=Rf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=xf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return xf(e,this._root).map(t=>t.value)}};function Rf(i,e){if(i===e.value)return e;for(let t of e.children){let n=Rf(i,t);if(n)return n}return null}function xf(i,e){if(i===e.value)return[e];for(let t of e.children){let n=xf(i,t);if(n.length)return n.unshift(e),n}return[]}var ai=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ms(i){let e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}var jl=class extends Ul{constructor(e,t){super(e),this.snapshot=t,Uf(this,e)}toString(){return this.snapshot.toString()}};function FI(i){let e=xD(i),t=new Gt([new fr("",{})]),n=new Gt({}),r=new Gt({}),s=new Gt({}),o=new Gt(""),c=new bs(t,n,s,o,r,se,i,e.root);return c.snapshot=e.root,new jl(new ai(c,[]),e)}function xD(i){let e={},t={},n={},r="",s=new gs([],e,n,r,t,se,i,null,{});return new zl("",new ai(s,[]))}var bs=class{constructor(e,t,n,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(pe(d=>d[xa]))??Y(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bl(i,e,t="emptyOnly"){let n,{routeConfig:r}=i;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:N(N({},e.params),i.params),data:N(N({},e.data),i.data),resolve:N(N(N(N({},i.data),e.data),r?.data),i._resolvedData)}:n={params:N({},i.params),data:N({},i.data),resolve:N(N({},i.data),i._resolvedData??{})},r&&VI(r)&&(n.resolve[xa]=r.title),n}var gs=class{get title(){return this.data?.[xa]}constructor(e,t,n,r,s,o,c,l,d){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},zl=class extends Ul{constructor(e,t){super(t),this.url=e,Uf(this,t)}toString(){return LI(this._root)}};function Uf(i,e){e.value._routerState=i,e.children.forEach(t=>Uf(i,t))}function LI(i){let e=i.children.length>0?` { ${i.children.map(LI).join(", ")} } `:"";return`${i.value}${e}`}function df(i){if(i.snapshot){let e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Bi(e.queryParams,t.queryParams)||i.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&i.fragmentSubject.next(t.fragment),Bi(e.params,t.params)||i.paramsSubject.next(t.params),iD(e.url,t.url)||i.urlSubject.next(t.url),Bi(e.data,t.data)||i.dataSubject.next(t.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function kf(i,e){let t=Bi(i.params,e.params)&&oD(i.url,e.url),n=!i.parent!=!e.parent;return t&&!n&&(!i.parent||kf(i.parent,e.parent))}function VI(i){return typeof i.title=="string"||i.title===null}var jf=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new ze,this.deactivateEvents=new ze,this.attachEvents=new ze,this.detachEvents=new ze,this.parentContexts=$(Hl),this.location=$(or),this.changeDetector=$(Dt),this.inputBinder=$(Bf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:r}=t.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new je(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new je(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Df(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=he({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[si]})}}return i})(),Df=class i{__ngOutletInjector(e){return new i(this.route,this.childContexts,e)}constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===bs?this.route:e===Hl?this.childContexts:this.parent.get(e,t)}},Bf=new V("");function kD(i,e,t){let n=Ta(i,e._root,t?t._root:void 0);return new jl(n,e)}function Ta(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let r=DD(i,e,t);return new ai(n,r)}else{if(i.shouldAttach(e.value)){let s=i.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Ta(i,c)),o}}let n=PD(e.value),r=e.children.map(s=>Ta(i,s));return new ai(n,r)}}function DD(i,e,t){return e.children.map(n=>{for(let r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Ta(i,n,r);return Ta(i,n)})}function PD(i){return new bs(new Gt(i.url),new Gt(i.params),new Gt(i.queryParams),new Gt(i.fragment),new Gt(i.data),i.outlet,i.component,i)}var Aa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},UI="ngNavigationCancelingError";function $l(i,e){let{redirectTo:t,navigationBehaviorOptions:n}=ya(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=jI(!1,ci.Redirect);return r.url=t,r.navigationBehaviorOptions=n,r}function jI(i,e){let t=new Error(`NavigationCancelingError: ${i||""}`);return t[UI]=!0,t.cancellationCode=e,t}function MD(i){return BI(i)&&ya(i.url)}function BI(i){return!!i&&i[UI]}var ND=(i,e,t,n)=>pe(r=>(new Pf(e,r.targetRouterState,r.currentRouterState,t,n).activate(i),r)),Pf=class{constructor(e,t,n,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),df(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let r=ms(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=ms(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){let o=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=ms(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let r=ms(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new Ea(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Tf(e.value.snapshot))}activateRoutes(e,t,n){let r=e.value,s=t?t.value:null;if(df(r),r===s)if(r.component){let o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){let o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),df(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,n)}},ql=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_s=class{constructor(e,t){this.component=e,this.route=t}};function OD(i,e,t){let n=i._root,r=e?e._root:null;return fa(n,r,t,[n.value])}function FD(i){let e=i.routeConfig?i.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:i,guards:e}}function Is(i,e){let t=Symbol(),n=e.get(i,t);return n===t?typeof i=="function"&&!mw(i)?i:e.get(i):n}function fa(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ms(e);return i.children.forEach(o=>{LD(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>_a(c,t.getContext(o),r)),r}function LD(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,o=e?e.value:null,c=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=VD(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ql(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?fa(i,e,c?c.children:null,n,r):fa(i,e,t,n,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new _s(c.outlet.component,o))}else o&&_a(e,c,r),r.canActivateChecks.push(new ql(n)),s.component?fa(i,null,c?c.children:null,n,r):fa(i,null,t,n,r);return r}function VD(i,e,t){if(typeof t=="function")return t(i,e);switch(t){case"pathParamsChange":return!mr(i.url,e.url);case"pathParamsOrQueryParamsChange":return!mr(i.url,e.url)||!Bi(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kf(i,e)||!Bi(i.queryParams,e.queryParams);case"paramsChange":default:return!kf(i,e)}}function _a(i,e,t){let n=ms(i),r=i.value;Object.entries(n).forEach(([s,o])=>{r.component?e?_a(o,e.children.getContext(s),t):_a(o,null,t):_a(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new _s(e.outlet.component,r)):t.canDeactivateChecks.push(new _s(null,r)):t.canDeactivateChecks.push(new _s(null,r))}function Da(i){return typeof i=="function"}function UD(i){return typeof i=="boolean"}function jD(i){return i&&Da(i.canLoad)}function BD(i){return i&&Da(i.canActivate)}function zD(i){return i&&Da(i.canActivateChild)}function $D(i){return i&&Da(i.canDeactivate)}function qD(i){return i&&Da(i.canMatch)}function zI(i){return i instanceof cw||i?.name==="EmptyError"}var Pl=Symbol("INITIAL_VALUE");function ws(){return Kt(i=>zo(i.map(e=>e.pipe(nn(1),nr(Pl)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===Pl)return Pl;if(t===!1||HD(t))return t}return!0}),kt(e=>e!==Pl),nn(1)))}function HD(i){return ya(i)||i instanceof Aa}function GD(i,e){return Wt(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Y(Ce(N({},t),{guardsResult:!0})):WD(o,n,r,i).pipe(Wt(c=>c&&UD(c)?KD(n,s,i,e):Y(c)),pe(c=>Ce(N({},t),{guardsResult:c})))})}function WD(i,e,t,n){return zt(i).pipe(Wt(r=>JD(r.component,r.route,t,e,n)),Dn(r=>r!==!0,!0))}function KD(i,e,t,n){return zt(e).pipe(ts(r=>ul(QD(r.route.parent,n),YD(r.route,n),ZD(i,r.path,t),XD(i,r.route,t))),Dn(r=>r!==!0,!0))}function YD(i,e){return i!==null&&e&&e(new Af(i)),Y(!0)}function QD(i,e){return i!==null&&e&&e(new Cf(i)),Y(!0)}function XD(i,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return Y(!0);let r=n.map(s=>Lh(()=>{let o=ka(e)??t,c=Is(s,o),l=BD(c)?c.canActivate(e,i):rn(o,()=>c(e,i));return Fn(l).pipe(Dn())}));return Y(r).pipe(ws())}function ZD(i,e,t){let n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>FD(o)).filter(o=>o!==null).map(o=>Lh(()=>{let c=o.guards.map(l=>{let d=ka(o.node)??t,h=Is(l,d),m=zD(h)?h.canActivateChild(n,i):rn(d,()=>h(n,i));return Fn(m).pipe(Dn())});return Y(c).pipe(ws())}));return Y(s).pipe(ws())}function JD(i,e,t,n,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(c=>{let l=ka(e)??r,d=Is(c,l),h=$D(d)?d.canDeactivate(i,e,t,n):rn(l,()=>d(i,e,t,n));return Fn(h).pipe(Dn())});return Y(o).pipe(ws())}function eP(i,e,t,n){let r=e.canLoad;if(r===void 0||r.length===0)return Y(!0);let s=r.map(o=>{let c=Is(o,i),l=jD(c)?c.canLoad(e,t):rn(i,()=>c(e,t));return Fn(l)});return Y(s).pipe(ws(),$I(n))}function $I(i){return sw(pt(e=>{if(typeof e!="boolean")throw $l(i,e)}),pe(e=>e===!0))}function tP(i,e,t,n){let r=e.canMatch;if(!r||r.length===0)return Y(!0);let s=r.map(o=>{let c=Is(o,i),l=qD(c)?c.canMatch(e,t):rn(i,()=>c(e,t));return Fn(l)});return Y(s).pipe(ws(),$I(n))}var Sa=class{constructor(e){this.segmentGroup=e||null}},Ra=class extends Error{constructor(e){super(),this.urlTree=e}};function fs(i){return Bo(new Sa(i))}function iP(i){return Bo(new je(4e3,!1))}function nP(i){return Bo(jI(!1,ci.GuardRejected))}var Mf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return Y(n);if(r.numberOfChildren>1||!r.children[se])return iP(`${e.redirectTo}`);r=r.children[se]}}applyRedirectCommands(e,t,n,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:d,routeConfig:h,url:m,outlet:p,params:w,data:T,title:k}=r,x=rn(s,()=>c({params:w,data:T,queryParams:l,fragment:d,routeConfig:h,url:m,outlet:p,title:k}));if(x instanceof dn)throw new Ra(x);t=x}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t[0]==="/")throw new Ra(o);return o}applyRedirectCreateUrlTree(e,t,n,r){let s=this.createSegmentGroup(e,t.root,n,r);return new dn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);n[r]=t[c]}else n[r]=s}),n}createSegmentGroup(e,t,n,r){let s=this.createSegments(e,t.segments,n,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,n,r)}),new Te(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){let r=n[t.path.substring(1)];if(!r)throw new je(4001,!1);return r}findOrReturn(e,t){let n=0;for(let r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}},Nf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rP(i,e,t,n,r){let s=qI(i,e,t);return s.matched?(n=SD(e,n),tP(n,e,t,r).pipe(pe(o=>o===!0?s:N({},Nf)))):Y(s)}function qI(i,e,t){if(e.path==="**")return sP(t);if(e.path==="")return e.pathMatch==="full"&&(i.hasChildren()||t.length>0)?N({},Nf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||tD)(t,i,e);if(!r)return N({},Nf);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function sP(i){return{matched:!0,parameters:i.length>0?EI(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function yI(i,e,t,n){return t.length>0&&cP(i,t,n)?{segmentGroup:new Te(e,aP(n,new Te(t,i.children))),slicedSegments:[]}:t.length===0&&lP(i,t,n)?{segmentGroup:new Te(i.segments,oP(i,t,n,i.children)),slicedSegments:t}:{segmentGroup:new Te(i.segments,i.children),slicedSegments:t}}function oP(i,e,t,n){let r={};for(let s of t)if(Gl(i,e,s)&&!n[Ai(s)]){let o=new Te([],{});r[Ai(s)]=o}return N(N({},n),r)}function aP(i,e){let t={};t[se]=e;for(let n of i)if(n.path===""&&Ai(n)!==se){let r=new Te([],{});t[Ai(n)]=r}return t}function cP(i,e,t){return t.some(n=>Gl(i,e,n)&&Ai(n)!==se)}function lP(i,e,t){return t.some(n=>Gl(i,e,n))}function Gl(i,e,t){return(i.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function dP(i,e,t){return e.length===0&&!i.children[t]}var Of=class{};function uP(i,e,t,n,r,s,o="emptyOnly"){return new Ff(i,e,t,n,r,o,s).recognize()}var hP=31,Ff=class{constructor(e,t,n,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Mf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new je(4002,`'${e.segmentGroup}'`)}recognize(){let e=yI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:t,rootSnapshot:n})=>{let r=new ai(n,t),s=new zl("",r),o=bD(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new gs([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,t).pipe(pe(n=>({children:n,rootSnapshot:t})),es(n=>{if(n instanceof Ra)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Sa?this.noMatchError(n):n}))}processSegmentGroup(e,t,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n,s):this.processSegment(e,t,n,n.segments,r,!0,s).pipe(pe(o=>o instanceof ai?[o]:[]))}processChildren(e,t,n,r){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return zt(s).pipe(ts(o=>{let c=n.children[o],l=RD(t,o);return this.processSegmentGroup(e,l,c,o,r)}),fw((o,c)=>(o.push(...c),o)),Bh(null),hw(),Wt(o=>{if(o===null)return fs(n);let c=HI(o);return fP(c),Y(c)}))}processSegment(e,t,n,r,s,o,c){return zt(t).pipe(ts(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,n,r,s,o,c).pipe(es(d=>{if(d instanceof Sa)return Y(null);throw d}))),Dn(l=>!!l),es(l=>{if(zI(l))return dP(n,r,s)?Y(new Of):fs(n);throw l}))}processSegmentAgainstRoute(e,t,n,r,s,o,c,l){return Ai(n)!==o&&(o===se||!Gl(r,s,n))?fs(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,n,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,n,s,o,l):fs(r)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o,c){let{matched:l,parameters:d,consumedSegments:h,positionalParamSegments:m,remainingSegments:p}=qI(t,r,s);if(!l)return fs(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hP&&(this.allowRedirects=!1));let w=new gs(s,d,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,bI(r),Ai(r),r.component??r._loadedComponent??null,r,wI(r)),T=Bl(w,c,this.paramsInheritanceStrategy);w.params=Object.freeze(T.params),w.data=Object.freeze(T.data);let k=this.applyRedirects.applyRedirectCommands(h,r.redirectTo,m,w,e);return this.applyRedirects.lineralizeSegments(r,k).pipe(Wt(x=>this.processSegment(e,n,t,x.concat(p),o,!1,c)))}matchSegmentAgainstRoute(e,t,n,r,s,o){let c=rP(t,n,r,e,this.urlSerializer);return n.path==="**"&&(t.children={}),c.pipe(Kt(l=>l.matched?(e=n._injector??e,this.getChildConfig(e,n,r).pipe(Kt(({routes:d})=>{let h=n._loadedInjector??e,{parameters:m,consumedSegments:p,remainingSegments:w}=l,T=new gs(p,m,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,bI(n),Ai(n),n.component??n._loadedComponent??null,n,wI(n)),k=Bl(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data);let{segmentGroup:x,slicedSegments:j}=yI(t,p,w,d);if(j.length===0&&x.hasChildren())return this.processChildren(h,d,x,T).pipe(pe(G=>new ai(T,G)));if(d.length===0&&j.length===0)return Y(new ai(T,[]));let K=Ai(n)===s;return this.processSegment(h,d,x,j,K?se:s,!0,T).pipe(pe(G=>new ai(T,G instanceof ai?[G]:[])))}))):fs(t)))}getChildConfig(e,t,n){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):eP(e,t,n,this.urlSerializer).pipe(Wt(r=>r?this.configLoader.loadChildren(e,t).pipe(pt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):nP(t))):Y({routes:[],injector:e})}};function fP(i){i.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function mP(i){let e=i.value.routeConfig;return e&&e.path===""}function HI(i){let e=[],t=new Set;for(let n of i){if(!mP(n)){e.push(n);continue}let r=e.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),t.add(r)):e.push(n)}for(let n of t){let r=HI(n.children);e.push(new ai(n.value,r))}return e.filter(n=>!t.has(n))}function bI(i){return i.data||{}}function wI(i){return i.resolve||{}}function pP(i,e,t,n,r,s){return Wt(o=>uP(i,e,t,n,o.extractedUrl,r,s).pipe(pe(({state:c,tree:l})=>Ce(N({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function gP(i,e){return Wt(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return Y(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of GI(l))o.add(d);let c=0;return zt(o).pipe(ts(l=>s.has(l)?_P(l,n,i,e):(l.data=Bl(l,l.parent,i).resolve,Y(void 0))),pt(()=>c++),zh(1),Wt(l=>c===o.size?Y(t):Ni))})}function GI(i){let e=i.children.map(t=>GI(t)).flat();return[i,...e]}function _P(i,e,t,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!VI(r)&&(s[xa]=r.title),vP(s,i,e,n).pipe(pe(o=>(i._resolvedData=o,i.data=Bl(i,i.parent,t).resolve,null)))}function vP(i,e,t,n){let r=ff(i);if(r.length===0)return Y({});let s={};return zt(r).pipe(Wt(o=>yP(i[o],e,t,n).pipe(Dn(),pt(c=>{if(c instanceof Aa)throw $l(new va,c);s[o]=c}))),zh(1),dw(s),es(o=>zI(o)?Ni:Bo(o)))}function yP(i,e,t,n){let r=ka(e)??n,s=Is(i,r),o=s.resolve?s.resolve(e,t):rn(r,()=>s(e,t));return Fn(o)}function uf(i){return Kt(e=>{let t=i(e);return t?zt(t).pipe(pe(()=>e)):Y(e)})}var WI=(()=>{class i{buildTitle(t){let n,r=t.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===se);return n}getResolvedTitleForRoute(t){return t.data[xa]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:()=>$(bP),providedIn:"root"})}}return i})(),bP=(()=>{class i extends WI{constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)(P(kl))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),zf=new V("",{providedIn:"root",factory:()=>({})}),$f=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=tt({type:i,selectors:[["ng-component"]],standalone:!0,features:[it],decls:1,vars:0,template:function(n,r){n&1&&Se(0,"router-outlet")},dependencies:[jf],encapsulation:2})}}return i})();function qf(i){let e=i.children&&i.children.map(qf),t=e?Ce(N({},i),{children:e}):N({},i);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=$f),t}var Hf=new V(""),wP=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(Yh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=Fn(t.loadComponent()).pipe(pe(KI),pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),fl(()=>{this.componentLoaders.delete(t)})),r=new Mh(n,()=>new ue).pipe(Ph());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Y({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=IP(n,this.compiler,t,this.onLoadEndListener).pipe(fl(()=>{this.childrenLoaders.delete(n)})),o=new Mh(s,()=>new ue).pipe(Ph());return this.childrenLoaders.set(n,o),o}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function IP(i,e,t,n){return Fn(i.loadChildren()).pipe(pe(KI),Wt(r=>r instanceof Iw||Array.isArray(r)?Y(r):zt(e.compileModuleAsync(r))),pe(r=>{n&&n(i);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(Hf,[],{optional:!0,self:!0}).flat()),{routes:o.map(qf),injector:s}}))}function EP(i){return i&&typeof i=="object"&&"default"in i}function KI(i){return EP(i)?i.default:i}var Gf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:()=>$(CP),providedIn:"root"})}}return i})(),CP=(()=>{class i{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),TP=new V("");var AP=new V(""),SP=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ue,this.transitionAbortSubject=new ue,this.configLoader=$(wP),this.environmentInjector=$(is),this.urlSerializer=$(Vf),this.rootContexts=$(Hl),this.location=$(ds),this.inputBindingEnabled=$(Bf,{optional:!0})!==null,this.titleStrategy=$(WI),this.options=$(zf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(Gf),this.createViewTransition=$(TP,{optional:!0}),this.navigationErrorHandler=$(AP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=r=>this.events.next(new If(r)),n=r=>this.events.next(new Ef(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(Ce(N(N({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,r){return this.transitions=new Gt({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ga,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(s=>s.id!==0),pe(s=>Ce(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Kt(s=>{let o=!1,c=!1;return Y(s).pipe(Kt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ci.SupersededByNewNavigation),Ni;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ce(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload"){let m="";return this.events.next(new gr(l.id,this.urlSerializer.serialize(l.rawUrl),m,_f.IgnoredSameUrlNavigation)),l.resolve(!1),Ni}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(Kt(m=>{let p=this.transitions?.getValue();return this.events.next(new wa(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),p!==this.transitions?.getValue()?Ni:Promise.resolve(m)}),pP(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Ce(N({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let p=new Vl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(p)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:p,source:w,restoredState:T,extras:k}=l,x=new wa(m,this.urlSerializer.serialize(p),w,T);this.events.next(x);let j=FI(this.rootComponentType).snapshot;return this.currentTransition=s=Ce(N({},l),{targetSnapshot:j,urlAfterRedirects:p,extras:Ce(N({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,Y(s)}else{let m="";return this.events.next(new gr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,_f.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ni}}),pt(l=>{let d=new vf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),pe(l=>(this.currentTransition=s=Ce(N({},l),{guards:OD(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),GD(this.environmentInjector,l=>this.events.next(l)),pt(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw $l(this.urlSerializer,l.guardsResult);let d=new yf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),kt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ci.GuardRejected),!1)),uf(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(pt(d=>{let h=new bf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Kt(d=>{let h=!1;return Y(d).pipe(gP(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",ci.NoDataFromResolver)}}))}),pt(d=>{let h=new wf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),uf(l=>{let d=h=>{let m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(pt(p=>{h.component=p}),pe(()=>{})));for(let p of h.children)m.push(...d(p));return m};return zo(d(l.targetSnapshot.root)).pipe(Bh(null),nn(1))}),uf(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?zt(h).pipe(pe(()=>s)):Y(s)}),pe(l=>{let d=kD(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Ce(N({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),pt(()=>{this.events.next(new Ca)}),ND(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),nn(1),pt({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Xe(this.transitionAbortSubject.pipe(pt(l=>{throw l}))),fl(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",ci.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),es(l=>{if(c=!0,BI(l))this.events.next(new ln(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),MD(l)?this.events.next(new ys(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let d=new Ia(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let h=rn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof Aa){let{message:m,cancellationCode:p}=$l(this.urlSerializer,h);this.events.next(new ln(s.id,this.urlSerializer.serialize(s.extractedUrl),m,p)),this.events.next(new ys(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let m=t.errorHandler(l);s.resolve(!!m)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Ni}))}))}cancelNavigationTransition(t,n,r){let s=new ln(t.id,this.urlSerializer.serialize(t.extractedUrl),n,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function RP(i){return i!==ga}var xP=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:()=>$(kP),providedIn:"root"})}}return i})(),Lf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},kP=(()=>{class i extends Lf{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Fi(i)))(r||i)}})()}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),YI=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:()=>$(DP),providedIn:"root"})}}return i})(),DP=(()=>{class i extends YI{constructor(){super(...arguments),this.location=$(ds),this.urlSerializer=$(Vf),this.options=$(zf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(Gf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof wa)this.stateMemento=this.createStateMemento();else if(t instanceof gr)this.rawUrlTree=n.initialUrl;else if(t instanceof Vl){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??r,n)}}else t instanceof Ca?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):t instanceof ln&&(t.code===ci.GuardRejected||t.code===ci.NoDataFromResolver)?this.restoreHistory(n):t instanceof Ia?this.restoreHistory(n,!0):t instanceof pr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let r=t instanceof dn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let s=this.browserPageId,o=N(N({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(r,"",o)}else{let s=N(N({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Fi(i)))(r||i)}})()}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ma=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(ma||{});function PP(i,e){i.events.pipe(kt(t=>t instanceof pr||t instanceof ln||t instanceof Ia||t instanceof gr),pe(t=>t instanceof pr||t instanceof gr?ma.COMPLETE:(t instanceof ln?t.code===ci.Redirect||t.code===ci.SupersededByNewNavigation:!1)?ma.REDIRECTING:ma.FAILED),kt(t=>t!==ma.REDIRECTING),nn(1)).subscribe(()=>{e()})}function MP(i){throw i}var NP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wl=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$(yl),this.stateManager=$(YI),this.options=$(zf,{optional:!0})||{},this.pendingTasks=$(gw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(SP),this.urlSerializer=$(Vf),this.location=$(ds),this.urlHandlingStrategy=$(Gf),this._events=new ue,this.errorHandler=this.options.errorHandler||MP,this.navigated=!1,this.routeReuseStrategy=$(xP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(Hf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(Bf,{optional:!0}),this.eventsSubscription=new tn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof ln&&n.code!==ci.Redirect&&n.code!==ci.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof pr)this.navigated=!0;else if(n instanceof ys){let o=n.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),l=N({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||RP(r.source)},o);this.scheduleNavigation(c,ga,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}LP(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=N({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(qf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=n,d=l?this.currentUrlTree.fragment:o,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let p=r?r.snapshot:this.routerState.snapshot.root;m=PI(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return MI(m,t,h,d??null)}navigateByUrl(t,n={skipLocationChange:!1}){let r=ya(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ga,null,n)}navigate(t,n={skipLocationChange:!1}){return FP(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let r;if(n===!0?r=N({},NP):n===!1?r=N({},OP):r=n,ya(t))return pI(this.currentUrlTree,t,r);let s=this.parseUrl(t);return pI(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((n,[r,s])=>(s!=null&&(n[r]=s),n),{})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,d;o?(c=o.resolve,l=o.reject,d=o.promise):d=new Promise((m,p)=>{c=m,l=p});let h=this.pendingTasks.add();return PP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function FP(i){for(let e=0;e<i.length;e++)if(i[e]==null)throw new je(4008,!1)}function LP(i){return!(i instanceof Ca)&&!(i instanceof ys)}var VP=new V("");function QI(i,...e){return ke([{provide:Hf,multi:!0,useValue:i},[],{provide:bs,useFactory:UP,deps:[Wl]},{provide:Dw,multi:!0,useFactory:jP},e.map(t=>t.\u0275providers)])}function UP(i){return i.routerState.root}function jP(){let i=$(ce);return e=>{let t=i.get(Xo);if(e!==t.components[0])return;let n=i.get(Wl),r=i.get(BP);i.get(zP)===1&&n.initialNavigation(),i.get($P,null,Hh.Optional)?.setUpPreloading(),i.get(VP,null,Hh.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var BP=new V("",{factory:()=>new ue}),zP=new V("",{providedIn:"root",factory:()=>1});var $P=new V("");var XI=[];var HP="firebase",GP="10.13.2";H(HP,GP,"app");var Ne=new as("ANGULARFIRE2_VERSION"),Cs=i=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${i} in the constructor, first ensure that ${i} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${i})\`.`;function ut(i,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(i).getImmediate({optional:!0})}var st=(i,e)=>{let t=e?[e]:Cl(),n=[];return t.forEach(r=>{r.container.getProvider(i).instances.forEach(o=>{n.includes(o)||n.push(o)})}),n},ei=class{constructor(){return st(WP)}},WP="app-check";function Es(){}var Kl=class{zone;delegate;constructor(e,t=aw){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,n)}},Wf=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),t.pipe(pt({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Je=(()=>{class i{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Kl(Zone.current)),this.insideAngular=t.run(()=>new Kl(Zone.current,ow)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||i)(P(U))};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Yl(){let i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return i}function KP(i){return Yl().ngZone.runOutsideAngular(()=>i())}function _r(i){return Yl().ngZone.run(()=>i())}function YP(i){return QP(Yl())(i)}function QP(i){return function(t){return t=t.lift(new Wf(i.ngZone)),t.pipe(Fh(i.outsideAngular),Oh(i.insideAngular))}}var XP=(i,e)=>function(){let n=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),_r(()=>i.apply(void 0,n))},Ie=(i,e)=>function(){let t,n=arguments;for(let s=0;s<arguments.length;s++)typeof n[s]=="function"&&(e&&(t||=_r(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es))),n[s]=XP(n[s],t));let r=KP(()=>i.apply(this,n));if(!e)if(r instanceof Ii){let s=Yl();return r.pipe(Fh(s.outsideAngular),Oh(s.insideAngular))}else return _r(()=>r);return r instanceof Ii?r.pipe(YP):r instanceof Promise?_r(()=>new Promise((s,o)=>r.then(c=>_r(()=>s(c)),c=>_r(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:_r(()=>r)};var Le=class{constructor(e){return e}},We=class{constructor(){return Cl()}};function ZP(i){return i&&i.length===1?i[0]:new Le(dt())}var Kf=new V("angularfire2._apps"),JP={provide:Le,useFactory:ZP,deps:[[new J,Kf]]},eM={provide:We,deps:[[new J,Kf]]};function tM(i){return(e,t)=>{let n=t.get(fi);H("angularfire",Ne.full,"core"),H("angularfire",Ne.full,"app"),H("angular",kw.full,n.toString());let r=e.runOutsideAngular(()=>i(t));return new Le(r)}}function ZI(i,...e){return ke([JP,eM,{provide:Kf,useFactory:tM(i),multi:!0,deps:[U,ce,Je,...e]}])}var JI=Ie(nI,!0);function m0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var p0=m0,g0=new Vi("auth","Firebase",m0());var td=new ji("@firebase/auth");function iM(i,...e){td.logLevel<=Mt.WARN&&td.warn(`Auth (${Jt}): ${i}`,...e)}function Xl(i,...e){td.logLevel<=Mt.ERROR&&td.error(`Auth (${Jt}): ${i}`,...e)}function Vn(i,...e){throw mm(i,...e)}function yr(i,...e){return mm(i,...e)}function _0(i,e,t){let n=Object.assign(Object.assign({},p0()),{[e]:t});return new Vi("auth","Firebase",n).create(e,{appName:i.name})}function vr(i){return _0(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mm(i,...e){if(typeof i!="string"){let t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return g0.create(i,...e)}function te(i,e,...t){if(!i)throw mm(e,...t)}function un(i){let e="INTERNAL ASSERTION FAILED: "+i;throw Xl(e),new Error(e)}function Un(i,e){i||un(e)}function Zf(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function nM(){return e0()==="http:"||e0()==="https:"}function e0(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function rM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nM()||ea()||"connection"in navigator)?navigator.onLine:!0}function sM(){if(typeof navigator>"u")return null;let i=navigator;return i.languages&&i.languages[0]||i.language||null}var br=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Un(t>e,"Short delay should be less than long delay!"),this.isMobile=Jo()||wl()}get(){return rM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pm(i,e){Un(i.emulator,"Emulator should always be set here");let{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var id=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var oM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aM=new br(3e4,6e4);function gm(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}function As(s,o,c,l){return v(this,arguments,function*(i,e,t,n,r={}){return v0(i,r,()=>v(this,null,function*(){let d={},h={};n&&(e==="GET"?h=n:d={body:JSON.stringify(n)});let m=ur(Object.assign({key:i.config.apiKey},h)).slice(1),p=yield i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);let w=Object.assign({method:e,headers:p},d);return Kw()||(w.referrerPolicy="no-referrer"),id.fetch()(y0(i,i.config.apiHost,t,m),w)}))})}function v0(i,e,t){return v(this,null,function*(){i._canInitEmulator=!1;let n=Object.assign(Object.assign({},oM),e);try{let r=new Jf(i),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ql(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ql(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ql(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ql(i,"user-disabled",o);let h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _0(i,h,d);Vn(i,h)}}catch(r){if(r instanceof Zt)throw r;Vn(i,"network-request-failed",{message:String(r)})}})}function cM(s,o,c,l){return v(this,arguments,function*(i,e,t,n,r={}){let d=yield As(i,e,t,n,r);return"mfaPendingCredential"in d&&Vn(i,"multi-factor-auth-required",{_serverResponse:d}),d})}function y0(i,e,t,n){let r=`${e}${t}?${n}`;return i.config.emulator?pm(i.config,r):`${i.config.apiScheme}://${r}`}var Jf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(yr(this.auth,"network-request-failed")),aM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ql(i,e,t){let n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);let r=yr(i,e,n);return r.customData._tokenResponse=t,r}function lM(i,e){return v(this,null,function*(){return As(i,"POST","/v1/accounts:delete",e)})}function b0(i,e){return v(this,null,function*(){return As(i,"POST","/v1/accounts:lookup",e)})}function Pa(i){if(i)try{let e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _m(i,e=!1){return v(this,null,function*(){let t=de(i),n=yield t.getIdToken(e),r=vm(n);te(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:n,authTime:Pa(Yf(r.auth_time)),issuedAtTime:Pa(Yf(r.iat)),expirationTime:Pa(Yf(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Yf(i){return Number(i)*1e3}function vm(i){let[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return Xl("JWT malformed, contained fewer than 3 sections"),null;try{let r=Hw(t);return r?JSON.parse(r):(Xl("Failed to decode base64 JWT payload"),null)}catch(r){return Xl("Caught error parsing JWT payload as JSON",r?.toString()),null}}function t0(i){let e=vm(i);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Na(i,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(n){throw n instanceof Zt&&dM(n)&&i.auth.currentUser===i&&(yield i.auth.signOut()),n}})}function dM({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}var em=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Oa=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pa(this.lastLoginAt),this.creationTime=Pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function nd(i){return v(this,null,function*(){var e;let t=i.auth,n=yield i.getIdToken(),r=yield Na(i,b0(t,{idToken:n}));te(r?.users.length,t,"internal-error");let s=r.users[0];i._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?w0(s.providerUserInfo):[],c=uM(i.providerData,o),l=i.isAnonymous,d=!(i.email&&s.passwordHash)&&!c?.length,h=l?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Oa(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(i,m)})}function ym(i){return v(this,null,function*(){let e=de(i);yield nd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function uM(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function w0(i){return i.map(e=>{var{providerId:t}=e,n=Nh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function hM(i,e){return v(this,null,function*(){let t=yield v0(i,{},()=>v(this,null,function*(){let n=ur({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=y0(i,r,"/v1/token",`key=${s}`),c=yield i._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",id.fetch()(o,{method:"POST",headers:c,body:n})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function fM(i,e){return v(this,null,function*(){return As(i,"POST","/v2/accounts:revokeToken",gm(i,e))})}var Ma=class i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");let t=t0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:n,refreshToken:r,expiresIn:s}=yield hM(e,t);this.updateTokensAndExpiration(n,r,Number(s))})}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){let{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new i;return n&&(te(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(te(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new i,this.toJSON())}_performRefresh(){return un("not implemented")}};function Ln(i,e){te(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}var Ts=class i{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Nh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new em(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Oa(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Na(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return _m(this,e)}reload(){return ym(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&(yield nd(this)),yield this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(cn(this.auth.app))return Promise.reject(vr(this.auth));let e=yield this.getIdToken();return yield Na(this,lM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,o,c,l,d,h;let m=(n=t.displayName)!==null&&n!==void 0?n:void 0,p=(r=t.email)!==null&&r!==void 0?r:void 0,w=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,k=(c=t.tenantId)!==null&&c!==void 0?c:void 0,x=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,j=(d=t.createdAt)!==null&&d!==void 0?d:void 0,K=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:oe,isAnonymous:at,providerData:be,stsTokenManager:E}=t;te(G&&E,e,"internal-error");let _=Ma.fromJSON(this.name,E);te(typeof G=="string",e,"internal-error"),Ln(m,e.name),Ln(p,e.name),te(typeof oe=="boolean",e,"internal-error"),te(typeof at=="boolean",e,"internal-error"),Ln(w,e.name),Ln(T,e.name),Ln(k,e.name),Ln(x,e.name),Ln(j,e.name),Ln(K,e.name);let b=new i({uid:G,auth:e,email:p,emailVerified:oe,displayName:m,isAnonymous:at,photoURL:T,phoneNumber:w,tenantId:k,stsTokenManager:_,createdAt:j,lastLoginAt:K});return be&&Array.isArray(be)&&(b.providerData=be.map(I=>Object.assign({},I))),x&&(b._redirectEventId=x),b}static _fromIdTokenResponse(e,t,n=!1){return v(this,null,function*(){let r=new Ma;r.updateFromServerResponse(t);let s=new i({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield nd(s),s})}static _fromGetAccountInfoResponse(e,t,n){return v(this,null,function*(){let r=t.users[0];te(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?w0(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Ma;c.updateFromIdToken(n);let l=new i({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Oa(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var i0=new Map;function hn(i){Un(i instanceof Function,"Expected a class definition");let e=i0.get(i);return e?(Un(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,i0.set(i,e),e)}var mM=(()=>{class i{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,n){return v(this,null,function*(){this.storage[t]=n})}_get(t){return v(this,null,function*(){let n=this.storage[t];return n===void 0?null:n})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,n){}_removeListener(t,n){}}return i.type="NONE",i})(),tm=mM;function Zl(i,e,t){return`firebase:${i}:${e}:${t}`}var rd=class i{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:s}=this.auth;this.fullUserKey=Zl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Zl("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ts._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return v(this,null,function*(){if(!t.length)return new i(hn(tm),e,n);let r=(yield Promise.all(t.map(d=>v(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||hn(tm),o=Zl(n,e.config.apiKey,e.name),c=null;for(let d of t)try{let h=yield d._get(o);if(h){let m=Ts._fromJSON(e,h);d!==s&&(c=m),s=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new i(s,e,n):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>v(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new i(s,e,n))})}};function n0(i){let e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S0(e))return"Blackberry";if(R0(e))return"Webos";if(E0(e))return"Safari";if((e.includes("chrome/")||C0(e))&&!e.includes("edge/"))return"Chrome";if(A0(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function I0(i=Pt()){return/firefox\//i.test(i)}function E0(i=Pt()){let e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function C0(i=Pt()){return/crios\//i.test(i)}function T0(i=Pt()){return/iemobile/i.test(i)}function A0(i=Pt()){return/android/i.test(i)}function S0(i=Pt()){return/blackberry/i.test(i)}function R0(i=Pt()){return/webos/i.test(i)}function bm(i=Pt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function pM(i=Pt()){var e;return bm(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gM(){return Yw()&&document.documentMode===10}function x0(i=Pt()){return bm(i)||A0(i)||R0(i)||S0(i)||/windows phone/i.test(i)||T0(i)}function k0(i,e=[]){let t;switch(i){case"Browser":t=n0(Pt());break;case"Worker":t=`${n0(Pt())}-${i}`;break;default:t=i}let n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jt}/${n}`}var im=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)yield n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}})}};function _M(t){return v(this,arguments,function*(i,e={}){return As(i,"GET","/v2/passwordPolicy",gm(i,e))})}var vM=6,nm=class{constructor(e){var t,n,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:vM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var rm=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sd(this),this.idTokenSubscription=new sd(this),this.beforeStateQueue=new im(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var n,r;if(!this._deleted&&(this.persistenceManager=yield rd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield b0(this,{idToken:e}),n=yield Ts._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(cn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield nd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=sM()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(cn(this.app))return Promise.reject(vr(this));let t=e?de(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return cn(this.app)?Promise.reject(vr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return cn(this.app)?Promise.reject(vr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(hn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield _M(this),t=new nm(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vi("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),yield fM(this,n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let n=yield this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&hn(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=yield rd.create(this,[hn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,n;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,n,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&iM(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function wm(i){return de(i)}var sd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=eI(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Im={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yM(i){Im=i}function bM(i){return Im.loadJS(i)}function wM(){return Im.gapiScript}function D0(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function Em(i,e){let t=lt(i,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(ra(s,e??{}))return r;Vn(r,"already-initialized")}return t.initialize({options:e})}function IM(i,e){let t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(hn);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function Cm(i,e,t){let n=wm(i);te(n._canInitEmulator,n,"emulator-config-failed"),te(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=P0(e),{host:o,port:c}=EM(e),l=c===null?"":`:${c}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||CM()}function P0(i){let e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function EM(i){let e=P0(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};let n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){let s=r[1];return{host:s,port:r0(n.substr(s.length+1))}}else{let[s,o]=n.split(":");return{host:s,port:r0(o)}}}function r0(i){if(!i)return null;let e=Number(i);return isNaN(e)?null:e}function CM(){function i(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}var od=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return un("not implemented")}_getIdTokenResponse(e){return un("not implemented")}_linkToIdToken(e,t){return un("not implemented")}_getReauthenticationResolver(e){return un("not implemented")}};function Qf(i,e){return v(this,null,function*(){return cM(i,"POST","/v1/accounts:signInWithIdp",gm(i,e))})}var ad=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var sm=class extends ad{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Fa=class i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,r=!1){return v(this,null,function*(){let s=yield Ts._fromIdTokenResponse(e,n,r),o=s0(n);return new i({user:s,providerId:o,_tokenResponse:n,operationType:t})})}static _forOperation(e,t,n){return v(this,null,function*(){yield e._updateTokensIfNecessary(n,!0);let r=s0(n);return new i({user:e,providerId:r,_tokenResponse:n,operationType:t})})}};function s0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}var om=class i extends Zt{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,i.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new i(e,t,n,r)}};function M0(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?om._fromErrorAndOperation(i,s,e,n):s})}function TM(i,e,t=!1){return v(this,null,function*(){let n=yield Na(i,e._linkToIdToken(i.auth,yield i.getIdToken()),t);return Fa._forOperation(i,"link",n)})}function AM(i,e,t=!1){return v(this,null,function*(){let{auth:n}=i;if(cn(n.app))return Promise.reject(vr(n));let r="reauthenticate";try{let s=yield Na(i,M0(n,r,e,i),t);te(s.idToken,n,"internal-error");let o=vm(s.idToken);te(o,n,"internal-error");let{sub:c}=o;return te(i.uid===c,n,"user-mismatch"),Fa._forOperation(i,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Vn(n,"user-mismatch"),s}})}function SM(i,e,t=!1){return v(this,null,function*(){if(cn(i.app))return Promise.reject(vr(i));let n="signIn",r=yield M0(i,n,e),s=yield Fa._fromIdTokenResponse(i,n,r);return t||(yield i._updateCurrentUser(s.user)),s})}function hd(i,e,t,n){return de(i).onIdTokenChanged(e,t,n)}function Tm(i,e,t){return de(i).beforeAuthStateChanged(e,t)}function fd(i,e,t,n){return de(i).onAuthStateChanged(e,t,n)}var cd="__sak";var ld=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RM=1e3,xM=10,kM=(()=>{class i extends ld{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),s=this.localCache[n];r!==s&&t(n,s,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let r=t.key;n?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);gM()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,xM):s()}notifyListeners(t,n){this.localCache[t]=n;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},RM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,n){return v(this,null,function*(){yield kn(i.prototype,this,"_set").call(this,t,n),this.localCache[t]=JSON.stringify(n)})}_get(t){return v(this,null,function*(){let n=yield kn(i.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(n),n})}_remove(t){return v(this,null,function*(){yield kn(i.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return i.type="LOCAL",i})(),N0=kM;var DM=(()=>{class i extends ld{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}return i.type="SESSION",i})(),Am=DM;function PM(i){return Promise.all(i.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var MM=(()=>{class i{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;let r=new i(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let n=t,{eventId:r,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(h=>v(this,null,function*(){return h(n.origin,o)})),d=yield PM(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i.receivers=[];return i})();function O0(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}var am=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){return v(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=O0("",20);r.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(m){let p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function zi(){return window}function NM(i){zi().location.href=i}function F0(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}function OM(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function FM(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function LM(){return F0()?self:null}var L0="firebaseLocalStorageDb",VM=1,dd="firebaseLocalStorage",V0="fbase_key",wr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function md(i,e){return i.transaction([dd],e?"readwrite":"readonly").objectStore(dd)}function UM(){let i=indexedDB.deleteDatabase(L0);return new wr(i).toPromise()}function cm(){let i=indexedDB.open(L0,VM);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{let n=i.result;try{n.createObjectStore(dd,{keyPath:V0})}catch(r){t(r)}}),i.addEventListener("success",()=>v(this,null,function*(){let n=i.result;n.objectStoreNames.contains(dd)?e(n):(n.close(),yield UM(),e(yield cm()))}))})}function o0(i,e,t){return v(this,null,function*(){let n=md(i,!0).put({[V0]:e,value:t});return new wr(n).toPromise()})}function jM(i,e){return v(this,null,function*(){let t=md(i,!1).get(e),n=yield new wr(t).toPromise();return n===void 0?null:n.value})}function a0(i,e){let t=md(i,!0).delete(e);return new wr(t).toPromise()}var BM=800,zM=3,$M=(()=>{class i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield cm(),this.db)})}_withRetries(t){return v(this,null,function*(){let n=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(n++>zM)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return F0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=MM._getInstance(LM()),this.receiver._subscribe("keyChanged",(t,n)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(t,n)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,n;if(this.activeServiceWorker=yield OM(),!this.activeServiceWorker)return;this.sender=new am(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||FM()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield cm();return yield o0(t,cd,"1"),yield a0(t,cd),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>o0(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let n=yield this._withRetries(r=>jM(r,t));return this.localCache[t]=n,n})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(n=>a0(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let o=md(s,!1).getAll();return new wr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(t,n){this.localCache[t]=n;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),BM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return i.type="LOCAL",i})(),U0=$M;var nH=D0("rcb"),rH=new br(3e4,6e4);function qM(i,e){return e?hn(e):(te(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}var La=class extends od{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qf(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function HM(i){return SM(i.auth,new La(i),i.bypassAuthState)}function GM(i){let{auth:e,user:t}=i;return te(t,e,"internal-error"),AM(t,new La(i),i.bypassAuthState)}function WM(i){return v(this,null,function*(){let{auth:e,user:t}=i;return te(t,e,"internal-error"),TM(t,new La(i),i.bypassAuthState)})}var lm=class{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HM;case"linkViaPopup":case"linkViaRedirect":return WM;case"reauthViaPopup":case"reauthViaRedirect":return GM;default:Vn(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var sH=new br(2e3,1e4);var KM="pendingRedirect",Jl=new Map,dm=class i extends lm{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){return v(this,null,function*(){let e=Jl.get(this.auth._key());if(!e){try{let n=(yield YM(this.resolver,this.auth))?yield kn(i.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Jl.set(this.auth._key(),e)}return this.bypassAuthState||Jl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return kn(i.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,kn(i.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function YM(i,e){return v(this,null,function*(){let t=ZM(e),n=XM(i);if(!(yield n._isAvailable()))return!1;let r=(yield n._get(t))==="true";return yield n._remove(t),r})}function QM(i,e){Jl.set(i._key(),e)}function XM(i){return hn(i._redirectPersistence)}function ZM(i){return Zl(KM,i.config.apiKey,i.name)}function JM(i,e,t=!1){return v(this,null,function*(){if(cn(i.app))return Promise.reject(vr(i));let n=wm(i),r=qM(n,e),o=yield new dm(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield n._persistUserIfCurrent(o.user),yield n._setRedirectUser(null,e)),o})}var eN=10*60*1e3,um=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!j0(e)){let r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eN&&this.cachedEventUids.clear(),this.cachedEventUids.has(c0(e))}saveEventToCache(e){this.cachedEventUids.add(c0(e)),this.lastProcessedEventTime=Date.now()}};function c0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function j0({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function tN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j0(i);default:return!1}}function iN(t){return v(this,arguments,function*(i,e={}){return As(i,"GET","/v1/projects",e)})}var nN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rN=/^https?/;function sN(i){return v(this,null,function*(){if(i.config.emulator)return;let{authorizedDomains:e}=yield iN(i);for(let t of e)try{if(oN(t))return}catch{}Vn(i,"unauthorized-domain")})}function oN(i){let e=Zf(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){let o=new URL(i);return o.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!rN.test(t))return!1;if(nN.test(i))return n===i;let r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}var aN=new br(3e4,6e4);function l0(){let i=zi().___jsl;if(i?.H){for(let e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function cN(i){return new Promise((e,t)=>{var n,r,s;function o(){l0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{l0(),t(yr(i,"network-request-failed"))},timeout:aN.get()})}if(!((r=(n=zi().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=zi().gapi)===null||s===void 0)&&s.load)o();else{let c=D0("iframefcb");return zi()[c]=()=>{gapi.load?o():t(yr(i,"network-request-failed"))},bM(`${wM()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw ed=null,e})}var ed=null;function lN(i){return ed=ed||cN(i),ed}var dN=new br(5e3,15e3),uN="__/auth/iframe",hN="emulator/auth/iframe",fN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pN(i){let e=i.config;te(e.authDomain,i,"auth-domain-config-required");let t=e.emulator?pm(e,hN):`https://${i.config.authDomain}/${uN}`,n={apiKey:e.apiKey,appName:i.name,v:Jt},r=mN.get(i.config.apiHost);r&&(n.eid=r);let s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${ur(n).slice(1)}`}function gN(i){return v(this,null,function*(){let e=yield lN(i),t=zi().gapi;return te(t,i,"internal-error"),e.open({where:document.body,url:pN(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fN,dontclear:!0},n=>new Promise((r,s)=>v(this,null,function*(){yield n.restyle({setHideOnLeave:!1});let o=yr(i,"network-request-failed"),c=zi().setTimeout(()=>{s(o)},dN.get());function l(){zi().clearTimeout(c),r(n)}n.ping(l).then(l,()=>{s(o)})})))})}var _N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vN=500,yN=600,bN="_blank",wN="http://localhost",ud=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function IN(i,e,t,n=vN,r=yN){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString(),c="",l=Object.assign(Object.assign({},_N),{width:n.toString(),height:r.toString(),top:s,left:o}),d=Pt().toLowerCase();t&&(c=C0(d)?bN:t),I0(d)&&(e=e||wN,l.scrollbars="yes");let h=Object.entries(l).reduce((p,[w,T])=>`${p}${w}=${T},`,"");if(pM(d)&&c!=="_self")return EN(e||"",c),new ud(null);let m=window.open(e||"",c,h);te(m,i,"popup-blocked");try{m.focus()}catch{}return new ud(m)}function EN(i,e){let t=document.createElement("a");t.href=i,t.target=e;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}var CN="__/auth/handler",TN="emulator/auth/handler",AN=encodeURIComponent("fac");function d0(i,e,t,n,r,s){return v(this,null,function*(){te(i.config.authDomain,i,"auth-domain-config-required"),te(i.config.apiKey,i,"invalid-api-key");let o={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:Jt,eventId:r};if(e instanceof ad){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",ia(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,m]of Object.entries(s||{}))o[h]=m}if(e instanceof sm){let h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}i.tenantId&&(o.tid=i.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let l=yield i._getAppCheckToken(),d=l?`#${AN}=${encodeURIComponent(l)}`:"";return`${SN(i)}?${ur(c).slice(1)}${d}`})}function SN({config:i}){return i.emulator?pm(i,TN):`https://${i.authDomain}/${CN}`}var Xf="webStorageSupport",hm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Am,this._completeRedirectFn=JM,this._overrideRedirectResult=QM}_openPopup(e,t,n,r){return v(this,null,function*(){var s;Un((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield d0(e,t,n,Zf(),r);return IN(e,o,O0())})}_openRedirect(e,t,n,r){return v(this,null,function*(){yield this._originValidation(e);let s=yield d0(e,t,n,Zf(),r);return NM(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Un(s,"If manager is not set, promise should be"),s)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){return v(this,null,function*(){let t=yield gN(e),n=new um(e);return t.register("authEvent",r=>(te(r?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xf,{type:Xf},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Xf];o!==void 0&&t(!!o),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return x0()||E0()||bm()}},B0=hm;var u0="@firebase/auth",h0="1.7.9";var fm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xN(i){rt(new nt("auth",(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let l={apiKey:o,authDomain:c,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k0(i)},d=new rm(n,r,s,l);return IM(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),rt(new nt("auth-internal",e=>{let t=wm(e.getProvider("auth").getImmediate());return(n=>new fm(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),H(u0,h0,RN(i)),H(u0,h0,"esm2017")}var kN=5*60,DN=Xh("authIdTokenMaxAge")||kN,f0=null,PN=i=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>DN)return;let r=t?.token;f0!==r&&(f0=r,yield fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Sm(i=dt()){let e=lt(i,"auth");if(e.isInitialized())return e.getImmediate();let t=Em(i,{popupRedirectResolver:B0,persistence:[U0,N0,Am]}),n=Xh("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(n,location.origin);if(location.origin===s.origin){let o=PN(s.toString());Tm(t,o,()=>o(t.currentUser)),hd(t,c=>o(c))}}let r=Ww("auth");return r&&Cm(t,`http://${r}`),t}function MN(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}yM({loadJS(i){return new Promise((e,t)=>{let n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{let s=yr("internal-error");s.customData=r,t(s)},n.type="text/javascript",n.charset="UTF-8",MN().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xN("Browser");function $0(i){return new Ii(function(e){var t=fd(i,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var q0="auth",Ir=class{constructor(e){return e}},Si=class{constructor(){return st(q0)}};var Rm=new V("angularfire2.auth-instances");function TO(i,e){let t=ut(q0,i,e);return t&&new Ir(t)}function AO(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Ir(n)}}var SO={provide:Si,deps:[[new J,Rm]]},RO={provide:Ir,useFactory:TO,deps:[[new J,Rm],Le]};function H0(i,...e){return H("angularfire",Ne.full,"auth"),ke([RO,SO,{provide:Rm,useFactory:AO(i),multi:!0,deps:[U,ce,Je,We,[new J,ei],...e]}])}var G0=Ie($0,!0);var W0=Ie(Sm,!0);var pd="analytics",kO="firebase_id",DO="origin",PO=60*1e3,MO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Om="https://www.googletagmanager.com/gtag/js";var qt=new ji("@firebase/analytics");var NO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},li=new Vi("analytics","Analytics",NO);function OO(i){if(!i.startsWith(Om)){let e=li.create("invalid-gtag-resource",{gtagURL:i});return qt.warn(e.message),""}return i}function eE(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function FO(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function LO(i,e){let t=FO("firebase-js-sdk-policy",{createScriptURL:OO}),n=document.createElement("script"),r=`${Om}?l=${i}&id=${e}`;n.src=t?t?.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function VO(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}function UO(i,e,t,n,r,s){return v(this,null,function*(){let o=n[r];try{if(o)yield e[o];else{let l=(yield eE(t)).find(d=>d.measurementId===r);l&&(yield e[l.appId])}}catch(c){qt.error(c)}i("config",r,s)})}function jO(i,e,t,n,r){return v(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let c=yield eE(t);for(let l of o){let d=c.find(m=>m.measurementId===l),h=d&&e[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),i("event",n,r||{})}catch(s){qt.error(s)}})}function BO(i,e,t,n){function r(s,...o){return v(this,null,function*(){try{if(s==="event"){let[c,l]=o;yield jO(i,e,t,c,l)}else if(s==="config"){let[c,l]=o;yield UO(i,e,t,n,c,l)}else if(s==="consent"){let[c,l]=o;i("consent",c,l)}else if(s==="get"){let[c,l,d]=o;i("get",c,l,d)}else if(s==="set"){let[c]=o;i("set",c)}else i(s,...o)}catch(c){qt.error(c)}})}return r}function zO(i,e,t,n,r){let s=function(...o){window[n].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=BO(s,i,e,t),{gtagCore:s,wrappedGtag:window[r]}}function $O(i){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(Om)&&t.src.includes(i))return t;return null}var qO=30,HO=1e3,km=class{constructor(e={},t=HO){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},tE=new km;function GO(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}function WO(i){return v(this,null,function*(){var e;let{appId:t,apiKey:n}=i,r={method:"GET",headers:GO(n)},s=MO.replace("{app-id}",t),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let c="";try{let l=yield o.json();!((e=l.error)===null||e===void 0)&&e.message&&(c=l.error.message)}catch{}throw li.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()})}function KO(n){return v(this,arguments,function*(i,e=tE,t){let{appId:r,apiKey:s,measurementId:o}=i.options;if(!r)throw li.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw li.create("no-api-key")}let c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Dm;return setTimeout(()=>v(this,null,function*(){l.abort()}),t!==void 0?t:PO),iE({appId:r,apiKey:s,measurementId:o},c,l,e)})}function iE(s,o,c){return v(this,arguments,function*(i,{throttleEndTimeMillis:e,backoffCount:t},n,r=tE){var l;let{appId:d,measurementId:h}=i;try{yield YO(n,e)}catch(m){if(h)return qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:d,measurementId:h};throw m}try{let m=yield WO(i);return r.deleteThrottleMetadata(d),m}catch(m){let p=m;if(!QO(p)){if(r.deleteThrottleMetadata(d),h)return qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:d,measurementId:h};throw m}let w=Number((l=p?.customData)===null||l===void 0?void 0:l.httpStatus)===503?oa(t,r.intervalMillis,qO):oa(t,r.intervalMillis),T={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return r.setThrottleMetadata(d,T),qt.debug(`Calling attemptFetch again in ${w} millis`),iE(i,T,n,r)}})}function YO(i,e){return new Promise((t,n)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(t,r);i.addEventListener(()=>{clearTimeout(s),n(li.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QO(i){if(!(i instanceof Zt)||!i.customData)return!1;let e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}var Dm=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Pm;function XO(i,e,t,n,r){return v(this,null,function*(){if(r&&r.global){i("event",t,n);return}else{let s=yield e,o=Object.assign(Object.assign({},n),{send_to:s});i("event",t,o)}})}function ZO(i,e,t,n){return v(this,null,function*(){if(n&&n.global)return i("set",{user_id:t}),Promise.resolve();{let r=yield e;i("config",r,{update:!0,user_id:t})}})}var Mm;function JO(i){Mm=i}function e1(i){Pm=i}function t1(){return v(this,null,function*(){if(an())try{yield lr()}catch(i){return qt.warn(li.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return qt.warn(li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function i1(i,e,t,n,r,s,o){return v(this,null,function*(){var c;let l=KO(i);l.then(w=>{t[w.measurementId]=w.appId,i.options.measurementId&&w.measurementId!==i.options.measurementId&&qt.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>qt.error(w)),e.push(l);let d=t1().then(w=>{if(w)return n.getId()}),[h,m]=yield Promise.all([l,d]);$O(s)||LO(s,h.measurementId),Mm&&(r("consent","default",Mm),JO(void 0)),r("js",new Date);let p=(c=o?.config)!==null&&c!==void 0?c:{};return p[DO]="firebase",p.update=!0,m!=null&&(p[kO]=m),r("config",h.measurementId,p),Pm&&(r("set",Pm),e1(void 0)),h.measurementId})}var Nm=class{constructor(e){this.app=e}_delete(){return delete Ss[this.app.options.appId],Promise.resolve()}},Ss={},K0=[],Y0={},xm="dataLayer",n1="gtag",Q0,Fm,X0=!1;function r1(){let i=[];if(ea()&&i.push("This is a browser extension environment."),ta()||i.push("Cookies are not available."),i.length>0){let e=i.map((n,r)=>`(${r+1}) ${n}`).join(" "),t=li.create("invalid-analytics-context",{errorInfo:e});qt.warn(t.message)}}function s1(i,e,t){r1();let n=i.options.appId;if(!n)throw li.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw li.create("no-api-key");if(Ss[n]!=null)throw li.create("already-exists",{id:n});if(!X0){VO(xm);let{wrappedGtag:s,gtagCore:o}=zO(Ss,K0,Y0,xm,n1);Fm=s,Q0=o,X0=!0}return Ss[n]=i1(i,K0,Y0,e,Q0,xm,t),new Nm(i)}function nE(i=dt()){i=de(i);let e=lt(i,pd);return e.isInitialized()?e.getImmediate():rE(i)}function rE(i,e={}){let t=lt(i,pd);if(t.isInitialized()){let r=t.getImmediate();if(ra(e,t.getOptions()))return r;throw li.create("already-initialized")}return t.initialize({options:e})}function sE(){return v(this,null,function*(){if(ea()||!ta()||!an())return!1;try{return yield lr()}catch{return!1}})}function oE(i,e,t){i=de(i),ZO(Fm,Ss[i.app.options.appId],e,t).catch(n=>qt.error(n))}function Lm(i,e,t,n){i=de(i),XO(Fm,Ss[i.app.options.appId],e,t,n).catch(r=>qt.error(r))}var Z0="@firebase/analytics",J0="0.10.8";function o1(){rt(new nt(pd,(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return s1(n,r,t)},"PUBLIC")),rt(new nt("analytics-internal",i,"PRIVATE")),H(Z0,J0),H(Z0,J0,"esm2017");function i(e){try{let t=e.getProvider(pd).getImmediate();return{logEvent:(n,r,s)=>Lm(t,n,r,s)}}catch(t){throw li.create("interop-component-reg-failed",{reason:t})}}}o1();var Er=class{constructor(e){return e}},lE="analytics",Um=class{constructor(){return st(lE)}};var jm="__angularfire_symbol__analyticsIsSupportedValue",dE="__angularfire_symbol__analyticsIsSupported";globalThis[dE]||=sE().then(i=>globalThis[jm]=i).catch(()=>globalThis[jm]=!1);var gd={async:()=>globalThis[dE],sync:()=>{let i=globalThis[jm];if(i===void 0)throw new Error(Cs("Analytics"));return i}},uE=gd.async,hE=Ie(nE,!0);var a1=Ie(Lm,!0);var c1=Ie(oE,!0);var zm=(()=>{class i{initialized;disposables=[];constructor(t,n,r){H("angularfire",Ne.full,"user-tracking");let s;this.initialized=n.runOutsideAngular(()=>new Promise(o=>{s=o})),uE().then(()=>{let o=r.get(Er);o?this.disposables=[G0(t).subscribe(c=>{c1(o,c?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(n){return new(n||i)(P(Ir),P(U),P(ce))};static \u0275prov=z({token:i,factory:i.\u0275fac})}return i})(),l1="firebase_event_origin",d1="firebase_previous_class",u1="firebase_previous_id",h1="firebase_previous_screen",f1="firebase_screen_class",aE="firebase_screen_id",m1="firebase_screen",Bm="outlet",p1="page_path",g1="page_title",Va="screen_class",cE="screen_name",_1="screen_view",v1="auto",y1="#",b1=Math.floor(Math.random()*(2**32-1))-2**31,Vm={},w1=i=>{let e=[i[Va],i[Bm]].join(y1);if(Vm.hasOwnProperty(e))return Vm[e];{let t=b1++;return Vm[e]=t,t}},I1=(i,e,t)=>i.events.pipe(kt(r=>r instanceof Ea)).pipe(Kt(r=>{let o=i.parseUrl(i.url.replace(/(?:\().+(?:\))/g,p=>p.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",c=i.routerState.root.children.map(p=>p).find(p=>p.outlet===r.snapshot.outlet);if(!c)return Y(null);let l=c;for(;l.firstChild;)l=l.firstChild;let d=l.pathFromRoot.map(p=>p.routeConfig?.path).filter(p=>p).join("/")||"/",h={[cE]:d,[p1]:`/${o}`,[l1]:v1,[m1]:d,[Bm]:r.snapshot.outlet};e&&(h[g1]=e.getTitle());let m=c.component;if(m){if(m===$f){let p=r.snapshot;for(;p.firstChild;)p=p.firstChild;m=p.component}}else m=r.snapshot.component;if(typeof m=="string")return Y(Ce(N({},h),{[Va]:m}));if(m){let p=t.resolveComponentFactory(m);return Y(Ce(N({},h),{[Va]:p.selector}))}return Y(null)}),kt(r=>!!r),pe(r=>N({[f1]:r[Va],[aE]:w1(r)},r)),uw(r=>r[Bm]),Wt(r=>r.pipe($o((s,o)=>JSON.stringify(s)===JSON.stringify(o)),nr(void 0),$h(),pe(([s,o])=>s?N({[d1]:s[Va],[h1]:s[cE],[u1]:s[aE]},o):o)))),fE=(()=>{class i{disposable;constructor(t,n,r,s,o,c){H("angularfire",Ne.full,"screen-tracking"),uE().then(()=>{let l=c.get(Er);!t||!l||s.runOutsideAngular(()=>{this.disposable=I1(t,n,r).pipe(Kt(d=>v(this,null,function*(){return o&&(yield o.initialized),a1(l,_1,d)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(n){return new(n||i)(P(Wl,8),P(kl,8),P(Yo),P(U),P(zm,8),P(ce))};static \u0275prov=z({token:i,factory:i.\u0275fac})}return i})(),$m=new V("angularfire2.analytics-instances");function E1(i,e){if(!gd.sync())return null;let t=ut(lE,i,e);return t&&new Er(t)}function C1(i){return(e,t)=>{if(!gd.sync())return null;let n=e.runOutsideAngular(()=>i(t));return new Er(n)}}var T1={provide:Um,deps:[[new J,$m]]},A1={provide:Er,useFactory:E1,deps:[[new J,$m],Le]};function mE(i,...e){return H("angularfire",Ne.full,"analytics"),ke([A1,T1,{provide:cr,useValue:gd.async,multi:!0},{provide:$m,useFactory:C1(i),multi:!0,deps:[U,ce,Je,We,...e]}])}var pE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gE={};var jn,qm;(function(){var i;function e(E,_){function b(){}b.prototype=_.prototype,E.D=_.prototype,E.prototype=new b,E.prototype.constructor=E,E.C=function(I,C,S){for(var y=Array(arguments.length-2),Zi=2;Zi<arguments.length;Zi++)y[Zi-2]=arguments[Zi];return _.prototype[C].apply(I,y)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,b){b||(b=0);var I=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)I[C]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(C=0;16>C;++C)I[C]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=E.g[0],b=E.g[1],C=E.g[2];var S=E.g[3],y=_+(S^b&(C^S))+I[0]+3614090360&4294967295;_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[1]+3905402710&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[2]+606105819&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[3]+3250441966&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(S^b&(C^S))+I[4]+4118548399&4294967295,_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[5]+1200080426&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[6]+2821735955&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[7]+4249261313&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(S^b&(C^S))+I[8]+1770035416&4294967295,_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[9]+2336552879&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[10]+4294925233&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[11]+2304563134&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(S^b&(C^S))+I[12]+1804603682&4294967295,_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[13]+4254626195&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[14]+2792965006&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[15]+1236535329&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(C^S&(b^C))+I[1]+4129170786&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[6]+3225465664&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[11]+643717713&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[0]+3921069994&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(C^S&(b^C))+I[5]+3593408605&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[10]+38016083&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[15]+3634488961&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[4]+3889429448&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(C^S&(b^C))+I[9]+568446438&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[14]+3275163606&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[3]+4107603335&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[8]+1163531501&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(C^S&(b^C))+I[13]+2850285829&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[2]+4243563512&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[7]+1735328473&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[12]+2368359562&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(b^C^S)+I[5]+4294588738&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[8]+2272392833&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[11]+1839030562&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[14]+4259657740&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(b^C^S)+I[1]+2763975236&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[4]+1272893353&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[7]+4139469664&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[10]+3200236656&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(b^C^S)+I[13]+681279174&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[0]+3936430074&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[3]+3572445317&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[6]+76029189&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(b^C^S)+I[9]+3654602809&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[12]+3873151461&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[15]+530742520&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[2]+3299628645&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(C^(b|~S))+I[0]+4096336452&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[7]+1126891415&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[14]+2878612391&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[5]+4237533241&4294967295,b=C+(y<<21&4294967295|y>>>11),y=_+(C^(b|~S))+I[12]+1700485571&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[3]+2399980690&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[10]+4293915773&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[1]+2240044497&4294967295,b=C+(y<<21&4294967295|y>>>11),y=_+(C^(b|~S))+I[8]+1873313359&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[15]+4264355552&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[6]+2734768916&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[13]+1309151649&4294967295,b=C+(y<<21&4294967295|y>>>11),y=_+(C^(b|~S))+I[4]+4149444226&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[11]+3174756917&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[2]+718787259&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(C+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+S&4294967295}n.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var b=_-this.blockSize,I=this.B,C=this.h,S=0;S<_;){if(C==0)for(;S<=b;)r(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<_;)if(I[C++]=E.charCodeAt(S++),C==this.blockSize){r(this,I),C=0;break}}else for(;S<_;)if(I[C++]=E[S++],C==this.blockSize){r(this,I),C=0;break}}this.h=C,this.o+=_},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var b=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=b&255,b/=256;for(this.u(E),E=Array(16),_=b=0;4>_;++_)for(var I=0;32>I;I+=8)E[b++]=this.g[_]>>>I&255;return E};function s(E,_){var b=c;return Object.prototype.hasOwnProperty.call(b,E)?b[E]:b[E]=_(E)}function o(E,_){this.h=_;for(var b=[],I=!0,C=E.length-1;0<=C;C--){var S=E[C]|0;I&&S==_||(b[C]=S,I=!1)}this.g=b}var c={};function l(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return x(d(-E));for(var _=[],b=1,I=0;E>=b;I++)_[I]=E/b|0,b*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return x(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(_,8)),I=m,C=0;C<E.length;C+=8){var S=Math.min(8,E.length-C),y=parseInt(E.substring(C,C+S),_);8>S?(S=d(Math.pow(_,S)),I=I.j(S).add(d(y))):(I=I.j(b),I=I.add(d(y)))}return I}var m=l(0),p=l(1),w=l(16777216);i=o.prototype,i.m=function(){if(k(this))return-x(this).m();for(var E=0,_=1,b=0;b<this.g.length;b++){var I=this.i(b);E+=(0<=I?I:4294967296+I)*_,_*=4294967296}return E},i.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(k(this))return"-"+x(this).toString(E);for(var _=d(Math.pow(E,6)),b=this,I="";;){var C=oe(b,_).g;b=j(b,C.j(_));var S=((0<b.g.length?b.g[0]:b.h)>>>0).toString(E);if(b=C,T(b))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},i.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function k(E){return E.h==-1}i.l=function(E){return E=j(this,E),k(E)?-1:T(E)?0:1};function x(E){for(var _=E.g.length,b=[],I=0;I<_;I++)b[I]=~E.g[I];return new o(b,~E.h).add(p)}i.abs=function(){return k(this)?x(this):this},i.add=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0,C=0;C<=_;C++){var S=I+(this.i(C)&65535)+(E.i(C)&65535),y=(S>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=y>>>16,S&=65535,y&=65535,b[C]=y<<16|S}return new o(b,b[b.length-1]&-2147483648?-1:0)};function j(E,_){return E.add(x(_))}i.j=function(E){if(T(this)||T(E))return m;if(k(this))return k(E)?x(this).j(x(E)):x(x(this).j(E));if(k(E))return x(this.j(x(E)));if(0>this.l(w)&&0>E.l(w))return d(this.m()*E.m());for(var _=this.g.length+E.g.length,b=[],I=0;I<2*_;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var S=this.i(I)>>>16,y=this.i(I)&65535,Zi=E.i(C)>>>16,Io=E.i(C)&65535;b[2*I+2*C]+=y*Io,K(b,2*I+2*C),b[2*I+2*C+1]+=S*Io,K(b,2*I+2*C+1),b[2*I+2*C+1]+=y*Zi,K(b,2*I+2*C+1),b[2*I+2*C+2]+=S*Zi,K(b,2*I+2*C+2)}for(I=0;I<_;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=_;I<2*_;I++)b[I]=0;return new o(b,0)};function K(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function G(E,_){this.g=E,this.h=_}function oe(E,_){if(T(_))throw Error("division by zero");if(T(E))return new G(m,m);if(k(E))return _=oe(x(E),_),new G(x(_.g),x(_.h));if(k(_))return _=oe(E,x(_)),new G(x(_.g),_.h);if(30<E.g.length){if(k(E)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var b=p,I=_;0>=I.l(E);)b=at(b),I=at(I);var C=be(b,1),S=be(I,1);for(I=be(I,2),b=be(b,2);!T(I);){var y=S.add(I);0>=y.l(E)&&(C=C.add(b),S=y),I=be(I,1),b=be(b,1)}return _=j(E,C.j(_)),new G(C,_)}for(C=m;0<=E.l(_);){for(b=Math.max(1,Math.floor(E.m()/_.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=d(b),y=S.j(_);k(y)||0<y.l(E);)b-=I,S=d(b),y=S.j(_);T(S)&&(S=p),C=C.add(S),E=j(E,y)}return new G(C,E)}i.A=function(E){return oe(this,E).h},i.and=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0;I<_;I++)b[I]=this.i(I)&E.i(I);return new o(b,this.h&E.h)},i.or=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0;I<_;I++)b[I]=this.i(I)|E.i(I);return new o(b,this.h|E.h)},i.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0;I<_;I++)b[I]=this.i(I)^E.i(I);return new o(b,this.h^E.h)};function at(E){for(var _=E.g.length+1,b=[],I=0;I<_;I++)b[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(b,E.h)}function be(E,_){var b=_>>5;_%=32;for(var I=E.g.length-b,C=[],S=0;S<I;S++)C[S]=0<_?E.i(S+b)>>>_|E.i(S+b+1)<<32-_:E.i(S+b);return new o(C,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,qm=gE.Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,jn=gE.Integer=o}).apply(typeof pE<"u"?pE:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fn={};var Hm,Gm,Rs,Wm,Ua,vd,Km,Ym,Qm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,f){return a==Array.prototype||a==Object.prototype||(a[u]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var u=0;u<a.length;++u){var f=a[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var n=t(this);function r(a,u){if(u)e:{var f=n;a=a.split(".");for(var g=0;g<a.length-1;g++){var A=a[g];if(!(A in f))break e;f=f[A]}a=a[a.length-1],g=f[a],u=u(g),u!=g&&u!=null&&e(f,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var f=0,g=!1,A={next:function(){if(!g&&f<a.length){var R=f++;return{value:u(R,a[R]),done:!1}}return g=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,f){return f})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function h(a,u,f){return a.call.apply(a.bind,arguments)}function m(a,u,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,g),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function p(a,u,f){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function w(a,u){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function T(a,u){function f(){}f.prototype=u.prototype,a.aa=u.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,A,R){for(var F=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)F[xe-2]=arguments[xe];return u.prototype[A].apply(g,F)}}function k(a){let u=a.length;if(0<u){let f=Array(u);for(let g=0;g<u;g++)f[g]=a[g];return f}return[]}function x(a,u){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(l(g)){let A=a.length||0,R=g.length||0;a.length=A+R;for(let F=0;F<R;F++)a[A+F]=g[F]}else a.push(g)}}class j{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function K(a){return/^[\s\xa0]*$/.test(a)}function G(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function oe(a){return oe[" "](a),a}oe[" "]=function(){};var at=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function be(a,u,f){for(let g in a)u.call(f,a[g],g,a)}function E(a,u){for(let f in a)u.call(void 0,a[f],f,a)}function _(a){let u={};for(let f in a)u[f]=a[f];return u}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,u){let f,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(f in g)a[f]=g[f];for(let R=0;R<b.length;R++)f=b[R],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function C(a){var u=1;a=a.split(":");let f=[];for(;0<u&&a.length;)f.push(a.shift()),u--;return a.length&&f.push(a.join(":")),f}function S(a){c.setTimeout(()=>{throw a},0)}function y(){var a=ah;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class Zi{constructor(){this.h=this.g=null}add(u,f){let g=Io.get();g.set(u,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Io=new j(()=>new ek,a=>a.reset());class ek{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Eo,Co=!1,ah=new Zi,nb=()=>{let a=c.Promise.resolve(void 0);Eo=()=>{a.then(tk)}};var tk=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(f){S(f)}var u=Io;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Co=!1};function An(){this.s=this.s,this.C=this.C}An.prototype.s=!1,An.prototype.ma=function(){this.s||(this.s=!0,this.N())},An.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var ik=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,u),c.removeEventListener("test",f,u)}catch{}return a}();function To(a,u){if(At.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(at){e:{try{oe(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else f=="mouseover"?u=a.fromElement:f=="mouseout"&&(u=a.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:nk[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&To.aa.h.call(this)}}T(To,At);var nk={2:"touch",3:"pen",4:"mouse"};To.prototype.h=function(){To.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ao="closure_listenable_"+(1e6*Math.random()|0),rk=0;function sk(a,u,f,g,A){this.listener=a,this.proxy=null,this.src=u,this.type=f,this.capture=!!g,this.ha=A,this.key=++rk,this.da=this.fa=!1}function Wc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Kc(a){this.src=a,this.g={},this.h=0}Kc.prototype.add=function(a,u,f,g,A){var R=a.toString();a=this.g[R],a||(a=this.g[R]=[],this.h++);var F=lh(a,u,g,A);return-1<F?(u=a[F],f||(u.fa=!1)):(u=new sk(u,this.src,R,!!g,A),u.fa=f,a.push(u)),u};function ch(a,u){var f=u.type;if(f in a.g){var g=a.g[f],A=Array.prototype.indexOf.call(g,u,void 0),R;(R=0<=A)&&Array.prototype.splice.call(g,A,1),R&&(Wc(u),a.g[f].length==0&&(delete a.g[f],a.h--))}}function lh(a,u,f,g){for(var A=0;A<a.length;++A){var R=a[A];if(!R.da&&R.listener==u&&R.capture==!!f&&R.ha==g)return A}return-1}var dh="closure_lm_"+(1e6*Math.random()|0),uh={};function rb(a,u,f,g,A){if(g&&g.once)return ob(a,u,f,g,A);if(Array.isArray(u)){for(var R=0;R<u.length;R++)rb(a,u[R],f,g,A);return null}return f=ph(f),a&&a[Ao]?a.K(u,f,d(g)?!!g.capture:!!g,A):sb(a,u,f,!1,g,A)}function sb(a,u,f,g,A,R){if(!u)throw Error("Invalid event type");var F=d(A)?!!A.capture:!!A,xe=fh(a);if(xe||(a[dh]=xe=new Kc(a)),f=xe.add(u,f,g,F,R),f.proxy)return f;if(g=ok(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)ik||(A=F),A===void 0&&(A=!1),a.addEventListener(u.toString(),g,A);else if(a.attachEvent)a.attachEvent(cb(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ok(){function a(f){return u.call(a.src,a.listener,f)}let u=ak;return a}function ob(a,u,f,g,A){if(Array.isArray(u)){for(var R=0;R<u.length;R++)ob(a,u[R],f,g,A);return null}return f=ph(f),a&&a[Ao]?a.L(u,f,d(g)?!!g.capture:!!g,A):sb(a,u,f,!0,g,A)}function ab(a,u,f,g,A){if(Array.isArray(u))for(var R=0;R<u.length;R++)ab(a,u[R],f,g,A);else g=d(g)?!!g.capture:!!g,f=ph(f),a&&a[Ao]?(a=a.i,u=String(u).toString(),u in a.g&&(R=a.g[u],f=lh(R,f,g,A),-1<f&&(Wc(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete a.g[u],a.h--)))):a&&(a=fh(a))&&(u=a.g[u.toString()],a=-1,u&&(a=lh(u,f,g,A)),(f=-1<a?u[a]:null)&&hh(f))}function hh(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Ao])ch(u.i,a);else{var f=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(f,g,a.capture):u.detachEvent?u.detachEvent(cb(f),g):u.addListener&&u.removeListener&&u.removeListener(g),(f=fh(u))?(ch(f,a),f.h==0&&(f.src=null,u[dh]=null)):Wc(a)}}}function cb(a){return a in uh?uh[a]:uh[a]="on"+a}function ak(a,u){if(a.da)a=!0;else{u=new To(u,this);var f=a.listener,g=a.ha||a.src;a.fa&&hh(a),a=f.call(g,u)}return a}function fh(a){return a=a[dh],a instanceof Kc?a:null}var mh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ph(a){return typeof a=="function"?a:(a[mh]||(a[mh]=function(u){return a.handleEvent(u)}),a[mh])}function St(){An.call(this),this.i=new Kc(this),this.M=this,this.F=null}T(St,An),St.prototype[Ao]=!0,St.prototype.removeEventListener=function(a,u,f,g){ab(this,a,u,f,g)};function jt(a,u){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new At(u,a);else if(u instanceof At)u.target=u.target||a;else{var A=u;u=new At(g,a),I(u,A)}if(A=!0,f)for(var R=f.length-1;0<=R;R--){var F=u.g=f[R];A=Yc(F,g,!0,u)&&A}if(F=u.g=a,A=Yc(F,g,!0,u)&&A,A=Yc(F,g,!1,u)&&A,f)for(R=0;R<f.length;R++)F=u.g=f[R],A=Yc(F,g,!1,u)&&A}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var f=a.g[u],g=0;g<f.length;g++)Wc(f[g]);delete a.g[u],a.h--}}this.F=null},St.prototype.K=function(a,u,f,g){return this.i.add(String(a),u,!1,f,g)},St.prototype.L=function(a,u,f,g){return this.i.add(String(a),u,!0,f,g)};function Yc(a,u,f,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,R=0;R<u.length;++R){var F=u[R];if(F&&!F.da&&F.capture==f){var xe=F.listener,wt=F.ha||F.src;F.fa&&ch(a.i,F),A=xe.call(wt,g)!==!1&&A}}return A&&!g.defaultPrevented}function lb(a,u,f){if(typeof a=="function")f&&(a=p(a,f));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function db(a){a.g=lb(()=>{a.g=null,a.i&&(a.i=!1,db(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class ck extends An{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:db(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function So(a){An.call(this),this.h=a,this.g={}}T(So,An);var ub=[];function hb(a){be(a.g,function(u,f){this.g.hasOwnProperty(f)&&hh(u)},a),a.g={}}So.prototype.N=function(){So.aa.N.call(this),hb(this)},So.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gh=c.JSON.stringify,lk=c.JSON.parse,dk=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function _h(){}_h.prototype.h=null;function fb(a){return a.h||(a.h=a.i())}function mb(){}var Ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vh(){At.call(this,"d")}T(vh,At);function yh(){At.call(this,"c")}T(yh,At);var Jn={},pb=null;function Qc(){return pb=pb||new St}Jn.La="serverreachability";function gb(a){At.call(this,Jn.La,a)}T(gb,At);function xo(a){let u=Qc();jt(u,new gb(u))}Jn.STAT_EVENT="statevent";function _b(a,u){At.call(this,Jn.STAT_EVENT,a),this.stat=u}T(_b,At);function Bt(a){let u=Qc();jt(u,new _b(u,a))}Jn.Ma="timingevent";function vb(a,u){At.call(this,Jn.Ma,a),this.size=u}T(vb,At);function ko(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Do(){this.g=!0}Do.prototype.xa=function(){this.g=!1};function uk(a,u,f,g,A,R){a.info(function(){if(a.g)if(R)for(var F="",xe=R.split("&"),wt=0;wt<xe.length;wt++){var we=xe[wt].split("=");if(1<we.length){var Rt=we[0];we=we[1];var xt=Rt.split("_");F=2<=xt.length&&xt[1]=="type"?F+(Rt+"="+we+"&"):F+(Rt+"=redacted&")}}else F=null;else F=R;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+u+`
`+f+`
`+F})}function hk(a,u,f,g,A,R,F){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+u+`
`+f+`
`+R+" "+F})}function Qr(a,u,f,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+mk(a,f)+(g?" "+g:"")})}function fk(a,u){a.info(function(){return"TIMEOUT: "+u})}Do.prototype.info=function(){};function mk(a,u){if(!a.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var A=g[1];if(Array.isArray(A)&&!(1>A.length)){var R=A[0];if(R!="noop"&&R!="stop"&&R!="close")for(var F=1;F<A.length;F++)A[F]=""}}}}return gh(f)}catch{return u}}var Xc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bh;function Zc(){}T(Zc,_h),Zc.prototype.g=function(){return new XMLHttpRequest},Zc.prototype.i=function(){return{}},bh=new Zc;function Sn(a,u,f,g){this.j=a,this.i=u,this.l=f,this.R=g||1,this.U=new So(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bb}function bb(){this.i=null,this.g="",this.h=!1}var wb={},wh={};function Ih(a,u,f){a.L=1,a.v=il(Ji(u)),a.m=f,a.P=!0,Ib(a,null)}function Ib(a,u){a.F=Date.now(),Jc(a),a.A=Ji(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Fb(f.i,"t",g),a.C=0,f=a.j.J,a.h=new bb,a.g=ew(a.j,f?u:null,!a.m),0<a.O&&(a.M=new ck(p(a.Y,a,a.g),a.O)),u=a.U,f=a.g,g=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(ub[0]=A.toString()),A=ub);for(var R=0;R<A.length;R++){var F=rb(f,A[R],g||u.handleEvent,!1,u.h||u);if(!F)break;u.g[F.key]=F}u=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),xo(),uk(a.i,a.u,a.A,a.l,a.R,a.m)}Sn.prototype.ca=function(a){a=a.target;let u=this.M;u&&en(a)==3?u.j():this.Y(a)},Sn.prototype.Y=function(a){try{if(a==this.g)e:{let xt=en(this.g);var u=this.g.Ba();let Jr=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||$b(this.g)))){this.J||xt!=4||u==7||(u==8||0>=Jr?xo(3):xo(2)),Eh(this);var f=this.g.Z();this.X=f;t:if(Eb(this)){var g=$b(this.g);a="";var A=g.length,R=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),Po(this);var F="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(g[u],{stream:!(R&&u==A-1)});g.length=0,this.h.g+=a,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,hk(this.i,this.u,this.A,this.l,this.R,xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,wt=this.g;if((xe=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(xe)){var we=xe;break t}}we=null}if(f=we)Qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ch(this,f);else{this.o=!1,this.s=3,Bt(12),er(this),Po(this);break e}}if(this.P){f=!0;let wi;for(;!this.J&&this.C<F.length;)if(wi=pk(this,F),wi==wh){xt==4&&(this.s=4,Bt(14),f=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(wi==wb){this.s=4,Bt(15),Qr(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Qr(this.i,this.l,wi,null),Ch(this,wi);if(Eb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||F.length!=0||this.h.h||(this.s=1,Bt(16),f=!1),this.o=this.o&&f,!f)Qr(this.i,this.l,F,"[Invalid Chunked Response]"),er(this),Po(this);else if(0<F.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),kh(Rt),Rt.M=!0,Bt(11))}}else Qr(this.i,this.l,F,null),Ch(this,F);xt==4&&er(this),this.o&&!this.J&&(xt==4?Qb(this.j,this):(this.o=!1,Jc(this)))}else Pk(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),er(this),Po(this)}}}catch{}finally{}};function Eb(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function pk(a,u){var f=a.C,g=u.indexOf(`
`,f);return g==-1?wh:(f=Number(u.substring(f,g)),isNaN(f)?wb:(g+=1,g+f>u.length?wh:(u=u.slice(g,g+f),a.C=g+f,u)))}Sn.prototype.cancel=function(){this.J=!0,er(this)};function Jc(a){a.S=Date.now()+a.I,Cb(a,a.I)}function Cb(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ko(p(a.ba,a),u)}function Eh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Sn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(fk(this.i,this.A),this.L!=2&&(xo(),Bt(17)),er(this),this.s=2,Po(this)):Cb(this,this.S-a)};function Po(a){a.j.G==0||a.J||Qb(a.j,a)}function er(a){Eh(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,hb(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Ch(a,u){try{var f=a.j;if(f.G!=0&&(f.g==a||Th(f.h,a))){if(!a.K&&Th(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)al(f),sl(f);else break e;xh(f),Bt(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=ko(p(f.Za,f),6e3));if(1>=Sb(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ir(f,11)}else if((a.K||f.g==a)&&al(f),!K(u))for(A=f.Da.g.parse(u),u=0;u<A.length;u++){let we=A[u];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let Rt=we[3];Rt!=null&&(f.la=Rt,f.j.info("VER="+f.la));let xt=we[4];xt!=null&&(f.Aa=xt,f.j.info("SVER="+f.Aa));let Jr=we[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(g=1.5*Jr,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let wi=a.g;if(wi){let ll=wi.g?wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var R=g.h;R.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Ah(R,R.h),R.h=null))}if(g.D){let Dh=wi.g?wi.g.getResponseHeader("X-HTTP-Session-Id"):null;Dh&&(g.ya=Dh,Fe(g.I,g.D,Dh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=a;if(g.qa=Jb(g,g.J?g.ia:null,g.W),F.K){Rb(g.h,F);var xe=F,wt=g.L;wt&&(xe.I=wt),xe.B&&(Eh(xe),Jc(xe)),g.g=F}else Kb(g);0<f.i.length&&ol(f)}else we[0]!="stop"&&we[0]!="close"||ir(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ir(f,7):Rh(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}xo(4)}catch{}}var gk=class{constructor(a,u){this.g=a,this.map=u}};function Tb(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ab(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Sb(a){return a.h?1:a.g?a.g.size:0}function Th(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Ah(a,u){a.g?a.g.add(u):a.h=u}function Rb(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Tb.prototype.cancel=function(){if(this.i=xb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function xb(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let f of a.g.values())u=u.concat(f.D);return u}return k(a.i)}function _k(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],f=a.length,g=0;g<f;g++)u.push(a[g]);return u}u=[],f=0;for(g in a)u[f++]=a[g];return u}function vk(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var f=0;f<a;f++)u.push(f);return u}u=[],f=0;for(let g in a)u[f++]=g;return u}}}function kb(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var f=vk(a),g=_k(a),A=g.length,R=0;R<A;R++)u.call(void 0,g[R],f&&f[R],a)}var Db=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yk(a,u){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),A=null;if(0<=g){var R=a[f].substring(0,g);A=a[f].substring(g+1)}else R=a[f];u(R,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function tr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof tr){this.h=a.h,el(this,a.j),this.o=a.o,this.g=a.g,tl(this,a.s),this.l=a.l;var u=a.i,f=new Oo;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),Pb(this,f),this.m=a.m}else a&&(u=String(a).match(Db))?(this.h=!1,el(this,u[1]||"",!0),this.o=Mo(u[2]||""),this.g=Mo(u[3]||"",!0),tl(this,u[4]),this.l=Mo(u[5]||"",!0),Pb(this,u[6]||"",!0),this.m=Mo(u[7]||"")):(this.h=!1,this.i=new Oo(null,this.h))}tr.prototype.toString=function(){var a=[],u=this.j;u&&a.push(No(u,Mb,!0),":");var f=this.g;return(f||u=="file")&&(a.push("//"),(u=this.o)&&a.push(No(u,Mb,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(No(f,f.charAt(0)=="/"?Ik:wk,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",No(f,Ck)),a.join("")};function Ji(a){return new tr(a)}function el(a,u,f){a.j=f?Mo(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function tl(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function Pb(a,u,f){u instanceof Oo?(a.i=u,Tk(a.i,a.h)):(f||(u=No(u,Ek)),a.i=new Oo(u,a.h))}function Fe(a,u,f){a.i.set(u,f)}function il(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Mo(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function No(a,u,f){return typeof a=="string"?(a=encodeURI(a).replace(u,bk),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function bk(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Mb=/[#\/\?@]/g,wk=/[#\?:]/g,Ik=/[#\?]/g,Ek=/[#\?@]/g,Ck=/#/g;function Oo(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Rn(a){a.g||(a.g=new Map,a.h=0,a.i&&yk(a.i,function(u,f){a.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}i=Oo.prototype,i.add=function(a,u){Rn(this),this.i=null,a=Xr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(u),this.h+=1,this};function Nb(a,u){Rn(a),u=Xr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Ob(a,u){return Rn(a),u=Xr(a,u),a.g.has(u)}i.forEach=function(a,u){Rn(this),this.g.forEach(function(f,g){f.forEach(function(A){a.call(u,A,g,this)},this)},this)},i.na=function(){Rn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let g=0;g<u.length;g++){let A=a[g];for(let R=0;R<A.length;R++)f.push(u[g])}return f},i.V=function(a){Rn(this);let u=[];if(typeof a=="string")Ob(this,a)&&(u=u.concat(this.g.get(Xr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)u=u.concat(a[f])}return u},i.set=function(a,u){return Rn(this),this.i=null,a=Xr(this,a),Ob(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},i.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Fb(a,u,f){Nb(a,u),0<f.length&&(a.i=null,a.g.set(Xr(a,u),k(f)),a.h+=f.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var g=u[f];let R=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var A=R;F[g]!==""&&(A+="="+encodeURIComponent(String(F[g]))),a.push(A)}}return this.i=a.join("&")};function Xr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Tk(a,u){u&&!a.j&&(Rn(a),a.i=null,a.g.forEach(function(f,g){var A=g.toLowerCase();g!=A&&(Nb(this,g),Fb(this,A,f))},a)),a.j=u}function Ak(a,u){let f=new Do;if(c.Image){let g=new Image;g.onload=w(xn,f,"TestLoadImage: loaded",!0,u,g),g.onerror=w(xn,f,"TestLoadImage: error",!1,u,g),g.onabort=w(xn,f,"TestLoadImage: abort",!1,u,g),g.ontimeout=w(xn,f,"TestLoadImage: timeout",!1,u,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function Sk(a,u){let f=new Do,g=new AbortController,A=setTimeout(()=>{g.abort(),xn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(R=>{clearTimeout(A),R.ok?xn(f,"TestPingServer: ok",!0,u):xn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),xn(f,"TestPingServer: error",!1,u)})}function xn(a,u,f,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(f)}catch{}}function Rk(){this.g=new dk}function xk(a,u,f){let g=f||"";try{kb(a,function(A,R){let F=A;d(A)&&(F=gh(A)),u.push(g+R+"="+encodeURIComponent(F))})}catch(A){throw u.push(g+"type="+encodeURIComponent("_badmap")),A}}function Fo(a){this.l=a.Ub||null,this.j=a.eb||!1}T(Fo,_h),Fo.prototype.g=function(){return new nl(this.l,this.j)},Fo.prototype.i=function(a){return function(){return a}}({});function nl(a,u){St.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(nl,St),i=nl.prototype,i.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Vo(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lb(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lb(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Lo(this):Vo(this),this.readyState==3&&Lb(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,Lo(this))},i.Qa=function(a){this.g&&(this.response=a,Lo(this))},i.ga=function(){this.g&&Lo(this)};function Lo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Vo(a)}i.setRequestHeader=function(a,u){this.u.append(a,u)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=u.next();return a.join(`\r
`)};function Vo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Vb(a){let u="";return be(a,function(f,g){u+=g,u+=":",u+=f,u+=`\r
`}),u}function Sh(a,u,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Vb(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Fe(a,u,f))}function Qe(a){St.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Qe,St);var kk=/^https?$/i,Dk=["POST","PUT"];i=Qe.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,u,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bh.g(),this.v=this.o?fb(this.o):fb(bh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(R){Ub(this,R);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)f.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let R of g.keys())f.set(R,g.get(R));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Dk,u,void 0))||g||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,F]of f)this.g.setRequestHeader(R,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zb(this),this.u=!0,this.g.send(a),this.u=!1}catch(R){Ub(this,R)}};function Ub(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,jb(a),rl(a)}function jb(a){a.A||(a.A=!0,jt(a,"complete"),jt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,jt(this,"complete"),jt(this,"abort"),rl(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Bb(this):this.bb())},i.bb=function(){Bb(this)};function Bb(a){if(a.h&&typeof o<"u"&&(!a.v[1]||en(a)!=4||a.Z()!=2)){if(a.u&&en(a)==4)lb(a.Ea,0,a);else if(jt(a,"readystatechange"),en(a)==4){a.h=!1;try{let F=a.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var g;if(g=F===0){var A=String(a.D).match(Db)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),g=!kk.test(A?A.toLowerCase():"")}f=g}if(f)jt(a,"complete"),jt(a,"success");else{a.m=6;try{var R=2<en(a)?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.Z()+"]",jb(a)}}finally{rl(a)}}}}function rl(a,u){if(a.g){zb(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||jt(a,"ready");try{f.onreadystatechange=g}catch{}}}function zb(a){a.I&&(c.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function en(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),lk(u)}};function $b(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Pk(a){let u={};a=(a.g&&2<=en(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(K(a[g]))continue;var f=C(a[g]);let A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=u[A]||[];u[A]=R,R.push(f)}E(u,function(g){return g.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uo(a,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||u}function qb(a){this.Aa=0,this.i=[],this.j=new Do,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uo("baseRetryDelayMs",5e3,a),this.cb=Uo("retryDelaySeedMs",1e4,a),this.Wa=Uo("forwardChannelMaxRetries",2,a),this.wa=Uo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Tb(a&&a.concurrentRequestLimit),this.Da=new Rk,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=qb.prototype,i.la=8,i.G=1,i.connect=function(a,u,f,g){Bt(0),this.W=a,this.H=u||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Jb(this,null,this.W),ol(this)};function Rh(a){if(Hb(a),a.G==3){var u=a.U++,f=Ji(a.I);if(Fe(f,"SID",a.K),Fe(f,"RID",u),Fe(f,"TYPE","terminate"),jo(a,f),u=new Sn(a,a.j,u),u.L=2,u.v=il(Ji(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=u.v,f=!0),f||(u.g=ew(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Jc(u)}Zb(a)}function sl(a){a.g&&(kh(a),a.g.cancel(),a.g=null)}function Hb(a){sl(a),a.u&&(c.clearTimeout(a.u),a.u=null),al(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ol(a){if(!Ab(a.h)&&!a.s){a.s=!0;var u=a.Ga;Eo||nb(),Co||(Eo(),Co=!0),ah.add(u,a),a.B=0}}function Mk(a,u){return Sb(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ko(p(a.Ga,a,u),Xb(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new Sn(this,this.j,a),R=this.o;if(this.S&&(R?(R=_(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(A.H=R,R=null),this.P)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=Wb(this,A,u),f=Ji(this.I),Fe(f,"RID",a),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),jo(this,f),R&&(this.O?u="headers="+encodeURIComponent(String(Vb(R)))+"&"+u:this.m&&Sh(f,this.m,R)),Ah(this.h,A),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",u),Fe(f,"SID","null"),A.T=!0,Ih(A,f,null)):Ih(A,f,u),this.G=2}}else this.G==3&&(a?Gb(this,a):this.i.length==0||Ab(this.h)||Gb(this))};function Gb(a,u){var f;u?f=u.l:f=a.U++;let g=Ji(a.I);Fe(g,"SID",a.K),Fe(g,"RID",f),Fe(g,"AID",a.T),jo(a,g),a.m&&a.o&&Sh(g,a.m,a.o),f=new Sn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Wb(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ah(a.h,f),Ih(f,g,u)}function jo(a,u){a.H&&be(a.H,function(f,g){Fe(u,g,f)}),a.l&&kb({},function(f,g){Fe(u,g,f)})}function Wb(a,u,f){f=Math.min(a.i.length,f);var g=a.l?p(a.l.Na,a.l,a):null;e:{var A=a.i;let R=-1;for(;;){let F=["count="+f];R==-1?0<f?(R=A[0].g,F.push("ofs="+R)):R=0:F.push("ofs="+R);let xe=!0;for(let wt=0;wt<f;wt++){let we=A[wt].g,Rt=A[wt].map;if(we-=R,0>we)R=Math.max(0,A[wt].g-100),xe=!1;else try{xk(Rt,F,"req"+we+"_")}catch{g&&g(Rt)}}if(xe){g=F.join("&");break e}}}return a=a.i.splice(0,f),u.D=a,g}function Kb(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Eo||nb(),Co||(Eo(),Co=!0),ah.add(u,a),a.v=0}}function xh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ko(p(a.Fa,a),Xb(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Yb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ko(p(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),sl(this),Yb(this))};function kh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Yb(a){a.g=new Sn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Ji(a.qa);Fe(u,"RID","rpc"),Fe(u,"SID",a.K),Fe(u,"AID",a.T),Fe(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(u,"TO",a.ja),Fe(u,"TYPE","xmlhttp"),jo(a,u),a.m&&a.o&&Sh(u,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=il(Ji(u)),f.m=null,f.P=!0,Ib(f,a)}i.Za=function(){this.C!=null&&(this.C=null,sl(this),xh(this),Bt(19))};function al(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Qb(a,u){var f=null;if(a.g==u){al(a),kh(a),a.g=null;var g=2}else if(Th(a.h,u))f=u.D,Rb(a.h,u),g=1;else return;if(a.G!=0){if(u.o)if(g==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;g=Qc(),jt(g,new vb(g,f)),ol(a)}else Kb(a);else if(A=u.s,A==3||A==0&&0<u.X||!(g==1&&Mk(a,u)||g==2&&xh(a)))switch(f&&0<f.length&&(u=a.h,u.i=u.i.concat(f)),A){case 1:ir(a,5);break;case 4:ir(a,10);break;case 3:ir(a,6);break;default:ir(a,2)}}}function Xb(a,u){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*u}function ir(a,u){if(a.j.info("Error code "+u),u==2){var f=p(a.fb,a),g=a.Xa;let A=!g;g=new tr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||el(g,"https"),il(g),A?Ak(g.toString(),f):Sk(g.toString(),f)}else Bt(2);a.G=0,a.l&&a.l.sa(u),Zb(a),Hb(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Zb(a){if(a.G=0,a.ka=[],a.l){let u=xb(a.h);(u.length!=0||a.i.length!=0)&&(x(a.ka,u),x(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Jb(a,u,f){var g=f instanceof tr?Ji(f):new tr(f);if(g.g!="")u&&(g.g=u+"."+g.g),tl(g,g.s);else{var A=c.location;g=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var R=new tr(null);g&&el(R,g),u&&(R.g=u),A&&tl(R,A),f&&(R.l=f),g=R}return f=a.D,u=a.ya,f&&u&&Fe(g,f,u),Fe(g,"VER",a.la),jo(a,g),g}function ew(a,u,f){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Qe(new Fo({eb:f})):new Qe(a.pa),u.Ha(a.J),u}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function tw(){}i=tw.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function cl(){}cl.prototype.g=function(a,u){return new ri(a,u)};function ri(a,u){St.call(this),this.g=new qb(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!K(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!K(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Zr(this)}T(ri,St),ri.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ri.prototype.close=function(){Rh(this.g)},ri.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=gh(a),a=f);u.i.push(new gk(u.Ya++,a)),u.G==3&&ol(u)},ri.prototype.N=function(){this.g.l=null,delete this.j,Rh(this.g),delete this.g,ri.aa.N.call(this)};function iw(a){vh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let f in u){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}T(iw,vh);function nw(){yh.call(this),this.status=1}T(nw,yh);function Zr(a){this.g=a}T(Zr,tw),Zr.prototype.ua=function(){jt(this.g,"a")},Zr.prototype.ta=function(a){jt(this.g,new iw(a))},Zr.prototype.sa=function(a){jt(this.g,new nw)},Zr.prototype.ra=function(){jt(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,ri.prototype.send=ri.prototype.o,ri.prototype.open=ri.prototype.m,ri.prototype.close=ri.prototype.close,Qm=fn.createWebChannelTransport=function(){return new cl},Ym=fn.getStatEventTarget=function(){return Qc()},Km=fn.Event=Jn,vd=fn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xc.NO_ERROR=0,Xc.TIMEOUT=8,Xc.HTTP_ERROR=6,Ua=fn.ErrorCode=Xc,yb.COMPLETE="complete",Wm=fn.EventType=yb,mb.EventType=Ro,Ro.OPEN="a",Ro.CLOSE="b",Ro.ERROR="c",Ro.MESSAGE="d",St.prototype.listen=St.prototype.K,Rs=fn.WebChannel=mb,Gm=fn.FetchXmlHttpFactory=Fo,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Hm=fn.XhrIo=Qe}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});var _E="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Ys="10.13.2";var Sr=new ji("@firebase/firestore");function ja(){return Sr.logLevel}function q(i,...e){if(Sr.logLevel<=Mt.DEBUG){let t=e.map(Vg);Sr.debug(`Firestore (${Ys}): ${i}`,...t)}}function gn(i,...e){if(Sr.logLevel<=Mt.ERROR){let t=e.map(Vg);Sr.error(`Firestore (${Ys}): ${i}`,...t)}}function Os(i,...e){if(Sr.logLevel<=Mt.WARN){let t=e.map(Vg);Sr.warn(`Firestore (${Ys}): ${i}`,...t)}}function Vg(i){if(typeof i=="string")return i;try{return function(t){return JSON.stringify(t)}(i)}catch{return i}}function Q(i="Unexpected state"){let e=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: `+i;throw gn(e),new Error(e)}function De(i,e){i||Q()}function ne(i,e){return i}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Zt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var mn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ed=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}},ip=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},np=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i,r=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve(),s=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>v(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(De(typeof n.accessToken=="string"),new Ed(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new yt(e)}},rp=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},sp=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new rp(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},op=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ap=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let n=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};let r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string"),this.R=t.token,new op(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function S1(i){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}var Cd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";for(;n.length<20;){let r=S1(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%e.length))}return n}};function Ee(i,e){return i<e?-1:i>e?1:0}function Fs(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}var Tt=class i{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return i.fromMillis(Date.now())}static fromDate(e){return i.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new i(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class i{constructor(e){this.timestamp=e}static fromTimestamp(e){return new i(e)}static min(){return new i(new Tt(0,0))}static max(){return new i(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Td=class i{constructor(e,t,n){t===void 0?t=0:t>e.length&&Q(),n===void 0?n=e.length-t:n>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return i.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ke=class i extends Td{construct(e,t,n){return new i(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let n of e){if(n.indexOf("//")>=0)throw new B(D.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new i(t)}static emptyPath(){return new i([])}},R1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ui=class i extends Td{construct(e,t,n){return new i(e,t,n)}static isValidIdentifier(e){return R1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new i(["__name__"])}static fromServerFormat(e){let t=[],n="",r=0,s=()=>{if(n.length===0)throw new B(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new B(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(n+=c,r++):(s(),r++)}if(s(),o)throw new B(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new i(t)}static emptyPath(){return new i([])}};var W=class i{constructor(e){this.path=e}static fromPath(e){return new i(Ke.fromString(e))}static fromName(e){return new i(Ke.fromString(e).popFirst(5))}static empty(){return new i(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new i(new Ke(e.slice()))}};var cp=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};cp.UNKNOWN_ID=-1;function x1(i,e){let t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=re.fromTimestamp(n===1e9?new Tt(t+1,0):new Tt(t,n));return new Rr(r,W.empty(),e)}function k1(i){return new Rr(i.readTime,i.key,-1)}var Rr=class i{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new i(re.min(),W.empty(),-1)}static max(){return new i(re.max(),W.empty(),-1)}};function D1(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(i.documentKey,e.documentKey),t!==0?t:Ee(i.largestBatchId,e.largestBatchId))}var P1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function sc(i){return v(this,null,function*(){if(i.code!==D.FAILED_PRECONDITION||i.message!==P1)throw i;q("LocalStore","Unexpectedly lost primary lease")})}var O=class i{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new i((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof i?t:i.resolve(t)}catch(t){return i.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):i.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):i.reject(t)}static resolve(e){return new i((t,n)=>{t(e)})}static reject(e){return new i((t,n)=>{n(e)})}static waitFor(e){return new i((t,n)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>n(l))}),o=!0,s===r&&t()})}static or(e){let t=i.resolve(!1);for(let n of e)t=t.next(r=>r?i.resolve(r):n());return t}static forEach(e,t){let n=[];return e.forEach((r,s)=>{n.push(t.call(this,r,s))}),this.waitFor(n)}static mapArray(e,t){return new i((n,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(h=>{o[d]=h,++c,c===s&&n(o)},h=>r(h))}})}static doWhile(e,t){return new i((n,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):n()};s()})}};function M1(i){let e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oc(i){return i.name==="IndexedDbTransactionError"}var ZE=(()=>{class i{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return i.oe=-1,i})();function Jd(i){return i==null}function Ga(i){return i===0&&1/i==-1/0}function N1(i){return typeof i=="number"&&Number.isInteger(i)&&!Ga(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var O1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BG=[...O1,"documentOverlays"],F1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],L1=F1,V1=[...L1,"indexConfiguration","indexState","indexEntries"];var zG=[...V1,"globals"];function vE(i){let e=0;for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Nr(i,e){for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function JE(i){for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}var et=class i{constructor(e,t){this.comparator=e,this.root=t||qi.EMPTY}insert(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){let e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ps(this.root,e,this.comparator,!0)}},Ps=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qi=class i{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??i.RED,this.left=r??i.EMPTY,this.right=s??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new i(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return i.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1;qi.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,n,r,s){return this}insert(e,t,n){return new qi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ot=class i{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ad(this.data.getIterator())}getIteratorFrom(e){return new Ad(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new i(this.comparator);return t.data=e,t}},Ad=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var pi=class i{constructor(e){this.fields=e,e.sort(ui.comparator)}static empty(){return new i([])}unionWith(e){let t=new Ot(ui.comparator);for(let n of this.fields)t=t.add(n);for(let n of e)t=t.add(n);return new i(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(t,n)=>t.isEqual(n))}};var Sd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ft=class i{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Sd("Invalid base64 string: "+s):s}}(e);return new i(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ft.EMPTY_BYTE_STRING=new Ft("");var U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _n(i){if(De(!!i),typeof i=="string"){let e=0,t=U1.exec(i);if(De(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Be(i.seconds),nanos:Be(i.nanos)}}function Be(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function $n(i){return typeof i=="string"?Ft.fromBase64String(i):Ft.fromUint8Array(i)}function Ug(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function jg(i){let e=i.mapValue.fields.__previous_value__;return Ug(e)?jg(e):e}function Wa(i){let e=_n(i.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}var dp=class{constructor(e,t,n,r,s,o,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},Rd=class i{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database}};var yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ug(i)?4:tC(i)?9007199254740991:eC(i)?10:11:Q()}function Wi(i,e){if(i===e)return!0;let t=xr(i);if(t!==xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Wa(i).isEqual(Wa(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=_n(r.timestampValue),c=_n(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(r,s){return $n(r.bytesValue).isEqual($n(s.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(r,s){return Be(r.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(r.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(i,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Be(r.integerValue)===Be(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Be(r.doubleValue),c=Be(s.doubleValue);return o===c?Ga(o)===Ga(c):isNaN(o)&&isNaN(c)}return!1}(i,e);case 9:return Fs(i.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(vE(o)!==vE(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Wi(o[l],c[l])))return!1;return!0}(i,e);default:return Q()}}function Ka(i,e){return(i.values||[]).find(t=>Wi(t,e))!==void 0}function Ls(i,e){if(i===e)return 0;let t=xr(i),n=xr(e);if(t!==n)return Ee(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ee(i.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Be(s.integerValue||s.doubleValue),l=Be(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(i,e);case 3:return yE(i.timestampValue,e.timestampValue);case 4:return yE(Wa(i),Wa(e));case 5:return Ee(i.stringValue,e.stringValue);case 6:return function(s,o){let c=$n(s),l=$n(o);return c.compareTo(l)}(i.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let h=Ee(c[d],l[d]);if(h!==0)return h}return Ee(c.length,l.length)}(i.referenceValue,e.referenceValue);case 8:return function(s,o){let c=Ee(Be(s.latitude),Be(o.latitude));return c!==0?c:Ee(Be(s.longitude),Be(o.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return bE(i.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,d,h;let m=s.fields||{},p=o.fields||{},w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,k=Ee(((d=w?.values)===null||d===void 0?void 0:d.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:bE(w,T)}(i.mapValue,e.mapValue);case 11:return function(s,o){if(s===yd.mapValue&&o===yd.mapValue)return 0;if(s===yd.mapValue)return 1;if(o===yd.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){let p=Ee(l[m],h[m]);if(p!==0)return p;let w=Ls(c[l[m]],d[h[m]]);if(w!==0)return w}return Ee(l.length,h.length)}(i.mapValue,e.mapValue);default:throw Q()}}function yE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ee(i,e);let t=_n(i),n=_n(e),r=Ee(t.seconds,n.seconds);return r!==0?r:Ee(t.nanos,n.nanos)}function bE(i,e){let t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){let s=Ls(t[r],n[r]);if(s)return s}return Ee(t.length,n.length)}function Vs(i){return up(i)}function up(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){let n=_n(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return $n(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return W.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",r=!0;for(let s of t.values||[])r?r=!1:n+=",",n+=up(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){let n=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of n)s?s=!1:r+=",",r+=`${o}:${up(t.fields[o])}`;return r+"}"}(i.mapValue):Q()}function wE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function hp(i){return!!i&&"integerValue"in i}function Bg(i){return!!i&&"arrayValue"in i}function IE(i){return!!i&&"nullValue"in i}function EE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wd(i){return!!i&&"mapValue"in i}function eC(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function za(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){let e={mapValue:{fields:{}}};return Nr(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=za(n)),e}if(i.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=za(i.arrayValue.values[t]);return e}return Object.assign({},i)}function tC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var di=class i{constructor(e){this.value=e}static empty(){return new i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!wd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(t)}setAll(e){let t=ui.emptyPath(),n={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,n,r),n={},r=[],t=c.popLast()}o?n[c.lastSegment()]=za(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){let t=this.field(e.popLast());wd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];wd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Nr(t,(r,s)=>e[r]=s);for(let r of n)delete e[r]}clone(){return new i(za(this.value))}};function iC(i){let e=[];return Nr(i.fields,(t,n)=>{let r=new ui([t]);if(wd(n)){let s=iC(n.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new pi(e)}var Ri=class i{constructor(e,t,n,r,s,o,c){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new i(e,0,re.min(),re.min(),re.min(),di.empty(),0)}static newFoundDocument(e,t,n,r){return new i(e,1,t,re.min(),n,r,0)}static newNoDocument(e,t){return new i(e,2,t,re.min(),re.min(),di.empty(),0)}static newUnknownDocument(e,t){return new i(e,3,t,re.min(),re.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Us=class{constructor(e,t){this.position=e,this.inclusive=t}};function CE(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){let s=e[r],o=i.position[r];if(s.field.isKeyField()?n=W.comparator(W.fromName(o.referenceValue),t.key):n=Ls(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function TE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Wi(i.position[t],e.position[t]))return!1;return!0}var js=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function j1(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}var xd=class{},mt=class i extends xd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new mp(e,t,n):t==="array-contains"?new _p(e,n):t==="in"?new vp(e,n):t==="not-in"?new yp(e,n):t==="array-contains-any"?new bp(e,n):new i(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new pp(e,n):new gp(e,n)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ls(t,this.value)):t!==null&&xr(this.value)===xr(t)&&this.matchesComparison(Ls(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xi=class i extends xd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new i(e,t)}matches(e){return nC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function nC(i){return i.op==="and"}function rC(i){return B1(i)&&nC(i)}function B1(i){for(let e of i.filters)if(e instanceof xi)return!1;return!0}function fp(i){if(i instanceof mt)return i.field.canonicalString()+i.op.toString()+Vs(i.value);if(rC(i))return i.filters.map(e=>fp(e)).join(",");{let e=i.filters.map(t=>fp(t)).join(",");return`${i.op}(${e})`}}function sC(i,e){return i instanceof mt?function(n,r){return r instanceof mt&&n.op===r.op&&n.field.isEqual(r.field)&&Wi(n.value,r.value)}(i,e):i instanceof xi?function(n,r){return r instanceof xi&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,c)=>s&&sC(o,r.filters[c]),!0):!1}(i,e):void Q()}function oC(i){return i instanceof mt?function(t){return`${t.field.canonicalString()} ${t.op} ${Vs(t.value)}`}(i):i instanceof xi?function(t){return t.op.toString()+" {"+t.getFilters().map(oC).join(" ,")+"}"}(i):"Filter"}var mp=class extends mt{constructor(e,t,n){super(e,t,n),this.key=W.fromName(n.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},pp=class extends mt{constructor(e,t){super(e,"in",t),this.keys=aC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},gp=class extends mt{constructor(e,t){super(e,"not-in",t),this.keys=aC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function aC(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>W.fromName(n.referenceValue))}var _p=class extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Bg(t)&&Ka(t.arrayValue,this.value)}},vp=class extends mt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ka(this.value.arrayValue,t)}},yp=class extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ka(this.value.arrayValue,t)}},bp=class extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Ka(this.value.arrayValue,n))}};var wp=class{constructor(e,t=null,n=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function AE(i,e=null,t=[],n=[],r=null,s=null,o=null){return new wp(i,e,t,n,r,s,o)}function zg(i){let e=ne(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>fp(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Jd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Vs(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Vs(n)).join(",")),e.ue=t}return e.ue}function $g(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!j1(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!sC(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!TE(i.startAt,e.startAt)&&TE(i.endAt,e.endAt)}function Ip(i){return W.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}var kr=class{constructor(e,t=null,n=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function z1(i,e,t,n,r,s,o,c){return new kr(i,e,t,n,r,s,o,c)}function qg(i){return new kr(i)}function SE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function cC(i){return i.collectionGroup!==null}function $a(i){let e=ne(i);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ot(ui.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new js(s,n))}),t.has(ui.keyField().canonicalString())||e.ce.push(new js(ui.keyField(),n))}return e.ce}function Hi(i){let e=ne(i);return e.le||(e.le=$1(e,$a(i))),e.le}function $1(i,e){if(i.limitType==="F")return AE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new js(r.field,s)});let t=i.endAt?new Us(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Us(i.startAt.position,i.startAt.inclusive):null;return AE(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function Ep(i,e){let t=i.filters.concat([e]);return new kr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Cp(i,e,t){return new kr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function eu(i,e){return $g(Hi(i),Hi(e))&&i.limitType===e.limitType}function lC(i){return`${zg(Hi(i))}|lt:${i.limitType}`}function xs(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(r=>oC(r)).join(", ")}]`),Jd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Vs(r)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Vs(r)).join(",")),`Target(${n})`}(Hi(i))}; limitType=${i.limitType})`}function tu(i,e){return e.isFoundDocument()&&function(n,r){let s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):W.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,e)&&function(n,r){for(let s of $a(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,e)&&function(n,r){for(let s of n.filters)if(!s.matches(r))return!1;return!0}(i,e)&&function(n,r){return!(n.startAt&&!function(o,c,l){let d=CE(o,c,l);return o.inclusive?d<=0:d<0}(n.startAt,$a(n),r)||n.endAt&&!function(o,c,l){let d=CE(o,c,l);return o.inclusive?d>=0:d>0}(n.endAt,$a(n),r))}(i,e)}function q1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function dC(i){return(e,t)=>{let n=!1;for(let r of $a(i)){let s=H1(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function H1(i,e,t){let n=i.field.isKeyField()?W.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?Ls(l,d):Q()}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return Q()}}var qn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Nr(this.inner,(t,n)=>{for(let[r,s]of n)e(r,s)})}isEmpty(){return JE(this.inner)}size(){return this.innerSize}};var G1=new et(W.comparator);function vn(){return G1}var uC=new et(W.comparator);function Ba(...i){let e=uC;for(let t of i)e=e.insert(t.key,t);return e}function hC(i){let e=uC;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Cr(){return qa()}function fC(){return qa()}function qa(){return new qn(i=>i.toString(),(i,e)=>i.isEqual(e))}var W1=new et(W.comparator),K1=new Ot(W.comparator);function me(...i){let e=K1;for(let t of i)e=e.add(t);return e}var Y1=new Ot(Ee);function Q1(){return Y1}function Hg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ga(e)?"-0":e}}function mC(i){return{integerValue:""+i}}function X1(i,e){return N1(e)?mC(e):Hg(i,e)}var Bs=class{constructor(){this._=void 0}};function Z1(i,e,t){return i instanceof zs?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ug(s)&&(s=jg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):i instanceof Dr?gC(i,e):i instanceof Pr?_C(i,e):function(r,s){let o=pC(r,s),c=RE(o)+RE(r.Pe);return hp(o)&&hp(r.Pe)?mC(c):Hg(r.serializer,c)}(i,e)}function J1(i,e,t){return i instanceof Dr?gC(i,e):i instanceof Pr?_C(i,e):t}function pC(i,e){return i instanceof $s?function(n){return hp(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}var zs=class extends Bs{},Dr=class extends Bs{constructor(e){super(),this.elements=e}};function gC(i,e){let t=vC(e);for(let n of i.elements)t.some(r=>Wi(r,n))||t.push(n);return{arrayValue:{values:t}}}var Pr=class extends Bs{constructor(e){super(),this.elements=e}};function _C(i,e){let t=vC(e);for(let n of i.elements)t=t.filter(r=>!Wi(r,n));return{arrayValue:{values:t}}}var $s=class extends Bs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function RE(i){return Be(i.integerValue||i.doubleValue)}function vC(i){return Bg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function eF(i,e){return i.field.isEqual(e.field)&&function(n,r){return n instanceof Dr&&r instanceof Dr||n instanceof Pr&&r instanceof Pr?Fs(n.elements,r.elements,Wi):n instanceof $s&&r instanceof $s?Wi(n.Pe,r.Pe):n instanceof zs&&r instanceof zs}(i.transform,e.transform)}var Tp=class{constructor(e,t){this.version=e,this.transformResults=t}},pn=class i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new i}static exists(e){return new i(void 0,e)}static updateTime(e){return new i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Id(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}var qs=class{};function yC(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ya(i.key,pn.none()):new Mr(i.key,i.data,pn.none());{let t=i.data,n=di.empty(),r=new Ot(ui.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Ki(i.key,n,new pi(r.toArray()),pn.none())}}function tF(i,e,t){i instanceof Mr?function(r,s,o){let c=r.value.clone(),l=kE(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(i,e,t):i instanceof Ki?function(r,s,o){if(!Id(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=kE(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(bC(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ha(i,e,t,n){return i instanceof Mr?function(s,o,c,l){if(!Id(s.precondition,o))return c;let d=s.value.clone(),h=DE(s.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(i,e,t,n):i instanceof Ki?function(s,o,c,l){if(!Id(s.precondition,o))return c;let d=DE(s.fieldTransforms,l,o),h=o.data;return h.setAll(bC(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(i,e,t,n):function(s,o,c){return Id(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(i,e,t)}function iF(i,e){let t=null;for(let n of i.fieldTransforms){let r=e.data.field(n.field),s=pC(n.transform,r||null);s!=null&&(t===null&&(t=di.empty()),t.set(n.field,s))}return t||null}function xE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Fs(n,r,(s,o)=>eF(s,o))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}var Mr=class extends qs{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Ki=class extends qs{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function bC(i){let e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let n=i.data.field(t);e.set(t,n)}}),e}function kE(i,e,t){let n=new Map;De(i.length===t.length);for(let r=0;r<t.length;r++){let s=i[r],o=s.transform,c=e.data.field(s.field);n.set(s.field,J1(o,c,t[r]))}return n}function DE(i,e,t){let n=new Map;for(let r of i){let s=r.transform,o=t.data.field(r.field);n.set(r.field,Z1(s,o,e))}return n}var Ya=class extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ap=class extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sp=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&tF(s,e,n[r])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ha(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=Ha(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=fC();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=yC(o,c);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(t,n)=>xE(t,n))&&Fs(this.baseMutations,e.baseMutations,(t,n)=>xE(t,n))}},Rp=class i{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){De(e.mutations.length===n.length);let r=function(){return W1}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new i(e,t,n,r)}};var xp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var kp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ht,_e;function nF(i){switch(i){default:return Q();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function wC(i){if(i===void 0)return gn("GRPC error has no .code"),D.UNKNOWN;switch(i){case ht.OK:return D.OK;case ht.CANCELLED:return D.CANCELLED;case ht.UNKNOWN:return D.UNKNOWN;case ht.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case ht.INTERNAL:return D.INTERNAL;case ht.UNAVAILABLE:return D.UNAVAILABLE;case ht.UNAUTHENTICATED:return D.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case ht.NOT_FOUND:return D.NOT_FOUND;case ht.ALREADY_EXISTS:return D.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return D.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case ht.ABORTED:return D.ABORTED;case ht.OUT_OF_RANGE:return D.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return D.UNIMPLEMENTED;case ht.DATA_LOSS:return D.DATA_LOSS;default:return Q()}}(_e=ht||(ht={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var PE=null;function rF(){return new TextEncoder}var sF=new jn([4294967295,4294967295],0);function ME(i){let e=rF().encode(i),t=new qm;return t.update(e),new Uint8Array(t.digest())}function NE(i){let e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jn([t,n],0),new jn([r,s],0)]}var Dp=class i{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Tr(`Invalid padding: ${t}`);if(n<0)throw new Tr(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Tr(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Tr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jn.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(jn.fromNumber(n)));return r.compare(sF)===1&&(r=new jn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=ME(e),[n,r]=NE(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(e,t,n){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new i(s,r,t);return n.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=ME(e),[n,r]=NE(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Tr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var kd=class i{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){let r=new Map;return r.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new i(re.min(),r,new et(Ee),vn(),me())}},Qa=class i{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new i(n,t,me(),me(),me())}};var Ms=class{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}},Dd=class{constructor(e,t){this.targetId=e,this.me=t}},Pd=class{constructor(e,t,n=Ft.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Md=class{constructor(){this.fe=0,this.ge=FE(),this.pe=Ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),t=me(),n=me();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Q()}}),new Qa(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=FE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Pp=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=vn(),this.qe=OE(),this.Qe=new et(Ee)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,n=e.me.count,r=this.Je(t);if(r){let s=r.target;if(Ip(s))if(n===0){let o=new W(s.path);this.Ue(t,o,Ri.newNoDocument(o,re.min()))}else De(n===1);else{let o=this.Ye(t);if(o!==n){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}PE?.et(function(h,m,p,w,T){var k,x,j,K,G,oe;let at={localCacheCount:h,existenceFilterCount:m.count,databaseId:p.database,projectId:p.projectId},be=m.unchangedNames;return be&&(at.bloomFilter={applied:T===0,hashCount:(k=be?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(K=(j=(x=be?.bits)===null||x===void 0?void 0:x.bitmap)===null||j===void 0?void 0:j.length)!==null&&K!==void 0?K:0,padding:(oe=(G=be?.bits)===null||G===void 0?void 0:G.padding)!==null&&oe!==void 0?oe:0,mightContain:E=>{var _;return(_=w?.mightContain(E))!==null&&_!==void 0&&_}}),at}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t,o,c;try{o=$n(n).toUint8Array()}catch(l){if(l instanceof Sd)return Os("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Dp(o,r,s)}catch(l){return Os(l instanceof Tr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){let n=this.Le.getRemoteKeysForTarget(t),r=0;return n.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Ip(c.target)){let l=new W(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ri.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let n=me();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new kd(e,t,this.Qe,this.ke,n);return this.ke=vn(),this.qe=OE(),this.Qe=new et(Ee),r}$e(e,t){if(!this.ze(e))return;let n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Md,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ot(Ee),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Md),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function OE(){return new et(W.comparator)}function FE(){return new et(W.comparator)}var oF={asc:"ASCENDING",desc:"DESCENDING"},aF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cF={and:"AND",or:"OR"},Mp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Np(i,e){return i.useProto3Json||Jd(e)?e:{value:e}}function Nd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IC(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function lF(i,e){return Nd(i,e.toTimestamp())}function Gi(i){return De(!!i),re.fromTimestamp(function(t){let n=_n(t);return new Tt(n.seconds,n.nanos)}(i))}function Gg(i,e){return Op(i,e).canonicalString()}function Op(i,e){let t=function(r){return new Ke(["projects",r.projectId,"databases",r.database])}(i).child("documents");return e===void 0?t:t.child(e)}function EC(i){let e=Ke.fromString(i);return De(RC(e)),e}function Fp(i,e){return Gg(i.databaseId,e.path)}function Xm(i,e){let t=EC(e);if(t.get(1)!==i.databaseId.projectId)throw new B(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new B(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new W(TC(t))}function CC(i,e){return Gg(i.databaseId,e)}function dF(i){let e=EC(i);return e.length===4?Ke.emptyPath():TC(e)}function Lp(i){return new Ke(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function TC(i){return De(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function LE(i,e,t){return{name:Fp(i,e),fields:t.value.mapValue.fields}}function uF(i,e){let t;if("targetChange"in e){e.targetChange;let n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(De(h===void 0||typeof h=="string"),Ft.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ft.fromUint8Array(h||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let h=d.code===void 0?D.UNKNOWN:wC(d.code);return new B(h,d.message||"")}(o);t=new Pd(n,r,s,c||null)}else if("documentChange"in e){e.documentChange;let n=e.documentChange;n.document,n.document.name,n.document.updateTime;let r=Xm(i,n.document.name),s=Gi(n.document.updateTime),o=n.document.createTime?Gi(n.document.createTime):re.min(),c=new di({mapValue:{fields:n.document.fields}}),l=Ri.newFoundDocument(r,s,o,c),d=n.targetIds||[],h=n.removedTargetIds||[];t=new Ms(d,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let n=e.documentDelete;n.document;let r=Xm(i,n.document),s=n.readTime?Gi(n.readTime):re.min(),o=Ri.newNoDocument(r,s),c=n.removedTargetIds||[];t=new Ms([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let n=e.documentRemove;n.document;let r=Xm(i,n.document),s=n.removedTargetIds||[];t=new Ms([],s,r,null)}else{if(!("filter"in e))return Q();{e.filter;let n=e.filter;n.targetId;let{count:r=0,unchangedNames:s}=n,o=new kp(r,s),c=n.targetId;t=new Dd(c,o)}}return t}function hF(i,e){let t;if(e instanceof Mr)t={update:LE(i,e.key,e.value)};else if(e instanceof Ya)t={delete:Fp(i,e.key)};else if(e instanceof Ki)t={update:LE(i,e.key,e.data),updateMask:wF(e.fieldMask)};else{if(!(e instanceof Ap))return Q();t={verify:Fp(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,o){let c=o.transform;if(c instanceof zs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Dr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $s)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Q()}(0,n))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:lF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(i,e.precondition)),t}function fF(i,e){return i&&i.length>0?(De(e!==void 0),i.map(t=>function(r,s){let o=r.updateTime?Gi(r.updateTime):Gi(s);return o.isEqual(re.min())&&(o=Gi(s)),new Tp(o,r.transformResults||[])}(t,e))):[]}function mF(i,e){return{documents:[CC(i,e.path)]}}function pF(i,e){let t={structuredQuery:{}},n=e.path,r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=CC(i,r);let s=function(d){if(d.length!==0)return SC(xi.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:ks(p.field),direction:vF(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Np(i,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:r}}function gF(i){let e=dF(i.parent),t=i.structuredQuery,n=t.from?t.from.length:0,r=null;if(n>0){De(n===1);let h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(m){let p=AC(m);return p instanceof xi&&rC(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(p=>function(T){return new js(Ds(T.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(t.orderBy));let c=null;t.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,Jd(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(m){let p=!!m.before,w=m.values||[];return new Us(w,p)}(t.startAt));let d=null;return t.endAt&&(d=function(m){let p=!m.before,w=m.values||[];return new Us(w,p)}(t.endAt)),z1(e,r,o,s,c,"F",l,d)}function _F(i,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function AC(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let n=Ds(t.unaryFilter.field);return mt.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=Ds(t.unaryFilter.field);return mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ds(t.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ds(t.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(i):i.fieldFilter!==void 0?function(t){return mt.create(Ds(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return xi.create(t.compositeFilter.filters.map(n=>AC(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(i):Q()}function vF(i){return oF[i]}function yF(i){return aF[i]}function bF(i){return cF[i]}function ks(i){return{fieldPath:i.canonicalString()}}function Ds(i){return ui.fromServerFormat(i.fieldPath)}function SC(i){return i instanceof mt?function(t){if(t.op==="=="){if(EE(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NAN"}};if(IE(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(EE(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NAN"}};if(IE(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(t.field),op:yF(t.op),value:t.value}}}(i):i instanceof xi?function(t){let n=t.getFilters().map(r=>SC(r));return n.length===1?n[0]:{compositeFilter:{op:bF(t.op),filters:n}}}(i):Q()}function wF(i){let e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RC(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}var Xa=class i{constructor(e,t,n,r,s=re.min(),o=re.min(),c=Ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vp=class{constructor(e){this.ct=e}};function IF(i){let e=gF({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Cp(e,e.limit,"L"):e}var Od=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Be(e.integerValue));else if("doubleValue"in e){let n=Be(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Ga(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),typeof n=="string"&&(n=_n(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt($n(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?tC(e)?this.dt(t,Number.MAX_SAFE_INTEGER):eC(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let n=e.fields||{};this.dt(t,55);for(let r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Be(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let n=e.values||[];this.dt(t,50);for(let r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(n=>{this.dt(t,60),this.Dt(n,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Od.vt=new Od;var Up=class{constructor(){this.un=new jp}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Rr.min())}updateCollectionGroup(e,t,n){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},jp=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ot(Ke.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ot(Ke.comparator)).toArray()}};var qG=new Uint8Array(0);var $i=class i{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(41943040,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);var Za=class i{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new i(0)}static kn(){return new i(-1)}};var Bp=class{constructor(){this.changes=new qn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n!==void 0?O.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var zp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var $p=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&Ha(n.mutation,r,pi.empty(),Tt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,me()).next(()=>n))}getLocalViewOfDocuments(e,t,n=me()){let r=Cr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(s=>{let o=Ba();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let n=Cr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,me()))}populateOverlays(e,t,n){let r=[];return n.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,n,r){let s=vn(),o=qa(),c=function(){return qa()}();return t.forEach((l,d)=>{let h=n.get(d.key);r.has(d.key)&&(h===void 0||h.mutation instanceof Ki)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Ha(h.mutation,d,h.mutation.getFieldMask(),Tt.now())):o.set(d.key,pi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var m;return c.set(d,new zp(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let n=qa(),r=new et((o,c)=>o-c),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let h=n.get(l)||pi.empty();h=c.applyToLocalView(d,h),n.set(l,h);let m=(r.get(c.batchId)||me()).add(l);r=r.insert(c.batchId,m)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,h=l.value,m=fC();h.forEach(p=>{if(!s.has(p)){let w=yC(t.get(p),n.get(p));w!==null&&m.set(p,w),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return O.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,r){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):O.resolve(Cr()),c=-1,l=s;return o.next(d=>O.forEach(d,(h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,me())).next(h=>({batchId:c,changes:hC(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(n=>{let r=Ba();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let s=t.collectionGroup,o=Ba();return this.indexManager.getCollectionParents(e,s).next(c=>O.forEach(c,l=>{let d=function(m,p){return new kr(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(o=>{s.forEach((l,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ri.newInvalidDocument(h)))});let c=Ba();return o.forEach((l,d)=>{let h=s.get(l);h!==void 0&&Ha(h.mutation,d,pi.empty(),Tt.now()),tu(t,d)&&(c=c.insert(l,d))}),c})}};var qp=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Gi(r.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:IF(r.bundledQuery),readTime:Gi(r.readTime)}}(t)),O.resolve()}};var Hp=class{constructor(){this.overlays=new et(W.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Cr();return O.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Ir.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),O.resolve()}getOverlaysForCollection(e,t,n){let r=Cr(),s=t.length+1,o=new W(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>n&&r.set(l.getKey(),l)}return O.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new et((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let h=s.get(d.largestBatchId);h===null&&(h=Cr(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let c=Cr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=r)););return O.resolve(c)}ht(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new xp(t,n));let s=this.Ir.get(t);s===void 0&&(s=me(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}};var Gp=class{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Ja=class{constructor(){this.Tr=new Ot(ft.Er),this.dr=new Ot(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let n=new ft(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Vr(new ft(e,t))}mr(e,t){e.forEach(n=>this.removeReference(n,t))}gr(e){let t=new W(new Ke([])),n=new ft(t,e),r=new ft(t,e+1),s=[];return this.dr.forEachInRange([n,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new Ke([])),n=new ft(t,e),r=new ft(t,e+1),s=me();return this.dr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new ft(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},ft=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||Ee(e.wr,t.wr)}static Ar(e,t){return Ee(e.wr,t.wr)||W.comparator(e.key,t.key)}};var Wp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ot(ft.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Sp(s,t,n,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new ft(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.vr(n),s=r<0?0:r;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new ft(t,0),r=new ft(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],o=>{let c=this.Dr(o.wr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ot(Ee);return t.forEach(r=>{let s=new ft(r,0),o=new ft(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{n=n.add(c.wr)})}),O.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,s=n;W.isDocumentKey(s)||(s=s.child(""));let o=new ft(new W(s),0),c=new Ot(Ee);return this.br.forEachWhile(l=>{let d=l.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(c=c.add(l.wr)),!0)},o),O.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(n=>{let r=this.Dr(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){De(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return O.forEach(t.mutations,r=>{let s=new ft(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){let n=new ft(t,0),r=this.br.firstAfterOrEqual(n);return O.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Kp=class{constructor(e){this.Mr=e,this.docs=function(){return new et(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return O.resolve(n?n.document.mutableCopy():Ri.newInvalidDocument(t))}getEntries(e,t){let n=vn();return t.forEach(r=>{let s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():Ri.newInvalidDocument(r))}),O.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=vn(),o=t.path,c=new W(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||D1(k1(h),n)<=0||(r.has(h.key)||tu(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Q()}Or(e,t){return O.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new Yp(this)}getSize(e){return O.resolve(this.size)}},Yp=class extends Bp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Qp=class{constructor(e){this.persistence=e,this.Nr=new qn(t=>zg(t),$g),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ja,this.targetCount=0,this.kr=Za.Bn()}forEachTarget(e,t){return this.Nr.forEach((n,r)=>t(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,n){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),O.waitFor(s).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let n=this.Nr.get(t)||null;return O.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),O.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let n=this.Br.yr(t);return O.resolve(n)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var Xp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ZE(0),this.Kr=!1,this.Kr=!0,this.$r=new Gp,this.referenceDelegate=e(this),this.Ur=new Qp(this),this.indexManager=new Up,this.remoteDocumentCache=function(r){return new Kp(r)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Vp(t),this.Gr=new qp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Wp(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){q("MemoryPersistence","Starting transaction:",e);let r=new Zp(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}},Zp=class extends lp{constructor(e){super(),this.currentSequenceNumber=e}},Jp=class i{constructor(e){this.persistence=e,this.Jr=new Ja,this.Yr=null}static Zr(e){return new i(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),O.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,n=>{let r=W.fromPath(n);return this.ei(e,r).next(s=>{s||t.removeEntry(r,re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var eg=class i{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=me(),r=me();for(let s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new i(e,t.fromCache,n,r)}};var tg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ig=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Qw()?8:M1(Pt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new tg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(ja()<=Mt.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",xs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(ja()<=Mt.DEBUG&&q("QueryEngine","Query:",xs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ja()<=Mt.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",xs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):O.resolve())}Yi(e,t){if(SE(t))return O.resolve(null);let n=Hi(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Cp(t,null,"F"),n=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{let o=me(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,n).next(l=>{let d=this.ts(t,c);return this.ns(t,d,o,l.readTime)?this.Yi(e,Cp(t,null,"F")):this.rs(e,d,t,l)}))})))}Zi(e,t,n,r){return SE(t)||r.isEqual(re.min())?O.resolve(null):this.Ji.getDocuments(e,n).next(s=>{let o=this.ts(t,s);return this.ns(t,o,n,r)?O.resolve(null):(ja()<=Mt.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xs(t)),this.rs(e,o,t,x1(r,-1)).next(c=>c))})}ts(e,t){let n=new Ot(dC(e));return t.forEach((r,s)=>{tu(e,s)&&(n=n.add(s))}),n}ns(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return ja()<=Mt.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",xs(t)),this.Ji.getDocumentsMatchingQuery(e,t,Rr.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ng=class{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new et(Ee),this._s=new qn(s=>zg(s),$g),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $p(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function EF(i,e,t,n){return new ng(i,e,t,n)}function xC(i,e){return v(this,null,function*(){let t=ne(i);return yield t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{let o=[],c=[],l=me();for(let d of r){o.push(d.batchId);for(let h of d.mutations)l=l.add(h.key)}for(let d of s){c.push(d.batchId);for(let h of d.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(n,l).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function CF(i,e){let t=ne(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,h){let m=d.batch,p=m.keys(),w=O.resolve();return p.forEach(T=>{w=w.next(()=>h.getEntry(l,T)).next(k=>{let x=d.docVersions.get(T);De(x!==null),k.version.compareTo(x)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(l,m))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let l=me();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function kC(i){let e=ne(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function TF(i,e){let t=ne(i),n=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((h,m)=>{let p=r.get(m);if(!p)return;c.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,m)));let w=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(Ft.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,n)),r=r.insert(m,w),function(k,x,j){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(p,w,h)&&c.push(t.Ur.updateTargetData(s,w))});let l=vn(),d=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(AF(s,o,e.documentUpdates).next(h=>{l=h.Ps,d=h.Is})),!n.isEqual(re.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));c.push(h)}return O.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.os=r,s))}function AF(i,e,t){let n=me(),r=me();return t.forEach(s=>n=n.add(s)),e.getEntries(i,n).next(s=>{let o=vn();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):q("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function SF(i,e){let t=ne(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function RF(i,e){let t=ne(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.Ur.getTargetData(n,e).next(s=>s?(r=s,O.resolve(r)):t.Ur.allocateTargetId(n).next(o=>(r=new Xa(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=t.os.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n})}function rg(i,e,t){return v(this,null,function*(){let n=ne(i),r=n.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!oc(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(r.target)})}function VE(i,e,t){let n=ne(i),r=re.min(),s=me();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){let m=ne(l),p=m._s.get(h);return p!==void 0?O.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(n,o,Hi(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,t?r:re.min(),t?s:me())).next(c=>(xF(n,q1(e),c),{documents:c,Ts:s})))}function xF(i,e,t){let n=i.us.get(e)||re.min();t.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.us.set(e,n)}var Fd=class{constructor(){this.activeTargetIds=Q1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var sg=class{constructor(){this.so=new Fd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var og=class{_o(e){}shutdown(){}};var Ld=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bd=null;function Zm(){return bd===null?bd=function(){return 268435456+Math.round(2147483648*Math.random())}():bd++,"0x"+bd.toString(16)}var kF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ag=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Nt="WebChannelConnection",cg=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,n,r,s,o){let c=Zm(),l=this.xo(t,n.toUriEncodedString());q("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,l,d,r).then(h=>(q("RestConnection",`Received RPC '${t}' ${c}: `,h),h),h=>{throw Os("RestConnection",`RPC '${t}' ${c} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(t,n,r,s,o,c){return this.Mo(t,n,r,s,o)}Oo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ys}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,n){let r=kF[t];return`${this.Do}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){let s=Zm();return new Promise((o,c)=>{let l=new Hm;l.setWithCredentials(!0),l.listenOnce(Wm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ua.NO_ERROR:let h=l.getResponseJson();q(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ua.TIMEOUT:q(Nt,`RPC '${e}' ${s} timed out`),c(new B(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ua.HTTP_ERROR:let m=l.getStatus();if(q(Nt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let w=p?.error;if(w&&w.status&&w.message){let T=function(x){let j=x.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(j)>=0?j:D.UNKNOWN}(w.status);c(new B(T,w.message))}else c(new B(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(D.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{q(Nt,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(r);q(Nt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",d,n,15)})}Bo(e,t,n){let r=Zm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qm(),c=Ym(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new Gm({})),this.Oo(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;let h=s.join("");q(Nt,`Creating RPC '${e}' stream ${r}: ${h}`,l);let m=o.createWebChannel(h,l),p=!1,w=!1,T=new ag({Io:x=>{w?q(Nt,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(p||(q(Nt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),p=!0),q(Nt,`RPC '${e}' stream ${r} sending:`,x),m.send(x))},To:()=>m.close()}),k=(x,j,K)=>{x.listen(j,G=>{try{K(G)}catch(oe){setTimeout(()=>{throw oe},0)}})};return k(m,Rs.EventType.OPEN,()=>{w||(q(Nt,`RPC '${e}' stream ${r} transport opened.`),T.yo())}),k(m,Rs.EventType.CLOSE,()=>{w||(w=!0,q(Nt,`RPC '${e}' stream ${r} transport closed`),T.So())}),k(m,Rs.EventType.ERROR,x=>{w||(w=!0,Os(Nt,`RPC '${e}' stream ${r} transport errored:`,x),T.So(new B(D.UNAVAILABLE,"The operation could not be completed")))}),k(m,Rs.EventType.MESSAGE,x=>{var j;if(!w){let K=x.data[0];De(!!K);let G=K,oe=G.error||((j=G[0])===null||j===void 0?void 0:j.error);if(oe){q(Nt,`RPC '${e}' stream ${r} received error:`,oe);let at=oe.status,be=function(b){let I=ht[b];if(I!==void 0)return wC(I)}(at),E=oe.message;be===void 0&&(be=D.INTERNAL,E="Unknown error status: "+at+" with message "+oe.message),w=!0,T.So(new B(be,E)),m.close()}else q(Nt,`RPC '${e}' stream ${r} received:`,K),T.bo(K)}}),k(c,Km.STAT_EVENT,x=>{x.stat===vd.PROXY?q(Nt,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===vd.NOPROXY&&q(Nt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function Jm(){return typeof document<"u"?document:null}function iu(i){return new Mp(i,!0)}var Vd=class{constructor(e,t,n=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ud=class{constructor(e,t,n,r,s,o,c,l){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vd(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(gn(t.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Yo===t&&this.P_(n,r)},n=>{e(()=>{let r=new B(D.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(r)})})}P_(e,t){let n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{n(()=>this.I_(r))}),this.stream.onMessage(r=>{n(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lg=class extends Ud{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=uF(this.serializer,e),n=function(s){if(!("targetChange"in s))return re.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Gi(o.readTime):re.min()}(e);return this.listener.d_(t,n)}A_(e){let t={};t.database=Lp(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=Ip(l)?{documents:mF(s,l)}:{query:pF(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=IC(s,o.resumeToken);let d=Np(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){c.readTime=Nd(s,o.snapshotVersion.toTimestamp());let d=Np(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let n=_F(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){let t={};t.database=Lp(this.serializer),t.removeTarget=e,this.a_(t)}},dg=class extends Ud{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=fF(e.writeResults,e.commitTime),n=Gi(e.commitTime);return this.listener.g_(n,t)}p_(){let e={};e.database=Lp(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(n=>hF(this.serializer,n))};this.a_(t)}};var ug=class extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new B(D.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Op(t,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(D.UNKNOWN,s.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Op(t,n),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(D.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},hg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(t),this.D_=!1):q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var fg=class{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(()=>v(this,null,function*(){Or(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(l){return v(this,null,function*(){let d=ne(l);d.L_.add(4),yield ac(d),d.q_.set("Unknown"),d.L_.delete(4),yield nu(d)})}(this))}))}),this.q_=new hg(n,r)}};function nu(i){return v(this,null,function*(){if(Or(i))for(let e of i.B_)yield e(!0)})}function ac(i){return v(this,null,function*(){for(let e of i.B_)yield e(!1)})}function DC(i,e){let t=ne(i);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Qg(t)?Yg(t):Qs(t).r_()&&Kg(t,e))}function Wg(i,e){let t=ne(i),n=Qs(t);t.N_.delete(e),n.r_()&&PC(t,e),t.N_.size===0&&(n.r_()?n.o_():Or(t)&&t.q_.set("Unknown"))}function Kg(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qs(i).A_(e)}function PC(i,e){i.Q_.xe(e),Qs(i).R_(e)}function Yg(i){i.Q_=new Pp({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),Qs(i).start(),i.q_.v_()}function Qg(i){return Or(i)&&!Qs(i).n_()&&i.N_.size>0}function Or(i){return ne(i).L_.size===0}function MC(i){i.Q_=void 0}function DF(i){return v(this,null,function*(){i.q_.set("Online")})}function PF(i){return v(this,null,function*(){i.N_.forEach((e,t)=>{Kg(i,e)})})}function MF(i,e){return v(this,null,function*(){MC(i),Qg(i)?(i.q_.M_(e),Yg(i)):i.q_.set("Unknown")})}function NF(i,e,t){return v(this,null,function*(){if(i.q_.set("Online"),e instanceof Pd&&e.state===2&&e.cause)try{yield function(r,s){return v(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(i,e)}catch(n){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield jd(i,n)}else if(e instanceof Ms?i.Q_.Ke(e):e instanceof Dd?i.Q_.He(e):i.Q_.We(e),!t.isEqual(re.min()))try{let n=yield kC(i.localStore);t.compareTo(n)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let h=s.N_.get(d);h&&s.N_.set(d,h.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Ft.EMPTY_BYTE_STRING,h.snapshotVersion)),PC(s,l);let m=new Xa(h.target,l,d,h.sequenceNumber);Kg(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(i,t))}catch(n){q("RemoteStore","Failed to raise snapshot:",n),yield jd(i,n)}})}function jd(i,e,t){return v(this,null,function*(){if(!oc(e))throw e;i.L_.add(1),yield ac(i),i.q_.set("Offline"),t||(t=()=>kC(i.localStore)),i.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield t(),i.L_.delete(1),yield nu(i)}))})}function NC(i,e){return e().catch(t=>jd(i,t,e))}function ru(i){return v(this,null,function*(){let e=ne(i),t=Hn(e),n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;OF(e);)try{let r=yield SF(e.localStore,n);if(r===null){e.O_.length===0&&t.o_();break}n=r.batchId,FF(e,r)}catch(r){yield jd(e,r)}OC(e)&&FC(e)})}function OF(i){return Or(i)&&i.O_.length<10}function FF(i,e){i.O_.push(e);let t=Hn(i);t.r_()&&t.V_&&t.m_(e.mutations)}function OC(i){return Or(i)&&!Hn(i).n_()&&i.O_.length>0}function FC(i){Hn(i).start()}function LF(i){return v(this,null,function*(){Hn(i).p_()})}function VF(i){return v(this,null,function*(){let e=Hn(i);for(let t of i.O_)e.m_(t.mutations)})}function UF(i,e,t){return v(this,null,function*(){let n=i.O_.shift(),r=Rp.from(n,e,t);yield NC(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),yield ru(i)})}function jF(i,e){return v(this,null,function*(){e&&Hn(i).V_&&(yield function(n,r){return v(this,null,function*(){if(function(o){return nF(o)&&o!==D.ABORTED}(r.code)){let s=n.O_.shift();Hn(n).s_(),yield NC(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield ru(n)}})}(i,e)),OC(i)&&FC(i)})}function UE(i,e){return v(this,null,function*(){let t=ne(i);t.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let n=Or(t);t.L_.add(3),yield ac(t),n&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield nu(t)})}function BF(i,e){return v(this,null,function*(){let t=ne(i);e?(t.L_.delete(2),yield nu(t)):e||(t.L_.add(2),yield ac(t),t.q_.set("Unknown"))})}function Qs(i){return i.K_||(i.K_=function(t,n,r){let s=ne(t);return s.w_(),new lg(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:DF.bind(null,i),Ro:PF.bind(null,i),mo:MF.bind(null,i),d_:NF.bind(null,i)}),i.B_.push(e=>v(this,null,function*(){e?(i.K_.s_(),Qg(i)?Yg(i):i.q_.set("Unknown")):(yield i.K_.stop(),MC(i))}))),i.K_}function Hn(i){return i.U_||(i.U_=function(t,n,r){let s=ne(t);return s.w_(),new dg(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:LF.bind(null,i),mo:jF.bind(null,i),f_:VF.bind(null,i),g_:UF.bind(null,i)}),i.B_.push(e=>v(this,null,function*(){e?(i.U_.s_(),yield ru(i)):(yield i.U_.stop(),i.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}var mg=class i{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){let o=Date.now()+n,c=new i(e,t,o,r,s);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Xg(i,e){if(gn("AsyncQueue",`${e}: ${i}`),oc(i))return new B(D.UNAVAILABLE,`${e}: ${i}`);throw i}var Bd=class i{constructor(e){this.comparator=e?(t,n)=>e(t,n)||W.comparator(t.key,n.key):(t,n)=>W.comparator(t.key,n.key),this.keyedMap=Ba(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new i(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let n=new i;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}};var zd=class{constructor(){this.W_=new et(W.comparator)}track(e){let t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}},Hs=class i{constructor(e,t,n,r,s,o,c,l,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new i(e,t,Bd.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}};var pg=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},gg=class{constructor(){this.queries=jE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){let r=ne(t),s=r.queries;r.queries=jE(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(n)})})(this,new B(D.ABORTED,"Firestore shutting down"))}};function jE(){return new qn(i=>lC(i),eu)}function zF(i,e){return v(this,null,function*(){let t=ne(i),n=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(n=2):(s=new pg,n=e.J_()?0:1);try{switch(n){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=Xg(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Zg(t)})}function $F(i,e){return v(this,null,function*(){let t=ne(i),n=e.query,r=3,s=t.queries.get(n);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}})}function qF(i,e){let t=ne(i),n=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(n=!0);o.z_=r}}n&&Zg(t)}function HF(i,e,t){let n=ne(i),r=n.queries.get(e);if(r)for(let s of r.j_)s.onError(t);n.queries.delete(e)}function Zg(i){i.Y_.forEach(e=>{e.next()})}var _g,BE;(BE=_g||(_g={})).ea="default",BE.Cache="cache";var vg=class{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){let n=[];for(let r of e.docChanges)r.type!==3&&n.push(r);e=new Hs(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Hs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_g.Cache}};var $d=class{constructor(e){this.key=e}},qd=class{constructor(e){this.key=e}},yg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=dC(e),this.Ra=new Bd(this.Aa)}get Va(){return this.Ta}ma(e,t){let n=t?t.fa:new zd,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,m)=>{let p=r.get(h),w=tu(this.query,m)?m:null,T=!!p&&this.mutatedKeys.has(p.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),x=!1;p&&w?p.data.isEqual(w.data)?T!==k&&(n.track({type:3,doc:w}),x=!0):this.ga(p,w)||(n.track({type:2,doc:w}),x=!0,(l&&this.Aa(w,l)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!p&&w?(n.track({type:0,doc:w}),x=!0):p&&!w&&(n.track({type:1,doc:p}),x=!0,(l||d)&&(c=!0)),x&&(w?(o=o.add(w),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,m)=>function(w,T){let k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return k(w)-k(T)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(n),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,d=l!==this.Ea;return this.Ea=l,o.length!==0||d?{snapshot:new Hs(this.query,e.Ra,s,o,e.mutatedKeys,l===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=me(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});let t=[];return e.forEach(n=>{this.da.has(n)||t.push(new qd(n))}),this.da.forEach(n=>{e.has(n)||t.push(new $d(n))}),t}ba(e){this.Ta=e.Ts,this.da=me();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Hs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},bg=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},wg=class{constructor(e){this.key=e,this.va=!1}},Ig=class{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new qn(c=>lC(c),eu),this.Ma=new Map,this.xa=new Set,this.Oa=new et(W.comparator),this.Na=new Map,this.La=new Ja,this.Ba={},this.ka=new Map,this.qa=Za.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function GF(i,e,t=!0){return v(this,null,function*(){let n=zC(i),r,s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield LC(n,e,t,!0),r})}function WF(i,e){return v(this,null,function*(){let t=zC(i);yield LC(t,e,!0,!1)})}function LC(i,e,t,n){return v(this,null,function*(){let r=yield RF(i.localStore,Hi(e)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,t),c;return n&&(c=yield KF(i,e,s,o==="current",r.resumeToken)),i.isPrimaryClient&&t&&DC(i.remoteStore,r),c})}function KF(i,e,t,n,r){return v(this,null,function*(){i.Ka=(m,p,w)=>function(k,x,j,K){return v(this,null,function*(){let G=x.view.ma(j);G.ns&&(G=yield VE(k.localStore,x.query,!1).then(({documents:E})=>x.view.ma(E,G)));let oe=K&&K.targetChanges.get(x.targetId),at=K&&K.targetMismatches.get(x.targetId)!=null,be=x.view.applyChanges(G,k.isPrimaryClient,oe,at);return $E(k,x.targetId,be.wa),be.snapshot})}(i,m,p,w);let s=yield VE(i.localStore,e,!0),o=new yg(e,s.Ts),c=o.ma(s.documents),l=Qa.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),d=o.applyChanges(c,i.isPrimaryClient,l);$E(i,t,d.wa);let h=new bg(e,t,o);return i.Fa.set(e,h),i.Ma.has(t)?i.Ma.get(t).push(e):i.Ma.set(t,[e]),d.snapshot})}function YF(i,e,t){return v(this,null,function*(){let n=ne(i),r=n.Fa.get(e),s=n.Ma.get(r.targetId);if(s.length>1)return n.Ma.set(r.targetId,s.filter(o=>!eu(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield rg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),t&&Wg(n.remoteStore,r.targetId),Eg(n,r.targetId)}).catch(sc))):(Eg(n,r.targetId),yield rg(n.localStore,r.targetId,!0))})}function QF(i,e){return v(this,null,function*(){let t=ne(i),n=t.Fa.get(e),r=t.Ma.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Wg(t.remoteStore,n.targetId))})}function XF(i,e,t){return v(this,null,function*(){let n=rL(i);try{let r=yield function(o,c){let l=ne(o),d=Tt.now(),h=c.reduce((w,T)=>w.add(T.key),me()),m,p;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let T=vn(),k=me();return l.cs.getEntries(w,h).next(x=>{T=x,T.forEach((j,K)=>{K.isValidDocument()||(k=k.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,T)).next(x=>{m=x;let j=[];for(let K of c){let G=iF(K,m.get(K.key).overlayedDocument);G!=null&&j.push(new Ki(K.key,G,iC(G.value.mapValue),pn.exists(!0)))}return l.mutationQueue.addMutationBatch(w,d,j,c)}).next(x=>{p=x;let j=x.applyToLocalDocumentSet(m,k);return l.documentOverlayCache.saveOverlays(w,x.batchId,j)})}).then(()=>({batchId:p.batchId,changes:hC(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let d=o.Ba[o.currentUser.toKey()];d||(d=new et(Ee)),d=d.insert(c,l),o.Ba[o.currentUser.toKey()]=d}(n,r.batchId,t),yield cc(n,r.changes),yield ru(n.remoteStore)}catch(r){let s=Xg(r,"Failed to persist write");t.reject(s)}})}function VC(i,e){return v(this,null,function*(){let t=ne(i);try{let n=yield TF(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(De(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?De(o.va):r.removedDocuments.size>0&&(De(o.va),o.va=!1))}),yield cc(t,n,e)}catch(n){yield sc(n)}})}function zE(i,e,t){let n=ne(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){let r=[];n.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=ne(o);l.onlineState=c;let d=!1;l.queries.forEach((h,m)=>{for(let p of m.j_)p.Z_(c)&&(d=!0)}),d&&Zg(l)}(n.eventManager,e),r.length&&n.Ca.d_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}function ZF(i,e,t){return v(this,null,function*(){let n=ne(i);n.sharedClientState.updateQueryState(e,"rejected",t);let r=n.Na.get(e),s=r&&r.key;if(s){let o=new et(W.comparator);o=o.insert(s,Ri.newNoDocument(s,re.min()));let c=me().add(s),l=new kd(re.min(),new Map,new et(Ee),o,c);yield VC(n,l),n.Oa=n.Oa.remove(s),n.Na.delete(e),Jg(n)}else yield rg(n.localStore,e,!1).then(()=>Eg(n,e,t)).catch(sc)})}function JF(i,e){return v(this,null,function*(){let t=ne(i),n=e.batch.batchId;try{let r=yield CF(t.localStore,e);jC(t,n,null),UC(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),yield cc(t,r)}catch(r){yield sc(r)}})}function eL(i,e,t){return v(this,null,function*(){let n=ne(i);try{let r=yield function(o,c){let l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,c).next(m=>(De(m!==null),h=m.keys(),l.mutationQueue.removeMutationBatch(d,m))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(n.localStore,e);jC(n,e,t),UC(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),yield cc(n,r)}catch(r){yield sc(r)}})}function UC(i,e){(i.ka.get(e)||[]).forEach(t=>{t.resolve()}),i.ka.delete(e)}function jC(i,e,t){let n=ne(i),r=n.Ba[n.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.Ba[n.currentUser.toKey()]=r}}function Eg(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(let n of i.Ma.get(e))i.Fa.delete(n),t&&i.Ca.$a(n,t);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach(n=>{i.La.containsKey(n)||BC(i,n)})}function BC(i,e){i.xa.delete(e.path.canonicalString());let t=i.Oa.get(e);t!==null&&(Wg(i.remoteStore,t),i.Oa=i.Oa.remove(e),i.Na.delete(t),Jg(i))}function $E(i,e,t){for(let n of t)n instanceof $d?(i.La.addReference(n.key,e),tL(i,n)):n instanceof qd?(q("SyncEngine","Document no longer in limbo: "+n.key),i.La.removeReference(n.key,e),i.La.containsKey(n.key)||BC(i,n.key)):Q()}function tL(i,e){let t=e.key,n=t.path.canonicalString();i.Oa.get(t)||i.xa.has(n)||(q("SyncEngine","New document in limbo: "+t),i.xa.add(n),Jg(i))}function Jg(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){let e=i.xa.values().next().value;i.xa.delete(e);let t=new W(Ke.fromString(e)),n=i.qa.next();i.Na.set(n,new wg(t)),i.Oa=i.Oa.insert(t,n),DC(i.remoteStore,new Xa(Hi(qg(t.path)),n,"TargetPurposeLimboResolution",ZE.oe))}}function cc(i,e,t){return v(this,null,function*(){let n=ne(i),r=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((c,l)=>{o.push(n.Ka(l,e,t).then(d=>{var h;if((d||t)&&n.isPrimaryClient){let m=d?!d.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(d){r.push(d);let m=eg.Wi(l.targetId,d);s.push(m)}}))}),yield Promise.all(o),n.Ca.d_(r),yield function(l,d){return v(this,null,function*(){let h=ne(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(d,p=>O.forEach(p.$i,w=>h.persistence.referenceDelegate.addReference(m,p.targetId,w)).next(()=>O.forEach(p.Ui,w=>h.persistence.referenceDelegate.removeReference(m,p.targetId,w)))))}catch(m){if(!oc(m))throw m;q("LocalStore","Failed to update sequence numbers: "+m)}for(let m of d){let p=m.targetId;if(!m.fromCache){let w=h.os.get(p),T=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(p,k)}}})}(n.localStore,s))})}function iL(i,e){return v(this,null,function*(){let t=ne(i);if(!t.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let n=yield xC(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new B(D.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),yield cc(t,n.hs)}})}function nL(i,e){let t=ne(i),n=t.Na.get(e);if(n&&n.va)return me().add(n.key);{let r=me(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function zC(i){let e=ne(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=VC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZF.bind(null,e),e.Ca.d_=qF.bind(null,e.eventManager),e.Ca.$a=HF.bind(null,e.eventManager),e}function rL(i){let e=ne(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eL.bind(null,e),e}var Hd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=iu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return EF(this.persistence,new ig,e.initialUser,this.serializer)}createPersistence(e){return new Xp(Jp.Zr,this.serializer)}createSharedClientState(e){return new sg}terminate(){return v(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Cg=class{initialize(e,t){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>zE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=iL.bind(null,this.syncEngine),yield BF(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new gg}()}createDatastore(e){let t=iu(e.databaseInfo.databaseId),n=function(s){return new cg(s)}(e.databaseInfo);return function(s,o,c,l){return new ug(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,r,s,o,c){return new fg(n,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>zE(this.syncEngine,t,0),function(){return Ld.D()?new Ld:new og}())}createSyncEngine(e,t){return function(r,s,o,c,l,d,h){let m=new Ig(r,s,o,c,l,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return v(this,null,function*(){var e,t;yield function(r){return v(this,null,function*(){let s=ne(r);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ac(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Tg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Ag=class{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=Cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,s=>v(this,null,function*(){q("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Xg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}};function ep(i,e){return v(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let t=i.configuration;yield e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(r=>v(this,null,function*(){n.isEqual(r)||(yield xC(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e})}function qE(i,e){return v(this,null,function*(){i.asyncQueue.verifyOperationInProgress();let t=yield oL(i);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>UE(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>UE(e.remoteStore,r)),i._onlineComponents=e})}function sL(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}function oL(i){return v(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ep(i,i._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!sL(t))throw t;Os("Error using user provided cache. Falling back to memory cache: "+t),yield ep(i,new Hd)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield ep(i,new Hd);return i._offlineComponents})}function $C(i){return v(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield qE(i,i._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield qE(i,new Cg))),i._onlineComponents})}function aL(i){return $C(i).then(e=>e.syncEngine)}function HE(i){return v(this,null,function*(){let e=yield $C(i),t=e.eventManager;return t.onListen=GF.bind(null,e.syncEngine),t.onUnlisten=YF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QF.bind(null,e.syncEngine),t})}function qC(i){let e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}var GE=new Map;function HC(i,e,t){if(!t)throw new B(D.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cL(i,e,t,n){if(e===!0&&n===!0)throw new B(D.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function WE(i){if(!W.isDocumentKey(i))throw new B(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function KE(i){if(W.isDocumentKey(i))throw new B(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function su(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Q()}function Bn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new B(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=su(i);throw new B(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}var Gd=class{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new B(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gs=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gd(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new tp;switch(n.type){case"firstParty":return new sp(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new B(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let n=GE.get(t);n&&(q("ComponentProvider","Removing Datastore"),GE.delete(t),n.terminate())}(this),Promise.resolve()}};function GC(i,e,t,n={}){var r;let s=(i=Bn(i,Gs))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let c,l;if(typeof n.mockUserToken=="string")c=n.mockUserToken,l=yt.MOCK_USER;else{c=hs(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new B(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(d)}i._authCredentials=new ip(new Ed(c,l))}}var Ws=class i{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new i(this.firestore,e,this._query)}},ti=class i{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new i(this.firestore,e,this._key)}},zn=class i extends Ws{constructor(e,t,n){super(e,t,qg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ti(this.firestore,null,new W(e))}withConverter(e){return new i(this.firestore,e,this._path)}};function WC(i,e,...t){if(i=de(i),HC("collection","path",e),i instanceof Gs){let n=Ke.fromString(e,...t);return KE(n),new zn(i,null,n)}{if(!(i instanceof ti||i instanceof zn))throw new B(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(Ke.fromString(e,...t));return KE(n),new zn(i.firestore,null,n)}}function e_(i,e,...t){if(i=de(i),arguments.length===1&&(e=Cd.newId()),HC("doc","path",e),i instanceof Gs){let n=Ke.fromString(e,...t);return WE(n),new ti(i,null,new W(n))}{if(!(i instanceof ti||i instanceof zn))throw new B(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(Ke.fromString(e,...t));return WE(n),new ti(i.firestore,i instanceof zn?i.converter:null,new W(n))}}var Sg=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Vd(this,"async_queue_retry"),this.Eu=()=>{let t=Jm();t&&q("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Jm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Jm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new mn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return v(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!oc(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(n=>{this.hu=n,this.Pu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(n);throw gn("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.Pu=!1,n))));return this.au=t,t}enqueueAfterDelay(e,t,n){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let r=mg.createAndSchedule(this,e,t,n,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&Q()}verifyOperationInProgress(){}mu(){return v(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function YE(i){return function(t,n){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}var Gn=class extends Gs{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=function(){return new Sg}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||QC(this),this._firestoreClient.terminate()}};function KC(i,e){let t=typeof i=="object"?i:dt(),n=typeof i=="string"?i:e||"(default)",r=lt(t,"firestore").getImmediate({identifier:n});if(!r._initialized){let s=On("firestore");s&&GC(r,...s)}return r}function YC(i){return i._firestoreClient||QC(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function QC(i){var e,t,n;let r=i._freezeSettings(),s=function(c,l,d,h){return new dp(c,l,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qC(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new Ag(i._authCredentials,i._appCheckCredentials,i._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var ec=class i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new i(Ft.fromBase64String(e))}catch(t){throw new B(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new i(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ks=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var tc=class{constructor(e){this._methodName=e}};var ic=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}};var nc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}};var lL=/^__.*__$/,Rg=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mr(e,this.data,t,this.fieldTransforms)}},Wd=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function XC(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var xg=class i{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new i(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:n,Du:!1});return r.vu(e),r}Cu(e){var t;let n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:n,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Yd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(XC(this.wu)&&lL.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},kg=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||iu(e)}Nu(e,t,n,r=!1){return new xg({wu:e,methodName:t,Ou:n,path:ui.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function t_(i){let e=i._freezeSettings(),t=iu(i._databaseId);return new kg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function dL(i,e,t,n,r,s={}){let o=i.Nu(s.merge||s.mergeFields?2:0,e,t,r);i_("Data must be an object, but it was:",o,n);let c=ZC(n,o),l,d;if(s.merge)l=new pi(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let m of s.mergeFields){let p=Dg(e,m,t);if(!o.contains(p))throw new B(D.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);eT(h,p)||h.push(p)}l=new pi(h),d=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,d=o.fieldTransforms;return new Rg(new di(c),l,d)}var Kd=class i extends tc{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof i}};function uL(i,e,t,n){let r=i.Nu(1,e,t);i_("Data must be an object, but it was:",r,n);let s=[],o=di.empty();Nr(n,(l,d)=>{let h=n_(e,l,t);d=de(d);let m=r.Cu(h);if(d instanceof Kd)s.push(h);else{let p=lc(d,m);p!=null&&(s.push(h),o.set(h,p))}});let c=new pi(s);return new Wd(o,c,r.fieldTransforms)}function hL(i,e,t,n,r,s){let o=i.Nu(1,e,t),c=[Dg(e,n,t)],l=[r];if(s.length%2!=0)throw new B(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)c.push(Dg(e,s[p])),l.push(s[p+1]);let d=[],h=di.empty();for(let p=c.length-1;p>=0;--p)if(!eT(d,c[p])){let w=c[p],T=l[p];T=de(T);let k=o.Cu(w);if(T instanceof Kd)d.push(w);else{let x=lc(T,k);x!=null&&(d.push(w),h.set(w,x))}}let m=new pi(d);return new Wd(h,m,o.fieldTransforms)}function fL(i,e,t,n=!1){return lc(t,i.Nu(n?4:3,e))}function lc(i,e){if(JC(i=de(i)))return i_("Unsupported field value:",e,i),ZC(i,e);if(i instanceof tc)return function(n,r){if(!XC(r.wu))throw r.Mu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${n._methodName}() is not currently supported inside arrays`);let s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(n,r){let s=[],o=0;for(let c of n){let l=lc(c,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(i,e)}return function(n,r){if((n=de(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return X1(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let s=Tt.fromDate(n);return{timestampValue:Nd(r.serializer,s)}}if(n instanceof Tt){let s=new Tt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Nd(r.serializer,s)}}if(n instanceof ic)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ec)return{bytesValue:IC(r.serializer,n._byteString)};if(n instanceof ti){let s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gg(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof nc)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Mu("VectorValues must only contain numeric values.");return Hg(c.serializer,l)})}}}}}}(n,r);throw r.Mu(`Unsupported field value: ${su(n)}`)}(i,e)}function ZC(i,e){let t={};return JE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nr(i,(n,r)=>{let s=lc(r,e.bu(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function JC(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Tt||i instanceof ic||i instanceof ec||i instanceof ti||i instanceof tc||i instanceof nc)}function i_(i,e,t){if(!JC(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let n=su(t);throw n==="an object"?e.Mu(i+" a custom object"):e.Mu(i+" "+n)}}function Dg(i,e,t){if((e=de(e))instanceof Ks)return e._internalPath;if(typeof e=="string")return n_(i,e);throw Yd("Field path arguments must be of type string or ",i,!1,void 0,t)}var mL=new RegExp("[~\\*/\\[\\]]");function n_(i,e,t){if(e.search(mL)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ks(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Yd(i,e,t,n,r){let s=n&&!n.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new B(D.INVALID_ARGUMENT,c+i+l)}function eT(i,e){return i.some(t=>t.isEqual(e))}var Qd=class{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Pg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(tT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Pg=class extends Qd{data(){return super.data()}};function tT(i,e){return typeof e=="string"?n_(i,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}function pL(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new B(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rc=class{},Mg=class extends rc{};function iT(i,e,...t){let n=[];e instanceof rc&&n.push(e),n=n.concat(t),function(s){let o=s.filter(l=>l instanceof Og).length,c=s.filter(l=>l instanceof Ng).length;if(o>1||o>0&&c>0)throw new B(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let r of n)i=r._apply(i);return i}var Ng=class i extends Mg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new i(e,t,n)}_apply(e){let t=this._parse(e);return nT(e._query,t),new Ws(e.firestore,e.converter,Ep(e._query,t))}_parse(e){let t=t_(e.firestore);return function(s,o,c,l,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){XE(m,h);let w=[];for(let T of m)w.push(QE(l,s,T));p={arrayValue:{values:w}}}else p=QE(l,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||XE(m,h),p=fL(c,o,m,h==="in"||h==="not-in");return mt.create(d,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Og=class i extends rc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new i(e,t)}_parse(e){let t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:xi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)nT(o,l),o=Ep(o,l)}(e._query,t),new Ws(e.firestore,e.converter,Ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function QE(i,e,t){if(typeof(t=de(t))=="string"){if(t==="")throw new B(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cC(e)&&t.indexOf("/")!==-1)throw new B(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let n=e.path.child(Ke.fromString(t));if(!W.isDocumentKey(n))throw new B(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return wE(i,new W(n))}if(t instanceof ti)return wE(i,t._key);throw new B(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${su(t)}.`)}function XE(i,e){if(!Array.isArray(i)||i.length===0)throw new B(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nT(i,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Fg=class{convertValue(e,t="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let n={};return Nr(e,(r,s)=>{n[r]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,r;let s=(r=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(o=>Be(o.doubleValue));return new nc(s)}convertGeoPoint(e){return new ic(Be(e.latitude),Be(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":let n=jg(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){let t=_n(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Ke.fromString(e);De(RC(n));let r=new Rd(n.get(1),n.get(3)),s=new W(n.popFirst(5));return r.isEqual(t)||gn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function gL(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}var Ar=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xd=class extends Qd{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(tT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}},Ns=class extends Xd{data(e={}){return super.data(e)}},Lg=class{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ar(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ns(this._firestore,this._userDataWriter,n.key,n,new Ar(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Ns(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ar(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Ns(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ar(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:_L(c.type),doc:l,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _L(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}var Zd=class extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ti(this.firestore,null,t)}};function rT(i,e,t,...n){i=Bn(i,ti);let r=Bn(i.firestore,Gn),s=t_(r),o;return o=typeof(e=de(e))=="string"||e instanceof Ks?hL(s,"updateDoc",i._key,e,t,n):uL(s,"updateDoc",i._key,e),r_(r,[o.toMutation(i._key,pn.exists(!0))])}function sT(i){return r_(Bn(i.firestore,Gn),[new Ya(i._key,pn.none())])}function oT(i,e){let t=Bn(i.firestore,Gn),n=e_(i),r=gL(i.converter,e);return r_(t,[dL(t_(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,pn.exists(!1))]).then(()=>n)}function aT(i,...e){var t,n,r;i=de(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||YE(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(YE(e[o])){let m=e[o];e[o]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let l,d,h;if(i instanceof ti)d=Bn(i.firestore,Gn),h=qg(i._key.path),l={next:m=>{e[o]&&e[o](vL(d,i,m))},error:e[o+1],complete:e[o+2]};else{let m=Bn(i,Ws);d=Bn(m.firestore,Gn),h=m._query;let p=new Zd(d);l={next:w=>{e[o]&&e[o](new Lg(d,p,m,w))},error:e[o+1],complete:e[o+2]},pL(i._query)}return function(p,w,T,k){let x=new Tg(k),j=new vg(w,x,T);return p.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return zF(yield HE(p),j)})),()=>{x.za(),p.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return $F(yield HE(p),j)}))}}(YC(d),h,c,l)}function r_(i,e){return function(n,r){let s=new mn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return XF(yield aL(n),r,s)})),s.promise}(YC(i),e)}function vL(i,e,t){let n=t.docs.get(e._key),r=new Zd(i);return new Xd(i,r,e._key,n,new Ar(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Ys=r})(Jt),rt(new nt("firestore",(n,{instanceIdentifier:r,options:s})=>{let o=n.getProvider("app").getImmediate(),c=new Gn(new np(n.getProvider("auth-internal")),new ap(n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new B(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rd(d.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),H(_E,"4.7.2",e),H(_E,"4.7.2","esm2017")})();var yn=class{constructor(e){return e}},cT="firestore",s_=class{constructor(){return st(cT)}};var o_=new V("angularfire2.firestore-instances");function yL(i,e){let t=ut(cT,i,e);return t&&new yn(t)}function bL(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new yn(n)}}var lT={provide:s_,deps:[[new J,o_]]},dT={provide:yn,useFactory:yL,deps:[[new J,o_],Le]},uT=(()=>{class i{constructor(){H("angularfire",Ne.full,"fst")}static \u0275fac=function(n){return new(n||i)};static \u0275mod=Z({type:i});static \u0275inj=X({providers:[dT,lT]})}return i})();function hT(i,...e){return H("angularfire",Ne.full,"fst"),ke([dT,lT,{provide:o_,useFactory:bL(i),multi:!0,deps:[U,ce,Je,We,[new J,Si],[new J,ei],...e]}])}var fT=Ie(oT,!0);var Xs=Ie(WC,!0);var mT=Ie(sT,!0);var a_=Ie(e_,!0);var pT=Ie(KC,!0);var gT=Ie(aT,!0);var _T=Ie(iT,!0);var vT=Ie(rT,!0);var bT="@firebase/database",wT="1.0.8";var sv="";function wL(i){sv=i}var p_=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Il(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var g_=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ui(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var JT=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new p_(e)}}catch{}return new g_},Lr=JT("localStorage"),__=JT("sessionStorage");var to=new ji("@firebase/database"),IL=function(){let i=1;return function(){return i++}}(),eA=function(i){let e=iI(i),t=new Jw;t.update(e);let n=t.digest();return $w.encodeByteArray(n)},Ic=function(...i){let e="";for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Ic.apply(null,n):typeof n=="object"?e+=vt(n):e+=n,e+=" "}return e},Vr=null,IT=!0,EL=function(i,e){L(!e||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(to.logLevel=Mt.VERBOSE,Vr=to.log.bind(to),e&&__.set("logging_enabled",!0)):typeof i=="function"?Vr=i:(Vr=null,__.remove("logging_enabled"))},Lt=function(...i){if(IT===!0&&(IT=!1,Vr===null&&__.get("logging_enabled")===!0&&EL(!0)),Vr){let e=Ic.apply(null,i);Vr(e)}},Ec=function(i){return function(...e){Lt(i,...e)}},v_=function(...i){let e="FIREBASE INTERNAL ERROR: "+Ic(...i);to.error(e)},wn=function(...i){let e=`FIREBASE FATAL ERROR: ${Ic(...i)}`;throw to.error(e),new Error(e)},hi=function(...i){let e="FIREBASE WARNING: "+Ic(...i);to.warn(e)},CL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&hi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tA=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},TL=function(i){if(Li()||document.readyState==="complete")i();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},no="[MIN_NAME]",Ur="[MAX_NAME]",uo=function(i,e){if(i===e)return 0;if(i===no||e===Ur)return-1;if(e===no||i===Ur)return 1;{let t=ET(i),n=ET(e);return t!==null?n!==null?t-n===0?i.length-e.length:t-n:-1:n!==null?1:i<e?-1:1}},AL=function(i,e){return i===e?0:i<e?-1:1},dc=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+vt(e))},ov=function(i){if(typeof i!="object"||i===null)return vt(i);let e=[];for(let n in i)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)n!==0&&(t+=","),t+=vt(e[n]),t+=":",t+=ov(i[e[n]]);return t+="}",t},iA=function(i,e){let t=i.length;if(t<=e)return[i];let n=[];for(let r=0;r<t;r+=e)r+e>t?n.push(i.substring(r,t)):n.push(i.substring(r,r+e));return n};function vi(i,e){for(let t in i)i.hasOwnProperty(t)&&e(t,i[t])}var nA=function(i){L(!tA(i),"Invalid JSON number");let e=11,t=52,n=(1<<e-1)-1,r,s,o,c,l;i===0?(s=0,o=0,r=1/i===-1/0?1:0):(r=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(c=Math.min(Math.floor(Math.log(i)/Math.LN2),n),s=c+n,o=Math.round(i*Math.pow(2,t-c)-Math.pow(2,t))):(s=0,o=Math.round(i/Math.pow(2,1-n-t))));let d=[];for(l=t;l;l-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let h=d.join(""),m="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),m=m+p}return m.toLowerCase()},SL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},RL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var xL=new RegExp("^-?(0*)\\d{1,10}$"),kL=-2147483648,DL=2147483647,ET=function(i){if(xL.test(i)){let e=Number(i);if(e>=kL&&e<=DL)return e}return null},Cc=function(i){try{i()}catch(e){setTimeout(()=>{let t=e.stack||"";throw hi("Exception was thrown by user callback.",t),e},Math.floor(0))}},PL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},pc=function(i,e){let t=setTimeout(i,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var y_=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){hi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var b_=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hi(e)}},gc=(()=>{class i{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),au="5",rA="v",sA="s",oA="r",aA="f",cA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lA="ls",dA="p",w_="ac",uA="websocket",hA="long_polling";var cu=class{constructor(e,t,n,r,s=!1,o="",c=!1,l=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function ML(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function fA(i,e,t){L(typeof e=="string","typeof type must == string"),L(typeof t=="object","typeof params must == object");let n;if(e===uA)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===hA)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ML(i)&&(t.ns=i.namespace);let r=[];return vi(t,(s,o)=>{r.push(s+"="+o)}),n+r.join("&")}var I_=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Ui(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Gw(this.counters_)}};var c_={},l_={};function av(i){let e=i.toString();return c_[e]||(c_[e]=new I_),c_[e]}function NL(i,e){let t=i.toString();return l_[t]||(l_[t]=e()),l_[t]}var E_=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Cc(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var CT="start",OL="close",FL="pLPCommand",LL="pRTLPCB",mA="id",pA="pw",gA="ser",VL="cb",UL="seg",jL="ts",BL="d",zL="dframe",_A=1870,vA=30,$L=_A-vA,qL=25e3,HL=3e4,C_=class i{constructor(e,t,n,r,s,o,c){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ec(e),this.stats_=av(t),this.urlFn=l=>(this.appCheckToken&&(l[w_]=this.appCheckToken),fA(t,hA,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new E_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HL)),TL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new T_((...s)=>{let[o,c,l,d,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===CT)this.id=c,this.password=l;else if(o===OL)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);let n={};n[CT]="t",n[gA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[VL]=this.scriptTagHolder.uniqueCallbackIdentifier),n[rA]=au,this.transportSessionId&&(n[sA]=this.transportSessionId),this.lastSessionId&&(n[lA]=this.lastSessionId),this.applicationId&&(n[dA]=this.applicationId),this.appCheckToken&&(n[w_]=this.appCheckToken),typeof location<"u"&&location.hostname&&cA.test(location.hostname)&&(n[oA]=aA);let r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return Li()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!SL()&&!RL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=vt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=qw(t),r=iA(n,$L);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Li())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[zL]="t",n[mA]=e,n[pA]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=vt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},T_=class i{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Li())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=IL(),window[FL+this.uniqueCallbackIdentifier]=e,window[LL+this.uniqueCallbackIdentifier]=t,this.myIFrame=i.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){Lt("frame writing exception"),c.stack&&Lt(c.stack),Lt(c)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Lt("No IE domain setting required")}catch{let n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[mA]=this.myID,e[pA]=this.myPW,e[gA]=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vA+n.length<=_A;){let o=this.pendingSegs.shift();n=n+"&"+UL+r+"="+o.seg+"&"+jL+r+"="+o.ts+"&"+BL+r+"="+o.d,r++}return t=t+n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(qL)),s=()=>{clearTimeout(r),n()};this.addTag(e,s)}addTag(e,t){Li()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Lt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var GL=16384,WL=45e3,lu=null;typeof MozWebSocket<"u"?lu=MozWebSocket:typeof WebSocket<"u"&&(lu=WebSocket);var uc=(()=>{class i{constructor(t,n,r,s,o,c,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ec(this.connId),this.stats_=av(n),this.connURL=i.connectionURL_(n,c,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,s,o){let c={};return c[rA]=au,!Li()&&typeof location<"u"&&location.hostname&&cA.test(location.hostname)&&(c[oA]=aA),n&&(c[sA]=n),r&&(c[lA]=r),s&&(c[w_]=s),o&&(c[dA]=o),fA(t,uA,c)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lr.set("previous_websocket_failure",!0);try{let r;if(Li()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${au}/${sv}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,c=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;c&&(r.proxy={origin:c})}this.mySock=new lu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&lu!==null&&!i.forceDisallow_}static previouslyFailed(){return Lr.isInMemoryStorage||Lr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Lr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let r=Il(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(L(this.frames===null,"We already have a frame buffer"),t.length<=6){let n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let n=vt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=iA(n,GL);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WL))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4;return i})(),KL=(()=>{class i{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[C_,uc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let n=uc&&uc.isAvailable(),r=n&&!uc.previouslyFailed();if(t.webSocketOnly&&(n||hi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[uc];else{let s=this.transports_=[];for(let o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),YL=6e4,QL=5e3,XL=10*1024,ZL=100*1024,d_="t",TT="d",JL="s",AT="r",eV="e",ST="o",RT="a",xT="n",kT="p",tV="h",A_=class{constructor(e,t,n,r,s,o,c,l,d,h){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=l,this.onKill_=d,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ec("c:"+this.id+":"),this.transportManager_=new KL(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=pc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ZL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>XL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(d_ in e){let t=e[d_];t===RT?this.upgradeIfSecondaryHealthy_():t===AT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===ST&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=dc("t",e),n=dc("d",e);if(t==="c")this.onSecondaryControl_(n);else if(t==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:kT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:RT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:xT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=dc("t",e),n=dc("d",e);t==="c"?this.onControl_(n):t==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=dc(d_,e);if(TT in e){let n=e[TT];if(t===tV){let r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===xT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===JL?this.onConnectionShutdown_(n):t===AT?this.onReset_(n):t===eV?v_("Server Error: "+n):t===ST?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):v_("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),au!==n&&hi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),pc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(YL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(QL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:kT,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var du=class{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}};var uu=class{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(e){L(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var hu=class i extends uu{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Jo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var DT=32,PT=768,Pe=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Re(){return new Pe("")}function ve(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Kn(i){return i.pieces_.length-i.pieceNum_}function Ve(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new Pe(i.pieces_,e)}function yA(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function iV(i){let e="";for(let t=i.pieceNum_;t<i.pieces_.length;t++)i.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[t])));return e||"/"}function bA(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function wA(i){if(i.pieceNum_>=i.pieces_.length)return null;let e=[];for(let t=i.pieceNum_;t<i.pieces_.length-1;t++)e.push(i.pieces_[t]);return new Pe(e,0)}function bt(i,e){let t=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)t.push(i.pieces_[n]);if(e instanceof Pe)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{let n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&t.push(n[r])}return new Pe(t,0)}function ge(i){return i.pieceNum_>=i.pieces_.length}function gi(i,e){let t=ve(i),n=ve(e);if(t===null)return e;if(t===n)return gi(Ve(i),Ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function IA(i,e){if(Kn(i)!==Kn(e))return!1;for(let t=i.pieceNum_,n=e.pieceNum_;t<=i.pieces_.length;t++,n++)if(i.pieces_[t]!==e.pieces_[n])return!1;return!0}function Di(i,e){let t=i.pieceNum_,n=e.pieceNum_;if(Kn(i)>Kn(e))return!1;for(;t<i.pieces_.length;){if(i.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}var S_=class{constructor(e,t){this.errorPrefix_=t,this.parts_=bA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=sa(this.parts_[n]);EA(this)}};function nV(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=sa(e),EA(i)}function rV(i){let e=i.parts_.pop();i.byteLength_-=sa(e),i.parts_.length>0&&(i.byteLength_-=1)}function EA(i){if(i.byteLength_>PT)throw new Error(i.errorPrefix_+"has a key path longer than "+PT+" bytes ("+i.byteLength_+").");if(i.parts_.length>DT)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+DT+") or object contains a cycle "+Fr(i))}function Fr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var R_=class i extends uu{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new i}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}};var hc=1e3,sV=60*5*1e3,MT=30*1e3,oV=1.3,aV=3e4,cV="server_kill",NT=3,cv=(()=>{class i extends du{constructor(t,n,r,s,o,c,l,d){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=l,this.authOverride_=d,this.id=i.nextPersistentConnectionId_++,this.log_=Ec("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hc,this.maxReconnectDelay_=sV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!Li())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");R_.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&hu.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){let s=++this.requestNumber_,o={r:s,a:t,b:n};this.log_(vt(o)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let n=new Zh,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{let l=c.d;c.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,r,s){this.initConnection_();let o=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),L(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:n,query:t,tag:r};this.listens.get(c).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){let n=t.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},c="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(c,o,l=>{let d=l.d,h=l.s;i.warnOnListenWarnings_(d,n),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),h!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(h,d))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Ui(t,"w")){let r=dr(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();hi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Zw(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=MT)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,n=Xw(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{let o=s.s,c=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),L(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,n)}sendUnlisten_(t,n,r,s){this.log_("Unlisten on "+t+" for "+n);let o={p:t},c="n";s&&(o.q=r,o.t=s),this.sendRequest(c,o)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,s){let o={p:n,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(t,n,r,s){this.putInternal("p",t,n,r,s)}merge(t,n,r,s){this.putInternal("m",t,n,r,s)}putInternal(t,n,r,s,o){this.initConnection_();let c={p:n,d:r};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:t,request:c,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){let n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+vt(t));let n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):v_("Unrecognized action received from server: "+vt(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=hc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aV&&(this.reconnectDelay_=hc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oV)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+i.nextConnectionId_++,o=this.lastSessionId,c=!1,l=null,d=function(){l?l.close():(c=!0,r())},h=function(p){L(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(p)};this.realtime_={close:d,sendRequest:h};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[p,w]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);c?Lt("getToken() completed but was canceled"):(Lt("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=w&&w.token,l=new A_(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,T=>{hi(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(cV)},o))}catch(p){this.log_("Failed to get token: "+p),c||(this.repoInfo_.nodeAdmin&&hi(p),d())}}})}interrupt(t){Lt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Lt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ia(this.interruptReasons_)&&(this.reconnectDelay_=hc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(o=>ov(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){let r=new Pe(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,n){Lt("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=NT&&(this.reconnectDelay_=MT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Lt("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=NT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},n="js";Li()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),t["sdk."+n+"."+sv.replace(/\./g,"-")]=1,Jo()?t["framework.cordova"]=1:wl()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=hu.getInstance().currentlyOnline();return ia(this.interruptReasons_)&&t}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),ye=class i{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new i(e,t)}};var ro=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new ye(no,e),r=new ye(no,t);return this.compare(n,r)!==0}minPost(){return ye.MIN}};var ou,fu=class extends ro{static get __EMPTY_NODE(){return ou}static set __EMPTY_NODE(e){ou=e}compare(e,t){return uo(e.name,t.name)}isDefinedOn(e){throw us("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ye.MIN}maxPost(){return new ye(Ur,ou)}makePost(e,t){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new ye(e,ou)}toString(){return".key"}},io=new fu;var Js=class{constructor(e,t,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ki=(()=>{class i{constructor(t,n,r,s,o){this.key=t,this.value=n,this.color=r??i.RED,this.left=s??_i.EMPTY_NODE,this.right=o??_i.EMPTY_NODE}copy(t,n,r,s,o){return new i(t??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,n,r),null):o===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _i.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,s;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return _i.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),x_=class{copy(e,t,n,r,s){return this}insert(e,t,n){return new ki(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},_i=class i{constructor(e,t=i.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new i(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ki.BLACK,null,null))}remove(e){return new i(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ki.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Js(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Js(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Js(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Js(this.root_,null,this.comparator_,!0,e)}};_i.EMPTY_NODE=new x_;function lV(i,e){return uo(i.name,e.name)}function lv(i,e){return uo(i,e)}var k_;function dV(i){k_=i}var CA=function(i){return typeof i=="number"?"number:"+nA(i):"string:"+i},TA=function(i){if(i.isLeafNode()){let e=i.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ui(e,".sv"),"Priority must be a string or number.")}else L(i===k_||i.isEmpty(),"priority of unexpected type.");L(i===k_||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var OT,so=(()=>{class i{constructor(t,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),TA(this.priorityNode_)}static set __childrenNodeConstructor(t){OT=t}static get __childrenNodeConstructor(){return OT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new i(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ge(t)?this:ve(t)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let r=ve(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(L(r!==".priority"||Kn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+CA(this.priorityNode_.val())+":");let n=typeof this.value_;t+=n+":",n==="number"?t+=nA(this.value_):t+=this.value_,this.lazyHash_=eA(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===i.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof i.__childrenNodeConstructor?-1:(L(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,r=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(n),o=i.VALUE_TYPE_ORDER.indexOf(r);return L(s>=0,"Unknown leaf type: "+n),L(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),AA,SA;function uV(i){AA=i}function hV(i){SA=i}var D_=class extends ro{compare(e,t){let n=e.node.getPriority(),r=t.node.getPriority(),s=n.compareTo(r);return s===0?uo(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(Ur,new so("[PRIORITY-POST]",SA))}makePost(e,t){let n=AA(e);return new ye(t,new so("[PRIORITY-POST]",n))}toString(){return".priority"}},Ut=new D_;var fV=Math.log(2),P_=class{constructor(e){let t=s=>parseInt(Math.log(s)/fV,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},mu=function(i,e,t,n){i.sort(e);let r=function(l,d){let h=d-l,m,p;if(h===0)return null;if(h===1)return m=i[l],p=t?t(m):m,new ki(p,m.node,ki.BLACK,null,null);{let w=parseInt(h/2,10)+l,T=r(l,w),k=r(w+1,d);return m=i[w],p=t?t(m):m,new ki(p,m.node,ki.BLACK,T,k)}},s=function(l){let d=null,h=null,m=i.length,p=function(T,k){let x=m-T,j=m;m-=T;let K=r(x+1,j),G=i[x],oe=t?t(G):G;w(new ki(oe,G.node,k,null,K))},w=function(T){d?(d.left=T,d=T):(h=T,d=T)};for(let T=0;T<l.count;++T){let k=l.nextBitIsOne(),x=Math.pow(2,l.count-(T+1));k?p(x,ki.BLACK):(p(x,ki.BLACK),p(x,ki.RED))}return h},o=new P_(i.length),c=s(o);return new _i(n||e,c)};var u_,Zs={},oo=class i{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return L(Zs&&Ut,"ChildrenNode.ts has not been loaded"),u_=u_||new i({".priority":Zs},{".priority":Ut}),u_}get(e){let t=dr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _i?t:null}hasIndex(e){return Ui(this.indexSet_,e.toString())}addIndex(e,t){L(e!==io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,s=t.getIterator(ye.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=s.getNext();let c;r?c=mu(n,e.getCompare()):c=Zs;let l=e.toString(),d=Object.assign({},this.indexSet_);d[l]=e;let h=Object.assign({},this.indexes_);return h[l]=c,new i(h,d)}addToIndexes(e,t){let n=na(this.indexes_,(r,s)=>{let o=dr(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),r===Zs)if(o.isDefinedOn(e.node)){let c=[],l=t.getIterator(ye.Wrap),d=l.getNext();for(;d;)d.name!==e.name&&c.push(d),d=l.getNext();return c.push(e),mu(c,o.getCompare())}else return Zs;else{let c=t.get(e.name),l=r;return c&&(l=l.remove(new ye(e.name,c))),l.insert(e,e.node)}});return new i(n,this.indexSet_)}removeFromIndexes(e,t){let n=na(this.indexes_,r=>{if(r===Zs)return r;{let s=t.get(e.name);return s?r.remove(new ye(e.name,s)):r}});return new i(n,this.indexSet_)}};var fc,Ye=(()=>{class i{constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&TA(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fc||(fc=new i(new _i(lv),null,oo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fc}updatePriority(t){return this.children_.isEmpty()?this:new i(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let n=this.children_.get(t);return n===null?fc:n}}getChild(t){let n=ve(t);return n===null?this:this.getImmediateChild(n).getChild(Ve(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(L(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{let r=new ye(t,n),s,o;n.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));let c=s.isEmpty()?fc:this.priorityNode_;return new i(s,c,o)}}updateChild(t,n){let r=ve(t);if(r===null)return n;{L(ve(t)!==".priority"||Kn(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Ve(t),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},r=0,s=0,o=!0;if(this.forEachChild(Ut,(c,l)=>{n[c]=l.val(t),r++,o&&i.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):o=!1}),!t&&o&&s<2*r){let c=[];for(let l in n)c[l]=n[l];return c}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+CA(this.getPriority().val())+":"),this.forEachChild(Ut,(n,r)=>{let s=r.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":eA(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new ye(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let n=this.resolveIndex_(t);if(n){let r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let n=this.getFirstChildName(t);return n?new ye(n,this.children_.get(n)):null}getLastChildName(t){let n=this.resolveIndex_(t);if(n){let r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let n=this.getLastChildName(t);return n?new ye(n,this.children_.get(n)):null}forEachChild(t,n){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){let r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,ye.Wrap),o=s.peek();for(;o!=null&&n.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){let r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,ye.Wrap),o=s.peek();for(;o!=null&&n.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Tc?-1:0}withIndex(t){if(t===io||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===io||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let r=this.getIterator(Ut),s=n.getIterator(Ut),o=r.getNext(),c=s.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=r.getNext(),c=s.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===io?null:this.indexMap_.get(t.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),M_=class extends Ye{constructor(){super(new _i(lv),Ye.EMPTY_NODE,oo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ye.EMPTY_NODE}isEmpty(){return!1}},Tc=new M_;Object.defineProperties(ye,{MIN:{value:new ye(no,Ye.EMPTY_NODE)},MAX:{value:new ye(Ur,Tc)}});fu.__EMPTY_NODE=Ye.EMPTY_NODE;so.__childrenNodeConstructor=Ye;dV(Tc);hV(Tc);var mV=!0;function Vt(i,e=null){if(i===null)return Ye.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let t=i;return new so(t,Vt(e))}if(!(i instanceof Array)&&mV){let t=[],n=!1;if(vi(i,(o,c)=>{if(o.substring(0,1)!=="."){let l=Vt(c);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),t.push(new ye(o,l)))}}),t.length===0)return Ye.EMPTY_NODE;let s=mu(t,lV,o=>o.name,lv);if(n){let o=mu(t,Ut.getCompare());return new Ye(s,Vt(e),new oo({".priority":o},{".priority":Ut}))}else return new Ye(s,Vt(e),oo.Default)}else{let t=Ye.EMPTY_NODE;return vi(i,(n,r)=>{if(Ui(i,n)&&n.substring(0,1)!=="."){let s=Vt(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(n,s))}}),t.updatePriority(Vt(e))}}uV(Vt);var N_=class extends ro{constructor(e){super(),this.indexPath_=e,L(!ge(e)&&ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),r=this.extractChild(t.node),s=n.compareTo(r);return s===0?uo(e.name,t.name):s}makePost(e,t){let n=Vt(e),r=Ye.EMPTY_NODE.updateChild(this.indexPath_,n);return new ye(t,r)}maxPost(){let e=Ye.EMPTY_NODE.updateChild(this.indexPath_,Tc);return new ye(Ur,e)}toString(){return bA(this.indexPath_,0).join("/")}};var O_=class extends ro{compare(e,t){let n=e.node.compareTo(t.node);return n===0?uo(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,t){let n=Vt(e);return new ye(t,n)}toString(){return".value"}},pV=new O_;function gV(i){return{type:"value",snapshotNode:i}}function _V(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function vV(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function FT(i,e,t){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:t}}function yV(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}var F_=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:no}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ur}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ut}copy(){let e=new i;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function LT(i){let e={};if(i.isDefault())return e;let t;if(i.index_===Ut?t="$priority":i.index_===pV?t="$value":i.index_===io?t="$key":(L(i.index_ instanceof N_,"Unrecognized index type!"),t=i.index_.toString()),e.orderBy=vt(t),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";e[n]=vt(i.indexStartValue_),i.startNameSet_&&(e[n]+=","+vt(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";e[n]=vt(i.indexEndValue_),i.endNameSet_&&(e[n]+=","+vt(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function VT(i){let e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let t=i.viewFrom_;t===""&&(i.isViewFromLeft()?t="l":t="r"),e.vf=t}return i.index_!==Ut&&(e.i=i.index_.toString()),e}var L_=class i extends du{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ec("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=i.getListenId_(e,n),c={};this.listens_[o]=c;let l=LT(e._queryParams);this.restRequest_(s+".json",l,(d,h)=>{let m=h;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,n),dr(this.listens_,o)===c){let p;d?d===401?p="permission_denied":p="rest_error:"+d:p="ok",r(p,null)}})}unlisten(e,t){let n=i.getListenId_(e,t);delete this.listens_[n]}get(e){let t=LT(e._queryParams),n=e._path.toString(),r=new Zh;return this.restRequest_(n+".json",t,(s,o)=>{let c=o;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(n,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ur(t);this.log_("Sending REST request for "+o);let c=new XMLHttpRequest;c.onreadystatechange=()=>{if(n&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let l=null;if(c.status>=200&&c.status<300){try{l=Il(c.responseText)}catch{hi("Failed to parse JSON response for "+o+": "+c.responseText)}n(null,l)}else c.status!==401&&c.status!==404&&hi("Got unsuccessful REST response for "+o+" Status: "+c.status),n(c.status);n=null}},c.open("GET",o,!0),c.send()})}};var V_=class{constructor(){this.rootNode_=Ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function pu(){return{value:null,children:new Map}}function RA(i,e,t){if(ge(e))i.value=t,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,t);else{let n=ve(e);i.children.has(n)||i.children.set(n,pu());let r=i.children.get(n);e=Ve(e),RA(r,e,t)}}function U_(i,e,t){i.value!==null?t(e,i.value):bV(i,(n,r)=>{let s=new Pe(e.toString()+"/"+n);U_(r,s,t)})}function bV(i,e){i.children.forEach((t,n)=>{e(n,t)})}var j_=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&vi(this.last_,(n,r)=>{t[n]=t[n]-r}),this.last_=e,t}};var UT=10*1e3,wV=30*1e3,IV=5*60*1e3,B_=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new j_(e);let n=UT+(wV-UT)*Math.random();pc(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;vi(e,(r,s)=>{s>0&&Ui(this.statsToReport_,r)&&(t[r]=s,n=!0)}),n&&this.server_.reportStats(t),pc(this.reportStats_.bind(this),Math.floor(Math.random()*2*IV))}};var bn=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(bn||{});function xA(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kA(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function DA(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var z_=class i{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=bn.ACK_USER_WRITE,this.source=xA()}operationForChild(e){if(ge(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Pe(e));return new i(Re(),t,this.revert)}}else return L(ve(this.path)===e,"operationForChild called for unrelated child."),new i(Ve(this.path),this.affectedTree,this.revert)}};var ao=class i{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=bn.OVERWRITE}operationForChild(e){return ge(this.path)?new i(this.source,Re(),this.snap.getImmediateChild(e)):new i(this.source,Ve(this.path),this.snap)}};var gu=class i{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=bn.MERGE}operationForChild(e){if(ge(this.path)){let t=this.children.subtree(new Pe(e));return t.isEmpty()?null:t.value?new ao(this.source,Re(),t.value):new i(this.source,Re(),t)}else return L(ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new i(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var yc=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ge(e))return this.isFullyInitialized()&&!this.filtered_;let t=ve(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function EV(i,e,t,n){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(yV(o.childName,o.snapshotNode))}),mc(i,r,"child_removed",e,n,t),mc(i,r,"child_added",e,n,t),mc(i,r,"child_moved",s,n,t),mc(i,r,"child_changed",e,n,t),mc(i,r,"value",e,n,t),r}function mc(i,e,t,n,r,s){let o=n.filter(c=>c.type===t);o.sort((c,l)=>TV(i,c,l)),o.forEach(c=>{let l=CV(i,c,s);r.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(l,i.query_))})})}function CV(i,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function TV(i,e,t){if(e.childName==null||t.childName==null)throw us("Should only compare child_ events.");let n=new ye(e.childName,e.snapshotNode),r=new ye(t.childName,t.snapshotNode);return i.index_.compare(n,r)}function PA(i,e){return{eventCache:i,serverCache:e}}function _c(i,e,t,n){return PA(new yc(e,t,n),i.serverCache)}function MA(i,e,t,n){return PA(i.eventCache,new yc(e,t,n))}function $_(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function jr(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var h_,AV=()=>(h_||(h_=new _i(AL)),h_),ii=class i{constructor(e,t=AV()){this.value=e,this.children=t}static fromObject(e){let t=new i(null);return vi(e,(n,r)=>{t=t.set(new Pe(n),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Re(),value:this.value};if(ge(e))return null;{let n=ve(e),r=this.children.get(n);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Ve(e),t);return s!=null?{path:bt(new Pe(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ge(e))return this;{let t=ve(e),n=this.children.get(t);return n!==null?n.subtree(Ve(e)):new i(null)}}set(e,t){if(ge(e))return new i(t,this.children);{let n=ve(e),s=(this.children.get(n)||new i(null)).set(Ve(e),t),o=this.children.insert(n,s);return new i(this.value,o)}}remove(e){if(ge(e))return this.children.isEmpty()?new i(null):new i(null,this.children);{let t=ve(e),n=this.children.get(t);if(n){let r=n.remove(Ve(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new i(null):new i(this.value,s)}else return this}}get(e){if(ge(e))return this.value;{let t=ve(e),n=this.children.get(t);return n?n.get(Ve(e)):null}}setTree(e,t){if(ge(e))return t;{let n=ve(e),s=(this.children.get(n)||new i(null)).setTree(Ve(e),t),o;return s.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,s),new i(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(bt(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Re(),t)}findOnPath_(e,t,n){let r=this.value?n(t,this.value):!1;if(r)return r;if(ge(e))return null;{let s=ve(e),o=this.children.get(s);return o?o.findOnPath_(Ve(e),bt(t,s),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Re(),t)}foreachOnPath_(e,t,n){if(ge(e))return this;{this.value&&n(t,this.value);let r=ve(e),s=this.children.get(r);return s?s.foreachOnPath_(Ve(e),bt(t,r),n):new i(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(bt(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}};var Pi=class i{constructor(e){this.writeTree_=e}static empty(){return new i(new ii(null))}};function vc(i,e,t){if(ge(e))return new Pi(new ii(t));{let n=i.writeTree_.findRootMostValueAndPath(e);if(n!=null){let r=n.path,s=n.value,o=gi(r,e);return s=s.updateChild(o,t),new Pi(i.writeTree_.set(r,s))}else{let r=new ii(t),s=i.writeTree_.setTree(e,r);return new Pi(s)}}}function jT(i,e,t){let n=i;return vi(t,(r,s)=>{n=vc(n,bt(e,r),s)}),n}function BT(i,e){if(ge(e))return Pi.empty();{let t=i.writeTree_.setTree(e,new ii(null));return new Pi(t)}}function q_(i,e){return Br(i,e)!=null}function Br(i,e){let t=i.writeTree_.findRootMostValueAndPath(e);return t!=null?i.writeTree_.get(t.path).getChild(gi(t.path,e)):null}function zT(i){let e=[],t=i.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ut,(n,r)=>{e.push(new ye(n,r))}):i.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new ye(n,r.value))}),e}function Wn(i,e){if(ge(e))return i;{let t=Br(i,e);return t!=null?new Pi(new ii(t)):new Pi(i.writeTree_.subtree(e))}}function H_(i){return i.writeTree_.isEmpty()}function co(i,e){return NA(Re(),i.writeTree_,e)}function NA(i,e,t){if(e.value!=null)return t.updateChild(i,e.value);{let n=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):t=NA(bt(i,r),s,t)}),!t.getChild(i).isEmpty()&&n!==null&&(t=t.updateChild(bt(i,".priority"),n)),t}}function OA(i,e){return jA(e,i)}function SV(i,e,t,n,r){L(n>i.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),i.allWrites.push({path:e,snap:t,writeId:n,visible:r}),r&&(i.visibleWrites=vc(i.visibleWrites,e,t)),i.lastWriteId=n}function RV(i,e){for(let t=0;t<i.allWrites.length;t++){let n=i.allWrites[t];if(n.writeId===e)return n}return null}function xV(i,e){let t=i.allWrites.findIndex(c=>c.writeId===e);L(t>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[t];i.allWrites.splice(t,1);let r=n.visible,s=!1,o=i.allWrites.length-1;for(;r&&o>=0;){let c=i.allWrites[o];c.visible&&(o>=t&&kV(c,n.path)?r=!1:Di(n.path,c.path)&&(s=!0)),o--}if(r){if(s)return DV(i),!0;if(n.snap)i.visibleWrites=BT(i.visibleWrites,n.path);else{let c=n.children;vi(c,l=>{i.visibleWrites=BT(i.visibleWrites,bt(n.path,l))})}return!0}else return!1}function kV(i,e){if(i.snap)return Di(i.path,e);for(let t in i.children)if(i.children.hasOwnProperty(t)&&Di(bt(i.path,t),e))return!0;return!1}function DV(i){i.visibleWrites=FA(i.allWrites,PV,Re()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function PV(i){return i.visible}function FA(i,e,t){let n=Pi.empty();for(let r=0;r<i.length;++r){let s=i[r];if(e(s)){let o=s.path,c;if(s.snap)Di(t,o)?(c=gi(t,o),n=vc(n,c,s.snap)):Di(o,t)&&(c=gi(o,t),n=vc(n,Re(),s.snap.getChild(c)));else if(s.children){if(Di(t,o))c=gi(t,o),n=jT(n,c,s.children);else if(Di(o,t))if(c=gi(o,t),ge(c))n=jT(n,Re(),s.children);else{let l=dr(s.children,ve(c));if(l){let d=l.getChild(Ve(c));n=vc(n,Re(),d)}}}else throw us("WriteRecord should have .snap or .children")}}return n}function LA(i,e,t,n,r){if(!n&&!r){let s=Br(i.visibleWrites,e);if(s!=null)return s;{let o=Wn(i.visibleWrites,e);if(H_(o))return t;if(t==null&&!q_(o,Re()))return null;{let c=t||Ye.EMPTY_NODE;return co(o,c)}}}else{let s=Wn(i.visibleWrites,e);if(!r&&H_(s))return t;if(!r&&t==null&&!q_(s,Re()))return null;{let o=function(d){return(d.visible||r)&&(!n||!~n.indexOf(d.writeId))&&(Di(d.path,e)||Di(e,d.path))},c=FA(i.allWrites,o,e),l=t||Ye.EMPTY_NODE;return co(c,l)}}}function MV(i,e,t){let n=Ye.EMPTY_NODE,r=Br(i.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ut,(s,o)=>{n=n.updateImmediateChild(s,o)}),n;if(t){let s=Wn(i.visibleWrites,e);return t.forEachChild(Ut,(o,c)=>{let l=co(Wn(s,new Pe(o)),c);n=n.updateImmediateChild(o,l)}),zT(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{let s=Wn(i.visibleWrites,e);return zT(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function NV(i,e,t,n,r){L(n||r,"Either existingEventSnap or existingServerSnap must exist");let s=bt(e,t);if(q_(i.visibleWrites,s))return null;{let o=Wn(i.visibleWrites,s);return H_(o)?r.getChild(t):co(o,r.getChild(t))}}function OV(i,e,t,n){let r=bt(e,t),s=Br(i.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(t)){let o=Wn(i.visibleWrites,r);return co(o,n.getNode().getImmediateChild(t))}else return null}function FV(i,e){return Br(i.visibleWrites,e)}function LV(i,e,t,n,r,s,o){let c,l=Wn(i.visibleWrites,e),d=Br(l,Re());if(d!=null)c=d;else if(t!=null)c=co(l,t);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){let h=[],m=o.getCompare(),p=s?c.getReverseIteratorFrom(n,o):c.getIteratorFrom(n,o),w=p.getNext();for(;w&&h.length<r;)m(w,n)!==0&&h.push(w),w=p.getNext();return h}else return[]}function VV(){return{visibleWrites:Pi.empty(),allWrites:[],lastWriteId:-1}}function G_(i,e,t,n){return LA(i.writeTree,i.treePath,e,t,n)}function VA(i,e){return MV(i.writeTree,i.treePath,e)}function $T(i,e,t,n){return NV(i.writeTree,i.treePath,e,t,n)}function _u(i,e){return FV(i.writeTree,bt(i.treePath,e))}function UV(i,e,t,n,r,s){return LV(i.writeTree,i.treePath,e,t,n,r,s)}function dv(i,e,t){return OV(i.writeTree,i.treePath,e,t)}function UA(i,e){return jA(bt(i.treePath,e),i.writeTree)}function jA(i,e){return{treePath:i,writeTree:e}}var W_=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;L(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),L(n!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(n,FT(n,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(n,vV(n,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(n,_V(n,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(n,FT(n,e.snapshotNode,r.oldSnap));else throw us("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}};var K_=class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},BA=new K_,bc=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let n=this.optCompleteServerCache_!=null?new yc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dv(this.writes_,e,n)}}getChildAfterChild(e,t,n){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:jr(this.viewCache_),s=UV(this.writes_,r,t,1,n,e);return s.length===0?null:s[0]}};function jV(i,e){L(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function BV(i,e,t,n,r){let s=new W_,o,c;if(t.type===bn.OVERWRITE){let d=t;d.source.fromUser?o=Y_(i,e,d.path,d.snap,n,r,s):(L(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!ge(d.path),o=vu(i,e,d.path,d.snap,n,r,c,s))}else if(t.type===bn.MERGE){let d=t;d.source.fromUser?o=$V(i,e,d.path,d.children,n,r,s):(L(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=Q_(i,e,d.path,d.children,n,r,c,s))}else if(t.type===bn.ACK_USER_WRITE){let d=t;d.revert?o=GV(i,e,d.path,n,r,s):o=qV(i,e,d.path,d.affectedTree,n,r,s)}else if(t.type===bn.LISTEN_COMPLETE)o=HV(i,e,t.path,n,s);else throw us("Unknown operation type: "+t.type);let l=s.getChanges();return zV(e,o,l),{viewCache:o,changes:l}}function zV(i,e,t){let n=e.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=$_(i);(t.length>0||!i.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&t.push(gV($_(e)))}}function zA(i,e,t,n,r,s){let o=e.eventCache;if(_u(n,t)!=null)return e;{let c,l;if(ge(t))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let d=jr(e),h=d instanceof Ye?d:Ye.EMPTY_NODE,m=VA(n,h);c=i.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{let d=G_(n,jr(e));c=i.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let d=ve(t);if(d===".priority"){L(Kn(t)===1,"Can't have a priority with additional path components");let h=o.getNode();l=e.serverCache.getNode();let m=$T(n,t,h,l);m!=null?c=i.filter.updatePriority(h,m):c=o.getNode()}else{let h=Ve(t),m;if(o.isCompleteForChild(d)){l=e.serverCache.getNode();let p=$T(n,t,o.getNode(),l);p!=null?m=o.getNode().getImmediateChild(d).updateChild(h,p):m=o.getNode().getImmediateChild(d)}else m=dv(n,d,e.serverCache);m!=null?c=i.filter.updateChild(o.getNode(),d,m,h,r,s):c=o.getNode()}}return _c(e,c,o.isFullyInitialized()||ge(t),i.filter.filtersNodes())}}function vu(i,e,t,n,r,s,o,c){let l=e.serverCache,d,h=o?i.filter:i.filter.getIndexedFilter();if(ge(t))d=h.updateFullNode(l.getNode(),n,null);else if(h.filtersNodes()&&!l.isFiltered()){let w=l.getNode().updateChild(t,n);d=h.updateFullNode(l.getNode(),w,null)}else{let w=ve(t);if(!l.isCompleteForPath(t)&&Kn(t)>1)return e;let T=Ve(t),x=l.getNode().getImmediateChild(w).updateChild(T,n);w===".priority"?d=h.updatePriority(l.getNode(),x):d=h.updateChild(l.getNode(),w,x,T,BA,null)}let m=MA(e,d,l.isFullyInitialized()||ge(t),h.filtersNodes()),p=new bc(r,m,s);return zA(i,m,t,r,p,c)}function Y_(i,e,t,n,r,s,o){let c=e.eventCache,l,d,h=new bc(r,e,s);if(ge(t))d=i.filter.updateFullNode(e.eventCache.getNode(),n,o),l=_c(e,d,!0,i.filter.filtersNodes());else{let m=ve(t);if(m===".priority")d=i.filter.updatePriority(e.eventCache.getNode(),n),l=_c(e,d,c.isFullyInitialized(),c.isFiltered());else{let p=Ve(t),w=c.getNode().getImmediateChild(m),T;if(ge(p))T=n;else{let k=h.getCompleteChild(m);k!=null?yA(p)===".priority"&&k.getChild(wA(p)).isEmpty()?T=k:T=k.updateChild(p,n):T=Ye.EMPTY_NODE}if(w.equals(T))l=e;else{let k=i.filter.updateChild(c.getNode(),m,T,p,h,o);l=_c(e,k,c.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function qT(i,e){return i.eventCache.isCompleteForChild(e)}function $V(i,e,t,n,r,s,o){let c=e;return n.foreach((l,d)=>{let h=bt(t,l);qT(e,ve(h))&&(c=Y_(i,c,h,d,r,s,o))}),n.foreach((l,d)=>{let h=bt(t,l);qT(e,ve(h))||(c=Y_(i,c,h,d,r,s,o))}),c}function HT(i,e,t){return t.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function Q_(i,e,t,n,r,s,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,d;ge(t)?d=n:d=new ii(null).setTree(t,n);let h=e.serverCache.getNode();return d.children.inorderTraversal((m,p)=>{if(h.hasChild(m)){let w=e.serverCache.getNode().getImmediateChild(m),T=HT(i,w,p);l=vu(i,l,new Pe(m),T,r,s,o,c)}}),d.children.inorderTraversal((m,p)=>{let w=!e.serverCache.isCompleteForChild(m)&&p.value===null;if(!h.hasChild(m)&&!w){let T=e.serverCache.getNode().getImmediateChild(m),k=HT(i,T,p);l=vu(i,l,new Pe(m),k,r,s,o,c)}}),l}function qV(i,e,t,n,r,s,o){if(_u(r,t)!=null)return e;let c=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(ge(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return vu(i,e,t,l.getNode().getChild(t),r,s,c,o);if(ge(t)){let d=new ii(null);return l.getNode().forEachChild(io,(h,m)=>{d=d.set(new Pe(h),m)}),Q_(i,e,t,d,r,s,c,o)}else return e}else{let d=new ii(null);return n.foreach((h,m)=>{let p=bt(t,h);l.isCompleteForPath(p)&&(d=d.set(h,l.getNode().getChild(p)))}),Q_(i,e,t,d,r,s,c,o)}}function HV(i,e,t,n,r){let s=e.serverCache,o=MA(e,s.getNode(),s.isFullyInitialized()||ge(t),s.isFiltered());return zA(i,o,t,n,BA,r)}function GV(i,e,t,n,r,s){let o;if(_u(n,t)!=null)return e;{let c=new bc(n,e,r),l=e.eventCache.getNode(),d;if(ge(t)||ve(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=G_(n,jr(e));else{let m=e.serverCache.getNode();L(m instanceof Ye,"serverChildren would be complete if leaf node"),h=VA(n,m)}h=h,d=i.filter.updateFullNode(l,h,s)}else{let h=ve(t),m=dv(n,h,e.serverCache);m==null&&e.serverCache.isCompleteForChild(h)&&(m=l.getImmediateChild(h)),m!=null?d=i.filter.updateChild(l,h,m,Ve(t),c,s):e.eventCache.getNode().hasChild(h)?d=i.filter.updateChild(l,h,Ye.EMPTY_NODE,Ve(t),c,s):d=l,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=G_(n,jr(e)),o.isLeafNode()&&(d=i.filter.updateFullNode(d,o,s)))}return o=e.serverCache.isFullyInitialized()||_u(n,Re())!=null,_c(e,d,o,i.filter.filtersNodes())}}function WV(i,e){let t=jr(i.viewCache_);return t&&(i.query._queryParams.loadsAllData()||!ge(e)&&!t.getImmediateChild(ve(e)).isEmpty())?t.getChild(e):null}function GT(i,e,t,n){e.type===bn.MERGE&&e.source.queryId!==null&&(L(jr(i.viewCache_),"We should always have a full cache before handling merges"),L($_(i.viewCache_),"Missing event cache, even though we have a server cache"));let r=i.viewCache_,s=BV(i.processor_,r,e,t,n);return jV(i.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,KV(i,s.changes,s.viewCache.eventCache.getNode(),null)}function KV(i,e,t,n){let r=n?[n]:i.eventRegistrations_;return EV(i.eventGenerator_,e,t,r)}var WT;function YV(i){L(!WT,"__referenceConstructor has already been defined"),WT=i}function uv(i,e,t,n){let r=e.source.queryId;if(r!==null){let s=i.views.get(r);return L(s!=null,"SyncTree gave us an op for an invalid query."),GT(s,e,t,n)}else{let s=[];for(let o of i.views.values())s=s.concat(GT(o,e,t,n));return s}}function hv(i,e){let t=null;for(let n of i.views.values())t=t||WV(n,e);return t}var KT;function QV(i){L(!KT,"__referenceConstructor has already been defined"),KT=i}var yu=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ii(null),this.pendingWriteTree_=VV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function XV(i,e,t,n,r){return SV(i.pendingWriteTree_,e,t,n,r),r?wu(i,new ao(xA(),e,t)):[]}function eo(i,e,t=!1){let n=RV(i.pendingWriteTree_,e);if(xV(i.pendingWriteTree_,e)){let s=new ii(null);return n.snap!=null?s=s.set(Re(),!0):vi(n.children,o=>{s=s.set(new Pe(o),!0)}),wu(i,new z_(n.path,s,t))}else return[]}function bu(i,e,t){return wu(i,new ao(kA(),e,t))}function ZV(i,e,t){let n=ii.fromObject(t);return wu(i,new gu(kA(),e,n))}function JV(i,e,t,n){let r=GA(i,n);if(r!=null){let s=WA(r),o=s.path,c=s.queryId,l=gi(o,e),d=new ao(DA(c),l,t);return KA(i,o,d)}else return[]}function eU(i,e,t,n){let r=GA(i,n);if(r){let s=WA(r),o=s.path,c=s.queryId,l=gi(o,e),d=ii.fromObject(t),h=new gu(DA(c),l,d);return KA(i,o,h)}else return[]}function $A(i,e,t){let r=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(e,(o,c)=>{let l=gi(o,e),d=hv(c,l);if(d)return d});return LA(r,e,s,t,!0)}function wu(i,e){return qA(e,i.syncPointTree_,null,OA(i.pendingWriteTree_,Re()))}function qA(i,e,t,n){if(ge(i.path))return HA(i,e,t,n);{let r=e.get(Re());t==null&&r!=null&&(t=hv(r,Re()));let s=[],o=ve(i.path),c=i.operationForChild(o),l=e.children.get(o);if(l&&c){let d=t?t.getImmediateChild(o):null,h=UA(n,o);s=s.concat(qA(c,l,d,h))}return r&&(s=s.concat(uv(r,i,n,t))),s}}function HA(i,e,t,n){let r=e.get(Re());t==null&&r!=null&&(t=hv(r,Re()));let s=[];return e.children.inorderTraversal((o,c)=>{let l=t?t.getImmediateChild(o):null,d=UA(n,o),h=i.operationForChild(o);h&&(s=s.concat(HA(h,c,l,d)))}),r&&(s=s.concat(uv(r,i,n,t))),s}function GA(i,e){return i.tagToQueryMap.get(e)}function WA(i){let e=i.indexOf("$");return L(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new Pe(i.substr(0,e))}}function KA(i,e,t){let n=i.syncPointTree_.get(e);L(n,"Missing sync point for query tag that we're tracking");let r=OA(i.pendingWriteTree_,e);return uv(n,t,r,null)}var X_=class i{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new i(t)}node(){return this.node_}},Z_=class i{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=bt(this.path_,e);return new i(this.syncTree_,t)}node(){return $A(this.syncTree_,this.path_)}},tU=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},YT=function(i,e,t){if(!i||typeof i!="object")return i;if(L(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return iU(i[".sv"],e,t);if(typeof i[".sv"]=="object")return nU(i[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},iU=function(i,e,t){switch(i){case"timestamp":return t.timestamp;default:L(!1,"Unexpected server value: "+i)}},nU=function(i,e,t){i.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&L(!1,"Unexpected increment value: "+n);let r=e.node();if(L(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let o=r.getValue();return typeof o!="number"?n:o+n},rU=function(i,e,t,n){return fv(e,new Z_(t,i),n)},sU=function(i,e,t){return fv(i,new X_(e),t)};function fv(i,e,t){let n=i.getPriority().val(),r=YT(n,e.getImmediateChild(".priority"),t),s;if(i.isLeafNode()){let o=i,c=YT(o.getValue(),e,t);return c!==o.getValue()||r!==o.getPriority().val()?new so(c,Vt(r)):i}else{let o=i;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new so(r))),o.forEachChild(Ut,(c,l)=>{let d=fv(l,e.getImmediateChild(c),t);d!==l&&(s=s.updateImmediateChild(c,d))}),s}}var wc=class{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function mv(i,e){let t=e instanceof Pe?e:new Pe(e),n=i,r=ve(t);for(;r!==null;){let s=dr(n.node.children,r)||{children:{},childCount:0};n=new wc(r,n,s),t=Ve(t),r=ve(t)}return n}function ho(i){return i.node.value}function YA(i,e){i.node.value=e,J_(i)}function QA(i){return i.node.childCount>0}function oU(i){return ho(i)===void 0&&!QA(i)}function Iu(i,e){vi(i.node.children,(t,n)=>{e(new wc(t,i,n))})}function XA(i,e,t,n){t&&!n&&e(i),Iu(i,r=>{XA(r,e,!0,n)}),t&&n&&e(i)}function aU(i,e,t){let n=t?i:i.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Ac(i){return new Pe(i.parent===null?i.name:Ac(i.parent)+"/"+i.name)}function J_(i){i.parent!==null&&cU(i.parent,i.name,i)}function cU(i,e,t){let n=oU(t),r=Ui(i.node.children,e);n&&r?(delete i.node.children[e],i.node.childCount--,J_(i)):!n&&!r&&(i.node.children[e]=t.node,i.node.childCount++,J_(i))}var lU=/[\[\].#$\/\u0000-\u001F\u007F]/,dU=/[\[\].#$\u0000-\u001F\u007F]/,f_=10*1024*1024,ZA=function(i){return typeof i=="string"&&i.length!==0&&!lU.test(i)},uU=function(i){return typeof i=="string"&&i.length!==0&&!dU.test(i)},hU=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),uU(i)};var JA=function(i,e,t){let n=t instanceof Pe?new S_(t,i):t;if(e===void 0)throw new Error(i+"contains undefined "+Fr(n));if(typeof e=="function")throw new Error(i+"contains a function "+Fr(n)+" with contents = "+e.toString());if(tA(e))throw new Error(i+"contains "+e.toString()+" "+Fr(n));if(typeof e=="string"&&e.length>f_/3&&sa(e)>f_)throw new Error(i+"contains a string greater than "+f_+" utf8 bytes "+Fr(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(vi(e,(o,c)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!ZA(o)))throw new Error(i+" contains an invalid key ("+o+") "+Fr(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nV(n,o),JA(i,c,n),rV(n)}),r&&s)throw new Error(i+' contains ".value" child '+Fr(n)+" in addition to actual children.")}};var fU=function(i,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ZA(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!hU(t))throw new Error(tI(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ev=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function mU(i,e){let t=null;for(let n=0;n<e.length;n++){let r=e[n],s=r.getPath();t!==null&&!IA(s,t.path)&&(i.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&i.eventLists_.push(t)}function zr(i,e,t){mU(i,t),pU(i,n=>Di(n,e)||Di(e,n))}function pU(i,e){i.recursionDepth_++;let t=!0;for(let n=0;n<i.eventLists_.length;n++){let r=i.eventLists_[n];if(r){let s=r.path;e(s)?(gU(i.eventLists_[n]),i.eventLists_[n]=null):t=!1}}t&&(i.eventLists_=[]),i.recursionDepth_--}function gU(i){for(let e=0;e<i.events.length;e++){let t=i.events[e];if(t!==null){i.events[e]=null;let n=t.getEventRunner();Vr&&Lt("event: "+t.toString()),Cc(n)}}}var _U="repo_interrupt",vU=25,tv=class{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ev,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pu(),this.transactionQueueTree_=new wc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function yU(i,e,t){if(i.stats_=av(i.repoInfo_),i.forceRestClient_||PL())i.server_=new L_(i.repoInfo_,(n,r,s,o)=>{QT(i,n,r,s,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>XT(i,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vt(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new cv(i.repoInfo_,e,(n,r,s,o)=>{QT(i,n,r,s,o)},n=>{XT(i,n)},n=>{wU(i,n)},i.authTokenProvider_,i.appCheckProvider_,t),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=NL(i.repoInfo_,()=>new B_(i.stats_,i.server_)),i.infoData_=new V_,i.infoSyncTree_=new yu({startListening:(n,r,s,o)=>{let c=[],l=i.infoData_.getNode(n._path);return l.isEmpty()||(c=bu(i.infoSyncTree_,n._path,l),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),pv(i,"connected",!1),i.serverSyncTree_=new yu({startListening:(n,r,s,o)=>(i.server_.listen(n,s,r,(c,l)=>{let d=o(c,l);zr(i.eventQueue_,n._path,d)}),[]),stopListening:(n,r)=>{i.server_.unlisten(n,r)}})}function bU(i){let t=i.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function eS(i){return tU({timestamp:bU(i)})}function QT(i,e,t,n,r){i.dataUpdateCount++;let s=new Pe(e);t=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(n){let l=na(t,d=>Vt(d));o=eU(i.serverSyncTree_,s,l,r)}else{let l=Vt(t);o=JV(i.serverSyncTree_,s,l,r)}else if(n){let l=na(t,d=>Vt(d));o=ZV(i.serverSyncTree_,s,l)}else{let l=Vt(t);o=bu(i.serverSyncTree_,s,l)}let c=s;o.length>0&&(c=_v(i,s)),zr(i.eventQueue_,c,o)}function XT(i,e){pv(i,"connected",e),e===!1&&EU(i)}function wU(i,e){vi(e,(t,n)=>{pv(i,t,n)})}function pv(i,e,t){let n=new Pe("/.info/"+e),r=Vt(t);i.infoData_.updateSnapshot(n,r);let s=bu(i.infoSyncTree_,n,r);zr(i.eventQueue_,n,s)}function IU(i){return i.nextWriteId_++}function EU(i){tS(i,"onDisconnectEvents");let e=eS(i),t=pu();U_(i.onDisconnect_,Re(),(r,s)=>{let o=rU(r,s,i.serverSyncTree_,e);RA(t,r,o)});let n=[];U_(t,Re(),(r,s)=>{n=n.concat(bu(i.serverSyncTree_,r,s));let o=SU(i,r);_v(i,o)}),i.onDisconnect_=pu(),zr(i.eventQueue_,Re(),n)}function CU(i){i.persistentConnection_&&i.persistentConnection_.interrupt(_U)}function tS(i,...e){let t="";i.persistentConnection_&&(t=i.persistentConnection_.id+":"),Lt(t,...e)}function iS(i,e,t){return $A(i.serverSyncTree_,e,t)||Ye.EMPTY_NODE}function gv(i,e=i.transactionQueueTree_){if(e||Eu(i,e),ho(e)){let t=rS(i,e);L(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&TU(i,Ac(e),t)}else QA(e)&&Iu(e,t=>{gv(i,t)})}function TU(i,e,t){let n=t.map(d=>d.currentWriteId),r=iS(i,e,n),s=r,o=r.hash();for(let d=0;d<t.length;d++){let h=t[d];L(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let m=gi(e,h.path);s=s.updateChild(m,h.currentOutputSnapshotRaw)}let c=s.val(!0),l=e;i.server_.put(l.toString(),c,d=>{tS(i,"transaction put response",{path:l.toString(),status:d});let h=[];if(d==="ok"){let m=[];for(let p=0;p<t.length;p++)t[p].status=2,h=h.concat(eo(i.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&m.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();Eu(i,mv(i.transactionQueueTree_,e)),gv(i,i.transactionQueueTree_),zr(i.eventQueue_,e,h);for(let p=0;p<m.length;p++)Cc(m[p])}else{if(d==="datastale")for(let m=0;m<t.length;m++)t[m].status===3?t[m].status=4:t[m].status=0;else{hi("transaction at "+l.toString()+" failed: "+d);for(let m=0;m<t.length;m++)t[m].status=4,t[m].abortReason=d}_v(i,e)}},o)}function _v(i,e){let t=nS(i,e),n=Ac(t),r=rS(i,t);return AU(i,r,n),n}function AU(i,e,t){if(e.length===0)return;let n=[],r=[],o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){let l=e[c],d=gi(t,l.path),h=!1,m;if(L(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,m=l.abortReason,r=r.concat(eo(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=vU)h=!0,m="maxretry",r=r.concat(eo(i.serverSyncTree_,l.currentWriteId,!0));else{let p=iS(i,l.path,o);l.currentInputSnapshot=p;let w=e[c].update(p.val());if(w!==void 0){JA("transaction failed: Data returned ",w,l.path);let T=Vt(w);typeof w=="object"&&w!=null&&Ui(w,".priority")||(T=T.updatePriority(p.getPriority()));let x=l.currentWriteId,j=eS(i),K=sU(T,p,j);l.currentOutputSnapshotRaw=T,l.currentOutputSnapshotResolved=K,l.currentWriteId=IU(i),o.splice(o.indexOf(x),1),r=r.concat(XV(i.serverSyncTree_,l.path,K,l.currentWriteId,l.applyLocally)),r=r.concat(eo(i.serverSyncTree_,x,!0))}else h=!0,m="nodata",r=r.concat(eo(i.serverSyncTree_,l.currentWriteId,!0))}zr(i.eventQueue_,t,r),r=[],h&&(e[c].status=2,function(p){setTimeout(p,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(m==="nodata"?n.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):n.push(()=>e[c].onComplete(new Error(m),!1,null))))}Eu(i,i.transactionQueueTree_);for(let c=0;c<n.length;c++)Cc(n[c]);gv(i,i.transactionQueueTree_)}function nS(i,e){let t,n=i.transactionQueueTree_;for(t=ve(e);t!==null&&ho(n)===void 0;)n=mv(n,t),e=Ve(e),t=ve(e);return n}function rS(i,e){let t=[];return sS(i,e,t),t.sort((n,r)=>n.order-r.order),t}function sS(i,e,t){let n=ho(e);if(n)for(let r=0;r<n.length;r++)t.push(n[r]);Iu(e,r=>{sS(i,r,t)})}function Eu(i,e){let t=ho(e);if(t){let n=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[n]=t[r],n++);t.length=n,YA(e,t.length>0?t:void 0)}Iu(e,n=>{Eu(i,n)})}function SU(i,e){let t=Ac(nS(i,e)),n=mv(i.transactionQueueTree_,e);return aU(n,r=>{m_(i,r)}),m_(i,n),XA(n,r=>{m_(i,r)}),t}function m_(i,e){let t=ho(e);if(t){let n=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(L(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(eo(i.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?YA(e,void 0):t.length=s+1,zr(i.eventQueue_,Ac(e),r);for(let o=0;o<n.length;o++)Cc(n[o])}}function RU(i){let e="",t=i.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let r=t[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function xU(i){let e={};i.charAt(0)==="?"&&(i=i.substring(1));for(let t of i.split("&")){if(t.length===0)continue;let n=t.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):hi(`Invalid query segment '${t}' in query '${i}'`)}return e}var ZT=function(i,e){let t=kU(i),n=t.namespace;t.domain==="firebase.com"&&wn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&t.domain!=="localhost"&&wn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||CL();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new cu(t.host,t.secure,n,r,e,"",n!==t.subdomain),path:new Pe(t.pathString)}},kU=function(i){let e="",t="",n="",r="",s="",o=!0,c="https",l=443;if(typeof i=="string"){let d=i.indexOf("//");d>=0&&(c=i.substring(0,d-1),i=i.substring(d+2));let h=i.indexOf("/");h===-1&&(h=i.length);let m=i.indexOf("?");m===-1&&(m=i.length),e=i.substring(0,Math.min(h,m)),h<m&&(r=RU(i.substring(h,m)));let p=xU(i.substring(Math.min(i.length,m)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",l=parseInt(e.substring(d+1),10)):d=e.length;let w=e.slice(0,d);if(w.toLowerCase()==="localhost")t="localhost";else if(w.split(".").length<=2)t=w;else{let T=e.indexOf(".");n=e.substring(0,T).toLowerCase(),t=e.substring(T+1),s=n}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:t,subdomain:n,secure:o,scheme:c,pathString:r,namespace:s}};var iv=class i{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return ge(this._path)?null:yA(this._path)}get ref(){return new lo(this._repo,this._path)}get _queryIdentifier(){let e=VT(this._queryParams),t=ov(e);return t==="{}"?"default":t}get _queryObject(){return VT(this._queryParams)}isEqual(e){if(e=de(e),!(e instanceof i))return!1;let t=this._repo===e._repo,n=IA(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+iV(this._path)}};var lo=class i extends iv{constructor(e,t){super(e,t,new F_,!1)}get parent(){let e=wA(this._path);return e===null?null:new i(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};YV(lo);QV(lo);var DU="FIREBASE_DATABASE_EMULATOR_HOST",nv={},PU=!1;function MU(i,e,t,n){i.repoInfo_=new cu(`${e}:${t}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),n&&(i.authTokenProvider_=n)}function NU(i,e,t,n,r){let s=n||i.options.databaseURL;s===void 0&&(i.options.projectId||wn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lt("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=ZT(s,r),c=o.repoInfo,l,d;typeof process<"u"&&process.env&&(d=process.env[DU]),d?(l=!0,s=`http://${d}?ns=${c.namespace}`,o=ZT(s,r),c=o.repoInfo):l=!o.repoInfo.secure;let h=r&&l?new gc(gc.OWNER):new b_(i.name,i.options,e);fU("Invalid Firebase Database URL",o),ge(o.path)||wn("Database URL must point to the root of a Firebase Database (not including a child path).");let m=FU(c,i,h,new y_(i.name,t));return new rv(m,i)}function OU(i,e){let t=nv[e];(!t||t[i.key]!==i)&&wn(`Database ${e}(${i.repoInfo_}) has already been deleted.`),CU(i),delete t[i.key]}function FU(i,e,t,n){let r=nv[e.name];r||(r={},nv[e.name]=r);let s=r[i.toURLString()];return s&&wn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new tv(i,PU,t,n),r[i.toURLString()]=s,s}var rv=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lo(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(OU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&wn("Cannot call "+e+" on a deleted database.")}};function oS(i=dt(),e){let t=lt(i,"database").getImmediate({identifier:e});if(!t._instanceStarted){let n=On("database");n&&aS(t,...n)}return t}function aS(i,e,t,n={}){i=de(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&wn("Cannot call useEmulator() after instance has already been initialized.");let r=i._repoInternal,s;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&wn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new gc(gc.OWNER);else if(n.mockUserToken){let o=typeof n.mockUserToken=="string"?n.mockUserToken:hs(n.mockUserToken,i.app.options.projectId);s=new gc(o)}MU(r,e,t,s)}function LU(i){wL(Jt),rt(new nt("database",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return NU(n,r,s,t)},"PUBLIC").setMultipleInstances(!0)),H(bT,wT,i),H(bT,wT,"esm2017")}cv.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};cv.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};LU();var Sc=class{constructor(e){return e}},cS="database",vv=class{constructor(){return st(cS)}};var yv=new V("angularfire2.database-instances");function VU(i,e){let t=ut(cS,i,e);return t&&new Sc(t)}function UU(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Sc(n)}}var jU={provide:vv,deps:[[new J,yv]]},BU={provide:Sc,useFactory:VU,deps:[[new J,yv],Le]};function lS(i,...e){return H("angularfire",Ne.full,"rtdb"),ke([BU,jU,{provide:yv,useFactory:UU(i),multi:!0,deps:[U,ce,Je,We,[new J,Si],[new J,ei],...e]}])}var dS=Ie(oS,!0);var fS="functions";var bv=class{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||t.get().then(r=>this.messaging=r,()=>{}),this.appCheck||n.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return v(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return v(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return v(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return v(this,null,function*(){let t=yield this.getAuthToken(),n=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:r}})}};var wv="us-central1";var Iv=class{constructor(e,t,n,r,s=wv,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new bv(t,n,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{let c=new URL(s);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=wv}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function zU(i,e,t){i.emulatorOrigin=`http://${e}:${t}`}var uS="@firebase/functions",hS="0.11.8";var $U="auth-internal",qU="app-check-internal",HU="messaging-internal";function GU(i,e){let t=(n,{instanceIdentifier:r})=>{let s=n.getProvider("app").getImmediate(),o=n.getProvider($U),c=n.getProvider(HU),l=n.getProvider(qU);return new Iv(s,o,c,l,r,i)};rt(new nt(fS,t,"PUBLIC").setMultipleInstances(!0)),H(uS,hS,e),H(uS,hS,"esm2017")}function mS(i=dt(),e=wv){let n=lt(de(i),fS).getImmediate({identifier:e}),r=On("functions");return r&&pS(n,...r),n}function pS(i,e,t){zU(de(i),e,t)}GU(fetch.bind(self));var Rc=class{constructor(e){return e}},gS="functions",Ev=class{constructor(){return st(gS)}};var Cv=new V("angularfire2.functions-instances");function WU(i,e){let t=ut(gS,i,e);return t&&new Rc(t)}function KU(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Rc(n)}}var YU={provide:Ev,deps:[[new J,Cv]]},QU={provide:Rc,useFactory:WU,deps:[[new J,Cv],Le]};function _S(i,...e){return H("angularfire",Ne.full,"fn"),ke([QU,YU,{provide:Cv,useFactory:KU(i),multi:!0,deps:[U,ce,Je,We,[new J,Si],[new J,ei],...e]}])}var vS=Ie(mS,!0);var XU="/firebase-messaging-sw.js",ZU="/firebase-cloud-messaging-push-scope",CS="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",JU="https://fcmregistrations.googleapis.com/v1",TS="google.c.a.c_id",ej="google.c.a.c_l",tj="google.c.a.ts",ij="google.c.a.e";var Cu=function(i){return i.PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked",i}(Cu||{});function In(i){let e=new Uint8Array(i);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nj(i){let e="=".repeat((4-i.length%4)%4),t=(i+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}var Tv="fcm_token_details_db",rj=5,yS="fcm_token_object_Store";function sj(i){return v(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Tv))return null;let e=null;return(yield Jh(Tv,rj,{upgrade:(n,r,s,o)=>v(this,null,function*(){var c;if(r<2||!n.objectStoreNames.contains(yS))return;let l=o.objectStore(yS),d=yield l.index("fcmSenderId").get(i);if(yield l.clear(),!!d){if(r===2){let h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(c=h.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:In(h.vapidKey)}}}else if(r===3){let h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:In(h.auth),p256dh:In(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:In(h.vapidKey)}}}else if(r===4){let h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:In(h.auth),p256dh:In(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:In(h.vapidKey)}}}}})})).close(),yield El(Tv),yield El("fcm_vapid_details_db"),yield El("undefined"),oj(e)?e:null})}function oj(i){if(!i||!i.subscriptionOptions)return!1;let{subscriptionOptions:e}=i;return typeof i.createTime=="number"&&i.createTime>0&&typeof i.token=="string"&&i.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var aj="firebase-messaging-database",cj=1,xc="firebase-messaging-store",Av=null;function AS(){return Av||(Av=Jh(aj,cj,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(xc)}}})),Av}function lj(i){return v(this,null,function*(){let e=SS(i),n=yield(yield AS()).transaction(xc).objectStore(xc).get(e);if(n)return n;{let r=yield sj(i.appConfig.senderId);if(r)return yield xv(i,r),r}})}function xv(i,e){return v(this,null,function*(){let t=SS(i),r=(yield AS()).transaction(xc,"readwrite");return yield r.objectStore(xc).put(e,t),yield r.done,e})}function SS({appConfig:i}){return i.appId}var dj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ht=new Vi("messaging","Messaging",dj);function uj(i,e){return v(this,null,function*(){let t=yield Dv(i),n=RS(e),r={method:"POST",headers:t,body:JSON.stringify(n)},s;try{s=yield(yield fetch(kv(i.appConfig),r)).json()}catch(o){throw Ht.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Ht.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Ht.create("token-subscribe-no-token");return s.token})}function hj(i,e){return v(this,null,function*(){let t=yield Dv(i),n=RS(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(n)},s;try{s=yield(yield fetch(`${kv(i.appConfig)}/${e.token}`,r)).json()}catch(o){throw Ht.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Ht.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Ht.create("token-update-no-token");return s.token})}function fj(i,e){return v(this,null,function*(){let n={method:"DELETE",headers:yield Dv(i)};try{let s=yield(yield fetch(`${kv(i.appConfig)}/${e}`,n)).json();if(s.error){let o=s.error.message;throw Ht.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw Ht.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function kv({projectId:i}){return`${JU}/projects/${i}/registrations`}function Dv(t){return v(this,arguments,function*({appConfig:i,installations:e}){let n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})}function RS({p256dh:i,auth:e,endpoint:t,vapidKey:n}){let r={web:{endpoint:t,auth:e,p256dh:i}};return n!==CS&&(r.web.applicationPubKey=n),r}var mj=7*24*60*60*1e3;function pj(i){return v(this,null,function*(){let e=yield _j(i.swRegistration,i.vapidKey),t={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:e.endpoint,auth:In(e.getKey("auth")),p256dh:In(e.getKey("p256dh"))},n=yield lj(i.firebaseDependencies);if(n){if(vj(n.subscriptionOptions,t))return Date.now()>=n.createTime+mj?gj(i,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{yield fj(i.firebaseDependencies,n.token)}catch(r){console.warn(r)}return bS(i.firebaseDependencies,t)}else return bS(i.firebaseDependencies,t)})}function gj(i,e){return v(this,null,function*(){try{let t=yield hj(i.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield xv(i.firebaseDependencies,n),t}catch(t){throw t}})}function bS(i,e){return v(this,null,function*(){let n={token:yield uj(i,e),createTime:Date.now(),subscriptionOptions:e};return yield xv(i,n),n.token})}function _j(i,e){return v(this,null,function*(){let t=yield i.pushManager.getSubscription();return t||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nj(e)})})}function vj(i,e){let t=e.vapidKey===i.vapidKey,n=e.endpoint===i.endpoint,r=e.auth===i.auth,s=e.p256dh===i.p256dh;return t&&n&&r&&s}function wS(i){let e={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return yj(e,i),bj(e,i),wj(e,i),e}function yj(i,e){if(!e.notification)return;i.notification={};let t=e.notification.title;t&&(i.notification.title=t);let n=e.notification.body;n&&(i.notification.body=n);let r=e.notification.image;r&&(i.notification.image=r);let s=e.notification.icon;s&&(i.notification.icon=s)}function bj(i,e){e.data&&(i.data=e.data)}function wj(i,e){var t,n,r,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;i.fcmOptions={};let c=(r=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;c&&(i.fcmOptions.link=c);let l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(i.fcmOptions.analyticsLabel=l)}function Ij(i){return typeof i=="object"&&!!i&&TS in i}xS("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");xS("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function xS(i,e){let t=[];for(let n=0;n<i.length;n++)t.push(i.charAt(n)),n<e.length&&t.push(e.charAt(n));return t.join("")}function Ej(i){if(!i||!i.options)throw Sv("App Configuration Object");if(!i.name)throw Sv("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=i;for(let n of e)if(!t[n])throw Sv(n);return{appName:i.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Sv(i){return Ht.create("missing-app-config-values",{valueName:i})}var Rv=class{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=Ej(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}};function Cj(i){return v(this,null,function*(){try{i.swRegistration=yield navigator.serviceWorker.register(XU,{scope:ZU}),i.swRegistration.update().catch(()=>{})}catch(e){throw Ht.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function Tj(i,e){return v(this,null,function*(){if(!e&&!i.swRegistration&&(yield Cj(i)),!(!e&&i.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ht.create("invalid-sw-registration");i.swRegistration=e}})}function Aj(i,e){return v(this,null,function*(){e?i.vapidKey=e:i.vapidKey||(i.vapidKey=CS)})}function Sj(i,e){return v(this,null,function*(){if(!navigator)throw Ht.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Ht.create("permission-blocked");return yield Aj(i,e?.vapidKey),yield Tj(i,e?.serviceWorkerRegistration),pj(i)})}function Rj(i,e,t){return v(this,null,function*(){let n=xj(e);(yield i.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:t[TS],message_name:t[ej],message_time:t[tj],message_device_time:Math.floor(Date.now()/1e3)})})}function xj(i){switch(i){case Cu.NOTIFICATION_CLICKED:return"notification_open";case Cu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function kj(i,e){return v(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;i.onMessageHandler&&t.messageType===Cu.PUSH_RECEIVED&&(typeof i.onMessageHandler=="function"?i.onMessageHandler(wS(t)):i.onMessageHandler.next(wS(t)));let n=t.data;Ij(n)&&n[ij]==="1"&&(yield Rj(i,t.messageType,n))})}var IS="@firebase/messaging",ES="0.12.11";var Dj=i=>{let e=new Rv(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>kj(e,t)),e},Pj=i=>{let e=i.getProvider("messaging").getImmediate();return{getToken:n=>Sj(e,n)}};function Mj(){rt(new nt("messaging",Dj,"PUBLIC")),rt(new nt("messaging-internal",Pj,"PRIVATE")),H(IS,ES),H(IS,ES,"esm2017")}function Pv(){return v(this,null,function*(){try{yield lr()}catch{return!1}return typeof window<"u"&&an()&&ta()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function kS(i=dt()){return Pv().then(e=>{if(!e)throw Ht.create("unsupported-browser")},e=>{throw Ht.create("indexed-db-unsupported")}),lt(de(i),"messaging").getImmediate()}Mj();var kc=class{constructor(e){return e}},DS="messaging",Mv=class{constructor(){return st(DS)}};var PS="__angularfire_symbol__messagingIsSupported",Nv="__angularfire_symbol__messagingIsSupportedValue";globalThis[PS]||=Pv().then(i=>globalThis[Nv]=i).catch(()=>globalThis[Nv]=!1);var Tu={async:()=>globalThis[PS],sync:()=>{let i=globalThis[Nv];if(i===void 0)throw new Error(Cs("Messaging"));return i}},Ov=new V("angularfire2.messaging-instances");function Nj(i,e){if(!Tu.sync())return null;let t=ut(DS,i,e);return t&&new kc(t)}function Oj(i){return(e,t)=>{if(!Tu.sync())return null;let n=e.runOutsideAngular(()=>i(t));return new kc(n)}}var Fj={provide:Mv,deps:[[new J,Ov]]},Lj={provide:kc,useFactory:Nj,deps:[[new J,Ov],Le]};function MS(i,...e){return H("angularfire",Ne.full,"fcm"),ke([Lj,Fj,{provide:cr,useValue:Tu.async,multi:!0},{provide:Ov,useFactory:Oj(i),multi:!0,deps:[U,ce,Je,We,...e]}])}var K5=Tu.async;var NS=Ie(kS,!0);var Dc=class{constructor(e){return e}},OS="performance",Fv=class{constructor(){return st(OS)}};var Lv=new V("angularfire2.performance-instances");function Vj(i,e,t){if(!Zo(t))return null;let n=ut(OS,i,e);return n&&new Dc(n)}function Uj(i){return(e,t,n)=>{if(!Zo(t))return null;let r=e.runOutsideAngular(()=>i(n));return new Dc(r)}}var jj={provide:Fv,deps:[[new J,Lv]]},Bj={provide:Dc,useFactory:Vj,deps:[[new J,Lv],Le,fi]};function FS(i,...e){return H("angularfire",Ne.full,"perf"),ke([Bj,jj,{provide:Lv,useFactory:Uj(i),multi:!0,deps:[U,fi,ce,Je,We,...e]}])}var LS=Ie(rI,!0);var $S="firebasestorage.googleapis.com",zj="storageBucket",$j=2*60*1e3,qj=10*60*1e3;var Yi=class i extends Zt{constructor(e,t,n=0){super(Vv(e),`Firebase Storage: ${t} (${Vv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,i.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Cn=function(i){return i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment",i}(Cn||{});function Vv(i){return"storage/"+i}function Hj(){let i="An unknown error occurred, please check the error payload for server response.";return new Yi(Cn.UNKNOWN,i)}function Gj(){return new Yi(Cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wj(){return new Yi(Cn.CANCELED,"User canceled the upload/download.")}function Kj(i){return new Yi(Cn.INVALID_URL,"Invalid URL '"+i+"'.")}function Yj(i){return new Yi(Cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function VS(i){return new Yi(Cn.INVALID_ARGUMENT,i)}function qS(){return new Yi(Cn.APP_DELETED,"The Firebase app was deleted.")}function Qj(i){return new Yi(Cn.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var En=class i{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=i.makeFromUrl(e,t)}catch{return new i(e,"")}if(n.path==="")return n;throw Yj(e)}static makeFromUrl(e,t){let n=null,r="([A-Za-z0-9.\\-_]+)";function s(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function d(oe){oe.path_=decodeURIComponent(oe.path)}let h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",w=new RegExp(`^https?://${m}/${h}/b/${r}/o${p}`,"i"),T={bucket:1,path:3},k=t===$S?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",j=new RegExp(`^https?://${k}/${r}/${x}`,"i"),G=[{regex:c,indices:l,postModify:s},{regex:w,indices:T,postModify:d},{regex:j,indices:{bucket:1,path:2},postModify:d}];for(let oe=0;oe<G.length;oe++){let at=G[oe],be=at.regex.exec(e);if(be){let E=be[at.indices.bucket],_=be[at.indices.path];_||(_=""),n=new i(E,_),at.postModify(n);break}}if(n==null)throw Kj(e);return n}},Uv=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Xj(i,e,t){let n=1,r=null,s=null,o=!1,c=0;function l(){return c===2}let d=!1;function h(...x){d||(d=!0,e.apply(null,x))}function m(x){r=setTimeout(()=>{r=null,i(w,l())},x)}function p(){s&&clearTimeout(s)}function w(x,...j){if(d){p();return}if(x){p(),h.call(null,x,...j);return}if(l()||o){p(),h.call(null,x,...j);return}n<64&&(n*=2);let G;c===1?(c=2,G=0):G=(n+Math.random())*1e3,m(G)}let T=!1;function k(x){T||(T=!0,p(),!d&&(r!==null?(x||(c=2),clearTimeout(r),m(0)):x||(c=1)))}return m(0),s=setTimeout(()=>{o=!0,k(!0)},t),k}function Zj(i){i(!1)}function Jj(i){return i!==void 0}function US(i,e,t,n){if(n<e)throw VS(`Invalid value for '${i}'. Expected ${e} or greater.`);if(n>t)throw VS(`Invalid value for '${i}'. Expected ${t} or less.`)}function eB(i){let e=encodeURIComponent,t="?";for(let n in i)if(i.hasOwnProperty(n)){let r=e(n)+"="+e(i[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var jv=function(i){return i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT",i}(jv||{});function tB(i,e){let t=i>=500&&i<600,r=[408,429].indexOf(i)!==-1,s=e.indexOf(i)!==-1;return t||r||s}var Bv=class{constructor(e,t,n,r,s,o,c,l,d,h,m,p=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,T)=>{this.resolve_=w,this.reject_=T,this.start_()})}start_(){let e=(n,r)=>{if(r){n(!1,new fo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===jv.NO_ERROR,l=s.getStatus();if(!c||tB(l,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===jv.ABORT;n(!1,new fo(!1,null,h));return}let d=this.successCodes_.indexOf(l)!==-1;n(!0,new fo(d,s))})},t=(n,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());Jj(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=Hj();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(r.canceled){let l=this.appDelete_?qS():Wj();o(l)}else{let l=Gj();o(l)}};this.canceled_?t(!1,new fo(!1,null,!0)):this.backoffId_=Xj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Zj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},fo=class{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}};function iB(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function nB(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rB(i,e){e&&(i["X-Firebase-GMPID"]=e)}function sB(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function oB(i,e,t,n,r,s,o=!0){let c=eB(i.urlParams),l=i.url+c,d=Object.assign({},i.headers);return rB(d,e),iB(d,t),nB(d,s),sB(d,n),new Bv(l,i.method,d,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,r,o)}function aB(i){if(i.length===0)return null;let e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function cB(i){let e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}var uK=256*1024;var zv=class i{constructor(e,t){this._service=e,t instanceof En?this._location=t:this._location=En.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new i(e,t)}get root(){let e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cB(this._location.path)}get storage(){return this._service}get parent(){let e=aB(this._location.path);if(e===null)return null;let t=new En(this._location.bucket,e);return new i(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Qj(e)}};function jS(i,e){let t=e?.[zj];return t==null?null:En.makeFromBucketSpec(t,i)}function lB(i,e,t,n={}){i.host=`${e}:${t}`,i._protocol="http";let{mockUserToken:r}=n;r&&(i._overrideAuthToken=typeof r=="string"?r:hs(r,i.app.options.projectId))}var $v=class{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=$S,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$j,this._maxUploadRetryTime=qj,this._requests=new Set,r!=null?this._bucket=En.makeFromBucketSpec(r,this._host):this._bucket=jS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=jS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){US("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){US("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zv(this,e)}_makeRequest(e,t,n,r,s=!0){if(this._deleted)return new Uv(qS());{let o=oB(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return v(this,null,function*(){let[n,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()})}},BS="@firebase/storage",zS="0.13.2";var HS="storage";function GS(i=dt(),e){i=de(i);let n=lt(i,HS).getImmediate({identifier:e}),r=On("storage");return r&&WS(n,...r),n}function WS(i,e,t,n={}){lB(i,e,t,n)}function dB(i,{instanceIdentifier:e}){let t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new $v(t,n,r,e,Jt)}function uB(){rt(new nt(HS,dB,"PUBLIC").setMultipleInstances(!0)),H(BS,zS,""),H(BS,zS,"esm2017")}uB();var Pc=class{constructor(e){return e}},KS="storage",qv=class{constructor(){return st(KS)}};var Hv=new V("angularfire2.storage-instances");function hB(i,e){let t=ut(KS,i,e);return t&&new Pc(t)}function fB(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Pc(n)}}var mB={provide:qv,deps:[[new J,Hv]]},pB={provide:Pc,useFactory:hB,deps:[[new J,Hv],Le]};function YS(i,...e){return H("angularfire",Ne.full,"gcs"),ke([pB,mB,{provide:Hv,useFactory:fB(i),multi:!0,deps:[U,ce,Je,We,[new J,Si],[new J,ei],...e]}])}var QS=Ie(GS,!0);var Gv="@firebase/remote-config",XS="0.4.9";var ZS="remote-config";var gB={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},ni=new Vi("remoteconfig","Remote Config",gB);function JS(i=dt()){return i=de(i),lt(i,ZS).getImmediate()}function eR(i){let e=de(i);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var Wv=class{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){return v(this,null,function*(){let[t,n]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;let r=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(s),r})}};function _B(i=navigator){return i.languages&&i.languages[0]||i.language}var Kv=class{constructor(e,t,n,r,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){return v(this,null,function*(){let[t,n]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:_B()},l={method:"POST",headers:o,body:JSON.stringify(c)},d=fetch(s,l),h=new Promise((x,j)=>{e.signal.addEventListener(()=>{let K=new Error("The operation was aborted.");K.name="AbortError",j(K)})}),m;try{yield Promise.race([d,h]),m=yield d}catch(x){let j="fetch-client-network";throw x?.name==="AbortError"&&(j="fetch-timeout"),ni.create(j,{originalErrorMessage:x?.message})}let p=m.status,w=m.headers.get("ETag")||void 0,T,k;if(m.status===200){let x;try{x=yield m.json()}catch(j){throw ni.create("fetch-client-parse",{originalErrorMessage:j?.message})}T=x.entries,k=x.state}if(k==="INSTANCE_STATE_UNSPECIFIED"?p=500:k==="NO_CHANGE"?p=304:(k==="NO_TEMPLATE"||k==="EMPTY_CONFIG")&&(T={}),p!==304&&p!==200)throw ni.create("fetch-status",{httpStatus:p});return{status:p,eTag:w,config:T}})}};function vB(i,e){return new Promise((t,n)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(t,r);i.addEventListener(()=>{clearTimeout(s),n(ni.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function yB(i){if(!(i instanceof Zt)||!i.customData)return!1;let e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}var Yv=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return v(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(r,s){return v(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n}){yield vB(e.signal,t);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!yB(o))throw o;let c={throttleEndTimeMillis:Date.now()+oa(n),backoffCount:n+1};return yield this.storage.setThrottleMetadata(c),this.attemptFetch(e,c)}})}};var bB=60*1e3,wB=12*60*60*1e3,Qv=class{constructor(e,t,n,r,s){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:bB,minimumFetchIntervalMillis:wB},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Au(i,e){let t=i.target.error||void 0;return ni.create(e,{originalErrorMessage:t&&t?.message})}var $r="app_namespace_store",IB="firebase_remote_config",EB=1;function CB(){return new Promise((i,e)=>{try{let t=indexedDB.open(IB,EB);t.onerror=n=>{e(Au(n,"storage-open"))},t.onsuccess=n=>{i(n.target.result)},t.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore($r,{keyPath:"compositeKey"})}}}catch(t){e(ni.create("storage-open",{originalErrorMessage:t?.message}))}})}var Xv=class{constructor(e,t,n,r=CB()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return v(this,null,function*(){let t=yield this.openDbPromise;return new Promise((n,r)=>{let o=t.transaction([$r],"readonly").objectStore($r),c=this.createCompositeKey(e);try{let l=o.get(c);l.onerror=d=>{r(Au(d,"storage-get"))},l.onsuccess=d=>{let h=d.target.result;n(h?h.value:void 0)}}catch(l){r(ni.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(e,t){return v(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,s)=>{let c=n.transaction([$r],"readwrite").objectStore($r),l=this.createCompositeKey(e);try{let d=c.put({compositeKey:l,value:t});d.onerror=h=>{s(Au(h,"storage-set"))},d.onsuccess=()=>{r()}}catch(d){s(ni.create("storage-set",{originalErrorMessage:d?.message}))}})})}delete(e){return v(this,null,function*(){let t=yield this.openDbPromise;return new Promise((n,r)=>{let o=t.transaction([$r],"readwrite").objectStore($r),c=this.createCompositeKey(e);try{let l=o.delete(c);l.onerror=d=>{r(Au(d,"storage-delete"))},l.onsuccess=()=>{n()}}catch(l){r(ni.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var Zv=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return v(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=yield e;r&&(this.lastFetchStatus=r);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield n;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function TB(){rt(new nt(ZS,i,"PUBLIC").setMultipleInstances(!0)),H(Gv,XS),H(Gv,XS,"esm2017");function i(e,{instanceIdentifier:t}){let n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ni.create("registration-window");if(!an())throw ni.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:c}=n.options;if(!s)throw ni.create("registration-project-id");if(!o)throw ni.create("registration-api-key");if(!c)throw ni.create("registration-app-id");t=t||"firebase";let l=new Xv(c,n.name,t),d=new Zv(l),h=new ji(Gv);h.logLevel=Mt.ERROR;let m=new Kv(r,Jt,t,s,o,c),p=new Yv(m,l),w=new Wv(p,l,d,h),T=new Qv(n,w,d,l,h);return eR(T),T}}function tR(){return v(this,null,function*(){if(!an())return!1;try{return yield lr()}catch{return!1}})}TB();var Mc=class{constructor(e){return e}},iR="remote-config",Jv=class{constructor(){return st(iR)}};var ey="__angularfire_symbol__remoteConfigIsSupportedValue",nR="__angularfire_symbol__remoteConfigIsSupported";globalThis[nR]||=tR().then(i=>globalThis[ey]=i).catch(()=>globalThis[ey]=!1);var Su={async:()=>globalThis[nR],sync:()=>{let i=globalThis[ey];if(i===void 0)throw new Error(Cs("RemoteConfig"));return i}},ty=new V("angularfire2.remote-config-instances");function AB(i,e){if(!Su.sync())return null;let t=ut(iR,i,e);return t&&new Mc(t)}function SB(i){return(e,t)=>{if(!Su.sync())return null;let n=e.runOutsideAngular(()=>i(t));return new Mc(n)}}var RB={provide:Jv,deps:[[new J,ty]]},xB={provide:Mc,useFactory:AB,deps:[[new J,ty],Le]};function rR(i,...e){return H("angularfire",Ne.full,"rc"),ke([xB,RB,{provide:cr,useValue:Su.async,multi:!0},{provide:ty,useFactory:SB(i),multi:!0,deps:[U,ce,Je,We,...e]}])}var c9=Su.async;var sR=Ie(JS,!0);var oR="@firebase/vertexai-preview",aR="0.0.4";var cR="vertexAI",lR="us-central1";var iy=class{constructor(e,t,n,r){var s;this.app=e,this.options=r;let o=n?.getImmediate({optional:!0}),c=t?.getImmediate({optional:!0});this.auth=c||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||lR}_delete(){return Promise.resolve()}};var ny=function(i){return i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.OTHER="OTHER",i}(ny||{});var m9=[ny.RECITATION,ny.SAFETY];function dR(i=dt(),e){return i=de(i),lt(i,cR).getImmediate({identifier:e?.location||lR})}function kB(){rt(new nt(cR,(i,{instanceIdentifier:e})=>{let t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new iy(t,n,r,{location:e})},"PUBLIC").setMultipleInstances(!0)),H(oR,aR),H(oR,aR,"esm2017")}kB();var Nc=class{constructor(e){return e}},uR="vertexai",ry=class{constructor(){return st(uR)}};var sy=new V("angularfire2.vertexai-instances");function DB(i,e){let t=ut(uR,i,e);return t&&new Nc(t)}function PB(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Nc(n)}}var MB={provide:ry,deps:[[new J,sy]]},NB={provide:Nc,useFactory:DB,deps:[[new J,sy],Le]};function hR(i,...e){return H("angularfire",Ne.full,"vertexai"),ke([NB,MB,{provide:sy,useFactory:PB(i),multi:!0,deps:[U,ce,Je,We,[new J,ei],...e]}])}var fR=Ie(dR,!0);var OB="@",FB=(()=>{class i{constructor(t,n,r,s,o){this.doc=t,this.delegate=n,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=$(yw,{optional:!0}),this.loadingSchedulerFn=$(LB,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-FJRWZ7XD.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(t):n=t(),n.catch(r=>{throw new je(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,n){let r=this.delegate.createRenderer(t,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new oy(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,n);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(n){pl()}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac})}}return i})(),oy=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,n,r){this.delegate.insertBefore(e,t,n,r)}removeChild(e,t,n){this.delegate.removeChild(e,t,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,n)),this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,n)),this.delegate.listen(e,t,n)}shouldReplay(e){return this.replay!==null&&e.startsWith(OB)}},LB=new V("");function mR(i="animations"){return bw("NgAsyncAnimations"),ke([{provide:gl,useFactory:(e,t,n)=>new FB(e,t,n,i),deps:[fe,Rl,U]},{provide:$t,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var pR={providers:[Pw({eventCoalescing:!0}),QI(XI),ZI(()=>JI({projectId:"chunks-versatile",appId:"1:303209244036:web:558f76e23fdcac43a3a9d1",databaseURL:"https://chunks-versatile.firebaseio.com",storageBucket:"chunks-versatile.appspot.com",apiKey:"AIzaSyCfooycLyNte5WizejI5GVWGF5wYLaJXH4",authDomain:"chunks-versatile.firebaseapp.com",messagingSenderId:"303209244036",measurementId:"G-718SMS4TDL"})),H0(()=>W0()),mE(()=>hE()),fE,zm,hT(()=>pT()),lS(()=>dS()),_S(()=>vS()),MS(()=>NS()),FS(()=>LS()),YS(()=>QS()),rR(()=>sR()),hR(()=>fR()),mR()]};var CR=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(n){return new(n||i)(M(ns),M(le))}}static{this.\u0275dir=he({type:i})}}return i})(),uy=(()=>{class i extends CR{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Fi(i)))(r||i)}})()}static{this.\u0275dir=he({type:i,features:[Yt]})}}return i})(),go=new V("");var VB={provide:go,useExisting:Oi(()=>TR),multi:!0};function UB(){let i=ls()?ls().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var jB=new V(""),TR=(()=>{class i extends CR{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!UB())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(n){return new(n||i)(M(ns),M(le),M(jB,8))}}static{this.\u0275dir=he({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&Ze("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[_t([VB]),Yt]})}}return i})();function Yn(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function AR(i){return i!=null&&typeof i.length=="number"}var jc=new V(""),hy=new V(""),BB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xu=class{static min(e){return zB(e)}static max(e){return $B(e)}static required(e){return qB(e)}static requiredTrue(e){return HB(e)}static email(e){return GB(e)}static minLength(e){return WB(e)}static maxLength(e){return KB(e)}static pattern(e){return YB(e)}static nullValidator(e){return SR(e)}static compose(e){return MR(e)}static composeAsync(e){return NR(e)}};function zB(i){return e=>{if(Yn(e.value)||Yn(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function $B(i){return e=>{if(Yn(e.value)||Yn(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function qB(i){return Yn(i.value)?{required:!0}:null}function HB(i){return i.value===!0?null:{required:!0}}function GB(i){return Yn(i.value)||BB.test(i.value)?null:{email:!0}}function WB(i){return e=>Yn(e.value)||!AR(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function KB(i){return e=>AR(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function YB(i){if(!i)return SR;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(Yn(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function SR(i){return null}function RR(i){return i!=null}function xR(i){return bl(i)?zt(i):i}function kR(i){let e={};return i.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function DR(i,e){return e.map(t=>t(i))}function QB(i){return!i.validate}function PR(i){return i.map(e=>QB(e)?e:t=>e.validate(t))}function MR(i){if(!i)return null;let e=i.filter(RR);return e.length==0?null:function(t){return kR(DR(t,e))}}function fy(i){return i!=null?MR(PR(i)):null}function NR(i){if(!i)return null;let e=i.filter(RR);return e.length==0?null:function(t){let n=DR(t,e).map(xR);return lw(n).pipe(pe(kR))}}function my(i){return i!=null?NR(PR(i)):null}function gR(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function OR(i){return i._rawValidators}function FR(i){return i._rawAsyncValidators}function ay(i){return i?Array.isArray(i)?i:[i]:[]}function ku(i,e){return Array.isArray(i)?i.includes(e):i===e}function _R(i,e){let t=ay(e);return ay(i).forEach(r=>{ku(t,r)||t.push(r)}),t}function vR(i,e){return ay(e).filter(t=>!ku(i,t))}var Du=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=my(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},qr=class extends Du{get formDirective(){return null}get path(){return null}},Hr=class extends Du{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},cy=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},XB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},u3=Ce(N({},XB),{"[class.ng-submitted]":"isSubmitted"}),LR=(()=>{class i extends cy{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||i)(M(Hr,2))}}static{this.\u0275dir=he({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Me("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Yt]})}}return i})();var Oc="VALID",Ru="INVALID",mo="PENDING",Fc="DISABLED",Qn=class{},Pu=class extends Qn{constructor(e,t){super(),this.value=e,this.source=t}},Vc=class extends Qn{constructor(e,t){super(),this.pristine=e,this.source=t}},Uc=class extends Qn{constructor(e,t){super(),this.touched=e,this.source=t}},po=class extends Qn{constructor(e,t){super(),this.status=e,this.source=t}},ly=class extends Qn{constructor(e){super(),this.source=e}},dy=class extends Qn{constructor(e){super(),this.source=e}};function VR(i){return(Vu(i)?i.validators:i)||null}function ZB(i){return Array.isArray(i)?fy(i):i||null}function UR(i,e){return(Vu(e)?e.asyncValidators:i)||null}function JB(i){return Array.isArray(i)?my(i):i||null}function Vu(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function e2(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new je(1e3,"");if(!n[t])throw new je(1001,"")}function t2(i,e,t){i._forEachChild((n,r)=>{if(t[r]===void 0)throw new je(1002,"")})}var Mu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=sn(()=>this.statusReactive()),this.statusReactive=rs(void 0),this._pristine=sn(()=>this.pristineReactive()),this.pristineReactive=rs(!0),this._touched=sn(()=>this.touchedReactive()),this.touchedReactive=rs(!1),this._events=new ue,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ti(this.statusReactive)}set status(e){Ti(()=>this.statusReactive.set(e))}get valid(){return this.status===Oc}get invalid(){return this.status===Ru}get pending(){return this.status==mo}get disabled(){return this.status===Fc}get enabled(){return this.status!==Fc}get pristine(){return Ti(this.pristineReactive)}set pristine(e){Ti(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ti(this.touchedReactive)}set touched(e){Ti(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_R(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_R(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vR(e,this._rawAsyncValidators))}hasValidator(e){return ku(this._rawValidators,e)}hasAsyncValidator(e){return ku(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ce(N({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Uc(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new Uc(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ce(N({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Vc(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Vc(!0,n))}markAsPending(e={}){this.status=mo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new po(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ce(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fc,this.errors=null,this._forEachChild(r=>{r.disable(Ce(N({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pu(this.value,n)),this._events.next(new po(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ce(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Oc,this._forEachChild(n=>{n.enable(Ce(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ce(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oc||this.status===mo)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pu(this.value,t)),this._events.next(new po(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ce(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fc:Oc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=mo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=xR(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new po(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?Fc:this.errors?Ru:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mo)?mo:this._anyControlsHaveStatus(Ru)?Ru:Oc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Vc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Uc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ZB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=JB(this._rawAsyncValidators)}},Nu=class extends Mu{constructor(e,t,n){super(VR(t),UR(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){t2(this,!0,e),Object.keys(e).forEach(n=>{e2(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Uu=new V("CallSetDisabledState",{providedIn:"root",factory:()=>py}),py="always";function i2(i,e){return[...e.path,i]}function Ou(i,e,t=py){gy(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),r2(i,e),o2(i,e),s2(i,e),n2(i,e)}function yR(i,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Lu(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Fu(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function n2(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function gy(i,e){let t=OR(i);e.validator!==null?i.setValidators(gR(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=FR(i);e.asyncValidator!==null?i.setAsyncValidators(gR(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Fu(e._rawValidators,r),Fu(e._rawAsyncValidators,r)}function Lu(i,e){let t=!1;if(i!==null){if(e.validator!==null){let r=OR(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(e.asyncValidator!==null){let r=FR(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}let n=()=>{};return Fu(e._rawValidators,n),Fu(e._rawAsyncValidators,n),t}function r2(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&jR(i,e)})}function s2(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&jR(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function jR(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function o2(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function BR(i,e){i==null,gy(i,e)}function a2(i,e){return Lu(i,e)}function c2(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function l2(i){return Object.getPrototypeOf(i.constructor)===uy}function zR(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function d2(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(s=>{s.constructor===TR?t=s:l2(s)?n=s:r=s}),r||n||t||null}function u2(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var h2={provide:qr,useExisting:Oi(()=>_y)},Lc=Promise.resolve(),_y=(()=>{class i extends qr{get submitted(){return Ti(this.submittedReactive)}constructor(t,n,r){super(),this.callSetDisabledState=r,this._submitted=sn(()=>this.submittedReactive()),this.submittedReactive=rs(!1),this._directives=new Set,this.ngSubmit=new ze,this.form=new Nu({},fy(t),my(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Lc.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Ou(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Lc.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Lc.then(()=>{let n=this._findContainer(t.path),r=new Nu({});BR(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Lc.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Lc.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),zR(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(n){return new(n||i)(M(jc,10),M(hy,10),M(Uu,8))}}static{this.\u0275dir=he({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&Ze("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_t([h2]),Yt]})}}return i})();function bR(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function wR(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var $R=class extends Mu{constructor(e=null,t,n){super(VR(t),UR(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(wR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){wR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var f2=i=>i instanceof $R;var m2={provide:Hr,useExisting:Oi(()=>vy)},IR=Promise.resolve(),vy=(()=>{class i extends Hr{constructor(t,n,r,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new $R,this._registered=!1,this.name="",this.update=new ze,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=d2(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),c2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ou(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){IR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&Xt(n);IR.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?i2(t,this._parent):[t]}static{this.\u0275fac=function(n){return new(n||i)(M(qr,9),M(jc,10),M(hy,10),M(go,10),M(Dt,8),M(Uu,8))}}static{this.\u0275dir=he({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_t([m2]),Yt,si]})}}return i})();var p2={provide:qr,useExisting:Oi(()=>yy)},yy=(()=>{class i extends qr{get submitted(){return Ti(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,n,r){super(),this.callSetDisabledState=r,this._submitted=sn(()=>this._submittedReactive()),this._submittedReactive=rs(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ze,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return Ou(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){yR(t.control||null,t,!1),u2(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this._submittedReactive.set(!0),zR(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new ly(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new dy(this.form))}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,r=this.form.get(t.path);n!==r&&(yR(n||null,t),f2(r)&&(Ou(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);BR(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&a2(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gy(this.form,this),this._oldForm&&Lu(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||i)(M(jc,10),M(hy,10),M(Uu,8))}}static{this.\u0275dir=he({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&Ze("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_t([p2]),Yt,si]})}}return i})();var g2={provide:go,useExisting:Oi(()=>ju),multi:!0};function qR(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function _2(i){return i.split(":")[0]}var ju=(()=>{class i extends uy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n=this._getOptionId(t),r=qR(n,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=_2(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Fi(i)))(r||i)}})()}static{this.\u0275dir=he({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&Ze("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[_t([g2]),Yt]})}}return i})(),HR=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(qR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(ns),M(ju,9))}}static{this.\u0275dir=he({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),v2={provide:go,useExisting:Oi(()=>GR),multi:!0};function ER(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function y2(i){return i.split(":")[0]}var GR=(()=>{class i extends uy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));n=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let r=[],s=n.selectedOptions;if(s!==void 0){let o=s;for(let c=0;c<o.length;c++){let l=o[c],d=this._getOptionValue(l.value);r.push(d)}}else{let o=n.options;for(let c=0;c<o.length;c++){let l=o[c];if(l.selected){let d=this._getOptionValue(l.value);r.push(d)}}}this.value=r,t(r)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=y2(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Fi(i)))(r||i)}})()}static{this.\u0275dir=he({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&Ze("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[_t([v2]),Yt]})}}return i})(),WR=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(ER(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ER(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(ns),M(GR,9))}}static{this.\u0275dir=he({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();var b2=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({})}}return i})();var KR=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Uu,useValue:t.callSetDisabledState??py}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[b2]})}}return i})();var wy;try{wy=typeof Intl<"u"&&Intl.v8BreakIterator}catch{wy=!1}var Oe=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Zo(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||wy)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(P(fi))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var _o,QR=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Iy(){if(_o)return _o;if(typeof document!="object"||!document)return _o=new Set(QR),_o;let i=document.createElement("input");return _o=new Set(QR.filter(e=>(i.setAttribute("type",e),i.type===e))),_o}var Bc;function w2(){if(Bc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bc=!0}))}finally{Bc=Bc||!1}return Bc}function Qi(i){return w2()?i:!!i.capture}var Gr;function XR(){if(Gr==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Gr=!1,Gr;if("scrollBehavior"in document.documentElement.style)Gr=!0;else{let i=Element.prototype.scrollTo;i?Gr=!/\{\s*\[native code\]\s*\}/.test(i.toString()):Gr=!1}}return Gr}var by;function I2(){if(by==null){let i=typeof document<"u"?document.head:null;by=!!(i&&(i.createShadowRoot||i.attachShadow))}return by}function ZR(i){if(I2()){let e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Mi(i){return i.composedPath?i.composedPath()[0]:i.target}function zc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function JR(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Xi(i){return i!=null&&`${i}`!="false"}function vo(i,e=0){return E2(i)?Number(i):arguments.length===2?e:0}function E2(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function yo(i){return Array.isArray(i)?i:[i]}function ot(i){return i==null?"":typeof i=="string"?i:`${i}px`}function yi(i){return i instanceof le?i.nativeElement:i}var C2=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Bu=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({providers:[C2]})}}return i})();var ex=new Set,Wr,T2=(()=>{class i{constructor(t,n){this._platform=t,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):S2}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&A2(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(n){return new(n||i)(P(Oe),P(Wo,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function A2(i,e){if(!ex.has(i))try{Wr||(Wr=document.createElement("style"),e&&Wr.setAttribute("nonce",e),Wr.setAttribute("type","text/css"),document.head.appendChild(Wr)),Wr.sheet&&(Wr.sheet.insertRule(`@media ${i} {body{ }}`,0),ex.add(i))}catch(t){console.error(t)}}function S2(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var ix=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new ue}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return tx(yo(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=tx(yo(t)).map(o=>this._registerQuery(o).observable),s=zo(r);return s=ul(s.pipe(nn(1)),s.pipe(ml(1),jh(0))),s.pipe(pe(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let n=this._mediaMatcher.matchMedia(t),s={observable:new Ii(o=>{let c=l=>this._zone.run(()=>o.next(l));return n.addListener(c),()=>{n.removeListener(c)}}).pipe(nr(n),pe(({matches:o})=>({query:t,matches:o})),Xe(this._destroySubject)),mql:n};return this._queries.set(t,s),s}static{this.\u0275fac=function(n){return new(n||i)(P(T2),P(U))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function tx(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var ox=" ";function x2(i,e,t){let n=Hu(i,e);t=t.trim(),!n.some(r=>r.trim()===t)&&(n.push(t),i.setAttribute(e,n.join(ox)))}function k2(i,e,t){let n=Hu(i,e);t=t.trim();let r=n.filter(s=>s!==t);r.length?i.setAttribute(e,r.join(ox)):i.removeAttribute(e)}function Hu(i,e){return i.getAttribute(e)?.match(/\S+/g)??[]}var ax="cdk-describedby-message",zu="cdk-describedby-host",Ty=0,cx=(()=>{class i{constructor(t,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${Ty++}`,this._document=t,this._id=$(Go)+"-"+Ty++}describe(t,n,r){if(!this._canBeDescribed(t,n))return;let s=Ey(n,r);typeof n!="string"?(nx(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,n,r){if(!n||!this._isElementNode(t))return;let s=Ey(n,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),typeof n=="string"){let o=this._messageRegistry.get(s);o&&o.referenceCount===0&&this._deleteMessageElement(s)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let t=this._document.querySelectorAll(`[${zu}="${this._id}"]`);for(let n=0;n<t.length;n++)this._removeCdkDescribedByReferenceIds(t[n]),t[n].removeAttribute(zu);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,n){let r=this._document.createElement("div");nx(r,this._id),r.textContent=t,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(Ey(t,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;let t="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){let n=Hu(t,"aria-describedby").filter(r=>r.indexOf(ax)!=0);t.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(t,n){let r=this._messageRegistry.get(n);x2(t,"aria-describedby",r.messageElement.id),t.setAttribute(zu,this._id),r.referenceCount++}_removeMessageReference(t,n){let r=this._messageRegistry.get(n);r.referenceCount--,k2(t,"aria-describedby",r.messageElement.id),t.removeAttribute(zu)}_isElementDescribedByMessage(t,n){let r=Hu(t,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&r.indexOf(o)!=-1}_canBeDescribed(t,n){if(!this._isElementNode(t))return!1;if(n&&typeof n=="object")return!0;let r=n==null?"":`${n}`.trim(),s=t.getAttribute("aria-label");return r?!s||s.trim()!==r:!1}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}static{this.\u0275fac=function(n){return new(n||i)(P(fe),P(Oe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Ey(i,e){return typeof i=="string"?`${e||""}/${i}`:i}function nx(i,e){i.id||(i.id=`${ax}-${e}-${Ty++}`)}function Ay(i){return i.buttons===0||i.detail===0}function Sy(i){let e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var D2=new V("cdk-input-modality-detector-options"),P2={ignoreKeys:[18,17,224,91,16]},lx=650,bo=Qi({passive:!0,capture:!0}),M2=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Gt(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Mi(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<lx||(this._modality.next(Ay(o)?"keyboard":"mouse"),this._mostRecentTarget=Mi(o))},this._onTouchstart=o=>{if(Sy(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Mi(o)},this._options=N(N({},P2),s),this.modalityDetected=this._modality.pipe(ml(1)),this.modalityChanged=this.modalityDetected.pipe($o()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,bo),r.addEventListener("mousedown",this._onMousedown,bo),r.addEventListener("touchstart",this._onTouchstart,bo)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,bo),document.removeEventListener("mousedown",this._onMousedown,bo),document.removeEventListener("touchstart",this._onTouchstart,bo))}static{this.\u0275fac=function(n){return new(n||i)(P(Oe),P(U),P(fe),P(D2,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var qu=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(qu||{}),N2=new V("cdk-focus-monitor-default-options"),$u=Qi({passive:!0,capture:!0}),Gu=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ue,this._rootNodeFocusAndBlurListener=c=>{let l=Mi(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=o?.detectionMode||qu.IMMEDIATE}monitor(t,n=!1){let r=yi(t);if(!this._platform.isBrowser||r.nodeType!==1)return Y();let s=ZR(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;let c={checkChildren:n,subject:new ue,rootNode:s};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let n=yi(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){let s=yi(t),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,n,l)):(this._setOrigin(n),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===qu.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused",n==="touch"),t.classList.toggle("cdk-keyboard-focused",n==="keyboard"),t.classList.toggle("cdk-mouse-focused",n==="mouse"),t.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&n,this._detectionMode===qu.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?lx:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,n){let r=this._elementInfo.get(n),s=Mi(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,$u),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,$u)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Xe(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,$u),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,$u),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){let n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||i)(P(U),P(Oe),P(M2),P(fe,8),P(N2,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Kr=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Kr||{}),rx="cdk-high-contrast-black-on-white",sx="cdk-high-contrast-white-on-black",Cy="cdk-high-contrast-active",Ry=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=$(ix).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Kr.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Kr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Kr.BLACK_ON_WHITE}return Kr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Cy,rx,sx),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===Kr.BLACK_ON_WHITE?t.add(Cy,rx):n===Kr.WHITE_ON_BLACK&&t.add(Cy,sx)}}static{this.\u0275fac=function(n){return new(n||i)(P(Oe),P(fe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),dx=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(n){return new(n||i)(P(Ry))}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Bu]})}}return i})();var O2=new V("cdk-dir-doc",{providedIn:"root",factory:F2});function F2(){return $(fe)}var L2=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function V2(i){let e=i?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?L2.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var wo=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new ze,t){let n=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=V2(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(P(O2,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Xn=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({})}}return i})();var U2=["mat-internal-form-field",""],j2=["*"];function B2(){return!0}var z2=new V("mat-sanity-checks",{providedIn:"root",factory:B2}),Ue=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return zc()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(n){return new(n||i)(P(Ry),P(z2,8),P(fe))}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Xn,Xn]})}}return i})();var $c=class{constructor(e,t,n,r,s){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=n?.isErrorState(r,t)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var Wu=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var bi=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(bi||{}),Dy=class{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=bi.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},ux=Qi({passive:!0,capture:!0}),Py=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Mi(e);t&&this._events.get(e.type)?.forEach((n,r)=>{(r===t||r.contains(t))&&n.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,n,r){let s=this._events.get(t);if(s){let o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(t,new Map([[n,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,ux)})}removeHandler(e,t,n){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(n),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,ux)))}},hx={enterDuration:225,exitDuration:150},$2=800,fx=Qi({passive:!0,capture:!0}),mx=["mousedown","touchstart"],px=["mouseup","mouseleave","touchend","touchcancel"],My=class i{static{this._eventManager=new Py}constructor(e,t,n,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=yi(n))}fadeInRipple(e,t,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},hx),n.animation);n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=n.radius||q2(e,t,r),c=e-r.left,l=t-r.top,d=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${c-o}px`,h.style.top=`${l-o}px`,h.style.height=`${o*2}px`,h.style.width=`${o*2}px`,n.color!=null&&(h.style.backgroundColor=n.color),h.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(h);let m=window.getComputedStyle(h),p=m.transitionProperty,w=m.transitionDuration,T=p==="none"||w==="0s"||w==="0s, 0s"||r.width===0&&r.height===0,k=new Dy(this,h,n,T);h.style.transform="scale3d(1, 1, 1)",k.state=bi.FADING_IN,n.persistent||(this._mostRecentTransientRipple=k);let x=null;return!T&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let j=()=>{x&&(x.fallbackTimer=null),clearTimeout(G),this._finishRippleTransition(k)},K=()=>this._destroyRipple(k),G=setTimeout(K,d+100);h.addEventListener("transitionend",j),h.addEventListener("transitioncancel",K),x={onTransitionEnd:j,onTransitionCancel:K,fallbackTimer:G}}),this._activeRipples.set(k,x),(T||!d)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(e.state===bi.FADING_OUT||e.state===bi.HIDDEN)return;let t=e.element,n=N(N({},hx),e.config.animation);t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=bi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=yi(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,mx.forEach(n=>{i._eventManager.addHandler(this._ngZone,n,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{px.forEach(t=>{this._triggerElement.addEventListener(t,this,fx)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===bi.FADING_IN?this._startFadeOutTransition(e):e.state===bi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=bi.VISIBLE,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=bi.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Ay(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+$2;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Sy(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===bi.VISIBLE||e.config.terminateOnPointerUp&&e.state===bi.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(mx.forEach(t=>i._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(px.forEach(t=>e.removeEventListener(t,this,fx)),this._pointerUpEventsRegistered=!1))}};function q2(i,e,t){let n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}var gx=new V("mat-ripple-global-options"),_x=(()=>{class i{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new My(this,n,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:N(N(N({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,n,N(N({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,N(N({},this.rippleConfig),t))}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(U),M(Oe),M(gx,8),M($t,8))}}static{this.\u0275dir=he({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){n&2&&Me("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return i})(),Ku=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Ue,Ue]})}}return i})();var vx=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=tt({type:i,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(n,r){n&2&&Me("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[it],attrs:U2,ngContentSelectors:j2,decls:1,vars:0,template:function(n,r){n&1&&(Ci(),gt(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}}return i})();var Ny=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Ue,Ku,Ue]})}}return i})();var W2=["switch"],K2=["*"];function Y2(i,e){i&1&&(ee(0,"span",10),Gh(),ee(1,"svg",12),Se(2,"path",13),ie(),ee(3,"svg",14),Se(4,"path",15),ie()())}var Q2=new V("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),X2={provide:go,useExisting:Oi(()=>yx),multi:!0},Yu=class{constructor(e,t){this.source=e,this.checked=t}},Z2=0,yx=(()=>{class i{_createChangeEvent(t){return new Yu(this,t)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(t){this._checked=t,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,n,r,s,o,c){this._elementRef=t,this._focusMonitor=n,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new ze,this.toggleChange=new ze,this.tabIndex=parseInt(s)||0,this.color=o.color||"accent",this._noopAnimations=c==="NoopAnimations",this.id=this._uniqueId=`mat-mdc-slide-toggle-${++Z2}`,this.hideIcon=o.hideIcon??!1,this.disabledInteractive=o.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t==="keyboard"||t==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(t){t.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}validate(t){return this.required&&t.value!==!0?{required:!0}:null}registerOnValidatorChange(t){this._validatorOnChange=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new Yu(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(Gu),M(Dt),Ho("tabindex"),M(Q2),M($t,8))}}static{this.\u0275cmp=tt({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(n,r){if(n&1&&Et(W2,5),n&2){let s;He(s=Ge())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(n,r){n&2&&(Pn("id",r.id),It("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),ss(r.color?"mat-"+r.color:""),Me("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",Xt],color:"color",disabled:[2,"disabled","disabled",Xt],disableRipple:[2,"disableRipple","disableRipple",Xt],tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:cs(t)],checked:[2,"checked","checked",Xt],hideIcon:[2,"hideIcon","hideIcon",Xt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[_t([X2,{provide:jc,useExisting:i,multi:!0}]),oi,si,it],ngContentSelectors:K2,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(n,r){if(n&1){let s=os();Ci(),ee(0,"div",1)(1,"button",2,0),Ze("click",function(){return rr(s),sr(r._handleClick())}),Se(3,"span",3),ee(4,"span",4)(5,"span",5)(6,"span",6),Se(7,"span",7),ie(),ee(8,"span",8),Se(9,"span",9),ie(),$e(10,Y2,5,0,"span",10),ie()()(),ee(11,"label",11),Ze("click",function(c){return rr(s),sr(c.stopPropagation())}),gt(12),ie()()}if(n&2){let s=Qo(2);qe("labelPosition",r.labelPosition),ae(),Me("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),qe("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),It("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),ae(8),qe("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),ae(),ct(r.hideIcon?-1:10),ae(),qe("for",r.buttonId),It("id",r._labelId)}},dependencies:[_x,vx],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape, var(--mat-app-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color, var(--mat-app-outline))}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-app-on-surface))}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-app-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-app-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-app-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-app-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-app-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-app-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-app-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-app-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-app-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-app-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-app-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-app-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-app-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color, var(--mat-app-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-app-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}}return i})();var Oy=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[yx,Ue,Ue]})}}return i})();var bx=Qi({passive:!0}),wx=(()=>{class i{constructor(t,n){this._platform=t,this._ngZone=n,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ni;let n=yi(t),r=this._monitoredElements.get(n);if(r)return r.subject;let s=new ue,o="cdk-text-field-autofilled",c=l=>{l.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(o)?(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0}))):l.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",c,bx),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",c,bx)}}),s}stopMonitoring(t){let n=yi(t),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((t,n)=>this.stopMonitoring(n))}static{this.\u0275fac=function(n){return new(n||i)(P(Oe),P(U))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ix=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({})}}return i})();var Fy=class{constructor(e){this._box=e,this._destroyed=new ue,this._resizeSubject=new ue,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Ii(t=>{let n=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),n.unsubscribe(),this._elementObservables.delete(e)}}).pipe(kt(t=>t.some(n=>n.target===e)),qh({bufferSize:1,refCount:!0}),Xe(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Ex=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=$(U),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(t,n){let r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Fy(r)),this._observers.get(r).observe(t)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ez=["notch"],tz=["matFormFieldNotchedOutline",""],iz=["*"],nz=["textField"],rz=["iconPrefixContainer"],sz=["textPrefixContainer"],oz=["iconSuffixContainer"],az=["textSuffixContainer"],cz=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],lz=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function dz(i,e){i&1&&Se(0,"span",21)}function uz(i,e){if(i&1&&(ee(0,"label",20),gt(1,1),$e(2,dz,1,0,"span",21),ie()),i&2){let t=Ei(2);qe("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),It("for",t._control.disableAutomaticLabeling?null:t._control.id),ae(2),ct(!t.hideRequiredMarker&&t._control.required?2:-1)}}function hz(i,e){if(i&1&&$e(0,uz,3,5,"label",20),i&2){let t=Ei();ct(t._hasFloatingLabel()?0:-1)}}function fz(i,e){i&1&&Se(0,"div",7)}function mz(i,e){}function pz(i,e){if(i&1&&$e(0,mz,0,0,"ng-template",13),i&2){Ei(2);let t=Qo(1);qe("ngTemplateOutlet",t)}}function gz(i,e){if(i&1&&(ee(0,"div",9),$e(1,pz,1,1,null,13),ie()),i&2){let t=Ei();qe("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),ae(),ct(t._forceDisplayInfixLabel()?-1:1)}}function _z(i,e){i&1&&(ee(0,"div",10,2),gt(2,2),ie())}function vz(i,e){i&1&&(ee(0,"div",11,3),gt(2,3),ie())}function yz(i,e){}function bz(i,e){if(i&1&&$e(0,yz,0,0,"ng-template",13),i&2){Ei();let t=Qo(1);qe("ngTemplateOutlet",t)}}function wz(i,e){i&1&&(ee(0,"div",14,4),gt(2,4),ie())}function Iz(i,e){i&1&&(ee(0,"div",15,5),gt(2,5),ie())}function Ez(i,e){i&1&&Se(0,"div",16)}function Cz(i,e){if(i&1&&(ee(0,"div",18),gt(1,6),ie()),i&2){let t=Ei();qe("@transitionMessages",t._subscriptAnimationState)}}function Tz(i,e){if(i&1&&(ee(0,"mat-hint",22),Qt(1),ie()),i&2){let t=Ei(2);qe("id",t._hintLabelId),ae(),Nn(t.hintLabel)}}function Az(i,e){if(i&1&&(ee(0,"div",19),$e(1,Tz,2,2,"mat-hint",22),gt(2,7),Se(3,"div",23),gt(4,8),ie()),i&2){let t=Ei();qe("@transitionMessages",t._subscriptAnimationState),ae(),ct(t.hintLabel?1:-1)}}var Xu=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=he({type:i,selectors:[["mat-label"]],standalone:!0})}}return i})();var Sz=new V("MatError");var Rz=0,Cx=(()=>{class i{constructor(){this.align="start",this.id=`mat-mdc-hint-${Rz++}`}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=he({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){n&2&&(Pn("id",r.id),It("align",null),Me("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return i})(),xz=new V("MatPrefix");var kz=new V("MatSuffix");var Px=new V("FloatingLabelParent"),Tx=(()=>{class i{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=$(Ex),this._ngZone=$(U),this._parent=$(Px),this._resizeSubscription=new tn}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Dz(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||i)(M(le))}}static{this.\u0275dir=he({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){n&2&&Me("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return i})();function Dz(i){let e=i;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let n=t.scrollWidth;return t.remove(),n}var Ax="mdc-line-ripple--active",Qu="mdc-line-ripple--deactivating",Sx=(()=>{class i{constructor(t,n){this._elementRef=t,this._handleTransitionEnd=r=>{let s=this._elementRef.nativeElement.classList,o=s.contains(Qu);r.propertyName==="opacity"&&o&&s.remove(Ax,Qu)},n.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(Qu),t.add(Ax)}deactivate(){this._elementRef.nativeElement.classList.add(Qu)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(U))}}static{this.\u0275dir=he({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return i})(),Rx=(()=>{class i{constructor(t,n){this._elementRef=t,this._ngZone=n,this.open=!1}ngAfterViewInit(){let t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){!this.open||!t?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(U))}}static{this.\u0275cmp=tt({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(n&1&&Et(ez,5),n&2){let s;He(s=Ge())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){n&2&&Me("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[it],attrs:tz,ngContentSelectors:iz,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(n,r){n&1&&(Ci(),Se(0,"div",1),ee(1,"div",2,0),gt(3),ie(),Se(4,"div",3))},encapsulation:2,changeDetection:0})}}return i})(),Pz={transitionMessages:Tl("transitionMessages",[sI("enter",hr({opacity:1,transform:"translateY(0%)"})),Al("void => enter",[hr({opacity:0,transform:"translateY(-5px)"}),aa("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Ly=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=he({type:i})}}return i})();var Vy=new V("MatFormField"),Mz=new V("MAT_FORM_FIELD_DEFAULT_OPTIONS"),xx=0,kx="fill",Nz="auto",Dx="fixed",Oz="translateY(-50%)",Mx=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Xi(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Nz}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){let n=this._appearance,r=t||this._defaults?.appearance||kx;this._appearance=r,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||Dx}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||Dx}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,n,r,s,o,c,l,d){this._elementRef=t,this._changeDetectorRef=n,this._dir=s,this._platform=o,this._defaults=c,this._animationMode=l,this._labelChild=ww(Xu),this._hideRequiredMarker=!1,this.color="primary",this._appearance=kx,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${xx++}`,this._hintLabelId=`mat-mdc-hint-${xx++}`,this._subscriptAnimationState="",this._destroyed=new ue,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=$(ce),this.getLabelId=sn(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=sn(()=>!!this._labelChild()),c&&(c.appearance&&(this.appearance=c.appearance),this._hideRequiredMarker=!!c?.hideRequiredMarker,c.color&&(this.color=c.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let n=this._control,r="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(r+t.controlType),n.controlType&&this._elementRef.nativeElement.classList.add(r+n.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),n.ngControl&&n.ngControl.valueChanges&&(this._valueChanges=n.ngControl.valueChanges.pipe(Xe(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),hl(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),_l(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Xe(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let n=this._control?this._control.ngControl:null;return n&&n[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let n=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,r=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let t=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){t.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,c=n?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0,h=o?.getBoundingClientRect().width??0,m=this._dir.value==="rtl"?"-1":"1",p=`${c+l}px`,T=`calc(${m} * (${p} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;t.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${Oz} translateX(${T})
    )`;let k=c+l+d+h;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${k}px)`)}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(Dt),M(U),M(wo),M(Oe),M(Mz,8),M($t,8),M(fe))}}static{this.\u0275cmp=tt({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,s){if(n&1&&(Cw(s,r._labelChild,Xu,5),Mn(s,Ly,5),Mn(s,xz,5),Mn(s,kz,5),Mn(s,Sz,5),Mn(s,Cx,5)),n&2){Tw();let o;He(o=Ge())&&(r._formFieldControl=o.first),He(o=Ge())&&(r._prefixChildren=o),He(o=Ge())&&(r._suffixChildren=o),He(o=Ge())&&(r._errorChildren=o),He(o=Ge())&&(r._hintChildren=o)}},viewQuery:function(n,r){if(n&1&&(Et(nz,5),Et(rz,5),Et(sz,5),Et(oz,5),Et(az,5),Et(Tx,5),Et(Rx,5),Et(Sx,5)),n&2){let s;He(s=Ge())&&(r._textField=s.first),He(s=Ge())&&(r._iconPrefixContainer=s.first),He(s=Ge())&&(r._textPrefixContainer=s.first),He(s=Ge())&&(r._iconSuffixContainer=s.first),He(s=Ge())&&(r._textSuffixContainer=s.first),He(s=Ge())&&(r._floatingLabel=s.first),He(s=Ge())&&(r._notchedOutline=s.first),He(s=Ge())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,r){n&2&&Me("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[_t([{provide:Vy,useExisting:i},{provide:Px,useExisting:i}]),it],ngContentSelectors:lz,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,r){if(n&1){let s=os();Ci(cz),$e(0,hz,1,1,"ng-template",null,0,xw),ee(2,"div",6,1),Ze("click",function(c){return rr(s),sr(r._control.onContainerClick(c))}),$e(4,fz,1,0,"div",7),ee(5,"div",8),$e(6,gz,2,2,"div",9)(7,_z,3,0,"div",10)(8,vz,3,0,"div",11),ee(9,"div",12),$e(10,bz,1,1,null,13),gt(11),ie(),$e(12,wz,3,0,"div",14)(13,Iz,3,0,"div",15),ie(),$e(14,Ez,1,0,"div",16),ie(),ee(15,"div",17),$e(16,Cz,2,1,"div",18)(17,Az,5,2,"div",19),ie()}if(n&2){let s;ae(2),Me("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),ae(2),ct(!r._hasOutline()&&!r._control.disabled?4:-1),ae(2),ct(r._hasOutline()?6:-1),ae(),ct(r._hasIconPrefix?7:-1),ae(),ct(r._hasTextPrefix?8:-1),ae(2),ct(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),ae(2),ct(r._hasTextSuffix?12:-1),ae(),ct(r._hasIconSuffix?13:-1),ae(),ct(r._hasOutline()?-1:14),ae(),Me("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),ae(),ct((s=r._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[Tx,Rx,jw,Sx,Cx],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Pz.transitionMessages]},changeDetection:0})}}return i})(),Uy=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Ue,on,Bu,Ue]})}}return i})();var Lz=new V("MAT_INPUT_VALUE_ACCESSOR"),Vz=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Uz=0,Nx=(()=>{class i{get disabled(){return this._disabled}set disabled(t){this._disabled=Xi(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(xu.required)??!1}set required(t){this._required=Xi(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&Iy().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Xi(t)}get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}constructor(t,n,r,s,o,c,l,d,h,m){this._elementRef=t,this._platform=n,this.ngControl=r,this._autofillMonitor=d,this._ngZone=h,this._formField=m,this._uid=`mat-input-${Uz++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new ue,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(T=>Iy().has(T)),this._iOSKeyupListener=T=>{let k=T.target;!k.value&&k.selectionStart===0&&k.selectionEnd===0&&(k.setSelectionRange(1,1),k.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let p=this._elementRef.nativeElement,w=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&h.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new $c(c,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=w==="select",this._isTextarea=w==="textarea",this._isInFormField=!!m,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=t,t?n.setAttribute("placeholder",t):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Vz.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,n=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&n&&n.label)}else return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(Oe),M(Hr,10),M(_y,8),M(yy,8),M(Wu),M(Lz,10),M(wx),M(U),M(Vy,8))}}static{this.\u0275dir=he({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(n,r){n&1&&Ze("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),n&2&&(Pn("id",r.id)("disabled",r.disabled)("required",r.required),It("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Me("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[_t([{provide:Ly,useExisting:i}]),si]})}}return i})(),jy=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Ue,Uy,Uy,Ix,Ue]})}}return i})();var By=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Ue,on,Ue]})}}return i})();var zz=new V("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var zy=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({providers:[Wu,{provide:zz,useValue:{separatorKeyCodes:[13]}}],imports:[Ue,Ku,Ue]})}}return i})();function $z(i,e){i&1&&Se(0,"div",2)}var qz=new V("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Fx=(()=>{class i{constructor(t,n,r,s,o){this._elementRef=t,this._ngZone=n,this._changeDetectorRef=r,this._animationMode=s,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new ze,this._mode="determinate",this._transitionendHandler=c=>{this.animationEnd.observers.length===0||!c.target||!c.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=s==="NoopAnimations",o&&(o.color&&(this.color=this._defaultColor=o.color),this.mode=o.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(t){this._color=t}get value(){return this._value}set value(t){this._value=Ox(t||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=Ox(t||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}static{this.\u0275fac=function(n){return new(n||i)(M(le),M(U),M(Dt),M($t,8),M(qz,8))}}static{this.\u0275cmp=tt({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(n,r){n&2&&(It("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),ss("mat-"+r.color),Me("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",cs],bufferValue:[2,"bufferValue","bufferValue",cs],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[oi,it],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(n,r){n&1&&(ee(0,"div",0),Se(1,"div",1),$e(2,$z,1,0,"div",2),ie(),ee(3,"div",3),Se(4,"span",4),ie(),ee(5,"div",5),Se(6,"span",4),ie()),n&2&&(ae(),vl("flex-basis",r._getBufferBarFlexBasis()),ae(),ct(r.mode==="buffer"?2:-1),ae(),vl("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-app-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}}return i})();function Ox(i,e=0,t=100){return Math.max(e,Math.min(t,i))}var $y=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Ue]})}}return i})();var Gz=20,qc=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new ue,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=Gz){return this._platform.isBrowser?new Ii(n=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(Uh(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Y()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){let r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(kt(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=yi(n),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Vh(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(P(U),P(Oe),P(fe,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Wz=20,Ju=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new ue,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,c=-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:o,left:c}}change(t=Wz){return t>0?this._change.pipe(Uh(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(P(Oe),P(U),P(fe,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Zu=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({})}}return i})(),qy=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({imports:[Xn,Zu,Xn,Zu]})}}return i})();var Hc=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Gc=class extends Hc{constructor(e,t,n,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}},eh=class extends Hc{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Hy=class extends Hc{constructor(e){super(),this.element=e instanceof le?e.nativeElement:e}},Gy=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Gc)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof eh)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Hy)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var th=class extends Gy{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(e){let n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||ce.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);r!==-1&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Vx=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({})}}return i})();var Ux=XR(),Wy=class{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ot(-this._previousScrollPosition.left),e.style.top=ot(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,n=e.style,r=t.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Ux&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ux&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}};var Ky=class{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(kt(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ih=class{enable(){}disable(){}attach(){}};function Yy(i,e){return e.some(t=>{let n=i.bottom<t.top,r=i.top>t.bottom,s=i.right<t.left,o=i.left>t.right;return n||r||s||o})}function jx(i,e){return e.some(t=>{let n=i.top<t.top,r=i.bottom>t.bottom,s=i.left<t.left,o=i.right>t.right;return n||r||s||o})}var Qy=class{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();Yy(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Qz=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new ih,this.close=o=>new Ky(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Wy(this._viewportRuler,this._document),this.reposition=o=>new Qy(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(n){return new(n||i)(P(qc),P(Ju),P(U),P(fe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Xy=class{constructor(e){if(this.scrollStrategy=new ih,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let t=Object.keys(e);for(let n of t)e[n]!==void 0&&(this[n]=e[n])}}};var Zy=class{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var Gx=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(P(fe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Xz=(()=>{class i extends Gx{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let c=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(r)):c.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(P(fe),P(U,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Zz=(()=>{class i extends Gx{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Mi(s)},this._clickListener=s=>{let o=Mi(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){let h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(Bx(h.overlayElement,o)||Bx(h.overlayElement,c))break;let m=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(t){if(super.add(t),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(P(fe),P(Oe),P(U,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Bx(i,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===i)return!0;n=t&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var Wx=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||zc()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let n=this._document.createElement("div");n.classList.add(t),zc()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(P(fe),P(Oe))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Jy=class{constructor(e,t,n,r,s,o,c,l,d,h=!1,m){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._injector=m,this._backdropElement=null,this._backdropClick=new ue,this._attachments=new ue,this._detachments=new ue,this._locationChanges=tn.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new ue,this._outsidePointerEvents=new ue,this._renders=new ue,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Ti(()=>_l(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=ar(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=N(N({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Ce(N({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=ot(this._config.width),e.height=ot(this._config.height),e.minWidth=ot(this._config.minWidth),e.minHeight=ot(this._config.minHeight),e.maxWidth=ot(this._config.maxWidth),e.maxHeight=ot(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){let r=yo(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Xe(hl(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},zx="cdk-overlay-connected-position-bounding-box",Jz=/([A-Za-z%]+)$/,eb=class{get positions(){return this._preferredPositions}constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ue,this._resizeSubscription=tn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(zx),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(e,r,c),d=this._getOverlayPoint(l,t,c),h=this._getOverlayFit(d,t,n,c);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(h,d,n)){s.push({position:c,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:d,originPoint:l,position:c,overlayRect:t})}if(s.length){let c=null,l=-1;for(let d of s){let h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>l&&(l=h,c=d)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(zx),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r;if(n.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=n.originX=="start"?o:c}t.left<0&&(r-=t.left);let s;return n.originY=="center"?s=e.top+e.height/2:s=n.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r;n.overlayX=="center"?r=-t.width/2:n.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return n.overlayY=="center"?s=-t.height/2:s=n.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){let s=qx(t),{x:o,y:c}=e,l=this._getOffset(r,"x"),d=this._getOffset(r,"y");l&&(o+=l),d&&(c+=d);let h=0-o,m=o+s.width-n.width,p=0-c,w=c+s.height-n.height,T=this._subtractOverflows(s.width,h,m),k=this._subtractOverflows(s.height,p,w),x=T*k;return{visibleArea:x,isCompletelyWithinViewport:s.width*s.height===x,fitsInViewportVertically:k===s.height,fitsInViewportHorizontally:T==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){let r=n.bottom-t.y,s=n.right-t.x,o=$x(this._overlayRef.getConfig().minHeight),c=$x(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,d=e.fitsInViewportHorizontally||c!=null&&c<=s;return l&&d}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=qx(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),c=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),d=Math.max(s.left-n.left-e.x,0),h=0,m=0;return r.width<=s.width?h=d||-o:h=e.x<this._viewportMargin?s.left-n.left-e.x:0,r.height<=s.height?m=l||-c:m=e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:h,y:m},{x:e.x+h,y:e.y+m}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!e$(this._lastScrollVisibility,n)){let r=new Zy(e,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){let n=this._viewportRect,r=this._isRtl(),s,o,c;if(t.overlayY==="top")o=e.y,s=n.height-o+this._viewportMargin;else if(t.overlayY==="bottom")c=n.height-e.y+this._viewportMargin*2,s=n.height-c+this._viewportMargin;else{let w=Math.min(n.bottom-e.y+n.top,e.y),T=this._lastBoundingBoxSize.height;s=w*2,o=e.y-w,s>T&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-T/2)}let l=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,d=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,h,m,p;if(d)p=n.width-e.x+this._viewportMargin*2,h=e.x-this._viewportMargin;else if(l)m=e.x,h=n.right-e.x;else{let w=Math.min(n.right-e.x+n.left,e.x),T=this._lastBoundingBoxSize.width;h=w*2,m=e.x-w,h>T&&!this._isInitialRender&&!this._growAfterOpen&&(m=e.x-T/2)}return{top:o,left:m,bottom:c,right:p,width:h,height:s}}_setBoundingBoxStyles(e,t){let n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ot(n.height),r.top=ot(n.top),r.bottom=ot(n.bottom),r.width=ot(n.width),r.left=ot(n.left),r.right=ot(n.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=ot(s)),o&&(r.maxWidth=ot(o))}this._lastBoundingBoxSize=n,Yr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Yr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let h=this._viewportRuler.getViewportScrollPosition();Yr(n,this._getExactOverlayY(t,e,h)),Yr(n,this._getExactOverlayX(t,e,h))}else n.position="static";let c="",l=this._getOffset(t,"x"),d=this._getOffset(t,"y");l&&(c+=`translateX(${l}px) `),d&&(c+=`translateY(${d}px)`),n.transform=c.trim(),o.maxHeight&&(r?n.maxHeight=ot(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=ot(o.maxWidth):s&&(n.maxWidth="")),Yr(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=ot(s.y);return r}_getExactOverlayX(e,t,n){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=ot(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:jx(e,n),isOriginOutsideView:Yy(e,n),isOverlayClipped:jx(t,n),isOverlayOutsideView:Yy(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&yo(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof le)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}};function Yr(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function $x(i){if(typeof i!="number"&&i!=null){let[e,t]=i.split(Jz);return!t||t==="px"?parseFloat(e):null}return i||null}function qx(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function e$(i,e){return i===e?!0:i.isOriginClipped===e.isOriginClipped&&i.isOriginOutsideView===e.isOriginOutsideView&&i.isOverlayClipped===e.isOverlayClipped&&i.isOverlayOutsideView===e.isOverlayOutsideView}var Hx="cdk-global-overlay-wrapper",tb=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Hx),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=n,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),h=this._xPosition,m=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",w="",T="",k="";l?k="flex-start":h==="center"?(k="center",p?T=m:w=m):p?h==="left"||h==="end"?(k="flex-end",w=m):(h==="right"||h==="start")&&(k="flex-start",T=m):h==="left"||h==="start"?(k="flex-start",w=m):(h==="right"||h==="end")&&(k="flex-end",T=m),e.position=this._cssPosition,e.marginLeft=l?"0":w,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":T,t.justifyContent=k,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(Hx),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},t$=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new tb}flexibleConnectedTo(t){return new eb(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(P(Ju),P(fe),P(Oe),P(Wx))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),i$=0,Zn=(()=>{class i{constructor(t,n,r,s,o,c,l,d,h,m,p,w){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=m,this._outsideClickDispatcher=p,this._animationsModuleType=w}create(t){let n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new Xy(t);return o.direction=o.direction||this._directionality.value,new Jy(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(is))}position(){return this._positionBuilder}_createPaneElement(t){let n=this._document.createElement("div");return n.id=`cdk-overlay-${i$++}`,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Xo)),new th(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(P(Qz),P(Wx),P(Yo),P(t$),P(Xz),P(ce),P(U),P(fe),P(wo),P(ds),P(Zz),P($t,8))}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var n$=new V("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=$(Zn);return()=>i.scrollStrategies.reposition()}});function r$(i){return()=>i.scrollStrategies.reposition()}var s$={provide:n$,deps:[Zn],useFactory:r$},Kx=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({providers:[Zn,s$],imports:[Xn,Vx,qy,qy]})}}return i})();var c$=["tooltip"],Xx=20;var Zx=new V("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let i=$(Zn);return()=>i.scrollStrategies.reposition({scrollThrottle:Xx})}});function l$(i){return()=>i.scrollStrategies.reposition({scrollThrottle:Xx})}var d$={provide:Zx,deps:[Zn],useFactory:l$};function u$(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var h$=new V("mat-tooltip-default-options",{providedIn:"root",factory:u$});var Yx="tooltip-panel",Qx=Qi({passive:!0}),f$=8,m$=8,p$=24,g$=200,Jx=(()=>{class i{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=Xi(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){let n=Xi(t);this._disabled!==n&&(this._disabled=n,n?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=vo(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=vo(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){let n=this._message;this._message=t!=null?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(n)}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,n,r,s,o,c,l,d,h,m,p,w){this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=c,this._ariaDescriber=l,this._focusMonitor=d,this._dir=m,this._defaultOptions=p,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=_$,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new ue,this._injector=$(ce),this._scrollStrategy=h,this._document=w,p&&(this._showDelay=p.showDelay,this._hideDelay=p.hideDelay,p.position&&(this.position=p.position),p.positionAtOrigin&&(this.positionAtOrigin=p.positionAtOrigin),p.touchGestures&&(this.touchGestures=p.touchGestures),p.tooltipClass&&(this.tooltipClass=p.tooltipClass)),m.change.pipe(Xe(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=f$}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Xe(this._destroyed)).subscribe(t=>{t?t==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let t=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,Qx)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(n);this._detach(),this._portal=this._portal||new Gc(this._tooltipComponent,this._viewContainerRef);let s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Xe(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){let n=this._tooltipInstance;n&&(n.isVisible()?n.hide(t):(n._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof le)return this._overlayRef;this._detach()}let n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?t||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Xe(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${Yx}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Xe(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Xe(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Xe(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!JR(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){let n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset(N(N({},r.main),s.main)),this._addOffset(N(N({},r.fallback),s.fallback))])}_addOffset(t){let n=m$,r=!this._dir||this._dir.value=="ltr";return t.originY==="top"?t.offsetY=-n:t.originY==="bottom"?t.offsetY=n:t.originX==="start"?t.offsetX=r?-n:n:t.originX==="end"&&(t.offsetX=r?n:-n),t}_getOrigin(){let t=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"||n=="below"?r={originX:"center",originY:n=="above"?"top":"bottom"}:n=="before"||n=="left"&&t||n=="right"&&!t?r={originX:"start",originY:"center"}:(n=="after"||n=="right"&&t||n=="left"&&!t)&&(r={originX:"end",originY:"center"});let{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){let t=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"?r={overlayX:"center",overlayY:"bottom"}:n=="below"?r={overlayX:"center",overlayY:"top"}:n=="before"||n=="left"&&t||n=="right"&&!t?r={overlayX:"end",overlayY:"center"}:(n=="after"||n=="right"&&t||n=="left"&&!t)&&(r={overlayX:"start",overlayY:"center"});let{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),ar(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return this.position==="above"||this.position==="below"?n==="top"?n="bottom":n==="bottom"&&(n="top"):t==="end"?t="start":t==="start"&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){let{overlayY:n,originX:r,originY:s}=t,o;if(n==="center"?this._dir&&this._dir.value==="rtl"?o=r==="end"?"left":"right":o=r==="start"?"left":"right":o=n==="bottom"&&s==="top"?"above":"below",o!==this._currentPosition){let c=this._overlayRef;if(c){let l=`${this._cssClassPrefix}-${Yx}-`;c.removePanelClass(l+this._currentPosition),c.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{this._setupPointerExitEventsIfNeeded();let n;t.x!==void 0&&t.y!==void 0&&(n=t),this.show(void 0,n)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{let n=t.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{let r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let n=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,Qx)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){let n=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){let t=this.touchGestures;if(t!=="off"){let n=this._elementRef.nativeElement,r=n.style;(t==="on"||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(t==="on"||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(t){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,t,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}static{this.\u0275fac=function(n){return new(n||i)(M(Zn),M(le),M(qc),M(or),M(U),M(Oe),M(cx),M(Gu),M(Zx),M(wo),M(h$,8),M(fe))}}static{this.\u0275dir=he({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(n,r){n&2&&Me("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return i})(),_$=(()=>{class i{constructor(t,n,r){this._changeDetectorRef=t,this._elementRef=n,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new ue,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=r==="NoopAnimations"}show(t){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>p$&&t.width>=g$}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){let n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible!==t&&(this._isVisible=t,this._changeDetectorRef.markForCheck()),t&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(n);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}static{this.\u0275fac=function(n){return new(n||i)(M(Dt),M(le),M($t,8))}}static{this.\u0275cmp=tt({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(n,r){if(n&1&&Et(c$,7),n&2){let s;He(s=Ge())&&(r._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(n,r){n&1&&Ze("mouseleave",function(o){return r._handleMouseLeave(o)})},standalone:!0,features:[it],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(n,r){if(n&1){let s=os();ee(0,"div",1,0),Ze("animationend",function(c){return rr(s),sr(r._handleAnimationEnd(c))}),ee(2,"div",2),Qt(3),ie()()}n&2&&(Me("mdc-tooltip--multiline",r._isMultiline),qe("ngClass",r.tooltipClass),ae(3),Nn(r.message))},dependencies:[Vw],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return i})();var ib=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Z({type:i})}static{this.\u0275inj=X({providers:[d$],imports:[dx,on,Kx,Ue,Ue,Zu]})}}return i})();var nh=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Z({type:i});static \u0275inj=X({imports:[Ny,Oy,jy,By,zy,$y,ib,Ny,Oy,jy,By,zy,$y,ib]})};var rh=class i{constructor(e){this.firestore=e;this.chunkCollection=Xs(this.firestore,"chunks")}chunkCollection;getChunks(){return Xs(this.firestore,"chunks")}addChunk(e){return fT(Xs(this.firestore,"chunks"),e)}updateChunk(e){let r=e,{$key:t}=r,n=rw(r,["$key"]);return vT(a_(this.firestore,"chunks"),n)}deleteChunk(e){return mT(a_(this.firestore,"chunks",e))}static \u0275fac=function(t){return new(t||i)(P(yn))};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})};function w$(i,e){if(i&1&&(ee(0,"option",8),Qt(1),ie()),i&2){let t=e.$implicit;qe("value",t.value),ae(),Kh(" ",t.viewValue," ")}}function I$(i,e){if(i&1&&(ee(0,"div",9)(1,"div",10)(2,"p",11),Qt(3),ie(),ee(4,"p",12),Qt(5),ie()(),Se(6,"mat-progress-bar",13),ie()),i&2){let t=e.$implicit;ae(3),Nn(t.chunk),ae(2),Nn(t.des?t.des:"\xA0"),ae(),qe("value",t.point*10)("matTooltip",(t.point*10).toString())("color",t.type==="F"?"primary":t.type==="B"?"accent":"warn")}}var E$=Tl("listAnimation",[Al("* <=> *",[ef(":enter",[hr({opacity:0}),oI("20ms",aa("600ms ease-out",hr({opacity:1})))],{optional:!0}),ef(":leave",aa("200ms",hr({opacity:0})),{optional:!0})])]),sh=class i{constructor(e,t){this.chunkService=e;this.firestore=t}visibility=!1;chunks=[];categories=[{value:"F",viewValue:"Frontend"},{value:"B",viewValue:"Backend"},{value:"Dev",viewValue:"DevOps"}];set selectedCategory(e){this.getChunks(e)}ngOnInit(){this.getChunks()}getChunks(e=""){this.chunks.length=0;let t=Xs(this.firestore,"chunks"),n=_T(t);gT(n,r=>{let s=[];r.forEach(o=>{let c=o.data();console.log(c);let l={$key:o.id,chunk:c.chunk,point:c.point,type:c.type};s.push(l)}),this.chunks=s.filter(o=>e?o.type===e:!0)})}reorder(){this.chunks=this.chunks.sort((e,t)=>{var n=e.point-t.point<0;return n?1:0})}shuffle(){this.chunks=this.shufflestuff(this.chunks)}shufflestuff(e){let t=e==null?0:e.length;if(!t)return[];let n=-1,r=t-1,s=this.copyArray(e);for(;++n<t;){let o=n+Math.floor(Math.random()*(r-n+1)),c=s[o];s[o]=s[n],s[n]=c}return s}copyArray(e,t){let n=-1,r=e.length;for(t||(t=new Array(r));++n<r;)t[n]=e[n];return t}static \u0275fac=function(t){return new(t||i)(M(rh),M(yn))};static \u0275cmp=tt({type:i,selectors:[["app-tldr"]],standalone:!0,features:[it],decls:16,vars:4,consts:[[1,"tldr-query"],[1,"action-btns"],["matNativeControl","","name","category",3,"ngModelChange","ngModel"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center","font-size","12px"],[1,"tldr-bar-list",3,"click"],["class","tldr-bar-item","transition-group-item","",4,"ngFor","ngForOf"],[3,"value"],["transition-group-item","",1,"tldr-bar-item"],[1,"chunk-word"],[1,"chunk-name"],[1,"chunk-des"],["mode","determinate",1,"chunk-bar",3,"value","matTooltip","color"]],template:function(t,n){t&1&&(ee(0,"div")(1,"div",0)(2,"h1"),Qt(3,"Tech stack"),ie(),ee(4,"div",1)(5,"mat-form-field")(6,"mat-label"),Qt(7,"Categories"),ie(),ee(8,"select",2),Rw("ngModelChange",function(s){return Sw(n.selectedCategory,s)||(n.selectedCategory=s),s}),ee(9,"option",3),Qt(10,"ALL"),ie(),$e(11,w$,2,2,"option",4),ie()()()(),ee(12,"div",5),Qt(13," using Angular, data hosted by Cloud Firestore "),ie(),ee(14,"div",6),Ze("click",function(){return n.shuffle()}),$e(15,I$,7,5,"div",7),ie()()),t&2&&(ae(8),Aw("ngModel",n.selectedCategory),ae(3),qe("ngForOf",n.categories),ae(3),qe("@listAnimation",n.chunks),ae(),qe("ngForOf",n.chunks))},dependencies:[uT,on,Uw,KR,HR,WR,ju,LR,vy,nh,Nx,Mx,Xu,Fx,Jx],styles:[".tldr-query[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.tldr-query[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 600px){.tldr-query[_ngcontent-%COMP%]{flex-direction:column}}.tldr-bar-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;padding:48px}@media (min-width: 375px){.tldr-bar-list[_ngcontent-%COMP%]{padding:16px}}.tldr-bar-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;flex:1;margin:16px}.chunk-word[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:160px}.chunk-word[_ngcontent-%COMP%]   .chunk-des[_ngcontent-%COMP%]{font-size:.7rem;color:#444;margin:0}.chunk-word[_ngcontent-%COMP%]   .chunk-name[_ngcontent-%COMP%]{margin:0}.chunk-bar[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}@media (max-width: 600px){.chunk-bar[_ngcontent-%COMP%]{height:24px;width:100%}}.action-btns[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;row-gap:8px}.action-btns[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{max-width:120px;padding:4px;margin-bottom:16px;margin-right:8px}.chip-list[_ngcontent-%COMP%]{margin-right:16px}"],data:{animation:[E$]}})};var oh=class i{title="angular-chunks";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=tt({type:i,selectors:[["app-root"]],standalone:!0,features:[it],decls:2,vars:0,template:function(t,n){t&1&&Se(0,"app-tldr")(1,"router-outlet")},dependencies:[jf,sh],styles:['[_ngcontent-%COMP%]:root{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}']})};fI(oh,pR).catch(i=>console.error(i));
