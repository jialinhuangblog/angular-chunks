import{$ as G,A as M0,B as O0,C as Gi,D as br,E as ha,F as ma,G as fa,H as wr,I as N0,J as F0,K as L0,L as V0,M as pa,N as ga,O as me,P as lt,Q as Ut,R as Wi,S as Em,T as zl,U as dt,V as _t,W as hn,X as si,Y as U0,Z as vt,_ as $l,a as V,aa as j0,b as vs,c as T0,d as A0,e as S0,f as R0,g as x0,h as Hn,i as wm,j as Im,k as ys,l as Vt,m as la,n as k0,o as da,p as jl,q as D0,r as qi,s as P0,t as un,u as yr,v as ua,w as ri,x as Hi,y as Bl,z as Ct}from"./chunk-F5LKORDS.js";import{$ as Ww,$a as at,$b as v0,A as ft,Aa as Qw,Ab as a0,B as um,Ba as ia,Bb as c0,C as ds,Ca as Xw,Cb as kt,D as us,Da as yi,Db as Le,E as Tl,Ea as Lt,Eb as l0,F as hm,Fa as na,Fb as ps,G as Di,Ga as ra,Gb as d0,H as zw,Ha as ee,Hb as Fl,I as mr,Ia as P,Ib as Ll,J as Al,Ja as xl,Jb as _r,K as Vn,Ka as kl,Kb as u0,L as $w,La as Zw,Lb as oa,M as mm,Ma as sa,Mb as ym,N as qw,Na as Dl,Nb as h0,O as fm,Oa as Pl,Ob as Et,P as Hw,Pa as Bn,Pb as m0,Q as pm,Qa as Jw,Qb as f0,R as Sl,Ra as vm,Rb as Ve,S as zi,Sa as ms,Sb as ln,T as Rt,Ta as e0,Tb as dn,U as Pe,Ua as bi,Ub as Pi,V as Gw,Va as xt,Vb as p0,W as pt,Wa as t0,Wb as gs,X as Qe,Xa as i0,Xb as g0,Y as Un,Ya as Oe,Yb as _0,Z as $,Za as Ml,Zb as he,_ as Z,_a as pr,_b as _s,a as Zt,aa as L,ab as Ne,ac as Vl,b as Fw,ba as gm,bb as Ol,bc as y0,c as vi,ca as D,cb as Fe,cc as b0,d as am,da as B,db as fs,dc as ui,e as El,ea as ne,eb as n0,ec as w0,f as ie,fa as ea,fb as qe,fc as aa,g as Jt,ga as Me,gb as H,gc as bm,h as Lw,ha as J,hb as W,hc as I0,i as Vw,ia as pe,ib as Ie,j as Fn,ja as Be,jb as cn,k as cm,ka as Kw,kb as zn,kc as vr,l as lm,la as hs,lb as We,lc as $n,m as dm,ma as an,mb as ct,n as Kt,na as Yt,nb as ni,nc as Mi,o as Y,oa as ti,ob as Xe,oc as Ul,p as Qo,pa as ii,pb as wi,pc as qn,q as Xo,qa as ta,qb as nt,qc as E0,r as Uw,ra as jn,rb as Re,rc as ca,s as de,sa as fr,sb as xe,sc as C0,t as Zo,ta as ue,tb as r0,u as ei,ua as Yw,ub as s0,v as Cl,va as _e,vb as gr,w as Jo,wa as U,wb as gt,x as jw,xa as _m,xb as $i,y as Bw,ya as ce,yb as Nl,z as Ln,za as Rl,zb as o0}from"./chunk-J65HEPGQ.js";import{a as O,b as Se,c as Nw,d as Nn,e as v}from"./chunk-ACKELEN3.js";var Am=class extends _0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Sm=class i extends Am{static makeCurrent(){g0(new i)}onAndCancel(e,t,n){return e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=lD();return t==null?null:dD(t)}resetBaseElement(){_a=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return v0(document.cookie,e)}},_a=null;function lD(){return _a=_a||document.querySelector("base"),_a?_a.getAttribute("href"):null}function dD(i){return new URL(i,document.baseURI).pathname}var uD=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),ql=new L(""),$0=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(s=>s.supports(t)),!n)throw new Qe(5101,!1);return this._eventNameToPlugin.set(t,n),n}static{this.\u0275fac=function(n){return new(n||i)(D(ql),D(U))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),va=class{constructor(e){this._doc=e}},Cm="ng-app-id",q0=(()=>{class i{constructor(t,n,r,s={}){this.doc=t,this.appId=n,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=bm(s),this.resetHostNodes()}addStyles(t){for(let n of t)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(t){for(let n of t)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(n=>n.remove()),t.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){let n=this.styleRef;n.get(t)?.elements?.forEach(r=>r.remove()),n.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Cm}="${this.appId}"]`);if(t?.length){let n=new Map;return t.forEach(r=>{r.textContent!=null&&n.set(r.textContent,r)}),n}return null}changeUsageCount(t,n){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=n,s.usage}return r.set(t,{usage:n,elements:[]}),n}getStyleElement(t,n){let r=this.styleNodesInDOM,s=r?.get(n);if(s?.parentNode===t)return r.delete(n),s.removeAttribute(Cm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(Cm,this.appId),t.appendChild(o),o}}addStyleToHost(t,n){let r=this.getStyleElement(t,n),s=this.styleRef,o=s.get(n)?.elements;o?o.push(r):s.set(n,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)(D(he),D(ia),D(na,8),D(yi))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),Tm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xm=/%COMP%/g,H0="%COMP%",hD=`_nghost-${H0}`,mD=`_ngcontent-${H0}`,fD=!0,pD=new L("",{providedIn:"root",factory:()=>fD});function gD(i){return mD.replace(xm,i)}function _D(i){return hD.replace(xm,i)}function G0(i,e){return e.map(t=>t.replace(xm,i))}var Hl=(()=>{class i{constructor(t,n,r,s,o,c,l,d=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=bm(c),this.defaultRenderer=new ya(t,o,l,this.platformIsServer)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===ea.ShadowDom&&(n=Se(O({},n),{encapsulation:ea.Emulated}));let r=this.getOrCreateRenderer(t,n);return r instanceof Gl?r.applyToHost(t):r instanceof ba&&r.applyStyles(),r}getOrCreateRenderer(t,n){let r=this.rendererByCompId,s=r.get(n.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(n.encapsulation){case ea.Emulated:s=new Gl(l,d,n,this.appId,h,o,c,f);break;case ea.ShadowDom:return new Rm(l,d,t,n,o,c,this.nonce,f);default:s=new ba(l,d,n,h,o,c,f);break}r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)(D($0),D(q0),D(ia),D(pD),D(he),D(yi),D(U),D(na))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),ya=class{constructor(e,t,n,r){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Tm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(B0(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(B0(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){t.remove()}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new Qe(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;let s=Tm[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let r=Tm[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(ra.DashCase|ra.Important)?e.style.setProperty(t,n,r&ra.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&ra.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n){if(typeof e=="string"&&(e=gs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(n))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function B0(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var Rm=class extends ya{constructor(e,t,n,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=G0(r.id,r.styles);for(let h of d){let f=document.createElement("style");c&&f.setAttribute("nonce",c),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ba=class extends ya{constructor(e,t,n,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?G0(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gl=class extends ba{constructor(e,t,n,r,s,o,c,l){let d=r+"-"+n.id;super(e,t,n,s,o,c,l,d),this.contentAttr=gD(d),this.hostAttr=_D(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}},vD=(()=>{class i extends va{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)(D(he))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),yD=(()=>{class i extends va{constructor(t){super(t),this.delegate=B(f0,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,n,r){return this.delegate.addEventListener(t,n,r)}removeEventListener(t,n,r){return this.delegate.removeEventListener(t,n,r)}static{this.\u0275fac=function(n){return new(n||i)(D(he))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),z0=["alt","control","meta","shift"],bD={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wD={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},ID=(()=>{class i extends va{constructor(t){super(t)}supports(t){return i.parseEventName(t)!=null}addEventListener(t,n,r){let s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gs().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let n=t.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let s=i._normalizeKey(n.pop()),o="",c=n.indexOf("code");if(c>-1&&(n.splice(c,1),o="code."),z0.forEach(d=>{let h=n.indexOf(d);h>-1&&(n.splice(h,1),o+=d+".")}),o+=s,n.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,n){let r=bD[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),z0.forEach(o=>{if(o!==r){let c=wD[o];c(t)&&(s+=o+".")}}),s+=r,s===n)}static eventCallback(t,n,r){return s=>{i.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(n){return new(n||i)(D(he))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})();function W0(i,e){return m0(O({rootComponent:i},ED(e)))}function ED(i){return{appProviders:[...RD,...i?.providers??[]],platformProviders:SD}}function CD(){Sm.makeCurrent()}function TD(){return new _m}function AD(){return Qw(document),document}var SD=[{provide:yi,useValue:w0},{provide:Xw,useValue:CD,multi:!0},{provide:he,useFactory:AD,deps:[]}];var RD=[{provide:Kw,useValue:"root"},{provide:_m,useFactory:TD,deps:[]},{provide:ql,useClass:vD,multi:!0,deps:[he,U,yi]},{provide:ql,useClass:ID,multi:!0,deps:[he]},{provide:ql,useClass:yD,multi:!0},Hl,q0,$0,{provide:Dl,useExisting:Hl},{provide:I0,useClass:uD,deps:[]},[]];var Wl=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(n){return new(n||i)(D(he))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ae="primary",Va=Symbol("RouteTitle"),Om=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ts(i){return new Om(i)}function xD(i,e,t){let n=t.path.split("/");if(n.length>i.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let o=n[s],c=i[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function kD(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Ki(i[t],e[t]))return!1;return!0}function Ki(i,e){let t=i?Nm(i):void 0,n=e?Nm(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!iI(i[r],e[r]))return!1;return!0}function Nm(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function iI(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;let t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}else return i===e}function nI(i){return i.length>0?i[i.length-1]:null}function Gn(i){return Xo(i)?i:Ll(i)?Kt(Promise.resolve(i)):Y(i)}var DD={exact:sI,subset:oI},rI={exact:PD,subset:MD,ignored:()=>!0};function Y0(i,e,t){return DD[t.paths](i.root,e.root,t.matrixParams)&&rI[t.queryParams](i.queryParams,e.queryParams)&&!(t.fragment==="exact"&&i.fragment!==e.fragment)}function PD(i,e){return Ki(i,e)}function sI(i,e,t){if(!Er(i.segments,e.segments)||!Ql(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!i.children[n]||!sI(i.children[n],e.children[n],t))return!1;return!0}function MD(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>iI(i[t],e[t]))}function oI(i,e,t){return aI(i,e,e.segments,t)}function aI(i,e,t,n){if(i.segments.length>t.length){let r=i.segments.slice(0,t.length);return!(!Er(r,t)||e.hasChildren()||!Ql(r,t,n))}else if(i.segments.length===t.length){if(!Er(i.segments,t)||!Ql(i.segments,t,n))return!1;for(let r in e.children)if(!i.children[r]||!oI(i.children[r],e.children[r],n))return!1;return!0}else{let r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!Er(i.segments,r)||!Ql(i.segments,r,n)||!i.children[ae]?!1:aI(i.children[ae],e,s,n)}}function Ql(i,e,t){return e.every((n,r)=>rI[t](i[r].parameters,n.parameters))}var fn=class{constructor(e=new ke([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Ts(this.queryParams),this._queryParamMap}toString(){return FD.serialize(this)}},ke=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xl(this)}},Ir=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ts(this.parameters),this._parameterMap}toString(){return lI(this)}};function OD(i,e){return Er(i,e)&&i.every((t,n)=>Ki(t.parameters,e[n].parameters))}function Er(i,e){return i.length!==e.length?!1:i.every((t,n)=>t.path===e[n].path)}function ND(i,e){let t=[];return Object.entries(i.children).forEach(([n,r])=>{n===ae&&(t=t.concat(e(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==ae&&(t=t.concat(e(r,n)))}),t}var af=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:()=>new Sa,providedIn:"root"})}}return i})(),Sa=class{parse(e){let t=new Lm(e);return new fn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wa(e.root,!0)}`,n=UD(e.queryParams),r=typeof e.fragment=="string"?`#${LD(e.fragment)}`:"";return`${t}${n}${r}`}},FD=new Sa;function Xl(i){return i.segments.map(e=>lI(e)).join("/")}function wa(i,e){if(!i.hasChildren())return Xl(i);if(e){let t=i.children[ae]?wa(i.children[ae],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==ae&&n.push(`${r}:${wa(s,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=ND(i,(n,r)=>r===ae?[wa(i.children[ae],!1)]:[`${r}:${wa(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[ae]!=null?`${Xl(i)}/${t[0]}`:`${Xl(i)}/(${t.join("//")})`}}function cI(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kl(i){return cI(i).replace(/%3B/gi,";")}function LD(i){return encodeURI(i)}function Fm(i){return cI(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zl(i){return decodeURIComponent(i)}function Q0(i){return Zl(i.replace(/\+/g,"%20"))}function lI(i){return`${Fm(i.path)}${VD(i.parameters)}`}function VD(i){return Object.entries(i).map(([e,t])=>`;${Fm(e)}=${Fm(t)}`).join("")}function UD(i){let e=Object.entries(i).map(([t,n])=>Array.isArray(n)?n.map(r=>`${Kl(t)}=${Kl(r)}`).join("&"):`${Kl(t)}=${Kl(n)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var jD=/^[^\/()?;#]+/;function km(i){let e=i.match(jD);return e?e[0]:""}var BD=/^[^\/()?;=#]+/;function zD(i){let e=i.match(BD);return e?e[0]:""}var $D=/^[^=?&#]+/;function qD(i){let e=i.match($D);return e?e[0]:""}var HD=/^[^&#]+/;function GD(i){let e=i.match(HD);return e?e[0]:""}var Lm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[ae]=new ke(e,t)),n}parseSegment(){let e=km(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Qe(4009,!1);return this.capture(e),new Ir(Zl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=zD(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let r=km(this.remaining);r&&(n=r,this.capture(n))}e[Zl(t)]=Zl(n)}parseQueryParam(e){let t=qD(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let o=GD(this.remaining);o&&(n=o,this.capture(n))}let r=Q0(t),s=Q0(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=km(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new Qe(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ae);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ae]:new ke([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Qe(4011,!1)}};function dI(i){return i.segments.length>0?new ke([],{[ae]:i}):i}function uI(i){let e={};for(let[n,r]of Object.entries(i.children)){let s=uI(r);if(n===ae&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[n]=s)}let t=new ke(i.segments,e);return WD(t)}function WD(i){if(i.numberOfChildren===1&&i.children[ae]){let e=i.children[ae];return new ke(i.segments.concat(e.segments),e.children)}return i}function Ra(i){return i instanceof fn}function KD(i,e,t=null,n=null){let r=hI(i);return mI(r,e,t,n)}function hI(i){let e;function t(s){let o={};for(let l of s.children){let d=t(l);o[l.outlet]=d}let c=new ke(s.url,o);return s===i&&(e=c),c}let n=t(i.root),r=dI(n);return e??r}function mI(i,e,t,n){let r=i;for(;r.parent;)r=r.parent;if(e.length===0)return Dm(r,r,r,t,n);let s=YD(e);if(s.toRoot())return Dm(r,r,new ke([],{}),t,n);let o=QD(s,r,i),c=o.processChildren?Ca(o.segmentGroup,o.index,s.commands):pI(o.segmentGroup,o.index,s.commands);return Dm(r,o.segmentGroup,c,t,n)}function Jl(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function xa(i){return typeof i=="object"&&i!=null&&i.outlets}function Dm(i,e,t,n,r){let s={};n&&Object.entries(n).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;i===e?o=t:o=fI(i,e,t);let c=dI(uI(o));return new fn(c,s,r)}function fI(i,e,t){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===e?n[r]=t:n[r]=fI(s,e,t)}),new ke(i.segments,n)}var ed=class{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Jl(n[0]))throw new Qe(4003,!1);let r=n.find(xa);if(r&&r!==nI(n))throw new Qe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function YD(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new ed(!0,0,i);let e=0,t=!1,n=i.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new ed(t,e,n)}var Is=class{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function QD(i,e,t){if(i.isAbsolute)return new Is(e,!0,0);if(!t)return new Is(e,!1,NaN);if(t.parent===null)return new Is(t,!0,0);let n=Jl(i.commands[0])?0:1,r=t.segments.length-1+n;return XD(t,r,i.numberOfDoubleDots)}function XD(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Qe(4005,!1);r=n.segments.length}return new Is(n,!1,r-s)}function ZD(i){return xa(i[0])?i[0].outlets:{[ae]:i}}function pI(i,e,t){if(i??=new ke([],{}),i.segments.length===0&&i.hasChildren())return Ca(i,e,t);let n=JD(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new ke(i.segments.slice(0,n.pathIndex),{});return s.children[ae]=new ke(i.segments.slice(n.pathIndex),i.children),Ca(s,0,r)}else return n.match&&r.length===0?new ke(i.segments,{}):n.match&&!i.hasChildren()?Vm(i,e,t):n.match?Ca(i,0,r):Vm(i,e,t)}function Ca(i,e,t){if(t.length===0)return new ke(i.segments,{});{let n=ZD(t),r={};if(Object.keys(n).some(s=>s!==ae)&&i.children[ae]&&i.numberOfChildren===1&&i.children[ae].segments.length===0){let s=Ca(i.children[ae],e,t);return new ke(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=pI(i.children[s],e,o))}),Object.entries(i.children).forEach(([s,o])=>{n[s]===void 0&&(r[s]=o)}),new ke(i.segments,r)}}function JD(i,e,t){let n=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;let o=i.segments[r],c=t[n];if(xa(c))break;let l=`${c}`,d=n<t.length-1?t[n+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Z0(l,d,o))return s;n+=2}else{if(!Z0(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function Vm(i,e,t){let n=i.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(xa(s)){let l=eP(s.outlets);return new ke(n,l)}if(r===0&&Jl(t[0])){let l=i.segments[e];n.push(new Ir(l.path,X0(t[0]))),r++;continue}let o=xa(s)?s.outlets[ae]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Jl(c)?(n.push(new Ir(o,X0(c))),r+=2):(n.push(new Ir(o,{})),r++)}return new ke(n,{})}function eP(i){let e={};return Object.entries(i).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=Vm(new ke([],{}),0,n))}),e}function X0(i){let e={};return Object.entries(i).forEach(([t,n])=>e[t]=`${n}`),e}function Z0(i,e,t){return i==t.path&&Ki(e,t.parameters)}var Ta="imperative",Dt=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Dt||{}),Ii=class{constructor(e,t){this.id=e,this.url=t}},ka=class extends Ii{constructor(e,t,n="imperative",r=null){super(e,t),this.type=Dt.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cr=class extends Ii{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=Dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mi=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(mi||{}),Um=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Um||{}),mn=class extends Ii{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=Dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends Ii{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=Dt.NavigationSkipped}},Da=class extends Ii{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=Dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},td=class extends Ii{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jm=class extends Ii{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class extends Ii{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=Dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zm=class extends Ii{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$m=class extends Ii{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qm=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hm=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gm=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wm=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Km=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pa=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ma=class{},As=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function tP(i,e){return i.providers&&!i._injector&&(i._injector=i0(i.providers,e,`Route: ${i.path}`)),i._injector??e}function Oi(i){return i.outlet||ae}function iP(i,e){let t=i.filter(n=>Oi(n)===e);return t.push(...i.filter(n=>Oi(n)!==e)),t}function Ua(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ym=class{get injector(){return Ua(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new cd(this.rootInjector),this.attachRef=null}},cd=(()=>{class i{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,n){let r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Ym(this.rootInjector),this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(n){return new(n||i)(D(hs))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),id=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qm(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=Qm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Xm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Xm(e,this._root).map(t=>t.value)}};function Qm(i,e){if(i===e.value)return e;for(let t of e.children){let n=Qm(i,t);if(n)return n}return null}function Xm(i,e){if(i===e.value)return[e];for(let t of e.children){let n=Xm(i,t);if(n.length)return n.unshift(e),n}return[]}var hi=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ws(i){let e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}var nd=class extends id{constructor(e,t){super(e),this.snapshot=t,cf(this,e)}toString(){return this.snapshot.toString()}};function gI(i){let e=nP(i),t=new Jt([new Ir("",{})]),n=new Jt({}),r=new Jt({}),s=new Jt({}),o=new Jt(""),c=new Ss(t,n,s,o,r,ae,i,e.root);return c.snapshot=e.root,new nd(new hi(c,[]),e)}function nP(i){let e={},t={},n={},r="",s=new Es([],e,n,r,t,ae,i,null,{});return new sd("",new hi(s,[]))}var Ss=class{constructor(e,t,n,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(de(d=>d[Va]))??Y(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Ts(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Ts(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rd(i,e,t="emptyOnly"){let n,{routeConfig:r}=i;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:O(O({},e.params),i.params),data:O(O({},e.data),i.data),resolve:O(O(O(O({},i.data),e.data),r?.data),i._resolvedData)}:n={params:O({},i.params),data:O({},i.data),resolve:O(O({},i.data),i._resolvedData??{})},r&&vI(r)&&(n.resolve[Va]=r.title),n}var Es=class{get title(){return this.data?.[Va]}constructor(e,t,n,r,s,o,c,l,d){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ts(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ts(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},sd=class extends id{constructor(e,t){super(t),this.url=e,cf(this,t)}toString(){return _I(this._root)}};function cf(i,e){e.value._routerState=i,e.children.forEach(t=>cf(i,t))}function _I(i){let e=i.children.length>0?` { ${i.children.map(_I).join(", ")} } `:"";return`${i.value}${e}`}function Pm(i){if(i.snapshot){let e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Ki(e.queryParams,t.queryParams)||i.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&i.fragmentSubject.next(t.fragment),Ki(e.params,t.params)||i.paramsSubject.next(t.params),kD(e.url,t.url)||i.urlSubject.next(t.url),Ki(e.data,t.data)||i.dataSubject.next(t.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function Zm(i,e){let t=Ki(i.params,e.params)&&OD(i.url,e.url),n=!i.parent!=!e.parent;return t&&!n&&(!i.parent||Zm(i.parent,e.parent))}function vI(i){return typeof i.title=="string"||i.title===null}var lf=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new _e,this.deactivateEvents=new _e,this.attachEvents=new _e,this.detachEvents=new _e,this.parentContexts=B(cd),this.location=B(Bn),this.changeDetector=B(Et),this.inputBinder=B(df,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:r}=t.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Qe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Qe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Qe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new Qe(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Jm(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=pe({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yt]})}}return i})(),Jm=class i{__ngOutletInjector(e){return new i(this.route,this.childContexts,e)}constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Ss?this.route:e===cd?this.childContexts:this.parent.get(e,t)}},df=new L("");function rP(i,e,t){let n=Oa(i,e._root,t?t._root:void 0);return new nd(n,e)}function Oa(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let r=sP(i,e,t);return new hi(n,r)}else{if(i.shouldAttach(e.value)){let s=i.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Oa(i,c)),o}}let n=oP(e.value),r=e.children.map(s=>Oa(i,s));return new hi(n,r)}}function sP(i,e,t){return e.children.map(n=>{for(let r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Oa(i,n,r);return Oa(i,n)})}function oP(i){return new Ss(new Jt(i.url),new Jt(i.params),new Jt(i.queryParams),new Jt(i.fragment),new Jt(i.data),i.outlet,i.component,i)}var Na=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},yI="ngNavigationCancelingError";function od(i,e){let{redirectTo:t,navigationBehaviorOptions:n}=Ra(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=bI(!1,mi.Redirect);return r.url=t,r.navigationBehaviorOptions=n,r}function bI(i,e){let t=new Error(`NavigationCancelingError: ${i||""}`);return t[yI]=!0,t.cancellationCode=e,t}function aP(i){return wI(i)&&Ra(i.url)}function wI(i){return!!i&&i[yI]}var cP=(i,e,t,n)=>de(r=>(new ef(e,r.targetRouterState,r.currentRouterState,t,n).activate(i),r)),ef=class{constructor(e,t,n,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Pm(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let r=ws(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=ws(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){let o=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=ws(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let r=ws(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new Pa(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Wm(e.value.snapshot))}activateRoutes(e,t,n){let r=e.value,s=t?t.value:null;if(Pm(r),r===s)if(r.component){let o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){let o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Pm(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,n)}},ad=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Cs=class{constructor(e,t){this.component=e,this.route=t}};function lP(i,e,t){let n=i._root,r=e?e._root:null;return Ia(n,r,t,[n.value])}function dP(i){let e=i.routeConfig?i.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:i,guards:e}}function xs(i,e){let t=Symbol(),n=e.get(i,t);return n===t?typeof i=="function"&&!Ww(i)?i:e.get(i):n}function Ia(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ws(e);return i.children.forEach(o=>{uP(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Aa(c,t.getContext(o),r)),r}function uP(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,o=e?e.value:null,c=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=hP(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ad(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ia(i,e,c?c.children:null,n,r):Ia(i,e,t,n,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Cs(c.outlet.component,o))}else o&&Aa(e,c,r),r.canActivateChecks.push(new ad(n)),s.component?Ia(i,null,c?c.children:null,n,r):Ia(i,null,t,n,r);return r}function hP(i,e,t){if(typeof t=="function")return t(i,e);switch(t){case"pathParamsChange":return!Er(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Er(i.url,e.url)||!Ki(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zm(i,e)||!Ki(i.queryParams,e.queryParams);case"paramsChange":default:return!Zm(i,e)}}function Aa(i,e,t){let n=ws(i),r=i.value;Object.entries(n).forEach(([s,o])=>{r.component?e?Aa(o,e.children.getContext(s),t):Aa(o,null,t):Aa(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Cs(e.outlet.component,r)):t.canDeactivateChecks.push(new Cs(null,r)):t.canDeactivateChecks.push(new Cs(null,r))}function ja(i){return typeof i=="function"}function mP(i){return typeof i=="boolean"}function fP(i){return i&&ja(i.canLoad)}function pP(i){return i&&ja(i.canActivate)}function gP(i){return i&&ja(i.canActivateChild)}function _P(i){return i&&ja(i.canDeactivate)}function vP(i){return i&&ja(i.canMatch)}function II(i){return i instanceof Uw||i?.name==="EmptyError"}var Yl=Symbol("INITIAL_VALUE");function Rs(){return Rt(i=>Zo(i.map(e=>e.pipe(Di(1),zi(Yl)))).pipe(de(e=>{for(let t of e)if(t!==!0){if(t===Yl)return Yl;if(t===!1||yP(t))return t}return!0}),ft(e=>e!==Yl),Di(1)))}function yP(i){return Ra(i)||i instanceof Na}function bP(i,e){return ei(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Y(Se(O({},t),{guardsResult:!0})):wP(o,n,r,i).pipe(ei(c=>c&&mP(c)?IP(n,s,i,e):Y(c)),de(c=>Se(O({},t),{guardsResult:c})))})}function wP(i,e,t,n){return Kt(i).pipe(ei(r=>SP(r.component,r.route,t,e,n)),Vn(r=>r!==!0,!0))}function IP(i,e,t,n){return Kt(e).pipe(us(r=>Cl(CP(r.route.parent,n),EP(r.route,n),AP(i,r.path,t),TP(i,r.route,t))),Vn(r=>r!==!0,!0))}function EP(i,e){return i!==null&&e&&e(new Km(i)),Y(!0)}function CP(i,e){return i!==null&&e&&e(new Gm(i)),Y(!0)}function TP(i,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return Y(!0);let r=n.map(s=>Jo(()=>{let o=Ua(e)??t,c=xs(s,o),l=pP(c)?c.canActivate(e,i):an(o,()=>c(e,i));return Gn(l).pipe(Vn())}));return Y(r).pipe(Rs())}function AP(i,e,t){let n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>dP(o)).filter(o=>o!==null).map(o=>Jo(()=>{let c=o.guards.map(l=>{let d=Ua(o.node)??t,h=xs(l,d),f=gP(h)?h.canActivateChild(n,i):an(d,()=>h(n,i));return Gn(f).pipe(Vn())});return Y(c).pipe(Rs())}));return Y(s).pipe(Rs())}function SP(i,e,t,n,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(c=>{let l=Ua(e)??r,d=xs(c,l),h=_P(d)?d.canDeactivate(i,e,t,n):an(l,()=>d(i,e,t,n));return Gn(h).pipe(Vn())});return Y(o).pipe(Rs())}function RP(i,e,t,n){let r=e.canLoad;if(r===void 0||r.length===0)return Y(!0);let s=r.map(o=>{let c=xs(o,i),l=fP(c)?c.canLoad(e,t):an(i,()=>c(e,t));return Gn(l)});return Y(s).pipe(Rs(),EI(n))}function EI(i){return Fw(pt(e=>{if(typeof e!="boolean")throw od(i,e)}),de(e=>e===!0))}function xP(i,e,t,n){let r=e.canMatch;if(!r||r.length===0)return Y(!0);let s=r.map(o=>{let c=xs(o,i),l=vP(c)?c.canMatch(e,t):an(i,()=>c(e,t));return Gn(l)});return Y(s).pipe(Rs(),EI(n))}var Fa=class{constructor(e){this.segmentGroup=e||null}},La=class extends Error{constructor(e){super(),this.urlTree=e}};function bs(i){return Qo(new Fa(i))}function kP(i){return Qo(new Qe(4e3,!1))}function DP(i){return Qo(bI(!1,mi.GuardRejected))}var tf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return Y(n);if(r.numberOfChildren>1||!r.children[ae])return kP(`${e.redirectTo}`);r=r.children[ae]}}applyRedirectCommands(e,t,n,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:d,routeConfig:h,url:f,outlet:g,params:w,data:T,title:k}=r,R=an(s,()=>c({params:w,data:T,queryParams:l,fragment:d,routeConfig:h,url:f,outlet:g,title:k}));if(R instanceof fn)throw new La(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t[0]==="/")throw new La(o);return o}applyRedirectCreateUrlTree(e,t,n,r){let s=this.createSegmentGroup(e,t.root,n,r);return new fn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);n[r]=t[c]}else n[r]=s}),n}createSegmentGroup(e,t,n,r){let s=this.createSegments(e,t.segments,n,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,n,r)}),new ke(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){let r=n[t.path.substring(1)];if(!r)throw new Qe(4001,!1);return r}findOrReturn(e,t){let n=0;for(let r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}},nf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PP(i,e,t,n,r){let s=CI(i,e,t);return s.matched?(n=tP(e,n),xP(n,e,t,r).pipe(de(o=>o===!0?s:O({},nf)))):Y(s)}function CI(i,e,t){if(e.path==="**")return MP(t);if(e.path==="")return e.pathMatch==="full"&&(i.hasChildren()||t.length>0)?O({},nf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||xD)(t,i,e);if(!r)return O({},nf);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?O(O({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function MP(i){return{matched:!0,parameters:i.length>0?nI(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function J0(i,e,t,n){return t.length>0&&FP(i,t,n)?{segmentGroup:new ke(e,NP(n,new ke(t,i.children))),slicedSegments:[]}:t.length===0&&LP(i,t,n)?{segmentGroup:new ke(i.segments,OP(i,t,n,i.children)),slicedSegments:t}:{segmentGroup:new ke(i.segments,i.children),slicedSegments:t}}function OP(i,e,t,n){let r={};for(let s of t)if(ld(i,e,s)&&!n[Oi(s)]){let o=new ke([],{});r[Oi(s)]=o}return O(O({},n),r)}function NP(i,e){let t={};t[ae]=e;for(let n of i)if(n.path===""&&Oi(n)!==ae){let r=new ke([],{});t[Oi(n)]=r}return t}function FP(i,e,t){return t.some(n=>ld(i,e,n)&&Oi(n)!==ae)}function LP(i,e,t){return t.some(n=>ld(i,e,n))}function ld(i,e,t){return(i.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function VP(i,e,t){return e.length===0&&!i.children[t]}var rf=class{};function UP(i,e,t,n,r,s,o="emptyOnly"){return new sf(i,e,t,n,r,o,s).recognize()}var jP=31,sf=class{constructor(e,t,n,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new tf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Qe(4002,`'${e.segmentGroup}'`)}recognize(){let e=J0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(({children:t,rootSnapshot:n})=>{let r=new hi(n,t),s=new sd("",r),o=KD(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Es([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(de(n=>({children:n,rootSnapshot:t})),ds(n=>{if(n instanceof La)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Fa?this.noMatchError(n):n}))}processSegmentGroup(e,t,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n,s):this.processSegment(e,t,n,n.segments,r,!0,s).pipe(de(o=>o instanceof hi?[o]:[]))}processChildren(e,t,n,r){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return Kt(s).pipe(us(o=>{let c=n.children[o],l=iP(t,o);return this.processSegmentGroup(e,l,c,o,r)}),Hw((o,c)=>(o.push(...c),o)),hm(null),qw(),ei(o=>{if(o===null)return bs(n);let c=TI(o);return BP(c),Y(c)}))}processSegment(e,t,n,r,s,o,c){return Kt(t).pipe(us(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,n,r,s,o,c).pipe(ds(d=>{if(d instanceof Fa)return Y(null);throw d}))),Vn(l=>!!l),ds(l=>{if(II(l))return VP(n,r,s)?Y(new rf):bs(n);throw l}))}processSegmentAgainstRoute(e,t,n,r,s,o,c,l){return Oi(n)!==o&&(o===ae||!ld(r,s,n))?bs(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,n,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,n,s,o,l):bs(r)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o,c){let{matched:l,parameters:d,consumedSegments:h,positionalParamSegments:f,remainingSegments:g}=CI(t,r,s);if(!l)return bs(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jP&&(this.allowRedirects=!1));let w=new Es(s,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,eI(r),Oi(r),r.component??r._loadedComponent??null,r,tI(r)),T=rd(w,c,this.paramsInheritanceStrategy);w.params=Object.freeze(T.params),w.data=Object.freeze(T.data);let k=this.applyRedirects.applyRedirectCommands(h,r.redirectTo,f,w,e);return this.applyRedirects.lineralizeSegments(r,k).pipe(ei(R=>this.processSegment(e,n,t,R.concat(g),o,!1,c)))}matchSegmentAgainstRoute(e,t,n,r,s,o){let c=PP(t,n,r,e,this.urlSerializer);return n.path==="**"&&(t.children={}),c.pipe(Rt(l=>l.matched?(e=n._injector??e,this.getChildConfig(e,n,r).pipe(Rt(({routes:d})=>{let h=n._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:w}=l,T=new Es(g,f,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,eI(n),Oi(n),n.component??n._loadedComponent??null,n,tI(n)),k=rd(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data);let{segmentGroup:R,slicedSegments:j}=J0(t,g,w,d);if(j.length===0&&R.hasChildren())return this.processChildren(h,d,R,T).pipe(de(K=>new hi(T,K)));if(d.length===0&&j.length===0)return Y(new hi(T,[]));let X=Oi(n)===s;return this.processSegment(h,d,R,j,X?ae:s,!0,T).pipe(de(K=>new hi(T,K instanceof hi?[K]:[])))}))):bs(t)))}getChildConfig(e,t,n){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):RP(e,t,n,this.urlSerializer).pipe(ei(r=>r?this.configLoader.loadChildren(e,t).pipe(pt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):DP(t))):Y({routes:[],injector:e})}};function BP(i){i.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function zP(i){let e=i.value.routeConfig;return e&&e.path===""}function TI(i){let e=[],t=new Set;for(let n of i){if(!zP(n)){e.push(n);continue}let r=e.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),t.add(r)):e.push(n)}for(let n of t){let r=TI(n.children);e.push(new hi(n.value,r))}return e.filter(n=>!t.has(n))}function eI(i){return i.data||{}}function tI(i){return i.resolve||{}}function $P(i,e,t,n,r,s){return ei(o=>UP(i,e,t,n,o.extractedUrl,r,s).pipe(de(({state:c,tree:l})=>Se(O({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function qP(i,e){return ei(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return Y(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of AI(l))o.add(d);let c=0;return Kt(o).pipe(us(l=>s.has(l)?HP(l,n,i,e):(l.data=rd(l,l.parent,i).resolve,Y(void 0))),pt(()=>c++),mm(1),ei(l=>c===o.size?Y(t):Fn))})}function AI(i){let e=i.children.map(t=>AI(t)).flat();return[i,...e]}function HP(i,e,t,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!vI(r)&&(s[Va]=r.title),GP(s,i,e,n).pipe(de(o=>(i._resolvedData=o,i.data=rd(i,i.parent,t).resolve,null)))}function GP(i,e,t,n){let r=Nm(i);if(r.length===0)return Y({});let s={};return Kt(r).pipe(ei(o=>WP(i[o],e,t,n).pipe(Vn(),pt(c=>{if(c instanceof Na)throw od(new Sa,c);s[o]=c}))),mm(1),zw(s),ds(o=>II(o)?Fn:Qo(o)))}function WP(i,e,t,n){let r=Ua(e)??n,s=xs(i,r),o=s.resolve?s.resolve(e,t):an(r,()=>s(e,t));return Gn(o)}function Mm(i){return Rt(e=>{let t=i(e);return t?Kt(t).pipe(de(()=>e)):Y(e)})}var SI=(()=>{class i{buildTitle(t){let n,r=t.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===ae);return n}getResolvedTitleForRoute(t){return t.data[Va]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:()=>B(KP),providedIn:"root"})}}return i})(),KP=(()=>{class i extends SI{constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)(D(Wl))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),uf=new L("",{providedIn:"root",factory:()=>({})}),hf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Me({type:i,selectors:[["ng-component"]],standalone:!0,features:[Le],decls:1,vars:0,template:function(n,r){n&1&&Ie(0,"router-outlet")},dependencies:[lf],encapsulation:2})}}return i})();function mf(i){let e=i.children&&i.children.map(mf),t=e?Se(O({},i),{children:e}):O({},i);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=hf),t}var ff=new L(""),YP=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(ym)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=Gn(t.loadComponent()).pipe(de(RI),pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Al(()=>{this.componentLoaders.delete(t)})),r=new El(n,()=>new ie).pipe(am());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Y({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=QP(n,this.compiler,t,this.onLoadEndListener).pipe(Al(()=>{this.childrenLoaders.delete(n)})),o=new El(s,()=>new ie).pipe(am());return this.childrenLoaders.set(n,o),o}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function QP(i,e,t,n){return Gn(i.loadChildren()).pipe(de(RI),ei(r=>r instanceof t0||Array.isArray(r)?Y(r):Kt(e.compileModuleAsync(r))),de(r=>{n&&n(i);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(ff,[],{optional:!0,self:!0}).flat()),{routes:o.map(mf),injector:s}}))}function XP(i){return i&&typeof i=="object"&&"default"in i}function RI(i){return XP(i)?i.default:i}var pf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:()=>B(ZP),providedIn:"root"})}}return i})(),ZP=(()=>{class i{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),JP=new L("");var eM=new L(""),tM=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ie,this.transitionAbortSubject=new ie,this.configLoader=B(YP),this.environmentInjector=B(hs),this.urlSerializer=B(af),this.rootContexts=B(cd),this.location=B(_s),this.inputBindingEnabled=B(df,{optional:!0})!==null,this.titleStrategy=B(SI),this.options=B(uf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(pf),this.createViewTransition=B(JP,{optional:!0}),this.navigationErrorHandler=B(eM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=r=>this.events.next(new qm(r)),n=r=>this.events.next(new Hm(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(Se(O(O({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,r){return this.transitions=new Jt({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ta,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ft(s=>s.id!==0),de(s=>Se(O({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Rt(s=>{let o=!1,c=!1;return Y(s).pipe(Rt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",mi.SupersededByNewNavigation),Fn;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Se(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload"){let f="";return this.events.next(new Tr(l.id,this.urlSerializer.serialize(l.rawUrl),f,Um.IgnoredSameUrlNavigation)),l.resolve(!1),Fn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(Rt(f=>{let g=this.transitions?.getValue();return this.events.next(new ka(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Fn:Promise.resolve(f)}),$P(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Se(O({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new td(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:g,source:w,restoredState:T,extras:k}=l,R=new ka(f,this.urlSerializer.serialize(g),w,T);this.events.next(R);let j=gI(this.rootComponentType).snapshot;return this.currentTransition=s=Se(O({},l),{targetSnapshot:j,urlAfterRedirects:g,extras:Se(O({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Y(s)}else{let f="";return this.events.next(new Tr(l.id,this.urlSerializer.serialize(l.extractedUrl),f,Um.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Fn}}),pt(l=>{let d=new jm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),de(l=>(this.currentTransition=s=Se(O({},l),{guards:lP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),bP(this.environmentInjector,l=>this.events.next(l)),pt(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw od(this.urlSerializer,l.guardsResult);let d=new Bm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),ft(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",mi.GuardRejected),!1)),Mm(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(pt(d=>{let h=new zm(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Rt(d=>{let h=!1;return Y(d).pipe(qP(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",mi.NoDataFromResolver)}}))}),pt(d=>{let h=new $m(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),Mm(l=>{let d=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(pt(g=>{h.component=g}),de(()=>{})));for(let g of h.children)f.push(...d(g));return f};return Zo(d(l.targetSnapshot.root)).pipe(hm(null),Di(1))}),Mm(()=>this.afterPreactivation()),Rt(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?Kt(h).pipe(de(()=>s)):Y(s)}),de(l=>{let d=rP(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Se(O({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),pt(()=>{this.events.next(new Ma)}),cP(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Di(1),pt({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Pe(this.transitionAbortSubject.pipe(pt(l=>{throw l}))),Al(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",mi.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ds(l=>{if(c=!0,wI(l))this.events.next(new mn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),aP(l)?this.events.next(new As(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let d=new Da(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let h=an(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof Na){let{message:f,cancellationCode:g}=od(this.urlSerializer,h);this.events.next(new mn(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new As(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let f=t.errorHandler(l);s.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Fn}))}))}cancelNavigationTransition(t,n,r){let s=new mn(t.id,this.urlSerializer.serialize(t.extractedUrl),n,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function iM(i){return i!==Ta}var nM=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:()=>B(rM),providedIn:"root"})}}return i})(),of=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rM=(()=>{class i extends of{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=jn(i)))(r||i)}})()}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),xI=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:()=>B(sM),providedIn:"root"})}}return i})(),sM=(()=>{class i extends xI{constructor(){super(...arguments),this.location=B(_s),this.urlSerializer=B(af),this.options=B(uf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(pf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof ka)this.stateMemento=this.createStateMemento();else if(t instanceof Tr)this.rawUrlTree=n.initialUrl;else if(t instanceof td){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??r,n)}}else t instanceof Ma?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):t instanceof mn&&(t.code===mi.GuardRejected||t.code===mi.NoDataFromResolver)?this.restoreHistory(n):t instanceof Da?this.restoreHistory(n,!0):t instanceof Cr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let r=t instanceof fn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let s=this.browserPageId,o=O(O({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(r,"",o)}else{let s=O(O({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=jn(i)))(r||i)}})()}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ea=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Ea||{});function oM(i,e){i.events.pipe(ft(t=>t instanceof Cr||t instanceof mn||t instanceof Da||t instanceof Tr),de(t=>t instanceof Cr||t instanceof Tr?Ea.COMPLETE:(t instanceof mn?t.code===mi.Redirect||t.code===mi.SupersededByNewNavigation:!1)?Ea.REDIRECTING:Ea.FAILED),ft(t=>t!==Ea.REDIRECTING),Di(1)).subscribe(()=>{e()})}function aM(i){throw i}var cM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dd=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(Fl),this.stateManager=B(xI),this.options=B(uf,{optional:!0})||{},this.pendingTasks=B(Yw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(tM),this.urlSerializer=B(af),this.location=B(_s),this.urlHandlingStrategy=B(pf),this._events=new ie,this.errorHandler=this.options.errorHandler||aM,this.navigated=!1,this.routeReuseStrategy=B(nM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(ff,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(df,{optional:!0}),this.eventsSubscription=new Zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof mn&&n.code!==mi.Redirect&&n.code!==mi.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Cr)this.navigated=!0;else if(n instanceof As){let o=n.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),l=O({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||iM(r.source)},o);this.scheduleNavigation(c,Ta,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}uM(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ta,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=O({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=n,d=l?this.currentUrlTree.fragment:o,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=r?r.snapshot:this.routerState.snapshot.root;f=hI(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return mI(f,t,h,d??null)}navigateByUrl(t,n={skipLocationChange:!1}){let r=Ra(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Ta,null,n)}navigate(t,n={skipLocationChange:!1}){return dM(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let r;if(n===!0?r=O({},cM):n===!1?r=O({},lM):r=n,Ra(t))return Y0(this.currentUrlTree,t,r);let s=this.parseUrl(t);return Y0(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((n,[r,s])=>(s!=null&&(n[r]=s),n),{})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,d;o?(c=o.resolve,l=o.reject,d=o.promise):d=new Promise((f,g)=>{c=f,l=g});let h=this.pendingTasks.add();return oM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function dM(i){for(let e=0;e<i.length;e++)if(i[e]==null)throw new Qe(4008,!1)}function uM(i){return!(i instanceof Ma)&&!(i instanceof As)}var hM=new L("");function kI(i,...e){return Be([{provide:ff,multi:!0,useValue:i},[],{provide:Ss,useFactory:mM,deps:[dd]},{provide:u0,multi:!0,useFactory:fM},e.map(t=>t.\u0275providers)])}function mM(i){return i.routerState.root}function fM(){let i=B(ue);return e=>{let t=i.get(oa);if(e!==t.components[0])return;let n=i.get(dd),r=i.get(pM);i.get(gM)===1&&n.initialNavigation(),i.get(_M,null,gm.Optional)?.setUpPreloading(),i.get(hM,null,gm.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var pM=new L("",{factory:()=>new ie}),gM=new L("",{providedIn:"root",factory:()=>1});var _M=new L("");var VI=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(n){return new(n||i)(P(Pl),P(ce))}}static{this.\u0275dir=pe({type:i})}}return i})(),yM=(()=>{class i extends VI{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=jn(i)))(r||i)}})()}static{this.\u0275dir=pe({type:i,features:[bi]})}}return i})(),wd=new L("");var bM={provide:wd,useExisting:Un(()=>UI),multi:!0};function wM(){let i=gs()?gs().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var IM=new L(""),UI=(()=>{class i extends VI{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!wM())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(n){return new(n||i)(P(Pl),P(ce),P(IM,8))}}static{this.\u0275dir=pe({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&We("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[kt([bM]),bi]})}}return i})();function Wn(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function jI(i){return i!=null&&typeof i.length=="number"}var Ga=new L(""),bf=new L(""),EM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hd=class{static min(e){return CM(e)}static max(e){return TM(e)}static required(e){return AM(e)}static requiredTrue(e){return SM(e)}static email(e){return RM(e)}static minLength(e){return xM(e)}static maxLength(e){return kM(e)}static pattern(e){return DM(e)}static nullValidator(e){return BI(e)}static compose(e){return WI(e)}static composeAsync(e){return KI(e)}};function CM(i){return e=>{if(Wn(e.value)||Wn(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function TM(i){return e=>{if(Wn(e.value)||Wn(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function AM(i){return Wn(i.value)?{required:!0}:null}function SM(i){return i.value===!0?null:{required:!0}}function RM(i){return Wn(i.value)||EM.test(i.value)?null:{email:!0}}function xM(i){return e=>Wn(e.value)||!jI(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function kM(i){return e=>jI(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function DM(i){if(!i)return BI;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(Wn(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function BI(i){return null}function zI(i){return i!=null}function $I(i){return Ll(i)?Kt(i):i}function qI(i){let e={};return i.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function HI(i,e){return e.map(t=>t(i))}function PM(i){return!i.validate}function GI(i){return i.map(e=>PM(e)?e:t=>e.validate(t))}function WI(i){if(!i)return null;let e=i.filter(zI);return e.length==0?null:function(t){return qI(HI(t,e))}}function wf(i){return i!=null?WI(GI(i)):null}function KI(i){if(!i)return null;let e=i.filter(zI);return e.length==0?null:function(t){let n=HI(t,e).map($I);return jw(n).pipe(de(qI))}}function If(i){return i!=null?KI(GI(i)):null}function DI(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function YI(i){return i._rawValidators}function QI(i){return i._rawAsyncValidators}function gf(i){return i?Array.isArray(i)?i:[i]:[]}function md(i,e){return Array.isArray(i)?i.includes(e):i===e}function PI(i,e){let t=gf(e);return gf(i).forEach(r=>{md(t,r)||t.push(r)}),t}function MI(i,e){return gf(e).filter(t=>!md(i,t))}var fd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=If(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ar=class extends fd{get formDirective(){return null}get path(){return null}},Sr=class extends fd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},_f=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},MM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qH=Se(O({},MM),{"[class.ng-submitted]":"isSubmitted"}),XI=(()=>{class i extends _f{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||i)(P(Sr,2))}}static{this.\u0275dir=pe({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Fe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[bi]})}}return i})();var Ba="VALID",ud="INVALID",ks="PENDING",za="DISABLED",Kn=class{},pd=class extends Kn{constructor(e,t){super(),this.value=e,this.source=t}},qa=class extends Kn{constructor(e,t){super(),this.pristine=e,this.source=t}},Ha=class extends Kn{constructor(e,t){super(),this.touched=e,this.source=t}},Ds=class extends Kn{constructor(e,t){super(),this.status=e,this.source=t}},vf=class extends Kn{constructor(e){super(),this.source=e}},yf=class extends Kn{constructor(e){super(),this.source=e}};function ZI(i){return(Id(i)?i.validators:i)||null}function OM(i){return Array.isArray(i)?wf(i):i||null}function JI(i,e){return(Id(e)?e.asyncValidators:i)||null}function NM(i){return Array.isArray(i)?If(i):i||null}function Id(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function FM(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new Qe(1e3,"");if(!n[t])throw new Qe(1001,"")}function LM(i,e,t){i._forEachChild((n,r)=>{if(t[r]===void 0)throw new Qe(1002,"")})}var gd=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=dn(()=>this.statusReactive()),this.statusReactive=ms(void 0),this._pristine=dn(()=>this.pristineReactive()),this.pristineReactive=ms(!0),this._touched=dn(()=>this.touchedReactive()),this.touchedReactive=ms(!1),this._events=new ie,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pi(this.statusReactive)}set status(e){Pi(()=>this.statusReactive.set(e))}get valid(){return this.status===Ba}get invalid(){return this.status===ud}get pending(){return this.status==ks}get disabled(){return this.status===za}get enabled(){return this.status!==za}get pristine(){return Pi(this.pristineReactive)}set pristine(e){Pi(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Pi(this.touchedReactive)}set touched(e){Pi(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MI(e,this._rawAsyncValidators))}hasValidator(e){return md(this._rawValidators,e)}hasAsyncValidator(e){return md(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Se(O({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Ha(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new Ha(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Se(O({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new qa(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new qa(!0,n))}markAsPending(e={}){this.status=ks;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ds(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Se(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=za,this.errors=null,this._forEachChild(r=>{r.disable(Se(O({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pd(this.value,n)),this._events.next(new Ds(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Se(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ba,this._forEachChild(n=>{n.enable(Se(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Se(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ba||this.status===ks)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pd(this.value,t)),this._events.next(new Ds(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Se(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?za:Ba}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ks,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=$I(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new Ds(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new _e,this.statusChanges=new _e}_calculateStatus(){return this._allControlsDisabled()?za:this.errors?ud:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ks)?ks:this._anyControlsHaveStatus(ud)?ud:Ba}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new qa(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ha(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Id(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=NM(this._rawAsyncValidators)}},_d=class extends gd{constructor(e,t,n){super(ZI(t),JI(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){LM(this,!0,e),Object.keys(e).forEach(n=>{FM(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ed=new L("CallSetDisabledState",{providedIn:"root",factory:()=>Ef}),Ef="always";function VM(i,e){return[...e.path,i]}function vd(i,e,t=Ef){Cf(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),jM(i,e),zM(i,e),BM(i,e),UM(i,e)}function OI(i,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),bd(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function yd(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function UM(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function Cf(i,e){let t=YI(i);e.validator!==null?i.setValidators(DI(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=QI(i);e.asyncValidator!==null?i.setAsyncValidators(DI(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();yd(e._rawValidators,r),yd(e._rawAsyncValidators,r)}function bd(i,e){let t=!1;if(i!==null){if(e.validator!==null){let r=YI(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(e.asyncValidator!==null){let r=QI(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}let n=()=>{};return yd(e._rawValidators,n),yd(e._rawAsyncValidators,n),t}function jM(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&eE(i,e)})}function BM(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&eE(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function eE(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function zM(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function tE(i,e){i==null,Cf(i,e)}function $M(i,e){return bd(i,e)}function qM(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function HM(i){return Object.getPrototypeOf(i.constructor)===yM}function iE(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function GM(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(s=>{s.constructor===UI?t=s:HM(s)?n=s:r=s}),r||n||t||null}function WM(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var KM={provide:Ar,useExisting:Un(()=>Tf)},$a=Promise.resolve(),Tf=(()=>{class i extends Ar{get submitted(){return Pi(this.submittedReactive)}constructor(t,n,r){super(),this.callSetDisabledState=r,this._submitted=dn(()=>this.submittedReactive()),this.submittedReactive=ms(!1),this._directives=new Set,this.ngSubmit=new _e,this.form=new _d({},wf(t),If(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$a.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),vd(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$a.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$a.then(()=>{let n=this._findContainer(t.path),r=new _d({});tE(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$a.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){$a.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),iE(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(n){return new(n||i)(P(Ga,10),P(bf,10),P(Ed,8))}}static{this.\u0275dir=pe({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&We("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[kt([KM]),bi]})}}return i})();function NI(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function FI(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var nE=class extends gd{constructor(e=null,t,n){super(ZI(t),JI(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Id(t)&&(t.nonNullable||t.initialValueIsDefault)&&(FI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){FI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var YM=i=>i instanceof nE;var QM={provide:Sr,useExisting:Un(()=>Af)},LI=Promise.resolve(),Af=(()=>{class i extends Sr{constructor(t,n,r,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new nE,this._registered=!1,this.name="",this.update=new _e,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=GM(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),qM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){vd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){LI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&Ve(n);LI.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?VM(t,this._parent):[t]}static{this.\u0275fac=function(n){return new(n||i)(P(Ar,9),P(Ga,10),P(bf,10),P(wd,10),P(Et,8),P(Ed,8))}}static{this.\u0275dir=pe({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[kt([QM]),bi,Yt]})}}return i})();var XM={provide:Ar,useExisting:Un(()=>Sf)},Sf=(()=>{class i extends Ar{get submitted(){return Pi(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,n,r){super(),this.callSetDisabledState=r,this._submitted=dn(()=>this._submittedReactive()),this._submittedReactive=ms(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _e,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return vd(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){OI(t.control||null,t,!1),WM(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this._submittedReactive.set(!0),iE(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new vf(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new yf(this.form))}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,r=this.form.get(t.path);n!==r&&(OI(n||null,t),YM(r)&&(vd(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);tE(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&$M(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cf(this.form,this),this._oldForm&&bd(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||i)(P(Ga,10),P(bf,10),P(Ed,8))}}static{this.\u0275dir=pe({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&We("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[kt([XM]),bi,Yt]})}}return i})();var ZM=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({})}}return i})();var Cd=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Ed,useValue:t.callSetDisabledState??Ef}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[ZM]})}}return i})();var xf;try{xf=typeof Intl<"u"&&Intl.v8BreakIterator}catch{xf=!1}var rt=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?aa(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||xf)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(D(yi))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Wa;function JM(){if(Wa==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Wa=!0}))}finally{Wa=Wa||!1}return Wa}function Yn(i){return JM()?i:!!i.capture}var Rr;function sE(){if(Rr==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Rr=!1,Rr;if("scrollBehavior"in document.documentElement.style)Rr=!0;else{let i=Element.prototype.scrollTo;i?Rr=!/\{\s*\[native code\]\s*\}/.test(i.toString()):Rr=!1}}return Rr}var Rf;function eO(){if(Rf==null){let i=typeof document<"u"?document.head:null;Rf=!!(i&&(i.createShadowRoot||i.attachShadow))}return Rf}function oE(i){if(eO()){let e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ei(i){return i.composedPath?i.composedPath()[0]:i.target}function Ka(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ni(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Ps(i){return i!=null&&`${i}`!="false"}function Ya(i,e=0){return tO(i)?Number(i):arguments.length===2?e:0}function tO(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function Ms(i){return Array.isArray(i)?i:[i]}function ut(i){return i==null?"":typeof i=="string"?i:`${i}px`}function pn(i){return i instanceof ce?i.nativeElement:i}var iO=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Td=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({providers:[iO]})}}return i})();var aE=new Set,kr,nO=(()=>{class i{constructor(t,n){this._platform=t,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):sO}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&rO(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(n){return new(n||i)(D(rt),D(na,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function rO(i,e){if(!aE.has(i))try{kr||(kr=document.createElement("style"),e&&kr.setAttribute("nonce",e),kr.setAttribute("type","text/css"),document.head.appendChild(kr)),kr.sheet&&(kr.sheet.insertRule(`@media ${i} {body{ }}`,0),aE.add(i))}catch(t){console.error(t)}}function sO(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var lE=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new ie}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return cE(Ms(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=cE(Ms(t)).map(o=>this._registerQuery(o).observable),s=Zo(r);return s=Cl(s.pipe(Di(1)),s.pipe(Sl(1),Tl(0))),s.pipe(de(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let n=this._mediaMatcher.matchMedia(t),s={observable:new vi(o=>{let c=l=>this._zone.run(()=>o.next(l));return n.addListener(c),()=>{n.removeListener(c)}}).pipe(zi(n),de(({matches:o})=>({query:t,matches:o})),Pe(this._destroySubject)),mql:n};return this._queries.set(t,s),s}static{this.\u0275fac=function(n){return new(n||i)(D(nO),D(U))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function cE(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var mE=" ";function Vf(i,e,t){let n=xd(i,e);t=t.trim(),!n.some(r=>r.trim()===t)&&(n.push(t),i.setAttribute(e,n.join(mE)))}function Md(i,e,t){let n=xd(i,e);t=t.trim();let r=n.filter(s=>s!==t);r.length?i.setAttribute(e,r.join(mE)):i.removeAttribute(e)}function xd(i,e){return i.getAttribute(e)?.match(/\S+/g)??[]}var fE="cdk-describedby-message",Ad="cdk-describedby-host",Pf=0,pE=(()=>{class i{constructor(t,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${Pf++}`,this._document=t,this._id=B(ia)+"-"+Pf++}describe(t,n,r){if(!this._canBeDescribed(t,n))return;let s=kf(n,r);typeof n!="string"?(dE(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,n,r){if(!n||!this._isElementNode(t))return;let s=kf(n,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),typeof n=="string"){let o=this._messageRegistry.get(s);o&&o.referenceCount===0&&this._deleteMessageElement(s)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let t=this._document.querySelectorAll(`[${Ad}="${this._id}"]`);for(let n=0;n<t.length;n++)this._removeCdkDescribedByReferenceIds(t[n]),t[n].removeAttribute(Ad);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,n){let r=this._document.createElement("div");dE(r,this._id),r.textContent=t,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(kf(t,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;let t="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){let n=xd(t,"aria-describedby").filter(r=>r.indexOf(fE)!=0);t.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(t,n){let r=this._messageRegistry.get(n);Vf(t,"aria-describedby",r.messageElement.id),t.setAttribute(Ad,this._id),r.referenceCount++}_removeMessageReference(t,n){let r=this._messageRegistry.get(n);r.referenceCount--,Md(t,"aria-describedby",r.messageElement.id),t.removeAttribute(Ad)}_isElementDescribedByMessage(t,n){let r=xd(t,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&r.indexOf(o)!=-1}_canBeDescribed(t,n){if(!this._isElementNode(t))return!1;if(n&&typeof n=="object")return!0;let r=n==null?"":`${n}`.trim(),s=t.getAttribute("aria-label");return r?!s||s.trim()!==r:!1}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}static{this.\u0275fac=function(n){return new(n||i)(D(he),D(rt))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function kf(i,e){return typeof i=="string"?`${e||""}/${i}`:i}function dE(i,e){i.id||(i.id=`${fE}-${e}-${Pf++}`)}var yO=200,Mf=class{constructor(e,t){this._letterKeyStream=new ie,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new ie,this.selectedItem=this._selectedItem;let n=typeof t?.debounceInterval=="number"?t.debounceInterval:yO;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(n)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(pt(t=>this._pressedLetters.push(t)),Tl(e),ft(()=>this._pressedLetters.length>0),de(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let n=1;n<this._items.length+1;n++){let r=(this._selectedItemIndex+n)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},Of=class{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=Zt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this.tabOut=new ie,this.change=new ie,e instanceof Rl?this._itemChangesSubscription=e.changes.subscribe(n=>this._itemsChanged(n.toArray())):vm(e)&&(this._effectRef=p0(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new Mf(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:n=>this._skipPredicateFn(n)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(n=>{this.setActiveItem(n)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||Ni(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),n=typeof e=="number"?e:t.indexOf(e),r=t[n];this._activeItem=r??null,this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let n=1;n<=t.length;n++){let r=(this._activeItemIndex+e*n+t.length)%t.length,s=t[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){let n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(e+=t,!n[e])return;this.setActiveItem(e)}}_getItemsArray(){return vm(this._items)?this._items():this._items instanceof Rl?this._items.toArray():this._items}_itemsChanged(e){if(this._typeahead?.setItems(e),this._activeItem){let t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}},kd=class extends Of{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}};function Uf(i){return i.buttons===0||i.detail===0}function jf(i){let e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var bO=new L("cdk-input-modality-detector-options"),wO={ignoreKeys:[18,17,224,91,16]},gE=650,Os=Yn({passive:!0,capture:!0}),IO=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Jt(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ei(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<gE||(this._modality.next(Uf(o)?"keyboard":"mouse"),this._mostRecentTarget=Ei(o))},this._onTouchstart=o=>{if(jf(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ei(o)},this._options=O(O({},wO),s),this.modalityDetected=this._modality.pipe(Sl(1)),this.modalityChanged=this.modalityDetected.pipe(mr()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Os),r.addEventListener("mousedown",this._onMousedown,Os),r.addEventListener("touchstart",this._onTouchstart,Os)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Os),document.removeEventListener("mousedown",this._onMousedown,Os),document.removeEventListener("touchstart",this._onTouchstart,Os))}static{this.\u0275fac=function(n){return new(n||i)(D(rt),D(U),D(he),D(bO,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),EO=new L("liveAnnouncerElement",{providedIn:"root",factory:CO});function CO(){return null}var TO=new L("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),AO=0,_E=(()=>{class i{constructor(t,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...n){let r=this._defaultOptions,s,o;return n.length===1&&typeof n[0]=="number"?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),o==null&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(c=>this._currentResolve=c)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,typeof o=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let t="cdk-live-announcer-element",n=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${AO++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let s=n[r],o=s.getAttribute("aria-owns");o?o.indexOf(t)===-1&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}static{this.\u0275fac=function(n){return new(n||i)(D(EO,8),D(U),D(he),D(TO,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Rd=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(Rd||{}),SO=new L("cdk-focus-monitor-default-options"),Sd=Yn({passive:!0,capture:!0}),Od=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ie,this._rootNodeFocusAndBlurListener=c=>{let l=Ei(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=o?.detectionMode||Rd.IMMEDIATE}monitor(t,n=!1){let r=pn(t);if(!this._platform.isBrowser||r.nodeType!==1)return Y();let s=oE(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;let c={checkChildren:n,subject:new ie,rootNode:s};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let n=pn(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){let s=pn(t),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,n,l)):(this._setOrigin(n),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Rd.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused",n==="touch"),t.classList.toggle("cdk-keyboard-focused",n==="keyboard"),t.classList.toggle("cdk-mouse-focused",n==="mouse"),t.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&n,this._detectionMode===Rd.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?gE:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,n){let r=this._elementInfo.get(n),s=Ei(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Sd),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Sd)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pe(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Sd),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Sd),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){let n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||i)(D(U),D(rt),D(IO),D(he,8),D(SO,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Dr=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Dr||{}),uE="cdk-high-contrast-black-on-white",hE="cdk-high-contrast-white-on-black",Df="cdk-high-contrast-active",Bf=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=B(lE).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Dr.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Dr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Dr.BLACK_ON_WHITE}return Dr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Df,uE,hE),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===Dr.BLACK_ON_WHITE?t.add(Df,uE):n===Dr.WHITE_ON_BLACK&&t.add(Df,hE)}}static{this.\u0275fac=function(n){return new(n||i)(D(rt),D(he))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),vE=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(n){return new(n||i)(D(Bf))}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[Td]})}}return i})();var RO=new L("cdk-dir-doc",{providedIn:"root",factory:xO});function xO(){return B(he)}var kO=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function DO(i){let e=i?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?kO.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var gn=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new _e,t){let n=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=DO(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(D(RO,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Qn=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({})}}return i})();var PO=["text"],MO=[[["mat-icon"]],"*"],OO=["mat-icon","*"];function NO(i,e){if(i&1&&Ie(0,"mat-pseudo-checkbox",1),i&2){let t=ct();Ne("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function FO(i,e){if(i&1&&Ie(0,"mat-pseudo-checkbox",3),i&2){let t=ct();Ne("disabled",t.disabled)}}function LO(i,e){if(i&1&&(H(0,"span",4),gt(1),W()),i&2){let t=ct();ee(),Nl("(",t.group.label,")")}}var VO=["mat-internal-form-field",""],UO=["*"];function jO(){return!0}var BO=new L("mat-sanity-checks",{providedIn:"root",factory:jO}),De=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Ka()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(n){return new(n||i)(D(Bf),D(BO,8),D(he))}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[Qn,Qn]})}}return i})();var Ns=class{constructor(e,t,n,r,s){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=n?.isErrorState(r,t)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var Vd=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ci=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(Ci||{}),zf=class{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=Ci.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},yE=Yn({passive:!0,capture:!0}),$f=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Ei(e);t&&this._events.get(e.type)?.forEach((n,r)=>{(r===t||r.contains(t))&&n.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,n,r){let s=this._events.get(t);if(s){let o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(t,new Map([[n,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,yE)})}removeHandler(e,t,n){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(n),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,yE)))}},bE={enterDuration:225,exitDuration:150},zO=800,wE=Yn({passive:!0,capture:!0}),IE=["mousedown","touchstart"],EE=["mouseup","mouseleave","touchend","touchcancel"],qf=class i{static{this._eventManager=new $f}constructor(e,t,n,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=pn(n))}fadeInRipple(e,t,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=O(O({},bE),n.animation);n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=n.radius||$O(e,t,r),c=e-r.left,l=t-r.top,d=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${c-o}px`,h.style.top=`${l-o}px`,h.style.height=`${o*2}px`,h.style.width=`${o*2}px`,n.color!=null&&(h.style.backgroundColor=n.color),h.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(h);let f=window.getComputedStyle(h),g=f.transitionProperty,w=f.transitionDuration,T=g==="none"||w==="0s"||w==="0s, 0s"||r.width===0&&r.height===0,k=new zf(this,h,n,T);h.style.transform="scale3d(1, 1, 1)",k.state=Ci.FADING_IN,n.persistent||(this._mostRecentTransientRipple=k);let R=null;return!T&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let j=()=>{R&&(R.fallbackTimer=null),clearTimeout(K),this._finishRippleTransition(k)},X=()=>this._destroyRipple(k),K=setTimeout(X,d+100);h.addEventListener("transitionend",j),h.addEventListener("transitioncancel",X),R={onTransitionEnd:j,onTransitionCancel:X,fallbackTimer:K}}),this._activeRipples.set(k,R),(T||!d)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(e.state===Ci.FADING_OUT||e.state===Ci.HIDDEN)return;let t=e.element,n=O(O({},bE),e.config.animation);t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=Ci.FADING_OUT,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=pn(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,IE.forEach(n=>{i._eventManager.addHandler(this._ngZone,n,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{EE.forEach(t=>{this._triggerElement.addEventListener(t,this,wE)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ci.FADING_IN?this._startFadeOutTransition(e):e.state===Ci.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=Ci.VISIBLE,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ci.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Uf(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+zO;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!jf(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Ci.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ci.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(IE.forEach(t=>i._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(EE.forEach(t=>e.removeEventListener(t,this,wE)),this._pointerUpEventsRegistered=!1))}};function $O(i,e,t){let n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}var CE=new L("mat-ripple-global-options"),Gf=(()=>{class i{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new qf(this,n,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:O(O(O({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,n,O(O({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,O(O({},this.rippleConfig),t))}static{this.\u0275fac=function(n){return new(n||i)(P(ce),P(U),P(rt),P(CE,8),P(Lt,8))}}static{this.\u0275dir=pe({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){n&2&&Fe("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return i})(),Qa=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[De,De]})}}return i})(),qO=(()=>{class i{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}static{this.\u0275fac=function(n){return new(n||i)(P(Lt,8))}}static{this.\u0275cmp=Me({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(n,r){n&2&&Fe("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Le],decls:0,vars:0,template:function(n,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-app-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-app-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}}return i})(),HO=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[De]})}}return i})(),Wf=new L("MAT_OPTION_PARENT_COMPONENT");var Kf=new L("MatOptgroup");var GO=0,Hf=class{constructor(e,t=!1){this.source=e,this.isUserInput=t}},Ud=(()=>{class i{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(t,n,r,s){this._element=t,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${GO++}`,this.onSelectionChange=new _e,this._stateChanges=new ie}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,n){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(t.keyCode===13||t.keyCode===32)&&!Ni(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new Hf(this,t))}static{this.\u0275fac=function(n){return new(n||i)(P(ce),P(Et),P(Wf,8),P(Kf,8))}}static{this.\u0275cmp=Me({type:i,selectors:[["mat-option"]],viewQuery:function(n,r){if(n&1&&nt(PO,7),n&2){let s;Re(s=xe())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(n,r){n&1&&We("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),n&2&&(zn("id",r.id),at("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Fe("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Ve]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[xt,Le],ngContentSelectors:OO,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,r){n&1&&(ni(MO),Oe(0,NO,1,2,"mat-pseudo-checkbox",1),Xe(1),H(2,"span",2,0),Xe(4,1),W(),Oe(5,FO,1,1,"mat-pseudo-checkbox",3)(6,LO,2,1,"span",4),Ie(7,"div",5)),n&2&&(qe(r.multiple?0:-1),ee(5),qe(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),ee(),qe(r.group&&r.group._inert?6:-1),ee(),Ne("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[qO,Gf],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-app-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color);outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-app-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})();function TE(i,e,t){if(t.length){let n=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}function AE(i,e,t,n){return i<t?i:i+e>t+n?Math.max(0,i-n+e):t}var Yf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[Qa,De,HO]})}}return i})();var SE=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Me({type:i,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(n,r){n&2&&Fe("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Le],attrs:VO,ngContentSelectors:UO,decls:1,vars:0,template:function(n,r){n&1&&(ni(),Xe(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}}return i})();var Qf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[De,Qa,De]})}}return i})();var KO=["switch"],YO=["*"];function QO(i,e){i&1&&(H(0,"span",10),ta(),H(1,"svg",12),Ie(2,"path",13),W(),H(3,"svg",14),Ie(4,"path",15),W()())}var XO=new L("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),ZO={provide:wd,useExisting:Un(()=>xE),multi:!0},jd=class{constructor(e,t){this.source=e,this.checked=t}},JO=0,xE=(()=>{class i{_createChangeEvent(t){return new jd(this,t)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(t){this._checked=t,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,n,r,s,o,c){this._elementRef=t,this._focusMonitor=n,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new _e,this.toggleChange=new _e,this.tabIndex=parseInt(s)||0,this.color=o.color||"accent",this._noopAnimations=c==="NoopAnimations",this.id=this._uniqueId=`mat-mdc-slide-toggle-${++JO}`,this.hideIcon=o.hideIcon??!1,this.disabledInteractive=o.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t==="keyboard"||t==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(t){t.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}validate(t){return this.required&&t.value!==!0?{required:!0}:null}registerOnValidatorChange(t){this._validatorOnChange=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new jd(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static{this.\u0275fac=function(n){return new(n||i)(P(ce),P(Od),P(Et),fr("tabindex"),P(XO),P(Lt,8))}}static{this.\u0275cmp=Me({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(n,r){if(n&1&&nt(KO,5),n&2){let s;Re(s=xe())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(n,r){n&2&&(zn("id",r.id),at("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),fs(r.color?"mat-"+r.color:""),Fe("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",Ve],color:"color",disabled:[2,"disabled","disabled",Ve],disableRipple:[2,"disableRipple","disableRipple",Ve],tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:ln(t)],checked:[2,"checked","checked",Ve],hideIcon:[2,"hideIcon","hideIcon",Ve],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ve]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[kt([ZO,{provide:Ga,useExisting:i,multi:!0}]),xt,Yt,Le],ngContentSelectors:YO,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(n,r){if(n&1){let s=cn();ni(),H(0,"div",1)(1,"button",2,0),We("click",function(){return ti(s),ii(r._handleClick())}),Ie(3,"span",3),H(4,"span",4)(5,"span",5)(6,"span",6),Ie(7,"span",7),W(),H(8,"span",8),Ie(9,"span",9),W(),Oe(10,QO,5,0,"span",10),W()()(),H(11,"label",11),We("click",function(c){return ti(s),ii(c.stopPropagation())}),Xe(12),W()()}if(n&2){let s=gr(2);Ne("labelPosition",r.labelPosition),ee(),Fe("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),Ne("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),at("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),ee(8),Ne("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),ee(),qe(r.hideIcon?-1:10),ee(),Ne("for",r.buttonId),at("id",r._labelId)}},dependencies:[Gf,SE],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape, var(--mat-app-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color, var(--mat-app-outline))}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-app-on-surface))}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-app-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-app-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-app-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-app-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-app-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-app-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-app-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-app-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-app-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-app-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-app-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-app-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-app-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color, var(--mat-app-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-app-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}}return i})();var Xf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[xE,De,De]})}}return i})();var kE=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({})}}return i})();var Zf=class{constructor(e){this._box=e,this._destroyed=new ie,this._resizeSubject=new ie,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new vi(t=>{let n=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),n.unsubscribe(),this._elementObservables.delete(e)}}).pipe(ft(t=>t.some(n=>n.target===e)),pm({bufferSize:1,refCount:!0}),Pe(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},DE=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=B(U),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(t,n){let r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Zf(r)),this._observers.get(r).observe(t)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var eN=["notch"],tN=["matFormFieldNotchedOutline",""],iN=["*"],nN=["textField"],rN=["iconPrefixContainer"],sN=["textPrefixContainer"],oN=["iconSuffixContainer"],aN=["textSuffixContainer"],cN=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],lN=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function dN(i,e){i&1&&Ie(0,"span",21)}function uN(i,e){if(i&1&&(H(0,"label",20),Xe(1,1),Oe(2,dN,1,0,"span",21),W()),i&2){let t=ct(2);Ne("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),at("for",t._control.disableAutomaticLabeling?null:t._control.id),ee(2),qe(!t.hideRequiredMarker&&t._control.required?2:-1)}}function hN(i,e){if(i&1&&Oe(0,uN,3,5,"label",20),i&2){let t=ct();qe(t._hasFloatingLabel()?0:-1)}}function mN(i,e){i&1&&Ie(0,"div",7)}function fN(i,e){}function pN(i,e){if(i&1&&Oe(0,fN,0,0,"ng-template",13),i&2){ct(2);let t=gr(1);Ne("ngTemplateOutlet",t)}}function gN(i,e){if(i&1&&(H(0,"div",9),Oe(1,pN,1,1,null,13),W()),i&2){let t=ct();Ne("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),ee(),qe(t._forceDisplayInfixLabel()?-1:1)}}function _N(i,e){i&1&&(H(0,"div",10,2),Xe(2,2),W())}function vN(i,e){i&1&&(H(0,"div",11,3),Xe(2,3),W())}function yN(i,e){}function bN(i,e){if(i&1&&Oe(0,yN,0,0,"ng-template",13),i&2){ct();let t=gr(1);Ne("ngTemplateOutlet",t)}}function wN(i,e){i&1&&(H(0,"div",14,4),Xe(2,4),W())}function IN(i,e){i&1&&(H(0,"div",15,5),Xe(2,5),W())}function EN(i,e){i&1&&Ie(0,"div",16)}function CN(i,e){if(i&1&&(H(0,"div",18),Xe(1,6),W()),i&2){let t=ct();Ne("@transitionMessages",t._subscriptAnimationState)}}function TN(i,e){if(i&1&&(H(0,"mat-hint",22),gt(1),W()),i&2){let t=ct(2);Ne("id",t._hintLabelId),ee(),$i(t.hintLabel)}}function AN(i,e){if(i&1&&(H(0,"div",19),Oe(1,TN,2,2,"mat-hint",22),Xe(2,7),Ie(3,"div",23),Xe(4,8),W()),i&2){let t=ct();Ne("@transitionMessages",t._subscriptAnimationState),ee(),qe(t.hintLabel?1:-1)}}var zd=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=pe({type:i,selectors:[["mat-label"]],standalone:!0})}}return i})();var SN=new L("MatError");var RN=0,PE=(()=>{class i{constructor(){this.align="start",this.id=`mat-mdc-hint-${RN++}`}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=pe({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){n&2&&(zn("id",r.id),at("align",null),Fe("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return i})(),xN=new L("MatPrefix");var kN=new L("MatSuffix");var jE=new L("FloatingLabelParent"),ME=(()=>{class i{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=B(DE),this._ngZone=B(U),this._parent=B(jE),this._resizeSubscription=new Zt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return DN(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||i)(P(ce))}}static{this.\u0275dir=pe({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){n&2&&Fe("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return i})();function DN(i){let e=i;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let n=t.scrollWidth;return t.remove(),n}var OE="mdc-line-ripple--active",Bd="mdc-line-ripple--deactivating",NE=(()=>{class i{constructor(t,n){this._elementRef=t,this._handleTransitionEnd=r=>{let s=this._elementRef.nativeElement.classList,o=s.contains(Bd);r.propertyName==="opacity"&&o&&s.remove(OE,Bd)},n.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(Bd),t.add(OE)}deactivate(){this._elementRef.nativeElement.classList.add(Bd)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||i)(P(ce),P(U))}}static{this.\u0275dir=pe({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return i})(),FE=(()=>{class i{constructor(t,n){this._elementRef=t,this._ngZone=n,this.open=!1}ngAfterViewInit(){let t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){!this.open||!t?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(n){return new(n||i)(P(ce),P(U))}}static{this.\u0275cmp=Me({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(n&1&&nt(eN,5),n&2){let s;Re(s=xe())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){n&2&&Fe("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Le],attrs:tN,ngContentSelectors:iN,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(n,r){n&1&&(ni(),Ie(0,"div",1),H(1,"div",2,0),Xe(3),W(),Ie(4,"div",3))},encapsulation:2,changeDetection:0})}}return i})(),PN={transitionMessages:vr("transitionMessages",[Ul("enter",Mi({opacity:1,transform:"translateY(0%)"})),qn("void => enter",[Mi({opacity:0,transform:"translateY(-5px)"}),$n("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},$d=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=pe({type:i})}}return i})();var qd=new L("MatFormField"),MN=new L("MAT_FORM_FIELD_DEFAULT_OPTIONS"),LE=0,VE="fill",ON="auto",UE="fixed",NN="translateY(-50%)",BE=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Ps(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||ON}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){let n=this._appearance,r=t||this._defaults?.appearance||VE;this._appearance=r,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||UE}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||UE}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,n,r,s,o,c,l,d){this._elementRef=t,this._changeDetectorRef=n,this._dir=s,this._platform=o,this._defaults=c,this._animationMode=l,this._labelChild=e0(zd),this._hideRequiredMarker=!1,this.color="primary",this._appearance=VE,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${LE++}`,this._hintLabelId=`mat-mdc-hint-${LE++}`,this._subscriptAnimationState="",this._destroyed=new ie,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=B(ue),this.getLabelId=dn(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=dn(()=>!!this._labelChild()),c&&(c.appearance&&(this.appearance=c.appearance),this._hideRequiredMarker=!!c?.hideRequiredMarker,c.color&&(this.color=c.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let n=this._control,r="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(r+t.controlType),n.controlType&&this._elementRef.nativeElement.classList.add(r+n.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),n.ngControl&&n.ngControl.valueChanges&&(this._valueChanges=n.ngControl.valueChanges.pipe(Pe(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Ln(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),Ml(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Pe(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let n=this._control?this._control.ngControl:null;return n&&n[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let n=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,r=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let t=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){t.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,c=n?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0,h=o?.getBoundingClientRect().width??0,f=this._dir.value==="rtl"?"-1":"1",g=`${c+l}px`,T=`calc(${f} * (${g} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;t.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${NN} translateX(${T})
    )`;let k=c+l+d+h;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${k}px)`)}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}static{this.\u0275fac=function(n){return new(n||i)(P(ce),P(Et),P(U),P(gn),P(rt),P(MN,8),P(Lt,8),P(he))}}static{this.\u0275cmp=Me({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,s){if(n&1&&(r0(s,r._labelChild,zd,5),wi(s,$d,5),wi(s,xN,5),wi(s,kN,5),wi(s,SN,5),wi(s,PE,5)),n&2){s0();let o;Re(o=xe())&&(r._formFieldControl=o.first),Re(o=xe())&&(r._prefixChildren=o),Re(o=xe())&&(r._suffixChildren=o),Re(o=xe())&&(r._errorChildren=o),Re(o=xe())&&(r._hintChildren=o)}},viewQuery:function(n,r){if(n&1&&(nt(nN,5),nt(rN,5),nt(sN,5),nt(oN,5),nt(aN,5),nt(ME,5),nt(FE,5),nt(NE,5)),n&2){let s;Re(s=xe())&&(r._textField=s.first),Re(s=xe())&&(r._iconPrefixContainer=s.first),Re(s=xe())&&(r._textPrefixContainer=s.first),Re(s=xe())&&(r._iconSuffixContainer=s.first),Re(s=xe())&&(r._textSuffixContainer=s.first),Re(s=xe())&&(r._floatingLabel=s.first),Re(s=xe())&&(r._notchedOutline=s.first),Re(s=xe())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,r){n&2&&Fe("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[kt([{provide:qd,useExisting:i},{provide:jE,useExisting:i}]),Le],ngContentSelectors:lN,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,r){if(n&1){let s=cn();ni(cN),Oe(0,hN,1,1,"ng-template",null,0,l0),H(2,"div",6,1),We("click",function(c){return ti(s),ii(r._control.onContainerClick(c))}),Oe(4,mN,1,0,"div",7),H(5,"div",8),Oe(6,gN,2,2,"div",9)(7,_N,3,0,"div",10)(8,vN,3,0,"div",11),H(9,"div",12),Oe(10,bN,1,1,null,13),Xe(11),W(),Oe(12,wN,3,0,"div",14)(13,IN,3,0,"div",15),W(),Oe(14,EN,1,0,"div",16),W(),H(15,"div",17),Oe(16,CN,2,1,"div",18)(17,AN,5,2,"div",19),W()}if(n&2){let s;ee(2),Fe("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),ee(2),qe(!r._hasOutline()&&!r._control.disabled?4:-1),ee(2),qe(r._hasOutline()?6:-1),ee(),qe(r._hasIconPrefix?7:-1),ee(),qe(r._hasTextPrefix?8:-1),ee(2),qe(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),ee(2),qe(r._hasTextSuffix?12:-1),ee(),qe(r._hasIconSuffix?13:-1),ee(),qe(r._hasOutline()?-1:14),ee(),Fe("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),ee(),qe((s=r._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[ME,FE,b0,NE,PE],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[PN.transitionMessages]},changeDetection:0})}}return i})(),Xa=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[De,ui,Td,De]})}}return i})();var Jf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[De,Xa,Xa,kE,De]})}}return i})();var ep=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[De,ui,De]})}}return i})();var LN=new L("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var tp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({providers:[Vd,{provide:LN,useValue:{separatorKeyCodes:[13]}}],imports:[De,Qa,De]})}}return i})();var Hd=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(e=!1,t,n=!0,r){this._multiple=e,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ie,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);let t=this.selected,n=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!n.has(this._getConcreteValue(s,n))).forEach(s=>this._unmarkSelected(s));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,t){if(this.compareWith){t=t??this._selection;for(let n of t)if(this.compareWith(e,n))return n;return e}else return e}};var VN=20,Za=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new ie,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=VN){return this._platform.isBrowser?new vi(n=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(um(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Y()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){let r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(ft(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=pn(n),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Bw(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(D(U),D(rt),D(he,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var UN=20,Vs=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new ie,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,c=-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:o,left:c}}change(t=UN){return t>0?this._change.pipe(um(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(D(rt),D(U),D(he,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ls=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({})}}return i})(),ip=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[Qn,Ls,Qn,Ls]})}}return i})();var Ja=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},ec=class extends Ja{constructor(e,t,n,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}},tc=class extends Ja{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},np=class extends Ja{constructor(e){super(),this.element=e instanceof ce?e.nativeElement:e}},rp=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof ec)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof tc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof np)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Gd=class extends rp{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(e){let n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||ue.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);r!==-1&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var $E=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({})}}return i})();var qE=sE(),sp=class{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ut(-this._previousScrollPosition.left),e.style.top=ut(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,n=e.style,r=t.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),qE&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),qE&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}};var op=class{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ft(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Wd=class{enable(){}disable(){}attach(){}};function ap(i,e){return e.some(t=>{let n=i.bottom<t.top,r=i.top>t.bottom,s=i.right<t.left,o=i.left>t.right;return n||r||s||o})}function HE(i,e){return e.some(t=>{let n=i.top<t.top,r=i.bottom>t.bottom,s=i.left<t.left,o=i.right>t.right;return n||r||s||o})}var cp=class{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();ap(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},BN=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new Wd,this.close=o=>new op(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new sp(this._viewportRuler,this._document),this.reposition=o=>new cp(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(n){return new(n||i)(D(Za),D(Vs),D(U),D(he))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Kd=class{constructor(e){if(this.scrollStrategy=new Wd,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let t=Object.keys(e);for(let n of t)e[n]!==void 0&&(this[n]=e[n])}}};var lp=class{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var XE=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(D(he))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),zN=(()=>{class i extends XE{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let c=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(r)):c.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(D(he),D(U,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),$N=(()=>{class i extends XE{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ei(s)},this._clickListener=s=>{let o=Ei(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){let h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(GE(h.overlayElement,o)||GE(h.overlayElement,c))break;let f=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(D(he),D(rt),D(U,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function GE(i,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===i)return!0;n=t&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var ZE=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Ka()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let n=this._document.createElement("div");n.classList.add(t),Ka()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(D(he),D(rt))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),dp=class{constructor(e,t,n,r,s,o,c,l,d,h=!1,f){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._injector=f,this._backdropElement=null,this._backdropClick=new ie,this._attachments=new ie,this._detachments=new ie,this._locationChanges=Zt.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new ie,this._outsidePointerEvents=new ie,this._renders=new ie,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Pi(()=>Ml(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=pr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=O(O({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Se(O({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=ut(this._config.width),e.height=ut(this._config.height),e.minWidth=ut(this._config.minWidth),e.minHeight=ut(this._config.minHeight),e.maxWidth=ut(this._config.maxWidth),e.maxHeight=ut(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){let r=Ms(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Pe(Ln(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},WE="cdk-overlay-connected-position-bounding-box",qN=/([A-Za-z%]+)$/,up=class{get positions(){return this._preferredPositions}constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ie,this._resizeSubscription=Zt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(WE),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(e,r,c),d=this._getOverlayPoint(l,t,c),h=this._getOverlayFit(d,t,n,c);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(h,d,n)){s.push({position:c,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:d,originPoint:l,position:c,overlayRect:t})}if(s.length){let c=null,l=-1;for(let d of s){let h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>l&&(l=h,c=d)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Pr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(WE),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r;if(n.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=n.originX=="start"?o:c}t.left<0&&(r-=t.left);let s;return n.originY=="center"?s=e.top+e.height/2:s=n.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r;n.overlayX=="center"?r=-t.width/2:n.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return n.overlayY=="center"?s=-t.height/2:s=n.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){let s=YE(t),{x:o,y:c}=e,l=this._getOffset(r,"x"),d=this._getOffset(r,"y");l&&(o+=l),d&&(c+=d);let h=0-o,f=o+s.width-n.width,g=0-c,w=c+s.height-n.height,T=this._subtractOverflows(s.width,h,f),k=this._subtractOverflows(s.height,g,w),R=T*k;return{visibleArea:R,isCompletelyWithinViewport:s.width*s.height===R,fitsInViewportVertically:k===s.height,fitsInViewportHorizontally:T==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){let r=n.bottom-t.y,s=n.right-t.x,o=KE(this._overlayRef.getConfig().minHeight),c=KE(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,d=e.fitsInViewportHorizontally||c!=null&&c<=s;return l&&d}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=YE(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),c=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),d=Math.max(s.left-n.left-e.x,0),h=0,f=0;return r.width<=s.width?h=d||-o:h=e.x<this._viewportMargin?s.left-n.left-e.x:0,r.height<=s.height?f=l||-c:f=e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:h,y:f},{x:e.x+h,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!HN(this._lastScrollVisibility,n)){let r=new lp(e,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){let n=this._viewportRect,r=this._isRtl(),s,o,c;if(t.overlayY==="top")o=e.y,s=n.height-o+this._viewportMargin;else if(t.overlayY==="bottom")c=n.height-e.y+this._viewportMargin*2,s=n.height-c+this._viewportMargin;else{let w=Math.min(n.bottom-e.y+n.top,e.y),T=this._lastBoundingBoxSize.height;s=w*2,o=e.y-w,s>T&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-T/2)}let l=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,d=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,h,f,g;if(d)g=n.width-e.x+this._viewportMargin*2,h=e.x-this._viewportMargin;else if(l)f=e.x,h=n.right-e.x;else{let w=Math.min(n.right-e.x+n.left,e.x),T=this._lastBoundingBoxSize.width;h=w*2,f=e.x-w,h>T&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-T/2)}return{top:o,left:f,bottom:c,right:g,width:h,height:s}}_setBoundingBoxStyles(e,t){let n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ut(n.height),r.top=ut(n.top),r.bottom=ut(n.bottom),r.width=ut(n.width),r.left=ut(n.left),r.right=ut(n.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=ut(s)),o&&(r.maxWidth=ut(o))}this._lastBoundingBoxSize=n,Pr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Pr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Pr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let h=this._viewportRuler.getViewportScrollPosition();Pr(n,this._getExactOverlayY(t,e,h)),Pr(n,this._getExactOverlayX(t,e,h))}else n.position="static";let c="",l=this._getOffset(t,"x"),d=this._getOffset(t,"y");l&&(c+=`translateX(${l}px) `),d&&(c+=`translateY(${d}px)`),n.transform=c.trim(),o.maxHeight&&(r?n.maxHeight=ut(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=ut(o.maxWidth):s&&(n.maxWidth="")),Pr(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=ut(s.y);return r}_getExactOverlayX(e,t,n){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=ut(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:HE(e,n),isOriginOutsideView:ap(e,n),isOverlayClipped:HE(t,n),isOverlayOutsideView:ap(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Ms(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ce)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}};function Pr(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function KE(i){if(typeof i!="number"&&i!=null){let[e,t]=i.split(qN);return!t||t==="px"?parseFloat(e):null}return i||null}function YE(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function HN(i,e){return i===e?!0:i.isOriginClipped===e.isOriginClipped&&i.isOriginOutsideView===e.isOriginOutsideView&&i.isOverlayClipped===e.isOverlayClipped&&i.isOverlayOutsideView===e.isOverlayOutsideView}var QE="cdk-global-overlay-wrapper",hp=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(QE),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=n,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),h=this._xPosition,f=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",w="",T="",k="";l?k="flex-start":h==="center"?(k="center",g?T=f:w=f):g?h==="left"||h==="end"?(k="flex-end",w=f):(h==="right"||h==="start")&&(k="flex-start",T=f):h==="left"||h==="start"?(k="flex-start",w=f):(h==="right"||h==="end")&&(k="flex-end",T=f),e.position=this._cssPosition,e.marginLeft=l?"0":w,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":T,t.justifyContent=k,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(QE),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},GN=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new hp}flexibleConnectedTo(t){return new up(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(D(Vs),D(he),D(rt),D(ZE))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),WN=0,Ti=(()=>{class i{constructor(t,n,r,s,o,c,l,d,h,f,g,w){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=f,this._outsideClickDispatcher=g,this._animationsModuleType=w}create(t){let n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new Kd(t);return o.direction=o.direction||this._directionality.value,new dp(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(hs))}position(){return this._positionBuilder}_createPaneElement(t){let n=this._document.createElement("div");return n.id=`cdk-overlay-${WN++}`,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(oa)),new Gd(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(D(BN),D(ZE),D(sa),D(GN),D(zN),D(ue),D(U),D(he),D(gn),D(_s),D($N),D(Lt,8))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),KN=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],JE=new L("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=B(Ti);return()=>i.scrollStrategies.reposition()}}),ic=(()=>{class i{constructor(t){this.elementRef=t}static{this.\u0275fac=function(n){return new(n||i)(P(ce))}}static{this.\u0275dir=pe({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return i})(),fp=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(t){this._disposeOnNavigation=t}constructor(t,n,r,s,o){this._overlay=t,this._dir=o,this._backdropSubscription=Zt.EMPTY,this._attachSubscription=Zt.EMPTY,this._detachSubscription=Zt.EMPTY,this._positionSubscription=Zt.EMPTY,this._disposeOnNavigation=!1,this._ngZone=B(U),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new _e,this.positionChange=new _e,this.attach=new _e,this.detach=new _e,this.overlayKeydown=new _e,this.overlayOutsideClick=new _e,this._templatePortal=new tc(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=KN);let t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Ni(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let r=this._getOriginElement(),s=Ei(n);(!r||r!==s&&!r.contains(s))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let t=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Kd({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(t){let n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let t=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(t),t}_getOrigin(){return this.origin instanceof ic?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof ic?this.origin.elementRef.nativeElement:this.origin instanceof ce?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Gw(()=>this.positionChange.observers.length>0)).subscribe(t=>{this._ngZone.run(()=>this.positionChange.emit(t)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(P(Ti),P(kl),P(Bn),P(JE),P(gn,8))}}static{this.\u0275dir=pe({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Ve],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Ve],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Ve],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Ve],push:[2,"cdkConnectedOverlayPush","push",Ve],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Ve]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[xt,Yt]})}}return i})();function YN(i){return()=>i.scrollStrategies.reposition()}var QN={provide:JE,deps:[Ti],useFactory:YN},Yd=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({providers:[Ti,QN],imports:[Qn,$E,ip,ip]})}}return i})();var ZN=["trigger"],JN=["panel"],e1=[[["mat-select-trigger"]],"*"],t1=["mat-select-trigger","*"];function i1(i,e){if(i&1&&(H(0,"span",4),gt(1),W()),i&2){let t=ct();ee(),$i(t.placeholder)}}function n1(i,e){i&1&&Xe(0)}function r1(i,e){if(i&1&&(H(0,"span",11),gt(1),W()),i&2){let t=ct(2);ee(),$i(t.triggerValue)}}function s1(i,e){if(i&1&&(H(0,"span",5),Oe(1,n1,1,0)(2,r1,2,1,"span",11),W()),i&2){let t=ct();ee(),qe(t.customTrigger?1:2)}}function o1(i,e){if(i&1){let t=cn();H(0,"div",12,1),We("@transformPanel.done",function(r){ti(t);let s=ct();return ii(s._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){ti(t);let s=ct();return ii(s._handleKeydown(r))}),Xe(2,1),W()}if(i&2){let t=ct();n0("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",t._getPanelTheme(),""),Ne("ngClass",t.panelClass)("@transformPanel","showing"),at("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}var a1={transformPanelWrap:vr("transformPanelWrap",[qn("* => void",ca("@transformPanel",[E0()],{optional:!0}))]),transformPanel:vr("transformPanel",[Ul("void",Mi({opacity:0,transform:"scale(1, 0.8)"})),qn("void => showing",$n("120ms cubic-bezier(0, 0, 0.2, 1)",Mi({opacity:1,transform:"scale(1, 1)"}))),qn("* => void",$n("100ms linear",Mi({opacity:0})))])};var eC=0,tC=new L("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let i=B(Ti);return()=>i.scrollStrategies.reposition()}});function c1(i){return()=>i.scrollStrategies.reposition()}var l1=new L("MAT_SELECT_CONFIG"),d1={provide:tC,deps:[Ti],useFactory:c1},u1=new L("MatSelectTrigger"),pp=class{constructor(e,t){this.source=e,this.value=t}},iC=(()=>{class i{_scrollOptionIntoView(t){let n=this.options.toArray()[t];if(n){let r=this.panel.nativeElement,s=TE(t,this.options,this.optionGroups),o=n._getHostElement();t===0&&s===1?r.scrollTop=0:r.scrollTop=AE(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(t){return new pp(this,t)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(hd.required)??!1}set required(t){this._required=t,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._selectionModel,this._multiple=t}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}constructor(t,n,r,s,o,c,l,d,h,f,g,w,T,k){this._viewportRuler=t,this._changeDetectorRef=n,this._elementRef=o,this._dir=c,this._parentFormField=h,this.ngControl=f,this._liveAnnouncer=T,this._defaultOptions=k,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(R,j)=>R===j,this._uid=`mat-select-${eC++}`,this._triggerAriaLabelledBy=null,this._destroy=new ie,this.stateChanges=new ie,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${eC++}`,this._panelDoneAnimatingStream=new ie,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new ie,this.optionSelectionChanges=Jo(()=>{let R=this.options;return R?R.changes.pipe(zi(R),Rt(()=>Ln(...R.map(j=>j.onSelectionChange)))):this._initialized.pipe(Rt(()=>this.optionSelectionChanges))}),this.openedChange=new _e,this._openedStream=this.openedChange.pipe(ft(R=>R),de(()=>{})),this._closedStream=this.openedChange.pipe(ft(R=>!R),de(()=>{})),this.selectionChange=new _e,this.valueChange=new _e,this._trackedModal=null,this._skipPredicate=R=>this.panelOpen?!1:R.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),k?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=k.typeaheadDebounceInterval),this._errorStateTracker=new Ns(s,f,d,l,this.stateChanges),this._scrollStrategyFactory=w,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(g)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Hd(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(mr(),Pe(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Pe(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Pe(this._destroy)).subscribe(t=>{t.added.forEach(n=>n.select()),t.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(zi(null),Pe(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let t=this._getTriggerAriaLabelledby(),n=this.ngControl;if(t!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(this._previousControl!==void 0&&n.disabled!==null&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let t=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;let n=`${this.id}-panel`;this._trackedModal&&Md(this._trackedModal,"aria-owns",n),Vf(t,"aria-owns",n),this._trackedModal=t}_clearFromModal(){if(!this._trackedModal)return;let t=`${this.id}-panel`;Md(this._trackedModal,"aria-owns",t),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let t=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){let n=t.keyCode,r=n===40||n===38||n===37||n===39,s=n===13||n===32,o=this._keyManager;if(!o.isTyping()&&s&&!Ni(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){let c=this.selected;o.onKeydown(t);let l=this.selected;l&&c!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){let n=this._keyManager,r=t.keyCode,s=r===40||r===38,o=n.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(!o&&(r===13||r===32)&&n.activeItem&&!Ni(t))t.preventDefault(),n.activeItem._selectViaInteraction();else if(!o&&this._multiple&&r===65&&t.ctrlKey){t.preventDefault();let c=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(c?l.select():l.deselect())})}else{let c=n.activeItemIndex;n.onKeydown(t),this._multiple&&s&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==c&&n.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Di(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{let n=this._selectOptionByValue(t);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){let n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return r.value!=null&&this._compareWith(r.value,t)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(t){return t!==this._value||this._multiple&&Array.isArray(t)?(this.options&&this._setSelectionByValue(t),this._value=t,!0):!1}_getOverlayWidth(t){return this.panelWidth==="auto"?(t instanceof ic?t.elementRef:t||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let t of this.options)t._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new kd(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let t=Ln(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Pe(t)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ln(...this.options.map(n=>n._stateChanges)).pipe(Pe(t)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(t,n){let r=this._selectionModel.isSelected(t);t.value==null&&!this._multiple?(t.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(t.value)):(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),n&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),n&&this.focus())),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let t=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,t):t.indexOf(n)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let n;this.multiple?n=this.selected.map(r=>r.value):n=this.selected?this.selected.value:t,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let t=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){t=n;break}this._keyManager.setActiveItem(t)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let t=this._parentFormField?.getLabelId(),n=t?t+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let t=this._parentFormField?.getLabelId(),n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static{this.\u0275fac=function(n){return new(n||i)(P(Vs),P(Et),P(U),P(Vd),P(ce),P(gn,8),P(Tf,8),P(Sf,8),P(qd,8),P(Sr,10),fr("tabindex"),P(tC),P(_E),P(l1,8))}}static{this.\u0275cmp=Me({type:i,selectors:[["mat-select"]],contentQueries:function(n,r,s){if(n&1&&(wi(s,u1,5),wi(s,Ud,5),wi(s,Kf,5)),n&2){let o;Re(o=xe())&&(r.customTrigger=o.first),Re(o=xe())&&(r.options=o),Re(o=xe())&&(r.optionGroups=o)}},viewQuery:function(n,r){if(n&1&&(nt(ZN,5),nt(JN,5),nt(fp,5)),n&2){let s;Re(s=xe())&&(r.trigger=s.first),Re(s=xe())&&(r.panel=s.first),Re(s=xe())&&(r._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,r){n&1&&We("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),n&2&&(at("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),Fe("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Ve],disableRipple:[2,"disableRipple","disableRipple",Ve],tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:ln(t)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ve],placeholder:"placeholder",required:[2,"required","required",Ve],multiple:[2,"multiple","multiple",Ve],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Ve],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",ln],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[kt([{provide:$d,useExisting:i},{provide:Wf,useExisting:i}]),xt,Yt,Le],ngContentSelectors:t1,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(n,r){if(n&1){let s=cn();ni(e1),H(0,"div",2,0),We("click",function(){return ti(s),ii(r.open())}),H(3,"div",3),Oe(4,i1,2,1,"span",4)(5,s1,3,1,"span",5),W(),H(6,"div",6)(7,"div",7),ta(),H(8,"svg",8),Ie(9,"path",9),W()()()(),Oe(10,o1,3,9,"ng-template",10),We("backdropClick",function(){return ti(s),ii(r.close())})("attach",function(){return ti(s),ii(r._onAttached())})("detach",function(){return ti(s),ii(r.close())})}if(n&2){let s=gr(1);ee(3),at("id",r._valueId),ee(),qe(r.empty?4:5),ee(6),Ne("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[ic,fp,Vl],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-app-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-app-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-app-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-app-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-app-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-app-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[a1.transformPanel]},changeDetection:0})}}return i})();var gp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({providers:[d1],imports:[ui,Yd,Yf,De,Ls,Xa,Yf,De]})}}return i})();function m1(i,e){i&1&&Ie(0,"div",2)}var f1=new L("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var rC=(()=>{class i{constructor(t,n,r,s,o){this._elementRef=t,this._ngZone=n,this._changeDetectorRef=r,this._animationMode=s,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new _e,this._mode="determinate",this._transitionendHandler=c=>{this.animationEnd.observers.length===0||!c.target||!c.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=s==="NoopAnimations",o&&(o.color&&(this.color=this._defaultColor=o.color),this.mode=o.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(t){this._color=t}get value(){return this._value}set value(t){this._value=nC(t||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=nC(t||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}static{this.\u0275fac=function(n){return new(n||i)(P(ce),P(U),P(Et),P(Lt,8),P(f1,8))}}static{this.\u0275cmp=Me({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(n,r){n&2&&(at("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),fs("mat-"+r.color),Fe("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",ln],bufferValue:[2,"bufferValue","bufferValue",ln],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[xt,Le],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(n,r){n&1&&(H(0,"div",0),Ie(1,"div",1),Oe(2,m1,1,0,"div",2),W(),H(3,"div",3),Ie(4,"span",4),W(),H(5,"div",5),Ie(6,"span",4),W()),n&2&&(ee(),Ol("flex-basis",r._getBufferBarFlexBasis()),ee(),qe(r.mode==="buffer"?2:-1),ee(),Ol("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-app-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}}return i})();function nC(i,e=0,t=100){return Math.max(e,Math.min(t,i))}var _p=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({imports:[De]})}}return i})();var g1=["tooltip"],aC=20;var cC=new L("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let i=B(Ti);return()=>i.scrollStrategies.reposition({scrollThrottle:aC})}});function _1(i){return()=>i.scrollStrategies.reposition({scrollThrottle:aC})}var v1={provide:cC,deps:[Ti],useFactory:_1};function y1(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var b1=new L("mat-tooltip-default-options",{providedIn:"root",factory:y1});var sC="tooltip-panel",oC=Yn({passive:!0}),w1=8,I1=8,E1=24,C1=200,lC=(()=>{class i{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=Ps(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){let n=Ps(t);this._disabled!==n&&(this._disabled=n,n?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Ya(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Ya(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){let n=this._message;this._message=t!=null?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(n)}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,n,r,s,o,c,l,d,h,f,g,w){this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=c,this._ariaDescriber=l,this._focusMonitor=d,this._dir=f,this._defaultOptions=g,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=T1,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new ie,this._injector=B(ue),this._scrollStrategy=h,this._document=w,g&&(this._showDelay=g.showDelay,this._hideDelay=g.hideDelay,g.position&&(this.position=g.position),g.positionAtOrigin&&(this.positionAtOrigin=g.positionAtOrigin),g.touchGestures&&(this.touchGestures=g.touchGestures),g.tooltipClass&&(this.tooltipClass=g.tooltipClass)),f.change.pipe(Pe(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=w1}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Pe(this._destroyed)).subscribe(t=>{t?t==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let t=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,oC)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(n);this._detach(),this._portal=this._portal||new ec(this._tooltipComponent,this._viewContainerRef);let s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Pe(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){let n=this._tooltipInstance;n&&(n.isVisible()?n.hide(t):(n._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof ce)return this._overlayRef;this._detach()}let n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?t||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Pe(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${sC}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Pe(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Pe(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Pe(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!Ni(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){let n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset(O(O({},r.main),s.main)),this._addOffset(O(O({},r.fallback),s.fallback))])}_addOffset(t){let n=I1,r=!this._dir||this._dir.value=="ltr";return t.originY==="top"?t.offsetY=-n:t.originY==="bottom"?t.offsetY=n:t.originX==="start"?t.offsetX=r?-n:n:t.originX==="end"&&(t.offsetX=r?n:-n),t}_getOrigin(){let t=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"||n=="below"?r={originX:"center",originY:n=="above"?"top":"bottom"}:n=="before"||n=="left"&&t||n=="right"&&!t?r={originX:"start",originY:"center"}:(n=="after"||n=="right"&&t||n=="left"&&!t)&&(r={originX:"end",originY:"center"});let{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){let t=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"?r={overlayX:"center",overlayY:"bottom"}:n=="below"?r={overlayX:"center",overlayY:"top"}:n=="before"||n=="left"&&t||n=="right"&&!t?r={overlayX:"end",overlayY:"center"}:(n=="after"||n=="right"&&t||n=="left"&&!t)&&(r={overlayX:"start",overlayY:"center"});let{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),pr(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return this.position==="above"||this.position==="below"?n==="top"?n="bottom":n==="bottom"&&(n="top"):t==="end"?t="start":t==="start"&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){let{overlayY:n,originX:r,originY:s}=t,o;if(n==="center"?this._dir&&this._dir.value==="rtl"?o=r==="end"?"left":"right":o=r==="start"?"left":"right":o=n==="bottom"&&s==="top"?"above":"below",o!==this._currentPosition){let c=this._overlayRef;if(c){let l=`${this._cssClassPrefix}-${sC}-`;c.removePanelClass(l+this._currentPosition),c.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{this._setupPointerExitEventsIfNeeded();let n;t.x!==void 0&&t.y!==void 0&&(n=t),this.show(void 0,n)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{let n=t.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{let r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let n=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,oC)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){let n=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){let t=this.touchGestures;if(t!=="off"){let n=this._elementRef.nativeElement,r=n.style;(t==="on"||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(t==="on"||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(t){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,t,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}static{this.\u0275fac=function(n){return new(n||i)(P(Ti),P(ce),P(Za),P(Bn),P(U),P(rt),P(pE),P(Od),P(cC),P(gn),P(b1,8),P(he))}}static{this.\u0275dir=pe({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(n,r){n&2&&Fe("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return i})(),T1=(()=>{class i{constructor(t,n,r){this._changeDetectorRef=t,this._elementRef=n,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new ie,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=r==="NoopAnimations"}show(t){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>E1&&t.width>=C1}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){let n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible!==t&&(this._isVisible=t,this._changeDetectorRef.markForCheck()),t&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(n);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}static{this.\u0275fac=function(n){return new(n||i)(P(Et),P(ce),P(Lt,8))}}static{this.\u0275cmp=Me({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(n,r){if(n&1&&nt(g1,7),n&2){let s;Re(s=xe())&&(r._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(n,r){n&1&&We("mouseleave",function(o){return r._handleMouseLeave(o)})},standalone:!0,features:[Le],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(n,r){if(n&1){let s=cn();H(0,"div",1,0),We("animationend",function(c){return ti(s),ii(r._handleAnimationEnd(c))}),H(2,"div",2),gt(3),W()()}n&2&&(Fe("mdc-tooltip--multiline",r._isMultiline),Ne("ngClass",r.tooltipClass),ee(3),$i(r.message))},dependencies:[Vl],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return i})();var vp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=J({type:i})}static{this.\u0275inj=Z({providers:[v1],imports:[vE,ui,Yd,De,De,Ls]})}}return i})();var Us=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=J({type:i});static \u0275inj=Z({imports:[Qf,Xf,Jf,ep,tp,_p,vp,gp,Qf,Xf,Jf,ep,tp,_p,vp,gp]})};var S1="firebase",R1="10.13.2";G(S1,R1,"app");var He=new ps("ANGULARFIRE2_VERSION"),Bs=i=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${i} in the constructor, first ensure that ${i} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${i})\`.`;function yt(i,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(i).getImmediate({optional:!0})}var ht=(i,e)=>{let t=e?[e]:$l(),n=[];return t.forEach(r=>{r.container.getProvider(i).instances.forEach(o=>{n.includes(o)||n.push(o)})}),n},oi=class{constructor(){return ht(x1)}},x1="app-check";function js(){}var Qd=class{zone;delegate;constructor(e,t=Vw){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,n)}},yp=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",js,{},js,js)),t.pipe(pt({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},st=(()=>{class i{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Qd(Zone.current)),this.insideAngular=t.run(()=>new Qd(Zone.current,Lw)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||i)(D(U))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Xd(){let i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return i}function k1(i){return Xd().ngZone.runOutsideAngular(()=>i())}function Mr(i){return Xd().ngZone.run(()=>i())}function D1(i){return P1(Xd())(i)}function P1(i){return function(t){return t=t.lift(new yp(i.ngZone)),t.pipe(dm(i.outsideAngular),lm(i.insideAngular))}}var M1=(i,e)=>function(){let n=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Mr(()=>i.apply(void 0,n))},Te=(i,e)=>function(){let t,n=arguments;for(let s=0;s<arguments.length;s++)typeof n[s]=="function"&&(e&&(t||=Mr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",js,{},js,js))),n[s]=M1(n[s],t));let r=k1(()=>i.apply(this,n));if(!e)if(r instanceof vi){let s=Xd();return r.pipe(dm(s.outsideAngular),lm(s.insideAngular))}else return Mr(()=>r);return r instanceof vi?r.pipe(D1):r instanceof Promise?Mr(()=>new Promise((s,o)=>r.then(c=>Mr(()=>s(c)),c=>Mr(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Mr(()=>r)};var Ke=class{constructor(e){return e}},Je=class{constructor(){return $l()}};function O1(i){return i&&i.length===1?i[0]:new Ke(vt())}var bp=new L("angularfire2._apps"),N1={provide:Ke,useFactory:O1,deps:[[new ne,bp]]},F1={provide:Je,deps:[[new ne,bp]]};function L1(i){return(e,t)=>{let n=t.get(yi);G("angularfire",He.full,"core"),G("angularfire",He.full,"app"),G("angular",d0.full,n.toString());let r=e.runOutsideAngular(()=>i(t));return new Ke(r)}}function dC(i,...e){return Be([N1,F1,{provide:bp,useFactory:L1(i),multi:!0,deps:[U,ue,st,...e]}])}var uC=Te(U0,!0);function AC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var SC=AC,RC=new Hi("auth","Firebase",AC());var nu=new Wi("@firebase/auth");function V1(i,...e){nu.logLevel<=Ut.WARN&&nu.warn(`Auth (${si}): ${i}`,...e)}function Jd(i,...e){nu.logLevel<=Ut.ERROR&&nu.error(`Auth (${si}): ${i}`,...e)}function Zn(i,...e){throw jp(i,...e)}function Nr(i,...e){return jp(i,...e)}function xC(i,e,t){let n=Object.assign(Object.assign({},SC()),{[e]:t});return new Hi("auth","Firebase",n).create(e,{appName:i.name})}function Or(i){return xC(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jp(i,...e){if(typeof i!="string"){let t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return RC.create(i,...e)}function re(i,e,...t){if(!i)throw jp(e,...t)}function _n(i){let e="INTERNAL ASSERTION FAILED: "+i;throw Jd(e),new Error(e)}function Jn(i,e){i||_n(e)}function Cp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function U1(){return hC()==="http:"||hC()==="https:"}function hC(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function j1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U1()||da()||"connection"in navigator)?navigator.onLine:!0}function B1(){if(typeof navigator>"u")return null;let i=navigator;return i.languages&&i.languages[0]||i.language||null}var Fr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jn(t>e,"Short delay should be less than long delay!"),this.isMobile=la()||jl()}get(){return j1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Bp(i,e){Jn(i.emulator,"Emulator should always be set here");let{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ru=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var z1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var $1=new Fr(3e4,6e4);function zp(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}function $s(s,o,c,l){return v(this,arguments,function*(i,e,t,n,r={}){return kC(i,r,()=>v(this,null,function*(){let d={},h={};n&&(e==="GET"?h=n:d={body:JSON.stringify(n)});let f=wr(Object.assign({key:i.config.apiKey},h)).slice(1),g=yield i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);let w=Object.assign({method:e,headers:g},d);return k0()||(w.referrerPolicy="no-referrer"),ru.fetch()(DC(i,i.config.apiHost,t,f),w)}))})}function kC(i,e,t){return v(this,null,function*(){i._canInitEmulator=!1;let n=Object.assign(Object.assign({},z1),e);try{let r=new Tp(i),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Zd(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zd(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zd(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zd(i,"user-disabled",o);let h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw xC(i,h,d);Zn(i,h)}}catch(r){if(r instanceof ri)throw r;Zn(i,"network-request-failed",{message:String(r)})}})}function q1(s,o,c,l){return v(this,arguments,function*(i,e,t,n,r={}){let d=yield $s(i,e,t,n,r);return"mfaPendingCredential"in d&&Zn(i,"multi-factor-auth-required",{_serverResponse:d}),d})}function DC(i,e,t,n){let r=`${e}${t}?${n}`;return i.config.emulator?Bp(i.config,r):`${i.config.apiScheme}://${r}`}var Tp=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Nr(this.auth,"network-request-failed")),$1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Zd(i,e,t){let n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);let r=Nr(i,e,n);return r.customData._tokenResponse=t,r}function H1(i,e){return v(this,null,function*(){return $s(i,"POST","/v1/accounts:delete",e)})}function PC(i,e){return v(this,null,function*(){return $s(i,"POST","/v1/accounts:lookup",e)})}function nc(i){if(i)try{let e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $p(i,e=!1){return v(this,null,function*(){let t=me(i),n=yield t.getIdToken(e),r=qp(n);re(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:n,authTime:nc(wp(r.auth_time)),issuedAtTime:nc(wp(r.iat)),expirationTime:nc(wp(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function wp(i){return Number(i)*1e3}function qp(i){let[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{let r=S0(t);return r?JSON.parse(r):(Jd("Failed to decode base64 JWT payload"),null)}catch(r){return Jd("Caught error parsing JWT payload as JSON",r?.toString()),null}}function mC(i){let e=qp(i);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function sc(i,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(n){throw n instanceof ri&&G1(n)&&i.auth.currentUser===i&&(yield i.auth.signOut()),n}})}function G1({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}var Ap=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var oc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function su(i){return v(this,null,function*(){var e;let t=i.auth,n=yield i.getIdToken(),r=yield sc(i,PC(t,{idToken:n}));re(r?.users.length,t,"internal-error");let s=r.users[0];i._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?MC(s.providerUserInfo):[],c=W1(i.providerData,o),l=i.isAnonymous,d=!(i.email&&s.passwordHash)&&!c?.length,h=l?d:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new oc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(i,f)})}function Hp(i){return v(this,null,function*(){let e=me(i);yield su(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function W1(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function MC(i){return i.map(e=>{var{providerId:t}=e,n=cm(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function K1(i,e){return v(this,null,function*(){let t=yield kC(i,{},()=>v(this,null,function*(){let n=wr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=DC(i,r,"/v1/token",`key=${s}`),c=yield i._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ru.fetch()(o,{method:"POST",headers:c,body:n})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Y1(i,e){return v(this,null,function*(){return $s(i,"POST","/v2/accounts:revokeToken",zp(i,e))})}var rc=class i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=mC(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:n,refreshToken:r,expiresIn:s}=yield K1(e,t);this.updateTokensAndExpiration(n,r,Number(s))})}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){let{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new i;return n&&(re(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(re(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new i,this.toJSON())}_performRefresh(){return _n("not implemented")}};function Xn(i,e){re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}var zs=class i{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=cm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ap(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield sc(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return $p(this,e)}reload(){return Hp(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&(yield su(this)),yield this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(hn(this.auth.app))return Promise.reject(Or(this.auth));let e=yield this.getIdToken();return yield sc(this,H1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,o,c,l,d,h;let f=(n=t.displayName)!==null&&n!==void 0?n:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,w=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,k=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,j=(d=t.createdAt)!==null&&d!==void 0?d:void 0,X=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:le,isAnonymous:mt,providerData:we,stsTokenManager:E}=t;re(K&&E,e,"internal-error");let _=rc.fromJSON(this.name,E);re(typeof K=="string",e,"internal-error"),Xn(f,e.name),Xn(g,e.name),re(typeof le=="boolean",e,"internal-error"),re(typeof mt=="boolean",e,"internal-error"),Xn(w,e.name),Xn(T,e.name),Xn(k,e.name),Xn(R,e.name),Xn(j,e.name),Xn(X,e.name);let b=new i({uid:K,auth:e,email:g,emailVerified:le,displayName:f,isAnonymous:mt,photoURL:T,phoneNumber:w,tenantId:k,stsTokenManager:_,createdAt:j,lastLoginAt:X});return we&&Array.isArray(we)&&(b.providerData=we.map(I=>Object.assign({},I))),R&&(b._redirectEventId=R),b}static _fromIdTokenResponse(e,t,n=!1){return v(this,null,function*(){let r=new rc;r.updateFromServerResponse(t);let s=new i({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield su(s),s})}static _fromGetAccountInfoResponse(e,t,n){return v(this,null,function*(){let r=t.users[0];re(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?MC(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new rc;c.updateFromIdToken(n);let l=new i({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new oc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var fC=new Map;function vn(i){Jn(i instanceof Function,"Expected a class definition");let e=fC.get(i);return e?(Jn(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,fC.set(i,e),e)}var Q1=(()=>{class i{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,n){return v(this,null,function*(){this.storage[t]=n})}_get(t){return v(this,null,function*(){let n=this.storage[t];return n===void 0?null:n})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,n){}_removeListener(t,n){}}return i.type="NONE",i})(),Sp=Q1;function eu(i,e,t){return`firebase:${i}:${e}:${t}`}var ou=class i{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:s}=this.auth;this.fullUserKey=eu(this.userKey,r.apiKey,s),this.fullPersistenceKey=eu("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?zs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return v(this,null,function*(){if(!t.length)return new i(vn(Sp),e,n);let r=(yield Promise.all(t.map(d=>v(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||vn(Sp),o=eu(n,e.config.apiKey,e.name),c=null;for(let d of t)try{let h=yield d._get(o);if(h){let f=zs._fromJSON(e,h);d!==s&&(c=f),s=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new i(s,e,n):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>v(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new i(s,e,n))})}};function pC(i){let e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UC(e))return"Blackberry";if(jC(e))return"Webos";if(NC(e))return"Safari";if((e.includes("chrome/")||FC(e))&&!e.includes("edge/"))return"Chrome";if(VC(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function OC(i=Vt()){return/firefox\//i.test(i)}function NC(i=Vt()){let e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FC(i=Vt()){return/crios\//i.test(i)}function LC(i=Vt()){return/iemobile/i.test(i)}function VC(i=Vt()){return/android/i.test(i)}function UC(i=Vt()){return/blackberry/i.test(i)}function jC(i=Vt()){return/webos/i.test(i)}function Gp(i=Vt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function X1(i=Vt()){var e;return Gp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Z1(){return D0()&&document.documentMode===10}function BC(i=Vt()){return Gp(i)||VC(i)||jC(i)||UC(i)||/windows phone/i.test(i)||LC(i)}function zC(i,e=[]){let t;switch(i){case"Browser":t=pC(Vt());break;case"Worker":t=`${pC(Vt())}-${i}`;break;default:t=i}let n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${si}/${n}`}var Rp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)yield n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}})}};function J1(t){return v(this,arguments,function*(i,e={}){return $s(i,"GET","/v2/passwordPolicy",zp(i,e))})}var eF=6,xp=class{constructor(e){var t,n,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:eF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var kp=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new au(this),this.idTokenSubscription=new au(this),this.beforeStateQueue=new Rp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var n,r;if(!this._deleted&&(this.persistenceManager=yield ou.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield PC(this,{idToken:e}),n=yield zs._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(hn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield su(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=B1()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(hn(this.app))return Promise.reject(Or(this));let t=e?me(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return hn(this.app)?Promise.reject(Or(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return hn(this.app)?Promise.reject(Or(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(vn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield J1(this),t=new xp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hi("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),yield Y1(this,n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let n=yield this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&vn(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=yield ou.create(this,[vn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,n;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,n,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&V1(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Wp(i){return me(i)}var au=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=F0(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Kp={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tF(i){Kp=i}function iF(i){return Kp.loadJS(i)}function nF(){return Kp.gapiScript}function $C(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function Yp(i,e){let t=_t(i,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(fa(s,e??{}))return r;Zn(r,"already-initialized")}return t.initialize({options:e})}function rF(i,e){let t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(vn);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function Qp(i,e,t){let n=Wp(i);re(n._canInitEmulator,n,"emulator-config-failed"),re(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=qC(e),{host:o,port:c}=sF(e),l=c===null?"":`:${c}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||oF()}function qC(i){let e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function sF(i){let e=qC(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};let n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){let s=r[1];return{host:s,port:gC(n.substr(s.length+1))}}else{let[s,o]=n.split(":");return{host:s,port:gC(o)}}}function gC(i){if(!i)return null;let e=Number(i);return isNaN(e)?null:e}function oF(){function i(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}var cu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _n("not implemented")}_getIdTokenResponse(e){return _n("not implemented")}_linkToIdToken(e,t){return _n("not implemented")}_getReauthenticationResolver(e){return _n("not implemented")}};function Ip(i,e){return v(this,null,function*(){return q1(i,"POST","/v1/accounts:signInWithIdp",zp(i,e))})}var lu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Dp=class extends lu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ac=class i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,r=!1){return v(this,null,function*(){let s=yield zs._fromIdTokenResponse(e,n,r),o=_C(n);return new i({user:s,providerId:o,_tokenResponse:n,operationType:t})})}static _forOperation(e,t,n){return v(this,null,function*(){yield e._updateTokensIfNecessary(n,!0);let r=_C(n);return new i({user:e,providerId:r,_tokenResponse:n,operationType:t})})}};function _C(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}var Pp=class i extends ri{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,i.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new i(e,t,n,r)}};function HC(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pp._fromErrorAndOperation(i,s,e,n):s})}function aF(i,e,t=!1){return v(this,null,function*(){let n=yield sc(i,e._linkToIdToken(i.auth,yield i.getIdToken()),t);return ac._forOperation(i,"link",n)})}function cF(i,e,t=!1){return v(this,null,function*(){let{auth:n}=i;if(hn(n.app))return Promise.reject(Or(n));let r="reauthenticate";try{let s=yield sc(i,HC(n,r,e,i),t);re(s.idToken,n,"internal-error");let o=qp(s.idToken);re(o,n,"internal-error");let{sub:c}=o;return re(i.uid===c,n,"user-mismatch"),ac._forOperation(i,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Zn(n,"user-mismatch"),s}})}function lF(i,e,t=!1){return v(this,null,function*(){if(hn(i.app))return Promise.reject(Or(i));let n="signIn",r=yield HC(i,n,e),s=yield ac._fromIdTokenResponse(i,n,r);return t||(yield i._updateCurrentUser(s.user)),s})}function fu(i,e,t,n){return me(i).onIdTokenChanged(e,t,n)}function Xp(i,e,t){return me(i).beforeAuthStateChanged(e,t)}function pu(i,e,t,n){return me(i).onAuthStateChanged(e,t,n)}var du="__sak";var uu=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(du,"1"),this.storage.removeItem(du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var dF=1e3,uF=10,hF=(()=>{class i extends uu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),s=this.localCache[n];r!==s&&t(n,s,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let r=t.key;n?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);Z1()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,uF):s()}notifyListeners(t,n){this.localCache[t]=n;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},dF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,n){return v(this,null,function*(){yield Nn(i.prototype,this,"_set").call(this,t,n),this.localCache[t]=JSON.stringify(n)})}_get(t){return v(this,null,function*(){let n=yield Nn(i.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(n),n})}_remove(t){return v(this,null,function*(){yield Nn(i.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return i.type="LOCAL",i})(),GC=hF;var mF=(()=>{class i extends uu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}return i.type="SESSION",i})(),Zp=mF;function fF(i){return Promise.all(i.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var pF=(()=>{class i{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;let r=new i(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let n=t,{eventId:r,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(h=>v(this,null,function*(){return h(n.origin,o)})),d=yield fF(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i.receivers=[];return i})();function WC(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}var Mp=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){return v(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=WC("",20);r.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(f){let g=f;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Yi(){return window}function gF(i){Yi().location.href=i}function KC(){return typeof Yi().WorkerGlobalScope<"u"&&typeof Yi().importScripts=="function"}function _F(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vF(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function yF(){return KC()?self:null}var YC="firebaseLocalStorageDb",bF=1,hu="firebaseLocalStorage",QC="fbase_key",Lr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function gu(i,e){return i.transaction([hu],e?"readwrite":"readonly").objectStore(hu)}function wF(){let i=indexedDB.deleteDatabase(YC);return new Lr(i).toPromise()}function Op(){let i=indexedDB.open(YC,bF);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{let n=i.result;try{n.createObjectStore(hu,{keyPath:QC})}catch(r){t(r)}}),i.addEventListener("success",()=>v(this,null,function*(){let n=i.result;n.objectStoreNames.contains(hu)?e(n):(n.close(),yield wF(),e(yield Op()))}))})}function vC(i,e,t){return v(this,null,function*(){let n=gu(i,!0).put({[QC]:e,value:t});return new Lr(n).toPromise()})}function IF(i,e){return v(this,null,function*(){let t=gu(i,!1).get(e),n=yield new Lr(t).toPromise();return n===void 0?null:n.value})}function yC(i,e){let t=gu(i,!0).delete(e);return new Lr(t).toPromise()}var EF=800,CF=3,TF=(()=>{class i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Op(),this.db)})}_withRetries(t){return v(this,null,function*(){let n=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(n++>CF)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return KC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=pF._getInstance(yF()),this.receiver._subscribe("keyChanged",(t,n)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(t,n)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,n;if(this.activeServiceWorker=yield _F(),!this.activeServiceWorker)return;this.sender=new Mp(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Op();return yield vC(t,du,"1"),yield yC(t,du),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>vC(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let n=yield this._withRetries(r=>IF(r,t));return this.localCache[t]=n,n})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(n=>yC(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let o=gu(s,!1).getAll();return new Lr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(t,n){this.localCache[t]=n;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),EF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return i.type="LOCAL",i})(),XC=TF;var qK=$C("rcb"),HK=new Fr(3e4,6e4);function AF(i,e){return e?vn(e):(re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}var cc=class extends cu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ip(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ip(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ip(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function SF(i){return lF(i.auth,new cc(i),i.bypassAuthState)}function RF(i){let{auth:e,user:t}=i;return re(t,e,"internal-error"),cF(t,new cc(i),i.bypassAuthState)}function xF(i){return v(this,null,function*(){let{auth:e,user:t}=i;return re(t,e,"internal-error"),aF(t,new cc(i),i.bypassAuthState)})}var Np=class{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SF;case"linkViaPopup":case"linkViaRedirect":return xF;case"reauthViaPopup":case"reauthViaRedirect":return RF;default:Zn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var GK=new Fr(2e3,1e4);var kF="pendingRedirect",tu=new Map,Fp=class i extends Np{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){return v(this,null,function*(){let e=tu.get(this.auth._key());if(!e){try{let n=(yield DF(this.resolver,this.auth))?yield Nn(i.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}tu.set(this.auth._key(),e)}return this.bypassAuthState||tu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Nn(i.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Nn(i.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function DF(i,e){return v(this,null,function*(){let t=OF(e),n=MF(i);if(!(yield n._isAvailable()))return!1;let r=(yield n._get(t))==="true";return yield n._remove(t),r})}function PF(i,e){tu.set(i._key(),e)}function MF(i){return vn(i._redirectPersistence)}function OF(i){return eu(kF,i.config.apiKey,i.name)}function NF(i,e,t=!1){return v(this,null,function*(){if(hn(i.app))return Promise.reject(Or(i));let n=Wp(i),r=AF(n,e),o=yield new Fp(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield n._persistUserIfCurrent(o.user),yield n._setRedirectUser(null,e)),o})}var FF=10*60*1e3,Lp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ZC(e)){let r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FF&&this.cachedEventUids.clear(),this.cachedEventUids.has(bC(e))}saveEventToCache(e){this.cachedEventUids.add(bC(e)),this.lastProcessedEventTime=Date.now()}};function bC(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function ZC({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function LF(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZC(i);default:return!1}}function VF(t){return v(this,arguments,function*(i,e={}){return $s(i,"GET","/v1/projects",e)})}var UF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jF=/^https?/;function BF(i){return v(this,null,function*(){if(i.config.emulator)return;let{authorizedDomains:e}=yield VF(i);for(let t of e)try{if(zF(t))return}catch{}Zn(i,"unauthorized-domain")})}function zF(i){let e=Cp(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){let o=new URL(i);return o.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!jF.test(t))return!1;if(UF.test(i))return n===i;let r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}var $F=new Fr(3e4,6e4);function wC(){let i=Yi().___jsl;if(i?.H){for(let e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function qF(i){return new Promise((e,t)=>{var n,r,s;function o(){wC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wC(),t(Nr(i,"network-request-failed"))},timeout:$F.get()})}if(!((r=(n=Yi().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Yi().gapi)===null||s===void 0)&&s.load)o();else{let c=$C("iframefcb");return Yi()[c]=()=>{gapi.load?o():t(Nr(i,"network-request-failed"))},iF(`${nF()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw iu=null,e})}var iu=null;function HF(i){return iu=iu||qF(i),iu}var GF=new Fr(5e3,15e3),WF="__/auth/iframe",KF="emulator/auth/iframe",YF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XF(i){let e=i.config;re(e.authDomain,i,"auth-domain-config-required");let t=e.emulator?Bp(e,KF):`https://${i.config.authDomain}/${WF}`,n={apiKey:e.apiKey,appName:i.name,v:si},r=QF.get(i.config.apiHost);r&&(n.eid=r);let s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${wr(n).slice(1)}`}function ZF(i){return v(this,null,function*(){let e=yield HF(i),t=Yi().gapi;return re(t,i,"internal-error"),e.open({where:document.body,url:XF(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YF,dontclear:!0},n=>new Promise((r,s)=>v(this,null,function*(){yield n.restyle({setHideOnLeave:!1});let o=Nr(i,"network-request-failed"),c=Yi().setTimeout(()=>{s(o)},GF.get());function l(){Yi().clearTimeout(c),r(n)}n.ping(l).then(l,()=>{s(o)})})))})}var JF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eL=500,tL=600,iL="_blank",nL="http://localhost",mu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function rL(i,e,t,n=eL,r=tL){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString(),c="",l=Object.assign(Object.assign({},JF),{width:n.toString(),height:r.toString(),top:s,left:o}),d=Vt().toLowerCase();t&&(c=FC(d)?iL:t),OC(d)&&(e=e||nL,l.scrollbars="yes");let h=Object.entries(l).reduce((g,[w,T])=>`${g}${w}=${T},`,"");if(X1(d)&&c!=="_self")return sL(e||"",c),new mu(null);let f=window.open(e||"",c,h);re(f,i,"popup-blocked");try{f.focus()}catch{}return new mu(f)}function sL(i,e){let t=document.createElement("a");t.href=i,t.target=e;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}var oL="__/auth/handler",aL="emulator/auth/handler",cL=encodeURIComponent("fac");function IC(i,e,t,n,r,s){return v(this,null,function*(){re(i.config.authDomain,i,"auth-domain-config-required"),re(i.config.apiKey,i,"invalid-api-key");let o={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:si,eventId:r};if(e instanceof lu){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",ha(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof Dp){let h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}i.tenantId&&(o.tid=i.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let l=yield i._getAppCheckToken(),d=l?`#${cL}=${encodeURIComponent(l)}`:"";return`${lL(i)}?${wr(c).slice(1)}${d}`})}function lL({config:i}){return i.emulator?Bp(i,aL):`https://${i.authDomain}/${oL}`}var Ep="webStorageSupport",Vp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zp,this._completeRedirectFn=NF,this._overrideRedirectResult=PF}_openPopup(e,t,n,r){return v(this,null,function*(){var s;Jn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield IC(e,t,n,Cp(),r);return rL(e,o,WC())})}_openRedirect(e,t,n,r){return v(this,null,function*(){yield this._originValidation(e);let s=yield IC(e,t,n,Cp(),r);return gF(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Jn(s,"If manager is not set, promise should be"),s)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){return v(this,null,function*(){let t=yield ZF(e),n=new Lp(e);return t.register("authEvent",r=>(re(r?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ep,{type:Ep},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Ep];o!==void 0&&t(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BC()||NC()||Gp()}},JC=Vp;var EC="@firebase/auth",CC="1.7.9";var Up=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dL(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uL(i){dt(new lt("auth",(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let l={apiKey:o,authDomain:c,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zC(i)},d=new kp(n,r,s,l);return rF(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),dt(new lt("auth-internal",e=>{let t=Wp(e.getProvider("auth").getImmediate());return(n=>new Up(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),G(EC,CC,dL(i)),G(EC,CC,"esm2017")}var hL=5*60,mL=wm("authIdTokenMaxAge")||hL,TC=null,fL=i=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>mL)return;let r=t?.token;TC!==r&&(TC=r,yield fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Jp(i=vt()){let e=_t(i,"auth");if(e.isInitialized())return e.getImmediate();let t=Yp(i,{popupRedirectResolver:JC,persistence:[XC,GC,Zp]}),n=wm("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(n,location.origin);if(location.origin===s.origin){let o=fL(s.toString());Xp(t,o,()=>o(t.currentUser)),fu(t,c=>o(c))}}let r=x0("auth");return r&&Qp(t,`http://${r}`),t}function pL(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}tF({loadJS(i){return new Promise((e,t)=>{let n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{let s=Nr("internal-error");s.customData=r,t(s)},n.type="text/javascript",n.charset="UTF-8",pL().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uL("Browser");function tT(i){return new vi(function(e){var t=pu(i,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var iT="auth",Vr=class{constructor(e){return e}},Fi=class{constructor(){return ht(iT)}};var eg=new L("angularfire2.auth-instances");function aV(i,e){let t=yt(iT,i,e);return t&&new Vr(t)}function cV(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Vr(n)}}var lV={provide:Fi,deps:[[new ne,eg]]},dV={provide:Vr,useFactory:aV,deps:[[new ne,eg],Ke]};function nT(i,...e){return G("angularfire",He.full,"auth"),Be([dV,lV,{provide:eg,useFactory:cV(i),multi:!0,deps:[U,ue,st,Je,[new ne,oi],...e]}])}var rT=Te(tT,!0);var sT=Te(Jp,!0);var oT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aT={};var er,tg;(function(){var i;function e(E,_){function b(){}b.prototype=_.prototype,E.D=_.prototype,E.prototype=new b,E.prototype.constructor=E,E.C=function(I,C,S){for(var y=Array(arguments.length-2),rn=2;rn<arguments.length;rn++)y[rn-2]=arguments[rn];return _.prototype[C].apply(I,y)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,b){b||(b=0);var I=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)I[C]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(C=0;16>C;++C)I[C]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=E.g[0],b=E.g[1],C=E.g[2];var S=E.g[3],y=_+(S^b&(C^S))+I[0]+3614090360&4294967295;_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[1]+3905402710&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[2]+606105819&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[3]+3250441966&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(S^b&(C^S))+I[4]+4118548399&4294967295,_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[5]+1200080426&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[6]+2821735955&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[7]+4249261313&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(S^b&(C^S))+I[8]+1770035416&4294967295,_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[9]+2336552879&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[10]+4294925233&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[11]+2304563134&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(S^b&(C^S))+I[12]+1804603682&4294967295,_=b+(y<<7&4294967295|y>>>25),y=S+(C^_&(b^C))+I[13]+4254626195&4294967295,S=_+(y<<12&4294967295|y>>>20),y=C+(b^S&(_^b))+I[14]+2792965006&4294967295,C=S+(y<<17&4294967295|y>>>15),y=b+(_^C&(S^_))+I[15]+1236535329&4294967295,b=C+(y<<22&4294967295|y>>>10),y=_+(C^S&(b^C))+I[1]+4129170786&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[6]+3225465664&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[11]+643717713&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[0]+3921069994&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(C^S&(b^C))+I[5]+3593408605&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[10]+38016083&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[15]+3634488961&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[4]+3889429448&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(C^S&(b^C))+I[9]+568446438&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[14]+3275163606&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[3]+4107603335&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[8]+1163531501&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(C^S&(b^C))+I[13]+2850285829&4294967295,_=b+(y<<5&4294967295|y>>>27),y=S+(b^C&(_^b))+I[2]+4243563512&4294967295,S=_+(y<<9&4294967295|y>>>23),y=C+(_^b&(S^_))+I[7]+1735328473&4294967295,C=S+(y<<14&4294967295|y>>>18),y=b+(S^_&(C^S))+I[12]+2368359562&4294967295,b=C+(y<<20&4294967295|y>>>12),y=_+(b^C^S)+I[5]+4294588738&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[8]+2272392833&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[11]+1839030562&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[14]+4259657740&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(b^C^S)+I[1]+2763975236&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[4]+1272893353&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[7]+4139469664&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[10]+3200236656&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(b^C^S)+I[13]+681279174&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[0]+3936430074&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[3]+3572445317&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[6]+76029189&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(b^C^S)+I[9]+3654602809&4294967295,_=b+(y<<4&4294967295|y>>>28),y=S+(_^b^C)+I[12]+3873151461&4294967295,S=_+(y<<11&4294967295|y>>>21),y=C+(S^_^b)+I[15]+530742520&4294967295,C=S+(y<<16&4294967295|y>>>16),y=b+(C^S^_)+I[2]+3299628645&4294967295,b=C+(y<<23&4294967295|y>>>9),y=_+(C^(b|~S))+I[0]+4096336452&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[7]+1126891415&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[14]+2878612391&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[5]+4237533241&4294967295,b=C+(y<<21&4294967295|y>>>11),y=_+(C^(b|~S))+I[12]+1700485571&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[3]+2399980690&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[10]+4293915773&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[1]+2240044497&4294967295,b=C+(y<<21&4294967295|y>>>11),y=_+(C^(b|~S))+I[8]+1873313359&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[15]+4264355552&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[6]+2734768916&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[13]+1309151649&4294967295,b=C+(y<<21&4294967295|y>>>11),y=_+(C^(b|~S))+I[4]+4149444226&4294967295,_=b+(y<<6&4294967295|y>>>26),y=S+(b^(_|~C))+I[11]+3174756917&4294967295,S=_+(y<<10&4294967295|y>>>22),y=C+(_^(S|~b))+I[2]+718787259&4294967295,C=S+(y<<15&4294967295|y>>>17),y=b+(S^(C|~_))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(C+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+S&4294967295}n.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var b=_-this.blockSize,I=this.B,C=this.h,S=0;S<_;){if(C==0)for(;S<=b;)r(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<_;)if(I[C++]=E.charCodeAt(S++),C==this.blockSize){r(this,I),C=0;break}}else for(;S<_;)if(I[C++]=E[S++],C==this.blockSize){r(this,I),C=0;break}}this.h=C,this.o+=_},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var b=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=b&255,b/=256;for(this.u(E),E=Array(16),_=b=0;4>_;++_)for(var I=0;32>I;I+=8)E[b++]=this.g[_]>>>I&255;return E};function s(E,_){var b=c;return Object.prototype.hasOwnProperty.call(b,E)?b[E]:b[E]=_(E)}function o(E,_){this.h=_;for(var b=[],I=!0,C=E.length-1;0<=C;C--){var S=E[C]|0;I&&S==_||(b[C]=S,I=!1)}this.g=b}var c={};function l(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return R(d(-E));for(var _=[],b=1,I=0;E>=b;I++)_[I]=E/b|0,b*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return R(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(_,8)),I=f,C=0;C<E.length;C+=8){var S=Math.min(8,E.length-C),y=parseInt(E.substring(C,C+S),_);8>S?(S=d(Math.pow(_,S)),I=I.j(S).add(d(y))):(I=I.j(b),I=I.add(d(y)))}return I}var f=l(0),g=l(1),w=l(16777216);i=o.prototype,i.m=function(){if(k(this))return-R(this).m();for(var E=0,_=1,b=0;b<this.g.length;b++){var I=this.i(b);E+=(0<=I?I:4294967296+I)*_,_*=4294967296}return E},i.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(k(this))return"-"+R(this).toString(E);for(var _=d(Math.pow(E,6)),b=this,I="";;){var C=le(b,_).g;b=j(b,C.j(_));var S=((0<b.g.length?b.g[0]:b.h)>>>0).toString(E);if(b=C,T(b))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},i.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function k(E){return E.h==-1}i.l=function(E){return E=j(this,E),k(E)?-1:T(E)?0:1};function R(E){for(var _=E.g.length,b=[],I=0;I<_;I++)b[I]=~E.g[I];return new o(b,~E.h).add(g)}i.abs=function(){return k(this)?R(this):this},i.add=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0,C=0;C<=_;C++){var S=I+(this.i(C)&65535)+(E.i(C)&65535),y=(S>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=y>>>16,S&=65535,y&=65535,b[C]=y<<16|S}return new o(b,b[b.length-1]&-2147483648?-1:0)};function j(E,_){return E.add(R(_))}i.j=function(E){if(T(this)||T(E))return f;if(k(this))return k(E)?R(this).j(R(E)):R(R(this).j(E));if(k(E))return R(this.j(R(E)));if(0>this.l(w)&&0>E.l(w))return d(this.m()*E.m());for(var _=this.g.length+E.g.length,b=[],I=0;I<2*_;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var S=this.i(I)>>>16,y=this.i(I)&65535,rn=E.i(C)>>>16,Do=E.i(C)&65535;b[2*I+2*C]+=y*Do,X(b,2*I+2*C),b[2*I+2*C+1]+=S*Do,X(b,2*I+2*C+1),b[2*I+2*C+1]+=y*rn,X(b,2*I+2*C+1),b[2*I+2*C+2]+=S*rn,X(b,2*I+2*C+2)}for(I=0;I<_;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=_;I<2*_;I++)b[I]=0;return new o(b,0)};function X(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function K(E,_){this.g=E,this.h=_}function le(E,_){if(T(_))throw Error("division by zero");if(T(E))return new K(f,f);if(k(E))return _=le(R(E),_),new K(R(_.g),R(_.h));if(k(_))return _=le(E,R(_)),new K(R(_.g),_.h);if(30<E.g.length){if(k(E)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var b=g,I=_;0>=I.l(E);)b=mt(b),I=mt(I);var C=we(b,1),S=we(I,1);for(I=we(I,2),b=we(b,2);!T(I);){var y=S.add(I);0>=y.l(E)&&(C=C.add(b),S=y),I=we(I,1),b=we(b,1)}return _=j(E,C.j(_)),new K(C,_)}for(C=f;0<=E.l(_);){for(b=Math.max(1,Math.floor(E.m()/_.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=d(b),y=S.j(_);k(y)||0<y.l(E);)b-=I,S=d(b),y=S.j(_);T(S)&&(S=g),C=C.add(S),E=j(E,y)}return new K(C,E)}i.A=function(E){return le(this,E).h},i.and=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0;I<_;I++)b[I]=this.i(I)&E.i(I);return new o(b,this.h&E.h)},i.or=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0;I<_;I++)b[I]=this.i(I)|E.i(I);return new o(b,this.h|E.h)},i.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),b=[],I=0;I<_;I++)b[I]=this.i(I)^E.i(I);return new o(b,this.h^E.h)};function mt(E){for(var _=E.g.length+1,b=[],I=0;I<_;I++)b[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(b,E.h)}function we(E,_){var b=_>>5;_%=32;for(var I=E.g.length-b,C=[],S=0;S<I;S++)C[S]=0<_?E.i(S+b)>>>_|E.i(S+b+1)<<32-_:E.i(S+b);return new o(C,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,tg=aT.Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,er=aT.Integer=o}).apply(typeof oT<"u"?oT:typeof self<"u"?self:typeof window<"u"?window:{});var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yn={};var ig,ng,qs,rg,lc,vu,sg,og,ag;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,m){return a==Array.prototype||a==Object.prototype||(a[u]=m.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof _u=="object"&&_u];for(var u=0;u<a.length;++u){var m=a[u];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var n=t(this);function r(a,u){if(u)e:{var m=n;a=a.split(".");for(var p=0;p<a.length-1;p++){var A=a[p];if(!(A in m))break e;m=m[A]}a=a[a.length-1],p=m[a],u=u(p),u!=p&&u!=null&&e(m,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var m=0,p=!1,A={next:function(){if(!p&&m<a.length){var x=m++;return{value:u(x,a[x]),done:!1}}return p=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,m){return m})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function h(a,u,m){return a.call.apply(a.bind,arguments)}function f(a,u,m){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,p),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function g(a,u,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function w(a,u){var m=Array.prototype.slice.call(arguments,1);return function(){var p=m.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function T(a,u){function m(){}m.prototype=u.prototype,a.aa=u.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(p,A,x){for(var F=Array(arguments.length-2),je=2;je<arguments.length;je++)F[je-2]=arguments[je];return u.prototype[A].apply(p,F)}}function k(a){let u=a.length;if(0<u){let m=Array(u);for(let p=0;p<u;p++)m[p]=a[p];return m}return[]}function R(a,u){for(let m=1;m<arguments.length;m++){let p=arguments[m];if(l(p)){let A=a.length||0,x=p.length||0;a.length=A+x;for(let F=0;F<x;F++)a[A+F]=p[F]}else a.push(p)}}class j{constructor(u,m){this.i=u,this.j=m,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function X(a){return/^[\s\xa0]*$/.test(a)}function K(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function le(a){return le[" "](a),a}le[" "]=function(){};var mt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function we(a,u,m){for(let p in a)u.call(m,a[p],p,a)}function E(a,u){for(let m in a)u.call(void 0,a[m],m,a)}function _(a){let u={};for(let m in a)u[m]=a[m];return u}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,u){let m,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(m in p)a[m]=p[m];for(let x=0;x<b.length;x++)m=b[x],Object.prototype.hasOwnProperty.call(p,m)&&(a[m]=p[m])}}function C(a){var u=1;a=a.split(":");let m=[];for(;0<u&&a.length;)m.push(a.shift()),u--;return a.length&&m.push(a.join(":")),m}function S(a){c.setTimeout(()=>{throw a},0)}function y(){var a=Fh;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class rn{constructor(){this.h=this.g=null}add(u,m){let p=Do.get();p.set(u,m),this.h?this.h.next=p:this.g=p,this.h=p}}var Do=new j(()=>new Rk,a=>a.reset());class Rk{constructor(){this.next=this.g=this.h=null}set(u,m){this.h=u,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Po,Mo=!1,Fh=new rn,Ob=()=>{let a=c.Promise.resolve(void 0);Po=()=>{a.then(xk)}};var xk=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(m){S(m)}var u=Do;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Mo=!1};function Dn(){this.s=this.s,this.C=this.C}Dn.prototype.s=!1,Dn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Dn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var kk=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let m=()=>{};c.addEventListener("test",m,u),c.removeEventListener("test",m,u)}catch{}return a}();function Oo(a,u){if(Mt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(mt){e:{try{le(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else m=="mouseover"?u=a.fromElement:m=="mouseout"&&(u=a.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Dk[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Oo.aa.h.call(this)}}T(Oo,Mt);var Dk={2:"touch",3:"pen",4:"mouse"};Oo.prototype.h=function(){Oo.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var No="closure_listenable_"+(1e6*Math.random()|0),Pk=0;function Mk(a,u,m,p,A){this.listener=a,this.proxy=null,this.src=u,this.type=m,this.capture=!!p,this.ha=A,this.key=++Pk,this.da=this.fa=!1}function ol(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function al(a){this.src=a,this.g={},this.h=0}al.prototype.add=function(a,u,m,p,A){var x=a.toString();a=this.g[x],a||(a=this.g[x]=[],this.h++);var F=Vh(a,u,p,A);return-1<F?(u=a[F],m||(u.fa=!1)):(u=new Mk(u,this.src,x,!!p,A),u.fa=m,a.push(u)),u};function Lh(a,u){var m=u.type;if(m in a.g){var p=a.g[m],A=Array.prototype.indexOf.call(p,u,void 0),x;(x=0<=A)&&Array.prototype.splice.call(p,A,1),x&&(ol(u),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Vh(a,u,m,p){for(var A=0;A<a.length;++A){var x=a[A];if(!x.da&&x.listener==u&&x.capture==!!m&&x.ha==p)return A}return-1}var Uh="closure_lm_"+(1e6*Math.random()|0),jh={};function Nb(a,u,m,p,A){if(p&&p.once)return Lb(a,u,m,p,A);if(Array.isArray(u)){for(var x=0;x<u.length;x++)Nb(a,u[x],m,p,A);return null}return m=qh(m),a&&a[No]?a.K(u,m,d(p)?!!p.capture:!!p,A):Fb(a,u,m,!1,p,A)}function Fb(a,u,m,p,A,x){if(!u)throw Error("Invalid event type");var F=d(A)?!!A.capture:!!A,je=zh(a);if(je||(a[Uh]=je=new al(a)),m=je.add(u,m,p,F,x),m.proxy)return m;if(p=Ok(),m.proxy=p,p.src=a,p.listener=m,a.addEventListener)kk||(A=F),A===void 0&&(A=!1),a.addEventListener(u.toString(),p,A);else if(a.attachEvent)a.attachEvent(Ub(u.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ok(){function a(m){return u.call(a.src,a.listener,m)}let u=Nk;return a}function Lb(a,u,m,p,A){if(Array.isArray(u)){for(var x=0;x<u.length;x++)Lb(a,u[x],m,p,A);return null}return m=qh(m),a&&a[No]?a.L(u,m,d(p)?!!p.capture:!!p,A):Fb(a,u,m,!0,p,A)}function Vb(a,u,m,p,A){if(Array.isArray(u))for(var x=0;x<u.length;x++)Vb(a,u[x],m,p,A);else p=d(p)?!!p.capture:!!p,m=qh(m),a&&a[No]?(a=a.i,u=String(u).toString(),u in a.g&&(x=a.g[u],m=Vh(x,m,p,A),-1<m&&(ol(x[m]),Array.prototype.splice.call(x,m,1),x.length==0&&(delete a.g[u],a.h--)))):a&&(a=zh(a))&&(u=a.g[u.toString()],a=-1,u&&(a=Vh(u,m,p,A)),(m=-1<a?u[a]:null)&&Bh(m))}function Bh(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[No])Lh(u.i,a);else{var m=a.type,p=a.proxy;u.removeEventListener?u.removeEventListener(m,p,a.capture):u.detachEvent?u.detachEvent(Ub(m),p):u.addListener&&u.removeListener&&u.removeListener(p),(m=zh(u))?(Lh(m,a),m.h==0&&(m.src=null,u[Uh]=null)):ol(a)}}}function Ub(a){return a in jh?jh[a]:jh[a]="on"+a}function Nk(a,u){if(a.da)a=!0;else{u=new Oo(u,this);var m=a.listener,p=a.ha||a.src;a.fa&&Bh(a),a=m.call(p,u)}return a}function zh(a){return a=a[Uh],a instanceof al?a:null}var $h="__closure_events_fn_"+(1e9*Math.random()>>>0);function qh(a){return typeof a=="function"?a:(a[$h]||(a[$h]=function(u){return a.handleEvent(u)}),a[$h])}function Ot(){Dn.call(this),this.i=new al(this),this.M=this,this.F=null}T(Ot,Dn),Ot.prototype[No]=!0,Ot.prototype.removeEventListener=function(a,u,m,p){Vb(this,a,u,m,p)};function Gt(a,u){var m,p=a.F;if(p)for(m=[];p;p=p.F)m.push(p);if(a=a.M,p=u.type||u,typeof u=="string")u=new Mt(u,a);else if(u instanceof Mt)u.target=u.target||a;else{var A=u;u=new Mt(p,a),I(u,A)}if(A=!0,m)for(var x=m.length-1;0<=x;x--){var F=u.g=m[x];A=cl(F,p,!0,u)&&A}if(F=u.g=a,A=cl(F,p,!0,u)&&A,A=cl(F,p,!1,u)&&A,m)for(x=0;x<m.length;x++)F=u.g=m[x],A=cl(F,p,!1,u)&&A}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var m=a.g[u],p=0;p<m.length;p++)ol(m[p]);delete a.g[u],a.h--}}this.F=null},Ot.prototype.K=function(a,u,m,p){return this.i.add(String(a),u,!1,m,p)},Ot.prototype.L=function(a,u,m,p){return this.i.add(String(a),u,!0,m,p)};function cl(a,u,m,p){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,x=0;x<u.length;++x){var F=u[x];if(F&&!F.da&&F.capture==m){var je=F.listener,St=F.ha||F.src;F.fa&&Lh(a.i,F),A=je.call(St,p)!==!1&&A}}return A&&!p.defaultPrevented}function jb(a,u,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function Bb(a){a.g=jb(()=>{a.g=null,a.i&&(a.i=!1,Bb(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class Fk extends Dn{constructor(u,m){super(),this.m=u,this.l=m,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Bb(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fo(a){Dn.call(this),this.h=a,this.g={}}T(Fo,Dn);var zb=[];function $b(a){we(a.g,function(u,m){this.g.hasOwnProperty(m)&&Bh(u)},a),a.g={}}Fo.prototype.N=function(){Fo.aa.N.call(this),$b(this)},Fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hh=c.JSON.stringify,Lk=c.JSON.parse,Vk=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Gh(){}Gh.prototype.h=null;function qb(a){return a.h||(a.h=a.i())}function Hb(){}var Lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wh(){Mt.call(this,"d")}T(Wh,Mt);function Kh(){Mt.call(this,"c")}T(Kh,Mt);var lr={},Gb=null;function ll(){return Gb=Gb||new Ot}lr.La="serverreachability";function Wb(a){Mt.call(this,lr.La,a)}T(Wb,Mt);function Vo(a){let u=ll();Gt(u,new Wb(u))}lr.STAT_EVENT="statevent";function Kb(a,u){Mt.call(this,lr.STAT_EVENT,a),this.stat=u}T(Kb,Mt);function Wt(a){let u=ll();Gt(u,new Kb(u,a))}lr.Ma="timingevent";function Yb(a,u){Mt.call(this,lr.Ma,a),this.size=u}T(Yb,Mt);function Uo(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function Uk(a,u,m,p,A,x){a.info(function(){if(a.g)if(x)for(var F="",je=x.split("&"),St=0;St<je.length;St++){var Ee=je[St].split("=");if(1<Ee.length){var Nt=Ee[0];Ee=Ee[1];var Ft=Nt.split("_");F=2<=Ft.length&&Ft[1]=="type"?F+(Nt+"="+Ee+"&"):F+(Nt+"=redacted&")}}else F=null;else F=x;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+u+`
`+m+`
`+F})}function jk(a,u,m,p,A,x,F){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+u+`
`+m+`
`+x+" "+F})}function os(a,u,m,p){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+zk(a,m)+(p?" "+p:"")})}function Bk(a,u){a.info(function(){return"TIMEOUT: "+u})}jo.prototype.info=function(){};function zk(a,u){if(!a.g)return u;if(!u)return null;try{var m=JSON.parse(u);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var p=m[a];if(!(2>p.length)){var A=p[1];if(Array.isArray(A)&&!(1>A.length)){var x=A[0];if(x!="noop"&&x!="stop"&&x!="close")for(var F=1;F<A.length;F++)A[F]=""}}}}return Hh(m)}catch{return u}}var dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yh;function ul(){}T(ul,Gh),ul.prototype.g=function(){return new XMLHttpRequest},ul.prototype.i=function(){return{}},Yh=new ul;function Pn(a,u,m,p){this.j=a,this.i=u,this.l=m,this.R=p||1,this.U=new Fo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xb}function Xb(){this.i=null,this.g="",this.h=!1}var Zb={},Qh={};function Xh(a,u,m){a.L=1,a.v=pl(sn(u)),a.m=m,a.P=!0,Jb(a,null)}function Jb(a,u){a.F=Date.now(),hl(a),a.A=sn(a.v);var m=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),mw(m.i,"t",p),a.C=0,m=a.j.J,a.h=new Xb,a.g=Dw(a.j,m?u:null,!a.m),0<a.O&&(a.M=new Fk(g(a.Y,a,a.g),a.O)),u=a.U,m=a.g,p=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(zb[0]=A.toString()),A=zb);for(var x=0;x<A.length;x++){var F=Nb(m,A[x],p||u.handleEvent,!1,u.h||u);if(!F)break;u.g[F.key]=F}u=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Vo(),Uk(a.i,a.u,a.A,a.l,a.R,a.m)}Pn.prototype.ca=function(a){a=a.target;let u=this.M;u&&on(a)==3?u.j():this.Y(a)},Pn.prototype.Y=function(a){try{if(a==this.g)e:{let Ft=on(this.g);var u=this.g.Ba();let ls=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||bw(this.g)))){this.J||Ft!=4||u==7||(u==8||0>=ls?Vo(3):Vo(2)),Zh(this);var m=this.g.Z();this.X=m;t:if(ew(this)){var p=bw(this.g);a="";var A=p.length,x=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),Bo(this);var F="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(p[u],{stream:!(x&&u==A-1)});p.length=0,this.h.g+=a,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=m==200,jk(this.i,this.u,this.A,this.l,this.R,Ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var je,St=this.g;if((je=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(je)){var Ee=je;break t}}Ee=null}if(m=Ee)os(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jh(this,m);else{this.o=!1,this.s=3,Wt(12),dr(this),Bo(this);break e}}if(this.P){m=!0;let ki;for(;!this.J&&this.C<F.length;)if(ki=$k(this,F),ki==Qh){Ft==4&&(this.s=4,Wt(14),m=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(ki==Zb){this.s=4,Wt(15),os(this.i,this.l,F,"[Invalid Chunk]"),m=!1;break}else os(this.i,this.l,ki,null),Jh(this,ki);if(ew(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||F.length!=0||this.h.h||(this.s=1,Wt(16),m=!1),this.o=this.o&&m,!m)os(this.i,this.l,F,"[Invalid Chunked Response]"),dr(this),Bo(this);else if(0<F.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),sm(Nt),Nt.M=!0,Wt(11))}}else os(this.i,this.l,F,null),Jh(this,F);Ft==4&&dr(this),this.o&&!this.J&&(Ft==4?Sw(this.j,this):(this.o=!1,hl(this)))}else oD(this.g),m==400&&0<F.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),dr(this),Bo(this)}}}catch{}finally{}};function ew(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function $k(a,u){var m=a.C,p=u.indexOf(`
`,m);return p==-1?Qh:(m=Number(u.substring(m,p)),isNaN(m)?Zb:(p+=1,p+m>u.length?Qh:(u=u.slice(p,p+m),a.C=p+m,u)))}Pn.prototype.cancel=function(){this.J=!0,dr(this)};function hl(a){a.S=Date.now()+a.I,tw(a,a.I)}function tw(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Uo(g(a.ba,a),u)}function Zh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Pn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(Bk(this.i,this.A),this.L!=2&&(Vo(),Wt(17)),dr(this),this.s=2,Bo(this)):tw(this,this.S-a)};function Bo(a){a.j.G==0||a.J||Sw(a.j,a)}function dr(a){Zh(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,$b(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Jh(a,u){try{var m=a.j;if(m.G!=0&&(m.g==a||em(m.h,a))){if(!a.K&&em(m.h,a)&&m.G==3){try{var p=m.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)bl(m),vl(m);else break e;rm(m),Wt(18)}}else m.za=A[1],0<m.za-m.T&&37500>A[2]&&m.F&&m.v==0&&!m.C&&(m.C=Uo(g(m.Za,m),6e3));if(1>=rw(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else hr(m,11)}else if((a.K||m.g==a)&&bl(m),!X(u))for(A=m.Da.g.parse(u),u=0;u<A.length;u++){let Ee=A[u];if(m.T=Ee[0],Ee=Ee[1],m.G==2)if(Ee[0]=="c"){m.K=Ee[1],m.ia=Ee[2];let Nt=Ee[3];Nt!=null&&(m.la=Nt,m.j.info("VER="+m.la));let Ft=Ee[4];Ft!=null&&(m.Aa=Ft,m.j.info("SVER="+m.Aa));let ls=Ee[5];ls!=null&&typeof ls=="number"&&0<ls&&(p=1.5*ls,m.L=p,m.j.info("backChannelRequestTimeoutMs_="+p)),p=m;let ki=a.g;if(ki){let Il=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var x=p.h;x.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(tm(x,x.h),x.h=null))}if(p.D){let om=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(p.ya=om,Ge(p.I,p.D,om))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),p=m;var F=a;if(p.qa=kw(p,p.J?p.ia:null,p.W),F.K){sw(p.h,F);var je=F,St=p.L;St&&(je.I=St),je.B&&(Zh(je),hl(je)),p.g=F}else Tw(p);0<m.i.length&&yl(m)}else Ee[0]!="stop"&&Ee[0]!="close"||hr(m,7);else m.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?hr(m,7):nm(m):Ee[0]!="noop"&&m.l&&m.l.ta(Ee),m.v=0)}}Vo(4)}catch{}}var qk=class{constructor(a,u){this.g=a,this.map=u}};function iw(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nw(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function rw(a){return a.h?1:a.g?a.g.size:0}function em(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function tm(a,u){a.g?a.g.add(u):a.h=u}function sw(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}iw.prototype.cancel=function(){if(this.i=ow(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function ow(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let m of a.g.values())u=u.concat(m.D);return u}return k(a.i)}function Hk(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],m=a.length,p=0;p<m;p++)u.push(a[p]);return u}u=[],m=0;for(p in a)u[m++]=a[p];return u}function Gk(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var m=0;m<a;m++)u.push(m);return u}u=[],m=0;for(let p in a)u[m++]=p;return u}}}function aw(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var m=Gk(a),p=Hk(a),A=p.length,x=0;x<A;x++)u.call(void 0,p[x],m&&m[x],a)}var cw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wk(a,u){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var p=a[m].indexOf("="),A=null;if(0<=p){var x=a[m].substring(0,p);A=a[m].substring(p+1)}else x=a[m];u(x,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function ur(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ur){this.h=a.h,ml(this,a.j),this.o=a.o,this.g=a.g,fl(this,a.s),this.l=a.l;var u=a.i,m=new qo;m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),lw(this,m),this.m=a.m}else a&&(u=String(a).match(cw))?(this.h=!1,ml(this,u[1]||"",!0),this.o=zo(u[2]||""),this.g=zo(u[3]||"",!0),fl(this,u[4]),this.l=zo(u[5]||"",!0),lw(this,u[6]||"",!0),this.m=zo(u[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}ur.prototype.toString=function(){var a=[],u=this.j;u&&a.push($o(u,dw,!0),":");var m=this.g;return(m||u=="file")&&(a.push("//"),(u=this.o)&&a.push($o(u,dw,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push($o(m,m.charAt(0)=="/"?Qk:Yk,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",$o(m,Zk)),a.join("")};function sn(a){return new ur(a)}function ml(a,u,m){a.j=m?zo(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function fl(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function lw(a,u,m){u instanceof qo?(a.i=u,Jk(a.i,a.h)):(m||(u=$o(u,Xk)),a.i=new qo(u,a.h))}function Ge(a,u,m){a.i.set(u,m)}function pl(a){return Ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function zo(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function $o(a,u,m){return typeof a=="string"?(a=encodeURI(a).replace(u,Kk),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Kk(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dw=/[#\/\?@]/g,Yk=/[#\?:]/g,Qk=/[#\?]/g,Xk=/[#\?@]/g,Zk=/#/g;function qo(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Mn(a){a.g||(a.g=new Map,a.h=0,a.i&&Wk(a.i,function(u,m){a.add(decodeURIComponent(u.replace(/\+/g," ")),m)}))}i=qo.prototype,i.add=function(a,u){Mn(this),this.i=null,a=as(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(u),this.h+=1,this};function uw(a,u){Mn(a),u=as(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function hw(a,u){return Mn(a),u=as(a,u),a.g.has(u)}i.forEach=function(a,u){Mn(this),this.g.forEach(function(m,p){m.forEach(function(A){a.call(u,A,p,this)},this)},this)},i.na=function(){Mn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),m=[];for(let p=0;p<u.length;p++){let A=a[p];for(let x=0;x<A.length;x++)m.push(u[p])}return m},i.V=function(a){Mn(this);let u=[];if(typeof a=="string")hw(this,a)&&(u=u.concat(this.g.get(as(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)u=u.concat(a[m])}return u},i.set=function(a,u){return Mn(this),this.i=null,a=as(this,a),hw(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},i.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function mw(a,u,m){uw(a,u),0<m.length&&(a.i=null,a.g.set(as(a,u),k(m)),a.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var m=0;m<u.length;m++){var p=u[m];let x=encodeURIComponent(String(p)),F=this.V(p);for(p=0;p<F.length;p++){var A=x;F[p]!==""&&(A+="="+encodeURIComponent(String(F[p]))),a.push(A)}}return this.i=a.join("&")};function as(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Jk(a,u){u&&!a.j&&(Mn(a),a.i=null,a.g.forEach(function(m,p){var A=p.toLowerCase();p!=A&&(uw(this,p),mw(this,A,m))},a)),a.j=u}function eD(a,u){let m=new jo;if(c.Image){let p=new Image;p.onload=w(On,m,"TestLoadImage: loaded",!0,u,p),p.onerror=w(On,m,"TestLoadImage: error",!1,u,p),p.onabort=w(On,m,"TestLoadImage: abort",!1,u,p),p.ontimeout=w(On,m,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else u(!1)}function tD(a,u){let m=new jo,p=new AbortController,A=setTimeout(()=>{p.abort(),On(m,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:p.signal}).then(x=>{clearTimeout(A),x.ok?On(m,"TestPingServer: ok",!0,u):On(m,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),On(m,"TestPingServer: error",!1,u)})}function On(a,u,m,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(m)}catch{}}function iD(){this.g=new Vk}function nD(a,u,m){let p=m||"";try{aw(a,function(A,x){let F=A;d(A)&&(F=Hh(A)),u.push(p+x+"="+encodeURIComponent(F))})}catch(A){throw u.push(p+"type="+encodeURIComponent("_badmap")),A}}function Ho(a){this.l=a.Ub||null,this.j=a.eb||!1}T(Ho,Gh),Ho.prototype.g=function(){return new gl(this.l,this.j)},Ho.prototype.i=function(a){return function(){return a}}({});function gl(a,u){Ot.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(gl,Ot),i=gl.prototype,i.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Wo(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Go(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fw(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function fw(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Go(this):Wo(this),this.readyState==3&&fw(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,Go(this))},i.Qa=function(a){this.g&&(this.response=a,Go(this))},i.ga=function(){this.g&&Go(this)};function Go(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Wo(a)}i.setRequestHeader=function(a,u){this.u.append(a,u)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var m=u.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=u.next();return a.join(`\r
`)};function Wo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function pw(a){let u="";return we(a,function(m,p){u+=p,u+=":",u+=m,u+=`\r
`}),u}function im(a,u,m){e:{for(p in m){var p=!1;break e}p=!0}p||(m=pw(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):Ge(a,u,m))}function it(a){Ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(it,Ot);var rD=/^https?$/i,sD=["POST","PUT"];i=it.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,u,m,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yh.g(),this.v=this.o?qb(this.o):qb(Yh),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(x){gw(this,x);return}if(a=m||"",m=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)m.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let x of p.keys())m.set(x,p.get(x));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(m.keys()).find(x=>x.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(sD,u,void 0))||p||A||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,F]of m)this.g.setRequestHeader(x,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yw(this),this.u=!0,this.g.send(a),this.u=!1}catch(x){gw(this,x)}};function gw(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,_w(a),_l(a)}function _w(a){a.A||(a.A=!0,Gt(a,"complete"),Gt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Gt(this,"complete"),Gt(this,"abort"),_l(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),it.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?vw(this):this.bb())},i.bb=function(){vw(this)};function vw(a){if(a.h&&typeof o<"u"&&(!a.v[1]||on(a)!=4||a.Z()!=2)){if(a.u&&on(a)==4)jb(a.Ea,0,a);else if(Gt(a,"readystatechange"),on(a)==4){a.h=!1;try{let F=a.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var m;if(!(m=u)){var p;if(p=F===0){var A=String(a.D).match(cw)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),p=!rD.test(A?A.toLowerCase():"")}m=p}if(m)Gt(a,"complete"),Gt(a,"success");else{a.m=6;try{var x=2<on(a)?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.Z()+"]",_w(a)}}finally{_l(a)}}}}function _l(a,u){if(a.g){yw(a);let m=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||Gt(a,"ready");try{m.onreadystatechange=p}catch{}}}function yw(a){a.I&&(c.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function on(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),Lk(u)}};function bw(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function oD(a){let u={};a=(a.g&&2<=on(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(X(a[p]))continue;var m=C(a[p]);let A=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let x=u[A]||[];u[A]=x,x.push(m)}E(u,function(p){return p.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(a,u,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||u}function ww(a){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ko("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ko("baseRetryDelayMs",5e3,a),this.cb=Ko("retryDelaySeedMs",1e4,a),this.Wa=Ko("forwardChannelMaxRetries",2,a),this.wa=Ko("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new iw(a&&a.concurrentRequestLimit),this.Da=new iD,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ww.prototype,i.la=8,i.G=1,i.connect=function(a,u,m,p){Wt(0),this.W=a,this.H=u||{},m&&p!==void 0&&(this.H.OSID=m,this.H.OAID=p),this.F=this.X,this.I=kw(this,null,this.W),yl(this)};function nm(a){if(Iw(a),a.G==3){var u=a.U++,m=sn(a.I);if(Ge(m,"SID",a.K),Ge(m,"RID",u),Ge(m,"TYPE","terminate"),Yo(a,m),u=new Pn(a,a.j,u),u.L=2,u.v=pl(sn(m)),m=!1,c.navigator&&c.navigator.sendBeacon)try{m=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!m&&c.Image&&(new Image().src=u.v,m=!0),m||(u.g=Dw(u.j,null),u.g.ea(u.v)),u.F=Date.now(),hl(u)}xw(a)}function vl(a){a.g&&(sm(a),a.g.cancel(),a.g=null)}function Iw(a){vl(a),a.u&&(c.clearTimeout(a.u),a.u=null),bl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function yl(a){if(!nw(a.h)&&!a.s){a.s=!0;var u=a.Ga;Po||Ob(),Mo||(Po(),Mo=!0),Fh.add(u,a),a.B=0}}function aD(a,u){return rw(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Uo(g(a.Ga,a,u),Rw(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new Pn(this,this.j,a),x=this.o;if(this.S&&(x?(x=_(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(A.H=x,x=null),this.P)e:{for(var u=0,m=0;m<this.i.length;m++){t:{var p=this.i[m];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=m;break e}if(u===4096||m===this.i.length-1){u=m+1;break e}}u=1e3}else u=1e3;u=Cw(this,A,u),m=sn(this.I),Ge(m,"RID",a),Ge(m,"CVER",22),this.D&&Ge(m,"X-HTTP-Session-Id",this.D),Yo(this,m),x&&(this.O?u="headers="+encodeURIComponent(String(pw(x)))+"&"+u:this.m&&im(m,this.m,x)),tm(this.h,A),this.Ua&&Ge(m,"TYPE","init"),this.P?(Ge(m,"$req",u),Ge(m,"SID","null"),A.T=!0,Xh(A,m,null)):Xh(A,m,u),this.G=2}}else this.G==3&&(a?Ew(this,a):this.i.length==0||nw(this.h)||Ew(this))};function Ew(a,u){var m;u?m=u.l:m=a.U++;let p=sn(a.I);Ge(p,"SID",a.K),Ge(p,"RID",m),Ge(p,"AID",a.T),Yo(a,p),a.m&&a.o&&im(p,a.m,a.o),m=new Pn(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Cw(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),tm(a.h,m),Xh(m,p,u)}function Yo(a,u){a.H&&we(a.H,function(m,p){Ge(u,p,m)}),a.l&&aw({},function(m,p){Ge(u,p,m)})}function Cw(a,u,m){m=Math.min(a.i.length,m);var p=a.l?g(a.l.Na,a.l,a):null;e:{var A=a.i;let x=-1;for(;;){let F=["count="+m];x==-1?0<m?(x=A[0].g,F.push("ofs="+x)):x=0:F.push("ofs="+x);let je=!0;for(let St=0;St<m;St++){let Ee=A[St].g,Nt=A[St].map;if(Ee-=x,0>Ee)x=Math.max(0,A[St].g-100),je=!1;else try{nD(Nt,F,"req"+Ee+"_")}catch{p&&p(Nt)}}if(je){p=F.join("&");break e}}}return a=a.i.splice(0,m),u.D=a,p}function Tw(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Po||Ob(),Mo||(Po(),Mo=!0),Fh.add(u,a),a.v=0}}function rm(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Uo(g(a.Fa,a),Rw(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Aw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Uo(g(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),vl(this),Aw(this))};function sm(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Aw(a){a.g=new Pn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=sn(a.qa);Ge(u,"RID","rpc"),Ge(u,"SID",a.K),Ge(u,"AID",a.T),Ge(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ge(u,"TO",a.ja),Ge(u,"TYPE","xmlhttp"),Yo(a,u),a.m&&a.o&&im(u,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=pl(sn(u)),m.m=null,m.P=!0,Jb(m,a)}i.Za=function(){this.C!=null&&(this.C=null,vl(this),rm(this),Wt(19))};function bl(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Sw(a,u){var m=null;if(a.g==u){bl(a),sm(a),a.g=null;var p=2}else if(em(a.h,u))m=u.D,sw(a.h,u),p=1;else return;if(a.G!=0){if(u.o)if(p==1){m=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;p=ll(),Gt(p,new Yb(p,m)),yl(a)}else Tw(a);else if(A=u.s,A==3||A==0&&0<u.X||!(p==1&&aD(a,u)||p==2&&rm(a)))switch(m&&0<m.length&&(u=a.h,u.i=u.i.concat(m)),A){case 1:hr(a,5);break;case 4:hr(a,10);break;case 3:hr(a,6);break;default:hr(a,2)}}}function Rw(a,u){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*u}function hr(a,u){if(a.j.info("Error code "+u),u==2){var m=g(a.fb,a),p=a.Xa;let A=!p;p=new ur(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ml(p,"https"),pl(p),A?eD(p.toString(),m):tD(p.toString(),m)}else Wt(2);a.G=0,a.l&&a.l.sa(u),xw(a),Iw(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function xw(a){if(a.G=0,a.ka=[],a.l){let u=ow(a.h);(u.length!=0||a.i.length!=0)&&(R(a.ka,u),R(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function kw(a,u,m){var p=m instanceof ur?sn(m):new ur(m);if(p.g!="")u&&(p.g=u+"."+p.g),fl(p,p.s);else{var A=c.location;p=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var x=new ur(null);p&&ml(x,p),u&&(x.g=u),A&&fl(x,A),m&&(x.l=m),p=x}return m=a.D,u=a.ya,m&&u&&Ge(p,m,u),Ge(p,"VER",a.la),Yo(a,p),p}function Dw(a,u,m){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new it(new Ho({eb:m})):new it(a.pa),u.Ha(a.J),u}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pw(){}i=Pw.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function wl(){}wl.prototype.g=function(a,u){return new di(a,u)};function di(a,u){Ot.call(this),this.g=new ww(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!X(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!X(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new cs(this)}T(di,Ot),di.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},di.prototype.close=function(){nm(this.g)},di.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Hh(a),a=m);u.i.push(new qk(u.Ya++,a)),u.G==3&&yl(u)},di.prototype.N=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,di.aa.N.call(this)};function Mw(a){Wh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let m in u){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}T(Mw,Wh);function Ow(){Kh.call(this),this.status=1}T(Ow,Kh);function cs(a){this.g=a}T(cs,Pw),cs.prototype.ua=function(){Gt(this.g,"a")},cs.prototype.ta=function(a){Gt(this.g,new Mw(a))},cs.prototype.sa=function(a){Gt(this.g,new Ow)},cs.prototype.ra=function(){Gt(this.g,"b")},wl.prototype.createWebChannel=wl.prototype.g,di.prototype.send=di.prototype.o,di.prototype.open=di.prototype.m,di.prototype.close=di.prototype.close,ag=yn.createWebChannelTransport=function(){return new wl},og=yn.getStatEventTarget=function(){return ll()},sg=yn.Event=lr,vu=yn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,lc=yn.ErrorCode=dl,Qb.COMPLETE="complete",rg=yn.EventType=Qb,Hb.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,qs=yn.WebChannel=Hb,ng=yn.FetchXmlHttpFactory=Ho,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,ig=yn.XhrIo=it}).apply(typeof _u<"u"?_u:typeof self<"u"?self:typeof window<"u"?window:{});var cT="@firebase/firestore";var Tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");var ho="10.13.2";var zr=new Wi("@firebase/firestore");function dc(){return zr.logLevel}function q(i,...e){if(zr.logLevel<=Ut.DEBUG){let t=e.map(Y_);zr.debug(`Firestore (${ho}): ${i}`,...t)}}function In(i,...e){if(zr.logLevel<=Ut.ERROR){let t=e.map(Y_);zr.error(`Firestore (${ho}): ${i}`,...t)}}function Xs(i,...e){if(zr.logLevel<=Ut.WARN){let t=e.map(Y_);zr.warn(`Firestore (${ho}): ${i}`,...t)}}function Y_(i){if(typeof i=="string")return i;try{return function(t){return JSON.stringify(t)}(i)}catch{return i}}function te(i="Unexpected state"){let e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+i;throw In(e),new Error(e)}function ze(i,e){i||te()}function se(i,e){return i}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var bn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Eu=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tt.UNAUTHENTICATED))}shutdown(){}},mg=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fg=class{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i,r=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve(),s=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>v(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ze(typeof n.accessToken=="string"),new Eu(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new Tt(e)}},pg=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},gg=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new pg(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_g=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vg=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let n=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};let r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string"),this.R=t.token,new _g(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function hV(i){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}var Cu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";for(;n.length<20;){let r=hV(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%e.length))}return n}};function Ae(i,e){return i<e?-1:i>e?1:0}function Zs(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}var Pt=class i{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return i.fromMillis(Date.now())}static fromDate(e){return i.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new i(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var oe=class i{constructor(e){this.timestamp=e}static fromTimestamp(e){return new i(e)}static min(){return new i(new Pt(0,0))}static max(){return new i(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Tu=class i{constructor(e,t,n){t===void 0?t=0:t>e.length&&te(),n===void 0?n=e.length-t:n>e.length-t&&te(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return i.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},et=class i extends Tu{construct(e,t,n){return new i(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let n of e){if(n.indexOf("//")>=0)throw new z(M.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new i(t)}static emptyPath(){return new i([])}},mV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pi=class i extends Tu{construct(e,t,n){return new i(e,t,n)}static isValidIdentifier(e){return mV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new i(["__name__"])}static fromServerFormat(e){let t=[],n="",r=0,s=()=>{if(n.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(n+=c,r++):(s(),r++)}if(s(),o)throw new z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new i(t)}static emptyPath(){return new i([])}};var Q=class i{constructor(e){this.path=e}static fromPath(e){return new i(et.fromString(e))}static fromName(e){return new i(et.fromString(e).popFirst(5))}static empty(){return new i(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new i(new et(e.slice()))}};var yg=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};yg.UNKNOWN_ID=-1;function fV(i,e){let t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=oe.fromTimestamp(n===1e9?new Pt(t+1,0):new Pt(t,n));return new $r(r,Q.empty(),e)}function pV(i){return new $r(i.readTime,i.key,-1)}var $r=class i{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new i(oe.min(),Q.empty(),-1)}static max(){return new i(oe.max(),Q.empty(),-1)}};function gV(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(i.documentKey,e.documentKey),t!==0?t:Ae(i.largestBatchId,e.largestBatchId))}var _V="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function xc(i){return v(this,null,function*(){if(i.code!==M.FAILED_PRECONDITION||i.message!==_V)throw i;q("LocalStore","Unexpectedly lost primary lease")})}var N=class i{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new i((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof i?t:i.resolve(t)}catch(t){return i.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):i.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):i.reject(t)}static resolve(e){return new i((t,n)=>{t(e)})}static reject(e){return new i((t,n)=>{n(e)})}static waitFor(e){return new i((t,n)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>n(l))}),o=!0,s===r&&t()})}static or(e){let t=i.resolve(!1);for(let n of e)t=t.next(r=>r?i.resolve(r):n());return t}static forEach(e,t){let n=[];return e.forEach((r,s)=>{n.push(t.call(this,r,s))}),this.waitFor(n)}static mapArray(e,t){return new i((n,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(h=>{o[d]=h,++c,c===s&&n(o)},h=>r(h))}})}static doWhile(e,t){return new i((n,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):n()};s()})}};function vV(i){let e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function kc(i){return i.name==="IndexedDbTransactionError"}var $T=(()=>{class i{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return i.oe=-1,i})();function Ju(i){return i==null}function gc(i){return i===0&&1/i==-1/0}function yV(i){return typeof i=="number"&&Number.isInteger(i)&&!gc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var bV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q9=[...bV,"documentOverlays"],wV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IV=wV,EV=[...IV,"indexConfiguration","indexState","indexEntries"];var X9=[...EV,"globals"];function lT(i){let e=0;for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Yr(i,e){for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function qT(i){for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}var ot=class i{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){let e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ks(this.root,e,this.comparator,!0)}},Ks=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xi=class i{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??i.RED,this.left=r??i.EMPTY,this.right=s??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new i(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return i.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1;Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Bt=class i{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Au(this.data.getIterator())}getIteratorFrom(e){return new Au(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new i(this.comparator);return t.data=e,t}},Au=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ai=class i{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new i([])}unionWith(e){let t=new Bt(pi.comparator);for(let n of this.fields)t=t.add(n);for(let n of e)t=t.add(n);return new i(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(t,n)=>t.isEqual(n))}};var Su=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zt=class i{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Su("Invalid base64 string: "+s):s}}(e);return new i(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zt.EMPTY_BYTE_STRING=new zt("");var CV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function En(i){if(ze(!!i),typeof i=="string"){let e=0,t=CV.exec(i);if(ze(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ze(i.seconds),nanos:Ze(i.nanos)}}function Ze(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function nr(i){return typeof i=="string"?zt.fromBase64String(i):zt.fromUint8Array(i)}function Q_(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function X_(i){let e=i.mapValue.fields.__previous_value__;return Q_(e)?X_(e):e}function _c(i){let e=En(i.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}var wg=class{constructor(e,t,n,r,s,o,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},Ru=class i{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database}};var yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Q_(i)?4:GT(i)?9007199254740991:HT(i)?10:11:te()}function en(i,e){if(i===e)return!0;let t=qr(i);if(t!==qr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _c(i).isEqual(_c(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=En(r.timestampValue),c=En(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(r,s){return nr(r.bytesValue).isEqual(nr(s.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(r,s){return Ze(r.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(r.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(i,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ze(r.integerValue)===Ze(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ze(r.doubleValue),c=Ze(s.doubleValue);return o===c?gc(o)===gc(c):isNaN(o)&&isNaN(c)}return!1}(i,e);case 9:return Zs(i.arrayValue.values||[],e.arrayValue.values||[],en);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(lT(o)!==lT(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!en(o[l],c[l])))return!1;return!0}(i,e);default:return te()}}function vc(i,e){return(i.values||[]).find(t=>en(t,e))!==void 0}function Js(i,e){if(i===e)return 0;let t=qr(i),n=qr(e);if(t!==n)return Ae(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(i.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ze(s.integerValue||s.doubleValue),l=Ze(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(i,e);case 3:return dT(i.timestampValue,e.timestampValue);case 4:return dT(_c(i),_c(e));case 5:return Ae(i.stringValue,e.stringValue);case 6:return function(s,o){let c=nr(s),l=nr(o);return c.compareTo(l)}(i.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let h=Ae(c[d],l[d]);if(h!==0)return h}return Ae(c.length,l.length)}(i.referenceValue,e.referenceValue);case 8:return function(s,o){let c=Ae(Ze(s.latitude),Ze(o.latitude));return c!==0?c:Ae(Ze(s.longitude),Ze(o.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return uT(i.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,d,h;let f=s.fields||{},g=o.fields||{},w=(c=f.value)===null||c===void 0?void 0:c.arrayValue,T=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=Ae(((d=w?.values)===null||d===void 0?void 0:d.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:uT(w,T)}(i.mapValue,e.mapValue);case 11:return function(s,o){if(s===yu.mapValue&&o===yu.mapValue)return 0;if(s===yu.mapValue)return 1;if(o===yu.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){let g=Ae(l[f],h[f]);if(g!==0)return g;let w=Js(c[l[f]],d[h[f]]);if(w!==0)return w}return Ae(l.length,h.length)}(i.mapValue,e.mapValue);default:throw te()}}function dT(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ae(i,e);let t=En(i),n=En(e),r=Ae(t.seconds,n.seconds);return r!==0?r:Ae(t.nanos,n.nanos)}function uT(i,e){let t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){let s=Js(t[r],n[r]);if(s)return s}return Ae(t.length,n.length)}function eo(i){return Ig(i)}function Ig(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){let n=En(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return nr(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return Q.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",r=!0;for(let s of t.values||[])r?r=!1:n+=",",n+=Ig(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){let n=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of n)s?s=!1:r+=",",r+=`${o}:${Ig(t.fields[o])}`;return r+"}"}(i.mapValue):te()}function hT(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Eg(i){return!!i&&"integerValue"in i}function Z_(i){return!!i&&"arrayValue"in i}function mT(i){return!!i&&"nullValue"in i}function fT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wu(i){return!!i&&"mapValue"in i}function HT(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){let e={mapValue:{fields:{}}};return Yr(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=hc(n)),e}if(i.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hc(i.arrayValue.values[t]);return e}return Object.assign({},i)}function GT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var fi=class i{constructor(e){this.value=e}static empty(){return new i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!wu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hc(t)}setAll(e){let t=pi.emptyPath(),n={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,n,r),n={},r=[],t=c.popLast()}o?n[c.lastSegment()]=hc(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){let t=this.field(e.popLast());wu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return en(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];wu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Yr(t,(r,s)=>e[r]=s);for(let r of n)delete e[r]}clone(){return new i(hc(this.value))}};function WT(i){let e=[];return Yr(i.fields,(t,n)=>{let r=new pi([t]);if(wu(n)){let s=WT(n.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Ai(e)}var Li=class i{constructor(e,t,n,r,s,o,c){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new i(e,0,oe.min(),oe.min(),oe.min(),fi.empty(),0)}static newFoundDocument(e,t,n,r){return new i(e,1,t,oe.min(),n,r,0)}static newNoDocument(e,t){return new i(e,2,t,oe.min(),oe.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new i(e,3,t,oe.min(),oe.min(),fi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var to=class{constructor(e,t){this.position=e,this.inclusive=t}};function pT(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){let s=e[r],o=i.position[r];if(s.field.isKeyField()?n=Q.comparator(Q.fromName(o.referenceValue),t.key):n=Js(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function gT(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!en(i.position[t],e.position[t]))return!1;return!0}var io=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function TV(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}var xu=class{},It=class i extends xu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Tg(e,t,n):t==="array-contains"?new Rg(e,n):t==="in"?new xg(e,n):t==="not-in"?new kg(e,n):t==="array-contains-any"?new Dg(e,n):new i(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Ag(e,n):new Sg(e,n)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Js(t,this.value)):t!==null&&qr(this.value)===qr(t)&&this.matchesComparison(Js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Vi=class i extends xu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new i(e,t)}matches(e){return KT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function KT(i){return i.op==="and"}function YT(i){return AV(i)&&KT(i)}function AV(i){for(let e of i.filters)if(e instanceof Vi)return!1;return!0}function Cg(i){if(i instanceof It)return i.field.canonicalString()+i.op.toString()+eo(i.value);if(YT(i))return i.filters.map(e=>Cg(e)).join(",");{let e=i.filters.map(t=>Cg(t)).join(",");return`${i.op}(${e})`}}function QT(i,e){return i instanceof It?function(n,r){return r instanceof It&&n.op===r.op&&n.field.isEqual(r.field)&&en(n.value,r.value)}(i,e):i instanceof Vi?function(n,r){return r instanceof Vi&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,c)=>s&&QT(o,r.filters[c]),!0):!1}(i,e):void te()}function XT(i){return i instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${eo(t.value)}`}(i):i instanceof Vi?function(t){return t.op.toString()+" {"+t.getFilters().map(XT).join(" ,")+"}"}(i):"Filter"}var Tg=class extends It{constructor(e,t,n){super(e,t,n),this.key=Q.fromName(n.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},Ag=class extends It{constructor(e,t){super(e,"in",t),this.keys=ZT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Sg=class extends It{constructor(e,t){super(e,"not-in",t),this.keys=ZT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function ZT(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>Q.fromName(n.referenceValue))}var Rg=class extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Z_(t)&&vc(t.arrayValue,this.value)}},xg=class extends It{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vc(this.value.arrayValue,t)}},kg=class extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!vc(this.value.arrayValue,t)}},Dg=class extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Z_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>vc(this.value.arrayValue,n))}};var Pg=class{constructor(e,t=null,n=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function _T(i,e=null,t=[],n=[],r=null,s=null,o=null){return new Pg(i,e,t,n,r,s,o)}function J_(i){let e=se(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>Cg(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>eo(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>eo(n)).join(",")),e.ue=t}return e.ue}function ev(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!TV(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!QT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!gT(i.startAt,e.startAt)&&gT(i.endAt,e.endAt)}function Mg(i){return Q.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}var Hr=class{constructor(e,t=null,n=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function SV(i,e,t,n,r,s,o,c){return new Hr(i,e,t,n,r,s,o,c)}function tv(i){return new Hr(i)}function vT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function JT(i){return i.collectionGroup!==null}function mc(i){let e=se(i);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Bt(pi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new io(s,n))}),t.has(pi.keyField().canonicalString())||e.ce.push(new io(pi.keyField(),n))}return e.ce}function Zi(i){let e=se(i);return e.le||(e.le=RV(e,mc(i))),e.le}function RV(i,e){if(i.limitType==="F")return _T(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new io(r.field,s)});let t=i.endAt?new to(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new to(i.startAt.position,i.startAt.inclusive):null;return _T(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function Og(i,e){let t=i.filters.concat([e]);return new Hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Ng(i,e,t){return new Hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function eh(i,e){return ev(Zi(i),Zi(e))&&i.limitType===e.limitType}function eA(i){return`${J_(Zi(i))}|lt:${i.limitType}`}function Hs(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(r=>XT(r)).join(", ")}]`),Ju(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>eo(r)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>eo(r)).join(",")),`Target(${n})`}(Zi(i))}; limitType=${i.limitType})`}function th(i,e){return e.isFoundDocument()&&function(n,r){let s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Q.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,e)&&function(n,r){for(let s of mc(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,e)&&function(n,r){for(let s of n.filters)if(!s.matches(r))return!1;return!0}(i,e)&&function(n,r){return!(n.startAt&&!function(o,c,l){let d=pT(o,c,l);return o.inclusive?d<=0:d<0}(n.startAt,mc(n),r)||n.endAt&&!function(o,c,l){let d=pT(o,c,l);return o.inclusive?d>=0:d>0}(n.endAt,mc(n),r))}(i,e)}function xV(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function tA(i){return(e,t)=>{let n=!1;for(let r of mc(i)){let s=kV(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function kV(i,e,t){let n=i.field.isKeyField()?Q.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?Js(l,d):te()}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return te()}}var rr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,(t,n)=>{for(let[r,s]of n)e(r,s)})}isEmpty(){return qT(this.inner)}size(){return this.innerSize}};var DV=new ot(Q.comparator);function Cn(){return DV}var iA=new ot(Q.comparator);function uc(...i){let e=iA;for(let t of i)e=e.insert(t.key,t);return e}function nA(i){let e=iA;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Ur(){return fc()}function rA(){return fc()}function fc(){return new rr(i=>i.toString(),(i,e)=>i.isEqual(e))}var PV=new ot(Q.comparator),MV=new Bt(Q.comparator);function fe(...i){let e=MV;for(let t of i)e=e.add(t);return e}var OV=new Bt(Ae);function NV(){return OV}function iv(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function sA(i){return{integerValue:""+i}}function FV(i,e){return yV(e)?sA(e):iv(i,e)}var no=class{constructor(){this._=void 0}};function LV(i,e,t){return i instanceof ro?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Q_(s)&&(s=X_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):i instanceof Gr?aA(i,e):i instanceof Wr?cA(i,e):function(r,s){let o=oA(r,s),c=yT(o)+yT(r.Pe);return Eg(o)&&Eg(r.Pe)?sA(c):iv(r.serializer,c)}(i,e)}function VV(i,e,t){return i instanceof Gr?aA(i,e):i instanceof Wr?cA(i,e):t}function oA(i,e){return i instanceof so?function(n){return Eg(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}var ro=class extends no{},Gr=class extends no{constructor(e){super(),this.elements=e}};function aA(i,e){let t=lA(e);for(let n of i.elements)t.some(r=>en(r,n))||t.push(n);return{arrayValue:{values:t}}}var Wr=class extends no{constructor(e){super(),this.elements=e}};function cA(i,e){let t=lA(e);for(let n of i.elements)t=t.filter(r=>!en(r,n));return{arrayValue:{values:t}}}var so=class extends no{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function yT(i){return Ze(i.integerValue||i.doubleValue)}function lA(i){return Z_(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function UV(i,e){return i.field.isEqual(e.field)&&function(n,r){return n instanceof Gr&&r instanceof Gr||n instanceof Wr&&r instanceof Wr?Zs(n.elements,r.elements,en):n instanceof so&&r instanceof so?en(n.Pe,r.Pe):n instanceof ro&&r instanceof ro}(i.transform,e.transform)}var Fg=class{constructor(e,t){this.version=e,this.transformResults=t}},wn=class i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new i}static exists(e){return new i(void 0,e)}static updateTime(e){return new i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Iu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}var oo=class{};function dA(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new yc(i.key,wn.none()):new Kr(i.key,i.data,wn.none());{let t=i.data,n=fi.empty(),r=new Bt(pi.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new tn(i.key,n,new Ai(r.toArray()),wn.none())}}function jV(i,e,t){i instanceof Kr?function(r,s,o){let c=r.value.clone(),l=wT(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(i,e,t):i instanceof tn?function(r,s,o){if(!Iu(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=wT(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(uA(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function pc(i,e,t,n){return i instanceof Kr?function(s,o,c,l){if(!Iu(s.precondition,o))return c;let d=s.value.clone(),h=IT(s.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(i,e,t,n):i instanceof tn?function(s,o,c,l){if(!Iu(s.precondition,o))return c;let d=IT(s.fieldTransforms,l,o),h=o.data;return h.setAll(uA(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(i,e,t,n):function(s,o,c){return Iu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(i,e,t)}function BV(i,e){let t=null;for(let n of i.fieldTransforms){let r=e.data.field(n.field),s=oA(n.transform,r||null);s!=null&&(t===null&&(t=fi.empty()),t.set(n.field,s))}return t||null}function bT(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Zs(n,r,(s,o)=>UV(s,o))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}var Kr=class extends oo{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},tn=class extends oo{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function uA(i){let e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let n=i.data.field(t);e.set(t,n)}}),e}function wT(i,e,t){let n=new Map;ze(i.length===t.length);for(let r=0;r<t.length;r++){let s=i[r],o=s.transform,c=e.data.field(s.field);n.set(s.field,VV(o,c,t[r]))}return n}function IT(i,e,t){let n=new Map;for(let r of i){let s=r.transform,o=t.data.field(r.field);n.set(r.field,LV(s,o,e))}return n}var yc=class extends oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Lg=class extends oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Vg=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&jV(s,e,n[r])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=pc(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=pc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=rA();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=dA(o,c);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(t,n)=>bT(t,n))&&Zs(this.baseMutations,e.baseMutations,(t,n)=>bT(t,n))}},Ug=class i{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ze(e.mutations.length===n.length);let r=function(){return PV}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new i(e,t,n,r)}};var jg=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Bg=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var bt,ve;function zV(i){switch(i){default:return te();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function hA(i){if(i===void 0)return In("GRPC error has no .code"),M.UNKNOWN;switch(i){case bt.OK:return M.OK;case bt.CANCELLED:return M.CANCELLED;case bt.UNKNOWN:return M.UNKNOWN;case bt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case bt.INTERNAL:return M.INTERNAL;case bt.UNAVAILABLE:return M.UNAVAILABLE;case bt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case bt.NOT_FOUND:return M.NOT_FOUND;case bt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case bt.ABORTED:return M.ABORTED;case bt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case bt.DATA_LOSS:return M.DATA_LOSS;default:return te()}}(ve=bt||(bt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var ET=null;function $V(){return new TextEncoder}var qV=new er([4294967295,4294967295],0);function CT(i){let e=$V().encode(i),t=new tg;return t.update(e),new Uint8Array(t.digest())}function TT(i){let e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new er([t,n],0),new er([r,s],0)]}var zg=class i{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new jr(`Invalid padding: ${t}`);if(n<0)throw new jr(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new jr(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new jr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=er.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(er.fromNumber(n)));return r.compare(qV)===1&&(r=new er([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=CT(e),[n,r]=TT(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(e,t,n){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new i(s,r,t);return n.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=CT(e),[n,r]=TT(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(n,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},jr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ku=class i{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){let r=new Map;return r.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new i(oe.min(),r,new ot(Ae),Cn(),fe())}},bc=class i{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new i(n,t,fe(),fe(),fe())}};var Ys=class{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}},Du=class{constructor(e,t){this.targetId=e,this.me=t}},Pu=class{constructor(e,t,n=zt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Mu=class{constructor(){this.fe=0,this.ge=ST(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),t=fe(),n=fe();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:te()}}),new bc(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=ST()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},$g=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cn(),this.qe=AT(),this.Qe=new ot(Ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,n=e.me.count,r=this.Je(t);if(r){let s=r.target;if(Mg(s))if(n===0){let o=new Q(s.path);this.Ue(t,o,Li.newNoDocument(o,oe.min()))}else ze(n===1);else{let o=this.Ye(t);if(o!==n){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}ET?.et(function(h,f,g,w,T){var k,R,j,X,K,le;let mt={localCacheCount:h,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},we=f.unchangedNames;return we&&(mt.bloomFilter={applied:T===0,hashCount:(k=we?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(X=(j=(R=we?.bits)===null||R===void 0?void 0:R.bitmap)===null||j===void 0?void 0:j.length)!==null&&X!==void 0?X:0,padding:(le=(K=we?.bits)===null||K===void 0?void 0:K.padding)!==null&&le!==void 0?le:0,mightContain:E=>{var _;return(_=w?.mightContain(E))!==null&&_!==void 0&&_}}),mt}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t,o,c;try{o=nr(n).toUint8Array()}catch(l){if(l instanceof Su)return Xs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new zg(o,r,s)}catch(l){return Xs(l instanceof jr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){let n=this.Le.getRemoteKeysForTarget(t),r=0;return n.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Mg(c.target)){let l=new Q(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Li.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let n=fe();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new ku(e,t,this.Qe,this.ke,n);return this.ke=Cn(),this.qe=AT(),this.Qe=new ot(Ae),r}$e(e,t){if(!this.ze(e))return;let n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(Ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function AT(){return new ot(Q.comparator)}function ST(){return new ot(Q.comparator)}var HV={asc:"ASCENDING",desc:"DESCENDING"},GV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WV={and:"AND",or:"OR"},qg=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Hg(i,e){return i.useProto3Json||Ju(e)?e:{value:e}}function Ou(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mA(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function KV(i,e){return Ou(i,e.toTimestamp())}function Ji(i){return ze(!!i),oe.fromTimestamp(function(t){let n=En(t);return new Pt(n.seconds,n.nanos)}(i))}function nv(i,e){return Gg(i,e).canonicalString()}function Gg(i,e){let t=function(r){return new et(["projects",r.projectId,"databases",r.database])}(i).child("documents");return e===void 0?t:t.child(e)}function fA(i){let e=et.fromString(i);return ze(yA(e)),e}function Wg(i,e){return nv(i.databaseId,e.path)}function cg(i,e){let t=fA(e);if(t.get(1)!==i.databaseId.projectId)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Q(gA(t))}function pA(i,e){return nv(i.databaseId,e)}function YV(i){let e=fA(i);return e.length===4?et.emptyPath():gA(e)}function Kg(i){return new et(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gA(i){return ze(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function RT(i,e,t){return{name:Wg(i,e),fields:t.value.mapValue.fields}}function QV(i,e){let t;if("targetChange"in e){e.targetChange;let n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(ze(h===void 0||typeof h=="string"),zt.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array),zt.fromUint8Array(h||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let h=d.code===void 0?M.UNKNOWN:hA(d.code);return new z(h,d.message||"")}(o);t=new Pu(n,r,s,c||null)}else if("documentChange"in e){e.documentChange;let n=e.documentChange;n.document,n.document.name,n.document.updateTime;let r=cg(i,n.document.name),s=Ji(n.document.updateTime),o=n.document.createTime?Ji(n.document.createTime):oe.min(),c=new fi({mapValue:{fields:n.document.fields}}),l=Li.newFoundDocument(r,s,o,c),d=n.targetIds||[],h=n.removedTargetIds||[];t=new Ys(d,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let n=e.documentDelete;n.document;let r=cg(i,n.document),s=n.readTime?Ji(n.readTime):oe.min(),o=Li.newNoDocument(r,s),c=n.removedTargetIds||[];t=new Ys([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let n=e.documentRemove;n.document;let r=cg(i,n.document),s=n.removedTargetIds||[];t=new Ys([],s,r,null)}else{if(!("filter"in e))return te();{e.filter;let n=e.filter;n.targetId;let{count:r=0,unchangedNames:s}=n,o=new Bg(r,s),c=n.targetId;t=new Du(c,o)}}return t}function XV(i,e){let t;if(e instanceof Kr)t={update:RT(i,e.key,e.value)};else if(e instanceof yc)t={delete:Wg(i,e.key)};else if(e instanceof tn)t={update:RT(i,e.key,e.data),updateMask:oU(e.fieldMask)};else{if(!(e instanceof Lg))return te();t={verify:Wg(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,o){let c=o.transform;if(c instanceof ro)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Wr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof so)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw te()}(0,n))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:KV(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(i,e.precondition)),t}function ZV(i,e){return i&&i.length>0?(ze(e!==void 0),i.map(t=>function(r,s){let o=r.updateTime?Ji(r.updateTime):Ji(s);return o.isEqual(oe.min())&&(o=Ji(s)),new Fg(o,r.transformResults||[])}(t,e))):[]}function JV(i,e){return{documents:[pA(i,e.path)]}}function eU(i,e){let t={structuredQuery:{}},n=e.path,r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=pA(i,r);let s=function(d){if(d.length!==0)return vA(Vi.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:Gs(g.field),direction:nU(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Hg(i,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:r}}function tU(i){let e=YV(i.parent),t=i.structuredQuery,n=t.from?t.from.length:0,r=null;if(n>0){ze(n===1);let h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(f){let g=_A(f);return g instanceof Vi&&YT(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(T){return new io(Ws(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(t.orderBy));let c=null;t.limit&&(c=function(f){let g;return g=typeof f=="object"?f.value:f,Ju(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(f){let g=!!f.before,w=f.values||[];return new to(w,g)}(t.startAt));let d=null;return t.endAt&&(d=function(f){let g=!f.before,w=f.values||[];return new to(w,g)}(t.endAt)),SV(e,r,o,s,c,"F",l,d)}function iU(i,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _A(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let n=Ws(t.unaryFilter.field);return It.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=Ws(t.unaryFilter.field);return It.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ws(t.unaryFilter.field);return It.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ws(t.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(i):i.fieldFilter!==void 0?function(t){return It.create(Ws(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Vi.create(t.compositeFilter.filters.map(n=>_A(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return te()}}(t.compositeFilter.op))}(i):te()}function nU(i){return HV[i]}function rU(i){return GV[i]}function sU(i){return WV[i]}function Gs(i){return{fieldPath:i.canonicalString()}}function Ws(i){return pi.fromServerFormat(i.fieldPath)}function vA(i){return i instanceof It?function(t){if(t.op==="=="){if(fT(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NAN"}};if(mT(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fT(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NAN"}};if(mT(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(t.field),op:rU(t.op),value:t.value}}}(i):i instanceof Vi?function(t){let n=t.getFilters().map(r=>vA(r));return n.length===1?n[0]:{compositeFilter:{op:sU(t.op),filters:n}}}(i):te()}function oU(i){let e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}var wc=class i{constructor(e,t,n,r,s=oe.min(),o=oe.min(),c=zt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Yg=class{constructor(e){this.ct=e}};function aU(i){let e=tU({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ng(e,e.limit,"L"):e}var Nu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ze(e.integerValue));else if("doubleValue"in e){let n=Ze(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),gc(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),typeof n=="string"&&(n=En(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(nr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?GT(e)?this.dt(t,Number.MAX_SAFE_INTEGER):HT(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let n=e.fields||{};this.dt(t,55);for(let r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Ze(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let n=e.values||[];this.dt(t,50);for(let r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Q.fromName(e).path.forEach(n=>{this.dt(t,60),this.Dt(n,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Nu.vt=new Nu;var Qg=class{constructor(){this.un=new Xg}addToCollectionParentIndex(e,t){return this.un.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve($r.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve($r.min())}updateCollectionGroup(e,t,n){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},Xg=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bt(et.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Bt(et.comparator)).toArray()}};var J9=new Uint8Array(0);var Qi=class i{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qi.DEFAULT=new Qi(41943040,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qi.DISABLED=new Qi(-1,0,0);var Ic=class i{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new i(0)}static kn(){return new i(-1)}};var Zg=class{constructor(){this.changes=new rr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Li.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n!==void 0?N.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Jg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var e_=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&pc(n.mutation,r,Ai.empty(),Pt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,fe()).next(()=>n))}getLocalViewOfDocuments(e,t,n=fe()){let r=Ur();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(s=>{let o=uc();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let n=Ur();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,fe()))}populateOverlays(e,t,n){let r=[];return n.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,n,r){let s=Cn(),o=fc(),c=function(){return fc()}();return t.forEach((l,d)=>{let h=n.get(d.key);r.has(d.key)&&(h===void 0||h.mutation instanceof tn)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),pc(h.mutation,d,h.mutation.getFieldMask(),Pt.now())):o.set(d.key,Ai.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var f;return c.set(d,new Jg(h,(f=o.get(d))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,t){let n=fc(),r=new ot((o,c)=>o-c),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let h=n.get(l)||Ai.empty();h=c.applyToLocalView(d,h),n.set(l,h);let f=(r.get(c.batchId)||fe()).add(l);r=r.insert(c.batchId,f)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,h=l.value,f=rA();h.forEach(g=>{if(!s.has(g)){let w=dA(t.get(g),n.get(g));w!==null&&f.set(g,w),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return N.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):N.resolve(Ur()),c=-1,l=s;return o.next(d=>N.forEach(d,(h,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),s.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,fe())).next(h=>({batchId:c,changes:nA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(n=>{let r=uc();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let s=t.collectionGroup,o=uc();return this.indexManager.getCollectionParents(e,s).next(c=>N.forEach(c,l=>{let d=function(f,g){return new Hr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next(h=>{h.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(o=>{s.forEach((l,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,Li.newInvalidDocument(h)))});let c=uc();return o.forEach((l,d)=>{let h=s.get(l);h!==void 0&&pc(h.mutation,d,Ai.empty(),Pt.now()),th(t,d)&&(c=c.insert(l,d))}),c})}};var t_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return N.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Ji(r.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:aU(r.bundledQuery),readTime:Ji(r.readTime)}}(t)),N.resolve()}};var i_=class{constructor(){this.overlays=new ot(Q.comparator),this.Ir=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Ur();return N.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,s)=>{this.ht(e,t,s)}),N.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Ir.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),N.resolve()}getOverlaysForCollection(e,t,n){let r=Ur(),s=t.length+1,o=new Q(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>n&&r.set(l.getKey(),l)}return N.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new ot((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let h=s.get(d.largestBatchId);h===null&&(h=Ur(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let c=Ur(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=r)););return N.resolve(c)}ht(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new jg(t,n));let s=this.Ir.get(t);s===void 0&&(s=fe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}};var n_=class{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var Ec=class{constructor(){this.Tr=new Bt(wt.Er),this.dr=new Bt(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let n=new wt(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Vr(new wt(e,t))}mr(e,t){e.forEach(n=>this.removeReference(n,t))}gr(e){let t=new Q(new et([])),n=new wt(t,e),r=new wt(t,e+1),s=[];return this.dr.forEachInRange([n,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Q(new et([])),n=new wt(t,e),r=new wt(t,e+1),s=fe();return this.dr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new wt(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},wt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||Ae(e.wr,t.wr)}static Ar(e,t){return Ae(e.wr,t.wr)||Q.comparator(e.key,t.key)}};var r_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Bt(wt.Er)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Vg(s,t,n,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new wt(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,t){return N.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.vr(n),s=r<0?0:r;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new wt(t,0),r=new wt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],o=>{let c=this.Dr(o.wr);s.push(c)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bt(Ae);return t.forEach(r=>{let s=new wt(r,0),o=new wt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{n=n.add(c.wr)})}),N.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,s=n;Q.isDocumentKey(s)||(s=s.child(""));let o=new wt(new Q(s),0),c=new Bt(Ae);return this.br.forEachWhile(l=>{let d=l.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(c=c.add(l.wr)),!0)},o),N.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(n=>{let r=this.Dr(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){ze(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return N.forEach(t.mutations,r=>{let s=new wt(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){let n=new wt(t,0),r=this.br.firstAfterOrEqual(n);return N.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var s_=class{constructor(e){this.Mr=e,this.docs=function(){return new ot(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return N.resolve(n?n.document.mutableCopy():Li.newInvalidDocument(t))}getEntries(e,t){let n=Cn();return t.forEach(r=>{let s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():Li.newInvalidDocument(r))}),N.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Cn(),o=t.path,c=new Q(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||gV(pV(h),n)<=0||(r.has(h.key)||th(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,t,n,r){te()}Or(e,t){return N.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new o_(this)}getSize(e){return N.resolve(this.size)}},o_=class extends Zg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),N.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var a_=class{constructor(e){this.persistence=e,this.Nr=new rr(t=>J_(t),ev),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ec,this.targetCount=0,this.kr=Ic.Bn()}forEachTarget(e,t){return this.Nr.forEach((n,r)=>t(r)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),N.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ic(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Kn(t),N.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,n){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),N.waitFor(s).next(()=>r)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let n=this.Nr.get(t)||null;return N.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),N.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let n=this.Br.yr(t);return N.resolve(n)}containsKey(e,t){return N.resolve(this.Br.containsKey(t))}};var c_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new $T(0),this.Kr=!1,this.Kr=!0,this.$r=new n_,this.referenceDelegate=e(this),this.Ur=new a_(this),this.indexManager=new Qg,this.remoteDocumentCache=function(r){return new s_(r)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Yg(t),this.Gr=new t_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new i_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new r_(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){q("MemoryPersistence","Starting transaction:",e);let r=new l_(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return N.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}},l_=class extends bg{constructor(e){super(),this.currentSequenceNumber=e}},d_=class i{constructor(e){this.persistence=e,this.Jr=new Ec,this.Yr=null}static Zr(e){return new i(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),N.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),N.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,n=>{let r=Q.fromPath(n);return this.ei(e,r).next(s=>{s||t.removeEntry(r,oe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return N.or([()=>N.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var u_=class i{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=fe(),r=fe();for(let s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new i(e,t.fromCache,n,r)}};var h_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var m_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return P0()?8:vV(Vt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new h_;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(dc()<=Ut.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Hs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(dc()<=Ut.DEBUG&&q("QueryEngine","Query:",Hs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(dc()<=Ut.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Hs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zi(t))):N.resolve())}Yi(e,t){if(vT(t))return N.resolve(null);let n=Zi(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Ng(t,null,"F"),n=Zi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{let o=fe(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,n).next(l=>{let d=this.ts(t,c);return this.ns(t,d,o,l.readTime)?this.Yi(e,Ng(t,null,"F")):this.rs(e,d,t,l)}))})))}Zi(e,t,n,r){return vT(t)||r.isEqual(oe.min())?N.resolve(null):this.Ji.getDocuments(e,n).next(s=>{let o=this.ts(t,s);return this.ns(t,o,n,r)?N.resolve(null):(dc()<=Ut.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hs(t)),this.rs(e,o,t,fV(r,-1)).next(c=>c))})}ts(e,t){let n=new Bt(tA(e));return t.forEach((r,s)=>{th(e,s)&&(n=n.add(s))}),n}ns(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return dc()<=Ut.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Hs(t)),this.Ji.getDocumentsMatchingQuery(e,t,$r.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var f_=class{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ot(Ae),this._s=new rr(s=>J_(s),ev),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function cU(i,e,t,n){return new f_(i,e,t,n)}function bA(i,e){return v(this,null,function*(){let t=se(i);return yield t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{let o=[],c=[],l=fe();for(let d of r){o.push(d.batchId);for(let h of d.mutations)l=l.add(h.key)}for(let d of s){c.push(d.batchId);for(let h of d.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(n,l).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function lU(i,e){let t=se(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,h){let f=d.batch,g=f.keys(),w=N.resolve();return g.forEach(T=>{w=w.next(()=>h.getEntry(l,T)).next(k=>{let R=d.docVersions.get(T);ze(R!==null),k.version.compareTo(R)<0&&(f.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(l,f))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let l=fe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function wA(i){let e=se(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function dU(i,e){let t=se(i),n=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((h,f)=>{let g=r.get(f);if(!g)return;c.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,f)));let w=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(zt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,n)),r=r.insert(f,w),function(k,R,j){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(g,w,h)&&c.push(t.Ur.updateTargetData(s,w))});let l=Cn(),d=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(uU(s,o,e.documentUpdates).next(h=>{l=h.Ps,d=h.Is})),!n.isEqual(oe.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));c.push(h)}return N.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.os=r,s))}function uU(i,e,t){let n=fe(),r=fe();return t.forEach(s=>n=n.add(s)),e.getEntries(i,n).next(s=>{let o=Cn();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):q("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function hU(i,e){let t=se(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function mU(i,e){let t=se(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.Ur.getTargetData(n,e).next(s=>s?(r=s,N.resolve(r)):t.Ur.allocateTargetId(n).next(o=>(r=new wc(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=t.os.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n})}function p_(i,e,t){return v(this,null,function*(){let n=se(i),r=n.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!kc(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(r.target)})}function xT(i,e,t){let n=se(i),r=oe.min(),s=fe();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){let f=se(l),g=f._s.get(h);return g!==void 0?N.resolve(f.os.get(g)):f.Ur.getTargetData(d,h)}(n,o,Zi(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,t?r:oe.min(),t?s:fe())).next(c=>(fU(n,xV(e),c),{documents:c,Ts:s})))}function fU(i,e,t){let n=i.us.get(e)||oe.min();t.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.us.set(e,n)}var Fu=class{constructor(){this.activeTargetIds=NV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var g_=class{constructor(){this.so=new Fu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var __=class{_o(e){}shutdown(){}};var Lu=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bu=null;function lg(){return bu===null?bu=function(){return 268435456+Math.round(2147483648*Math.random())}():bu++,"0x"+bu.toString(16)}var pU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var v_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var jt="WebChannelConnection",y_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,n,r,s,o){let c=lg(),l=this.xo(t,n.toUriEncodedString());q("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,l,d,r).then(h=>(q("RestConnection",`Received RPC '${t}' ${c}: `,h),h),h=>{throw Xs("RestConnection",`RPC '${t}' ${c} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(t,n,r,s,o,c){return this.Mo(t,n,r,s,o)}Oo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,n){let r=pU[t];return`${this.Do}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){let s=lg();return new Promise((o,c)=>{let l=new ig;l.setWithCredentials(!0),l.listenOnce(rg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lc.NO_ERROR:let h=l.getResponseJson();q(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case lc.TIMEOUT:q(jt,`RPC '${e}' ${s} timed out`),c(new z(M.DEADLINE_EXCEEDED,"Request time out"));break;case lc.HTTP_ERROR:let f=l.getStatus();if(q(jt,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let w=g?.error;if(w&&w.status&&w.message){let T=function(R){let j=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(j)>=0?j:M.UNKNOWN}(w.status);c(new z(T,w.message))}else c(new z(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new z(M.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{q(jt,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(r);q(jt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",d,n,15)})}Bo(e,t,n){let r=lg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ag(),c=og(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new ng({})),this.Oo(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;let h=s.join("");q(jt,`Creating RPC '${e}' stream ${r}: ${h}`,l);let f=o.createWebChannel(h,l),g=!1,w=!1,T=new v_({Io:R=>{w?q(jt,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(g||(q(jt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),q(jt,`RPC '${e}' stream ${r} sending:`,R),f.send(R))},To:()=>f.close()}),k=(R,j,X)=>{R.listen(j,K=>{try{X(K)}catch(le){setTimeout(()=>{throw le},0)}})};return k(f,qs.EventType.OPEN,()=>{w||(q(jt,`RPC '${e}' stream ${r} transport opened.`),T.yo())}),k(f,qs.EventType.CLOSE,()=>{w||(w=!0,q(jt,`RPC '${e}' stream ${r} transport closed`),T.So())}),k(f,qs.EventType.ERROR,R=>{w||(w=!0,Xs(jt,`RPC '${e}' stream ${r} transport errored:`,R),T.So(new z(M.UNAVAILABLE,"The operation could not be completed")))}),k(f,qs.EventType.MESSAGE,R=>{var j;if(!w){let X=R.data[0];ze(!!X);let K=X,le=K.error||((j=K[0])===null||j===void 0?void 0:j.error);if(le){q(jt,`RPC '${e}' stream ${r} received error:`,le);let mt=le.status,we=function(b){let I=bt[b];if(I!==void 0)return hA(I)}(mt),E=le.message;we===void 0&&(we=M.INTERNAL,E="Unknown error status: "+mt+" with message "+le.message),w=!0,T.So(new z(we,E)),f.close()}else q(jt,`RPC '${e}' stream ${r} received:`,X),T.bo(X)}}),k(c,sg.STAT_EVENT,R=>{R.stat===vu.PROXY?q(jt,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===vu.NOPROXY&&q(jt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function dg(){return typeof document<"u"?document:null}function ih(i){return new qg(i,!0)}var Vu=class{constructor(e,t,n=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Uu=class{constructor(e,t,n,r,s,o,c,l){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(In(t.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Yo===t&&this.P_(n,r)},n=>{e(()=>{let r=new z(M.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(r)})})}P_(e,t){let n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{n(()=>this.I_(r))}),this.stream.onMessage(r=>{n(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},b_=class extends Uu{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=QV(this.serializer,e),n=function(s){if(!("targetChange"in s))return oe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Ji(o.readTime):oe.min()}(e);return this.listener.d_(t,n)}A_(e){let t={};t.database=Kg(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=Mg(l)?{documents:JV(s,l)}:{query:eU(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=mA(s,o.resumeToken);let d=Hg(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(oe.min())>0){c.readTime=Ou(s,o.snapshotVersion.toTimestamp());let d=Hg(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let n=iU(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){let t={};t.database=Kg(this.serializer),t.removeTarget=e,this.a_(t)}},w_=class extends Uu{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=ZV(e.writeResults,e.commitTime),n=Ji(e.commitTime);return this.listener.g_(n,t)}p_(){let e={};e.database=Kg(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(n=>XV(this.serializer,n))};this.a_(t)}};var I_=class extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Gg(t,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(M.UNKNOWN,s.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Gg(t,n),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},E_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(t),this.D_=!1):q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var C_=class{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(()=>v(this,null,function*(){Qr(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(l){return v(this,null,function*(){let d=se(l);d.L_.add(4),yield Dc(d),d.q_.set("Unknown"),d.L_.delete(4),yield nh(d)})}(this))}))}),this.q_=new E_(n,r)}};function nh(i){return v(this,null,function*(){if(Qr(i))for(let e of i.B_)yield e(!0)})}function Dc(i){return v(this,null,function*(){for(let e of i.B_)yield e(!1)})}function IA(i,e){let t=se(i);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),av(t)?ov(t):mo(t).r_()&&sv(t,e))}function rv(i,e){let t=se(i),n=mo(t);t.N_.delete(e),n.r_()&&EA(t,e),t.N_.size===0&&(n.r_()?n.o_():Qr(t)&&t.q_.set("Unknown"))}function sv(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mo(i).A_(e)}function EA(i,e){i.Q_.xe(e),mo(i).R_(e)}function ov(i){i.Q_=new $g({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),mo(i).start(),i.q_.v_()}function av(i){return Qr(i)&&!mo(i).n_()&&i.N_.size>0}function Qr(i){return se(i).L_.size===0}function CA(i){i.Q_=void 0}function gU(i){return v(this,null,function*(){i.q_.set("Online")})}function _U(i){return v(this,null,function*(){i.N_.forEach((e,t)=>{sv(i,e)})})}function vU(i,e){return v(this,null,function*(){CA(i),av(i)?(i.q_.M_(e),ov(i)):i.q_.set("Unknown")})}function yU(i,e,t){return v(this,null,function*(){if(i.q_.set("Online"),e instanceof Pu&&e.state===2&&e.cause)try{yield function(r,s){return v(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(i,e)}catch(n){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield ju(i,n)}else if(e instanceof Ys?i.Q_.Ke(e):e instanceof Du?i.Q_.He(e):i.Q_.We(e),!t.isEqual(oe.min()))try{let n=yield wA(i.localStore);t.compareTo(n)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let h=s.N_.get(d);h&&s.N_.set(d,h.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(zt.EMPTY_BYTE_STRING,h.snapshotVersion)),EA(s,l);let f=new wc(h.target,l,d,h.sequenceNumber);sv(s,f)}),s.remoteSyncer.applyRemoteEvent(c)}(i,t))}catch(n){q("RemoteStore","Failed to raise snapshot:",n),yield ju(i,n)}})}function ju(i,e,t){return v(this,null,function*(){if(!kc(e))throw e;i.L_.add(1),yield Dc(i),i.q_.set("Offline"),t||(t=()=>wA(i.localStore)),i.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield t(),i.L_.delete(1),yield nh(i)}))})}function TA(i,e){return e().catch(t=>ju(i,t,e))}function rh(i){return v(this,null,function*(){let e=se(i),t=sr(e),n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bU(e);)try{let r=yield hU(e.localStore,n);if(r===null){e.O_.length===0&&t.o_();break}n=r.batchId,wU(e,r)}catch(r){yield ju(e,r)}AA(e)&&SA(e)})}function bU(i){return Qr(i)&&i.O_.length<10}function wU(i,e){i.O_.push(e);let t=sr(i);t.r_()&&t.V_&&t.m_(e.mutations)}function AA(i){return Qr(i)&&!sr(i).n_()&&i.O_.length>0}function SA(i){sr(i).start()}function IU(i){return v(this,null,function*(){sr(i).p_()})}function EU(i){return v(this,null,function*(){let e=sr(i);for(let t of i.O_)e.m_(t.mutations)})}function CU(i,e,t){return v(this,null,function*(){let n=i.O_.shift(),r=Ug.from(n,e,t);yield TA(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),yield rh(i)})}function TU(i,e){return v(this,null,function*(){e&&sr(i).V_&&(yield function(n,r){return v(this,null,function*(){if(function(o){return zV(o)&&o!==M.ABORTED}(r.code)){let s=n.O_.shift();sr(n).s_(),yield TA(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield rh(n)}})}(i,e)),AA(i)&&SA(i)})}function kT(i,e){return v(this,null,function*(){let t=se(i);t.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let n=Qr(t);t.L_.add(3),yield Dc(t),n&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield nh(t)})}function AU(i,e){return v(this,null,function*(){let t=se(i);e?(t.L_.delete(2),yield nh(t)):e||(t.L_.add(2),yield Dc(t),t.q_.set("Unknown"))})}function mo(i){return i.K_||(i.K_=function(t,n,r){let s=se(t);return s.w_(),new b_(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:gU.bind(null,i),Ro:_U.bind(null,i),mo:vU.bind(null,i),d_:yU.bind(null,i)}),i.B_.push(e=>v(this,null,function*(){e?(i.K_.s_(),av(i)?ov(i):i.q_.set("Unknown")):(yield i.K_.stop(),CA(i))}))),i.K_}function sr(i){return i.U_||(i.U_=function(t,n,r){let s=se(t);return s.w_(),new w_(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IU.bind(null,i),mo:TU.bind(null,i),f_:EU.bind(null,i),g_:CU.bind(null,i)}),i.B_.push(e=>v(this,null,function*(){e?(i.U_.s_(),yield rh(i)):(yield i.U_.stop(),i.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}var T_=class i{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){let o=Date.now()+n,c=new i(e,t,o,r,s);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cv(i,e){if(In("AsyncQueue",`${e}: ${i}`),kc(i))return new z(M.UNAVAILABLE,`${e}: ${i}`);throw i}var Bu=class i{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Q.comparator(t.key,n.key):(t,n)=>Q.comparator(t.key,n.key),this.keyedMap=uc(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new i(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let n=new i;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}};var zu=class{constructor(){this.W_=new ot(Q.comparator)}track(e){let t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}},ao=class i{constructor(e,t,n,r,s,o,c,l,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new i(e,t,Bu.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}};var A_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},S_=class{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){let r=se(t),s=r.queries;r.queries=DT(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(n)})})(this,new z(M.ABORTED,"Firestore shutting down"))}};function DT(){return new rr(i=>eA(i),eh)}function SU(i,e){return v(this,null,function*(){let t=se(i),n=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(n=2):(s=new A_,n=e.J_()?0:1);try{switch(n){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=cv(o,`Initialization of query '${Hs(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&lv(t)})}function RU(i,e){return v(this,null,function*(){let t=se(i),n=e.query,r=3,s=t.queries.get(n);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}})}function xU(i,e){let t=se(i),n=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(n=!0);o.z_=r}}n&&lv(t)}function kU(i,e,t){let n=se(i),r=n.queries.get(e);if(r)for(let s of r.j_)s.onError(t);n.queries.delete(e)}function lv(i){i.Y_.forEach(e=>{e.next()})}var R_,PT;(PT=R_||(R_={})).ea="default",PT.Cache="cache";var x_=class{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){let n=[];for(let r of e.docChanges)r.type!==3&&n.push(r);e=new ao(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==R_.Cache}};var $u=class{constructor(e){this.key=e}},qu=class{constructor(e){this.key=e}},k_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=tA(e),this.Ra=new Bu(this.Aa)}get Va(){return this.Ta}ma(e,t){let n=t?t.fa:new zu,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{let g=r.get(h),w=th(this.query,f)?f:null,T=!!g&&this.mutatedKeys.has(g.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),R=!1;g&&w?g.data.isEqual(w.data)?T!==k&&(n.track({type:3,doc:w}),R=!0):this.ga(g,w)||(n.track({type:2,doc:w}),R=!0,(l&&this.Aa(w,l)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!g&&w?(n.track({type:0,doc:w}),R=!0):g&&!w&&(n.track({type:1,doc:g}),R=!0,(l||d)&&(c=!0)),R&&(w?(o=o.add(w),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,f)=>function(w,T){let k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return k(w)-k(T)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(n),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,d=l!==this.Ea;return this.Ea=l,o.length!==0||d?{snapshot:new ao(this.query,e.Ra,s,o,e.mutatedKeys,l===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=fe(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});let t=[];return e.forEach(n=>{this.da.has(n)||t.push(new qu(n))}),this.da.forEach(n=>{e.has(n)||t.push(new $u(n))}),t}ba(e){this.Ta=e.Ts,this.da=fe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},D_=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},P_=class{constructor(e){this.key=e,this.va=!1}},M_=class{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new rr(c=>eA(c),eh),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(Q.comparator),this.Na=new Map,this.La=new Ec,this.Ba={},this.ka=new Map,this.qa=Ic.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function DU(i,e,t=!0){return v(this,null,function*(){let n=MA(i),r,s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield RA(n,e,t,!0),r})}function PU(i,e){return v(this,null,function*(){let t=MA(i);yield RA(t,e,!0,!1)})}function RA(i,e,t,n){return v(this,null,function*(){let r=yield mU(i.localStore,Zi(e)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,t),c;return n&&(c=yield MU(i,e,s,o==="current",r.resumeToken)),i.isPrimaryClient&&t&&IA(i.remoteStore,r),c})}function MU(i,e,t,n,r){return v(this,null,function*(){i.Ka=(f,g,w)=>function(k,R,j,X){return v(this,null,function*(){let K=R.view.ma(j);K.ns&&(K=yield xT(k.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,K)));let le=X&&X.targetChanges.get(R.targetId),mt=X&&X.targetMismatches.get(R.targetId)!=null,we=R.view.applyChanges(K,k.isPrimaryClient,le,mt);return OT(k,R.targetId,we.wa),we.snapshot})}(i,f,g,w);let s=yield xT(i.localStore,e,!0),o=new k_(e,s.Ts),c=o.ma(s.documents),l=bc.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),d=o.applyChanges(c,i.isPrimaryClient,l);OT(i,t,d.wa);let h=new D_(e,t,o);return i.Fa.set(e,h),i.Ma.has(t)?i.Ma.get(t).push(e):i.Ma.set(t,[e]),d.snapshot})}function OU(i,e,t){return v(this,null,function*(){let n=se(i),r=n.Fa.get(e),s=n.Ma.get(r.targetId);if(s.length>1)return n.Ma.set(r.targetId,s.filter(o=>!eh(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield p_(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),t&&rv(n.remoteStore,r.targetId),O_(n,r.targetId)}).catch(xc))):(O_(n,r.targetId),yield p_(n.localStore,r.targetId,!0))})}function NU(i,e){return v(this,null,function*(){let t=se(i),n=t.Fa.get(e),r=t.Ma.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),rv(t.remoteStore,n.targetId))})}function FU(i,e,t){return v(this,null,function*(){let n=$U(i);try{let r=yield function(o,c){let l=se(o),d=Pt.now(),h=c.reduce((w,T)=>w.add(T.key),fe()),f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let T=Cn(),k=fe();return l.cs.getEntries(w,h).next(R=>{T=R,T.forEach((j,X)=>{X.isValidDocument()||(k=k.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,T)).next(R=>{f=R;let j=[];for(let X of c){let K=BV(X,f.get(X.key).overlayedDocument);K!=null&&j.push(new tn(X.key,K,WT(K.value.mapValue),wn.exists(!0)))}return l.mutationQueue.addMutationBatch(w,d,j,c)}).next(R=>{g=R;let j=R.applyToLocalDocumentSet(f,k);return l.documentOverlayCache.saveOverlays(w,R.batchId,j)})}).then(()=>({batchId:g.batchId,changes:nA(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let d=o.Ba[o.currentUser.toKey()];d||(d=new ot(Ae)),d=d.insert(c,l),o.Ba[o.currentUser.toKey()]=d}(n,r.batchId,t),yield Pc(n,r.changes),yield rh(n.remoteStore)}catch(r){let s=cv(r,"Failed to persist write");t.reject(s)}})}function xA(i,e){return v(this,null,function*(){let t=se(i);try{let n=yield dU(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?ze(o.va):r.removedDocuments.size>0&&(ze(o.va),o.va=!1))}),yield Pc(t,n,e)}catch(n){yield xc(n)}})}function MT(i,e,t){let n=se(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){let r=[];n.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=se(o);l.onlineState=c;let d=!1;l.queries.forEach((h,f)=>{for(let g of f.j_)g.Z_(c)&&(d=!0)}),d&&lv(l)}(n.eventManager,e),r.length&&n.Ca.d_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}function LU(i,e,t){return v(this,null,function*(){let n=se(i);n.sharedClientState.updateQueryState(e,"rejected",t);let r=n.Na.get(e),s=r&&r.key;if(s){let o=new ot(Q.comparator);o=o.insert(s,Li.newNoDocument(s,oe.min()));let c=fe().add(s),l=new ku(oe.min(),new Map,new ot(Ae),o,c);yield xA(n,l),n.Oa=n.Oa.remove(s),n.Na.delete(e),dv(n)}else yield p_(n.localStore,e,!1).then(()=>O_(n,e,t)).catch(xc)})}function VU(i,e){return v(this,null,function*(){let t=se(i),n=e.batch.batchId;try{let r=yield lU(t.localStore,e);DA(t,n,null),kA(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),yield Pc(t,r)}catch(r){yield xc(r)}})}function UU(i,e,t){return v(this,null,function*(){let n=se(i);try{let r=yield function(o,c){let l=se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,c).next(f=>(ze(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(d,f))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(n.localStore,e);DA(n,e,t),kA(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),yield Pc(n,r)}catch(r){yield xc(r)}})}function kA(i,e){(i.ka.get(e)||[]).forEach(t=>{t.resolve()}),i.ka.delete(e)}function DA(i,e,t){let n=se(i),r=n.Ba[n.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.Ba[n.currentUser.toKey()]=r}}function O_(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(let n of i.Ma.get(e))i.Fa.delete(n),t&&i.Ca.$a(n,t);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach(n=>{i.La.containsKey(n)||PA(i,n)})}function PA(i,e){i.xa.delete(e.path.canonicalString());let t=i.Oa.get(e);t!==null&&(rv(i.remoteStore,t),i.Oa=i.Oa.remove(e),i.Na.delete(t),dv(i))}function OT(i,e,t){for(let n of t)n instanceof $u?(i.La.addReference(n.key,e),jU(i,n)):n instanceof qu?(q("SyncEngine","Document no longer in limbo: "+n.key),i.La.removeReference(n.key,e),i.La.containsKey(n.key)||PA(i,n.key)):te()}function jU(i,e){let t=e.key,n=t.path.canonicalString();i.Oa.get(t)||i.xa.has(n)||(q("SyncEngine","New document in limbo: "+t),i.xa.add(n),dv(i))}function dv(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){let e=i.xa.values().next().value;i.xa.delete(e);let t=new Q(et.fromString(e)),n=i.qa.next();i.Na.set(n,new P_(t)),i.Oa=i.Oa.insert(t,n),IA(i.remoteStore,new wc(Zi(tv(t.path)),n,"TargetPurposeLimboResolution",$T.oe))}}function Pc(i,e,t){return v(this,null,function*(){let n=se(i),r=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((c,l)=>{o.push(n.Ka(l,e,t).then(d=>{var h;if((d||t)&&n.isPrimaryClient){let f=d?!d.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(d){r.push(d);let f=u_.Wi(l.targetId,d);s.push(f)}}))}),yield Promise.all(o),n.Ca.d_(r),yield function(l,d){return v(this,null,function*(){let h=se(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>N.forEach(d,g=>N.forEach(g.$i,w=>h.persistence.referenceDelegate.addReference(f,g.targetId,w)).next(()=>N.forEach(g.Ui,w=>h.persistence.referenceDelegate.removeReference(f,g.targetId,w)))))}catch(f){if(!kc(f))throw f;q("LocalStore","Failed to update sequence numbers: "+f)}for(let f of d){let g=f.targetId;if(!f.fromCache){let w=h.os.get(g),T=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(g,k)}}})}(n.localStore,s))})}function BU(i,e){return v(this,null,function*(){let t=se(i);if(!t.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let n=yield bA(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new z(M.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),yield Pc(t,n.hs)}})}function zU(i,e){let t=se(i),n=t.Na.get(e);if(n&&n.va)return fe().add(n.key);{let r=fe(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function MA(i){let e=se(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=xA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LU.bind(null,e),e.Ca.d_=xU.bind(null,e.eventManager),e.Ca.$a=kU.bind(null,e.eventManager),e}function $U(i){let e=se(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UU.bind(null,e),e}var Hu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=ih(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cU(this.persistence,new m_,e.initialUser,this.serializer)}createPersistence(e){return new c_(d_.Zr,this.serializer)}createSharedClientState(e){return new g_}terminate(){return v(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var N_=class{initialize(e,t){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>MT(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=BU.bind(null,this.syncEngine),yield AU(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new S_}()}createDatastore(e){let t=ih(e.databaseInfo.databaseId),n=function(s){return new y_(s)}(e.databaseInfo);return function(s,o,c,l){return new I_(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,r,s,o,c){return new C_(n,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>MT(this.syncEngine,t,0),function(){return Lu.D()?new Lu:new __}())}createSyncEngine(e,t){return function(r,s,o,c,l,d,h){let f=new M_(r,s,o,c,l,d);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return v(this,null,function*(){var e,t;yield function(r){return v(this,null,function*(){let s=se(r);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Dc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var F_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var L_=class{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Tt.UNAUTHENTICATED,this.clientId=Cu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,s=>v(this,null,function*(){q("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=cv(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}};function ug(i,e){return v(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let t=i.configuration;yield e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(r=>v(this,null,function*(){n.isEqual(r)||(yield bA(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e})}function NT(i,e){return v(this,null,function*(){i.asyncQueue.verifyOperationInProgress();let t=yield HU(i);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>kT(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>kT(e.remoteStore,r)),i._onlineComponents=e})}function qU(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}function HU(i){return v(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ug(i,i._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!qU(t))throw t;Xs("Error using user provided cache. Falling back to memory cache: "+t),yield ug(i,new Hu)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield ug(i,new Hu);return i._offlineComponents})}function OA(i){return v(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield NT(i,i._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield NT(i,new N_))),i._onlineComponents})}function GU(i){return OA(i).then(e=>e.syncEngine)}function FT(i){return v(this,null,function*(){let e=yield OA(i),t=e.eventManager;return t.onListen=DU.bind(null,e.syncEngine),t.onUnlisten=OU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NU.bind(null,e.syncEngine),t})}function NA(i){let e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}var LT=new Map;function FA(i,e,t){if(!t)throw new z(M.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function WU(i,e,t,n){if(e===!0&&n===!0)throw new z(M.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function VT(i){if(!Q.isDocumentKey(i))throw new z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function UT(i){if(Q.isDocumentKey(i))throw new z(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":te()}function tr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=sh(i);throw new z(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}var Gu=class{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NA((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},co=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gu(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new hg;switch(n.type){case"firstParty":return new gg(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let n=LT.get(t);n&&(q("ComponentProvider","Removing Datastore"),LT.delete(t),n.terminate())}(this),Promise.resolve()}};function LA(i,e,t,n={}){var r;let s=(i=tr(i,co))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let c,l;if(typeof n.mockUserToken=="string")c=n.mockUserToken,l=Tt.MOCK_USER;else{c=ys(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(d)}i._authCredentials=new mg(new Eu(c,l))}}var lo=class i{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new i(this.firestore,e,this._query)}},ai=class i{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new i(this.firestore,e,this._key)}},ir=class i extends lo{constructor(e,t,n){super(e,t,tv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ai(this.firestore,null,new Q(e))}withConverter(e){return new i(this.firestore,e,this._path)}};function VA(i,e,...t){if(i=me(i),FA("collection","path",e),i instanceof co){let n=et.fromString(e,...t);return UT(n),new ir(i,null,n)}{if(!(i instanceof ai||i instanceof ir))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(et.fromString(e,...t));return UT(n),new ir(i.firestore,null,n)}}function uv(i,e,...t){if(i=me(i),arguments.length===1&&(e=Cu.newId()),FA("doc","path",e),i instanceof co){let n=et.fromString(e,...t);return VT(n),new ai(i,null,new Q(n))}{if(!(i instanceof ai||i instanceof ir))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(et.fromString(e,...t));return VT(n),new ai(i.firestore,i instanceof ir?i.converter:null,new Q(n))}}var V_=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Vu(this,"async_queue_retry"),this.Eu=()=>{let t=dg();t&&q("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=dg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=dg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new bn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return v(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!kc(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(n=>{this.hu=n,this.Pu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(n);throw In("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.Pu=!1,n))));return this.au=t,t}enqueueAfterDelay(e,t,n){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let r=T_.createAndSchedule(this,e,t,n,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&te()}verifyOperationInProgress(){}mu(){return v(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function jT(i){return function(t,n){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}var or=class extends co{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=function(){return new V_}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||BA(this),this._firestoreClient.terminate()}};function UA(i,e){let t=typeof i=="object"?i:vt(),n=typeof i=="string"?i:e||"(default)",r=_t(t,"firestore").getImmediate({identifier:n});if(!r._initialized){let s=Hn("firestore");s&&LA(r,...s)}return r}function jA(i){return i._firestoreClient||BA(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function BA(i){var e,t,n;let r=i._freezeSettings(),s=function(c,l,d,h){return new wg(c,l,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NA(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new L_(i._authCredentials,i._appCheckCredentials,i._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Cc=class i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new i(zt.fromBase64String(e))}catch(t){throw new z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new i(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var uo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Tc=class{constructor(e){this._methodName=e}};var Ac=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var Sc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}};var KU=/^__.*__$/,U_=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new tn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kr(e,this.data,t,this.fieldTransforms)}},Wu=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new tn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function zA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var j_=class i{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new i(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:n,Du:!1});return r.vu(e),r}Cu(e){var t;let n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:n,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Yu(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(zA(this.wu)&&KU.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},B_=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ih(e)}Nu(e,t,n,r=!1){return new j_({wu:e,methodName:t,Ou:n,path:pi.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hv(i){let e=i._freezeSettings(),t=ih(i._databaseId);return new B_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function YU(i,e,t,n,r,s={}){let o=i.Nu(s.merge||s.mergeFields?2:0,e,t,r);mv("Data must be an object, but it was:",o,n);let c=$A(n,o),l,d;if(s.merge)l=new Ai(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let f of s.mergeFields){let g=z_(e,f,t);if(!o.contains(g))throw new z(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);HA(h,g)||h.push(g)}l=new Ai(h),d=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,d=o.fieldTransforms;return new U_(new fi(c),l,d)}var Ku=class i extends Tc{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof i}};function QU(i,e,t,n){let r=i.Nu(1,e,t);mv("Data must be an object, but it was:",r,n);let s=[],o=fi.empty();Yr(n,(l,d)=>{let h=fv(e,l,t);d=me(d);let f=r.Cu(h);if(d instanceof Ku)s.push(h);else{let g=Mc(d,f);g!=null&&(s.push(h),o.set(h,g))}});let c=new Ai(s);return new Wu(o,c,r.fieldTransforms)}function XU(i,e,t,n,r,s){let o=i.Nu(1,e,t),c=[z_(e,n,t)],l=[r];if(s.length%2!=0)throw new z(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)c.push(z_(e,s[g])),l.push(s[g+1]);let d=[],h=fi.empty();for(let g=c.length-1;g>=0;--g)if(!HA(d,c[g])){let w=c[g],T=l[g];T=me(T);let k=o.Cu(w);if(T instanceof Ku)d.push(w);else{let R=Mc(T,k);R!=null&&(d.push(w),h.set(w,R))}}let f=new Ai(d);return new Wu(h,f,o.fieldTransforms)}function ZU(i,e,t,n=!1){return Mc(t,i.Nu(n?4:3,e))}function Mc(i,e){if(qA(i=me(i)))return mv("Unsupported field value:",e,i),$A(i,e);if(i instanceof Tc)return function(n,r){if(!zA(r.wu))throw r.Mu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${n._methodName}() is not currently supported inside arrays`);let s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(n,r){let s=[],o=0;for(let c of n){let l=Mc(c,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(i,e)}return function(n,r){if((n=me(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return FV(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let s=Pt.fromDate(n);return{timestampValue:Ou(r.serializer,s)}}if(n instanceof Pt){let s=new Pt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ou(r.serializer,s)}}if(n instanceof Ac)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Cc)return{bytesValue:mA(r.serializer,n._byteString)};if(n instanceof ai){let s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nv(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Sc)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Mu("VectorValues must only contain numeric values.");return iv(c.serializer,l)})}}}}}}(n,r);throw r.Mu(`Unsupported field value: ${sh(n)}`)}(i,e)}function $A(i,e){let t={};return qT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(i,(n,r)=>{let s=Mc(r,e.bu(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function qA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Pt||i instanceof Ac||i instanceof Cc||i instanceof ai||i instanceof Tc||i instanceof Sc)}function mv(i,e,t){if(!qA(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let n=sh(t);throw n==="an object"?e.Mu(i+" a custom object"):e.Mu(i+" "+n)}}function z_(i,e,t){if((e=me(e))instanceof uo)return e._internalPath;if(typeof e=="string")return fv(i,e);throw Yu("Field path arguments must be of type string or ",i,!1,void 0,t)}var JU=new RegExp("[~\\*/\\[\\]]");function fv(i,e,t){if(e.search(JU)>=0)throw Yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new uo(...e.split("."))._internalPath}catch{throw Yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Yu(i,e,t,n,r){let s=n&&!n.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new z(M.INVALID_ARGUMENT,c+i+l)}function HA(i,e){return i.some(t=>t.isEqual(e))}var Qu=class{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ai(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(GA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},$_=class extends Qu{data(){return super.data()}};function GA(i,e){return typeof e=="string"?fv(i,e):e instanceof uo?e._internalPath:e._delegate._internalPath}function ej(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new z(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rc=class{},q_=class extends Rc{};function WA(i,e,...t){let n=[];e instanceof Rc&&n.push(e),n=n.concat(t),function(s){let o=s.filter(l=>l instanceof G_).length,c=s.filter(l=>l instanceof H_).length;if(o>1||o>0&&c>0)throw new z(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let r of n)i=r._apply(i);return i}var H_=class i extends q_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new i(e,t,n)}_apply(e){let t=this._parse(e);return KA(e._query,t),new lo(e.firestore,e.converter,Og(e._query,t))}_parse(e){let t=hv(e.firestore);return function(s,o,c,l,d,h,f){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){zT(f,h);let w=[];for(let T of f)w.push(BT(l,s,T));g={arrayValue:{values:w}}}else g=BT(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||zT(f,h),g=ZU(c,o,f,h==="in"||h==="not-in");return It.create(d,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var G_=class i extends Rc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new i(e,t)}_parse(e){let t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Vi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)KA(o,l),o=Og(o,l)}(e._query,t),new lo(e.firestore,e.converter,Og(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function BT(i,e,t){if(typeof(t=me(t))=="string"){if(t==="")throw new z(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JT(e)&&t.indexOf("/")!==-1)throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let n=e.path.child(et.fromString(t));if(!Q.isDocumentKey(n))throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return hT(i,new Q(n))}if(t instanceof ai)return hT(i,t._key);throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sh(t)}.`)}function zT(i,e){if(!Array.isArray(i)||i.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KA(i,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var W_=class{convertValue(e,t="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let n={};return Yr(e,(r,s)=>{n[r]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,r;let s=(r=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(o=>Ze(o.doubleValue));return new Sc(s)}convertGeoPoint(e){return new Ac(Ze(e.latitude),Ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":let n=X_(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){let t=En(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=et.fromString(e);ze(yA(n));let r=new Ru(n.get(1),n.get(3)),s=new Q(n.popFirst(5));return r.isEqual(t)||In(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function tj(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}var Br=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xu=class extends Qu{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Qs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(GA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}},Qs=class extends Xu{data(e={}){return super.data(e)}},K_=class{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Br(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Qs(this._firestore,this._userDataWriter,n.key,n,new Br(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Qs(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Br(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Qs(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Br(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:ij(c.type),doc:l,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function ij(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}var Zu=class extends W_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ai(this.firestore,null,t)}};function YA(i,e,t,...n){i=tr(i,ai);let r=tr(i.firestore,or),s=hv(r),o;return o=typeof(e=me(e))=="string"||e instanceof uo?XU(s,"updateDoc",i._key,e,t,n):QU(s,"updateDoc",i._key,e),pv(r,[o.toMutation(i._key,wn.exists(!0))])}function QA(i){return pv(tr(i.firestore,or),[new yc(i._key,wn.none())])}function XA(i,e){let t=tr(i.firestore,or),n=uv(i),r=tj(i.converter,e);return pv(t,[YU(hv(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,wn.exists(!1))]).then(()=>n)}function ZA(i,...e){var t,n,r;i=me(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||jT(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(jT(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,d,h;if(i instanceof ai)d=tr(i.firestore,or),h=tv(i._key.path),l={next:f=>{e[o]&&e[o](nj(d,i,f))},error:e[o+1],complete:e[o+2]};else{let f=tr(i,lo);d=tr(f.firestore,or),h=f._query;let g=new Zu(d);l={next:w=>{e[o]&&e[o](new K_(d,g,f,w))},error:e[o+1],complete:e[o+2]},ej(i._query)}return function(g,w,T,k){let R=new F_(k),j=new x_(w,R,T);return g.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return SU(yield FT(g),j)})),()=>{R.za(),g.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return RU(yield FT(g),j)}))}}(jA(d),h,c,l)}function pv(i,e){return function(n,r){let s=new bn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return FU(yield GU(n),r,s)})),s.promise}(jA(i),e)}function nj(i,e,t){let n=t.docs.get(e._key),r=new Zu(i);return new Xu(i,r,e._key,n,new Br(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){ho=r})(si),dt(new lt("firestore",(n,{instanceIdentifier:r,options:s})=>{let o=n.getProvider("app").getImmediate(),c=new or(new fg(n.getProvider("auth-internal")),new vg(n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(d.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),G(cT,"4.7.2",e),G(cT,"4.7.2","esm2017")})();var Tn=class{constructor(e){return e}},JA="firestore",gv=class{constructor(){return ht(JA)}};var _v=new L("angularfire2.firestore-instances");function rj(i,e){let t=yt(JA,i,e);return t&&new Tn(t)}function sj(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Tn(n)}}var eS={provide:gv,deps:[[new ne,_v]]},tS={provide:Tn,useFactory:rj,deps:[[new ne,_v],Ke]},oh=(()=>{class i{constructor(){G("angularfire",He.full,"fst")}static \u0275fac=function(n){return new(n||i)};static \u0275mod=J({type:i});static \u0275inj=Z({providers:[tS,eS]})}return i})();function iS(i,...e){return G("angularfire",He.full,"fst"),Be([tS,eS,{provide:_v,useFactory:sj(i),multi:!0,deps:[U,ue,st,Je,[new ne,Fi],[new ne,oi],...e]}])}var nS=Te(XA,!0);var fo=Te(VA,!0);var rS=Te(QA,!0);var vv=Te(uv,!0);var sS=Te(UA,!0);var oS=Te(ZA,!0);var aS=Te(WA,!0);var cS=Te(YA,!0);var ah=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Me({type:i,selectors:[["app-sub"]],standalone:!0,features:[Le],decls:2,vars:0,template:function(t,n){t&1&&(H(0,"div"),gt(1,"sub/subpage"),W())},dependencies:[oh,ui,Cd,Us],styles:[".tech-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px}.tech-bar-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin:auto;padding:24px;width:100%;max-width:640px}@media (max-width: 600px){.tech-bar-list[_ngcontent-%COMP%]{padding:16px}}.tech-bar-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin:4px 16px}@media (max-width: 600px){.tech-bar-item[_ngcontent-%COMP%]{width:100%}}.chunk-word[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chunk-word[_ngcontent-%COMP%]   .chunk-name[_ngcontent-%COMP%]{margin:0}.chunk-bar[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}@media (max-width: 600px){.chunk-bar[_ngcontent-%COMP%]{height:24px;width:100%}}.action-btns[_ngcontent-%COMP%]{display:flex}.action-btns[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{max-width:120px;padding:4px;margin-bottom:16px;margin-right:8px}.chip-list[_ngcontent-%COMP%]{margin-right:16px}"]})};var ch=class i{constructor(e){this.firestore=e;this.chunkCollection=fo(this.firestore,"chunks")}chunkCollection;getChunks(){return fo(this.firestore,"chunks")}addChunk(e){return nS(fo(this.firestore,"chunks"),e)}updateChunk(e){let r=e,{$key:t}=r,n=Nw(r,["$key"]);return cS(vv(this.firestore,"chunks"),n)}deleteChunk(e){return rS(vv(this.firestore,"chunks",e))}static \u0275fac=function(t){return new(t||i)(D(Tn))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};function aj(i,e){if(i&1&&(H(0,"mat-option",7),gt(1),W()),i&2){let t=e.$implicit;Ne("value",t.value),ee(),Nl(" ",t.viewValue," ")}}function cj(i,e){if(i&1&&(H(0,"div",8)(1,"div",9)(2,"p",10),gt(3),W()(),Ie(4,"mat-progress-bar",11),W()),i&2){let t=e.$implicit;ee(3),$i(t.chunk),ee(),Ne("mode",(t.point===10,"buffer"))("value",t.point*10)("matTooltip",t.point.toString())("color",t.type==="F"?"primary":t.type==="B"?"accent":"warn")}}var lj=vr("listAnimation",[qn("* <=> *",[ca(":enter",[Mi({opacity:0}),C0("20ms",$n("600ms ease-out",Mi({opacity:1})))],{optional:!0}),ca(":leave",$n("200ms",Mi({opacity:0})),{optional:!0})])]),lh=class i{constructor(e,t){this.chunkService=e;this.firestore=t}visibility=!1;chunks=[];categories=[{value:"All",viewValue:"All"},{value:"F",viewValue:"Frontend"},{value:"B",viewValue:"Backend"},{value:"Dev",viewValue:"DevOps"}];set selectedCategory(e){this.getChunks(e==="All"?"":e)}ngOnInit(){this.getChunks()}getChunks(e=""){this.chunks.length=0;let t=fo(this.firestore,"chunks"),n=aS(t);oS(n,r=>{let s=[];r.forEach(o=>{let c=o.data();console.log(c);let l={$key:o.id,chunk:c.chunk,point:c.point,type:c.type};s.push(l)}),this.chunks=s.filter(o=>e?o.type===e:!0)})}reorder(){this.chunks=this.chunks.sort((e,t)=>{var n=e.point-t.point<0;return n?1:0})}shuffle(){this.chunks=this.shufflestuff(this.chunks)}shufflestuff(e){let t=e==null?0:e.length;if(!t)return[];let n=-1,r=t-1,s=this.copyArray(e);for(;++n<t;){let o=n+Math.floor(Math.random()*(r-n+1)),c=s[o];s[o]=s[n],s[n]=c}return s}copyArray(e,t){let n=-1,r=e.length;for(t||(t=new Array(r));++n<r;)t[n]=e[n];return t}static \u0275fac=function(t){return new(t||i)(P(ch),P(Tn))};static \u0275cmp=Me({type:i,selectors:[["app-tech"]],standalone:!0,features:[Le],decls:14,vars:4,consts:[[1,"tech-header"],[1,"action-btns"],["matNativeControl","","name","category",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center","font-size","12px"],[1,"tech-bar-list",3,"click"],["class","tech-bar-item","transition-group-item","",4,"ngFor","ngForOf"],[3,"value"],["transition-group-item","",1,"tech-bar-item"],[1,"chunk-word"],[1,"chunk-name"],[1,"chunk-bar",3,"mode","value","matTooltip","color"]],template:function(t,n){t&1&&(H(0,"div")(1,"div",0)(2,"h1"),gt(3,"Skills"),W(),H(4,"div",1)(5,"mat-form-field")(6,"mat-label"),gt(7,"Fields"),W(),H(8,"mat-select",2),c0("ngModelChange",function(s){return a0(n.selectedCategory,s)||(n.selectedCategory=s),s}),Oe(9,aj,2,2,"mat-option",3),W()()()(),H(10,"div",4),gt(11," using Angular v18, data hosted by Firebase Firestore "),W(),H(12,"div",5),We("click",function(){return n.shuffle()}),Oe(13,cj,5,5,"div",6),W()()),t&2&&(ee(8),o0("ngModel",n.selectedCategory),ee(),Ne("ngForOf",n.categories),ee(3),Ne("@listAnimation",n.chunks),ee(),Ne("ngForOf",n.chunks))},dependencies:[oh,ui,y0,Cd,XI,Af,Us,BE,zd,rC,lC,iC,Ud],styles:[".tech-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px}.tech-bar-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin:auto;padding:24px;width:100%;max-width:640px}@media (max-width: 600px){.tech-bar-list[_ngcontent-%COMP%]{padding:16px}}.tech-bar-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin:4px 16px}@media (max-width: 600px){.tech-bar-item[_ngcontent-%COMP%]{width:100%}}.chunk-word[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chunk-word[_ngcontent-%COMP%]   .chunk-name[_ngcontent-%COMP%]{margin:0}.chunk-bar[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}@media (max-width: 600px){.chunk-bar[_ngcontent-%COMP%]{height:24px;width:100%}}.action-btns[_ngcontent-%COMP%]{display:flex}.action-btns[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{max-width:120px;padding:4px;margin-bottom:16px;margin-right:8px}.chip-list[_ngcontent-%COMP%]{margin-right:16px}"],data:{animation:[lj]}})};var dh=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Me({type:i,selectors:[["app-miss"]],standalone:!0,features:[Le],decls:2,vars:0,consts:[[1,"title"]],template:function(t,n){t&1&&(H(0,"h1",0),gt(1,'404: *ngIf="isExisting"'),W())},styles:[".title[_ngcontent-%COMP%]{font-size:3rem;margin:80px auto;text-align:center}@media (max-width: 600px){.title[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 300px){.title[_ngcontent-%COMP%]{font-size:1rem}}"]})};var dS=[{path:"",component:lh},{path:"sub",component:ah},{component:dh,path:"**"}];var uh="analytics",dj="firebase_id",uj="origin",hj=60*1e3,mj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Av="https://www.googletagmanager.com/gtag/js";var Qt=new Wi("@firebase/analytics");var fj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gi=new Hi("analytics","Analytics",fj);function pj(i){if(!i.startsWith(Av)){let e=gi.create("invalid-gtag-resource",{gtagURL:i});return Qt.warn(e.message),""}return i}function _S(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function gj(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function _j(i,e){let t=gj("firebase-js-sdk-policy",{createScriptURL:pj}),n=document.createElement("script"),r=`${Av}?l=${i}&id=${e}`;n.src=t?t?.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function vj(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}function yj(i,e,t,n,r,s){return v(this,null,function*(){let o=n[r];try{if(o)yield e[o];else{let l=(yield _S(t)).find(d=>d.measurementId===r);l&&(yield e[l.appId])}}catch(c){Qt.error(c)}i("config",r,s)})}function bj(i,e,t,n,r){return v(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let c=yield _S(t);for(let l of o){let d=c.find(f=>f.measurementId===l),h=d&&e[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),i("event",n,r||{})}catch(s){Qt.error(s)}})}function wj(i,e,t,n){function r(s,...o){return v(this,null,function*(){try{if(s==="event"){let[c,l]=o;yield bj(i,e,t,c,l)}else if(s==="config"){let[c,l]=o;yield yj(i,e,t,n,c,l)}else if(s==="consent"){let[c,l]=o;i("consent",c,l)}else if(s==="get"){let[c,l,d]=o;i("get",c,l,d)}else if(s==="set"){let[c]=o;i("set",c)}else i(s,...o)}catch(c){Qt.error(c)}})}return r}function Ij(i,e,t,n,r){let s=function(...o){window[n].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=wj(s,i,e,t),{gtagCore:s,wrappedGtag:window[r]}}function Ej(i){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(Av)&&t.src.includes(i))return t;return null}var Cj=30,Tj=1e3,wv=class{constructor(e={},t=Tj){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},vS=new wv;function Aj(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}function Sj(i){return v(this,null,function*(){var e;let{appId:t,apiKey:n}=i,r={method:"GET",headers:Aj(n)},s=mj.replace("{app-id}",t),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let c="";try{let l=yield o.json();!((e=l.error)===null||e===void 0)&&e.message&&(c=l.error.message)}catch{}throw gi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()})}function Rj(n){return v(this,arguments,function*(i,e=vS,t){let{appId:r,apiKey:s,measurementId:o}=i.options;if(!r)throw gi.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw gi.create("no-api-key")}let c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Iv;return setTimeout(()=>v(this,null,function*(){l.abort()}),t!==void 0?t:hj),yS({appId:r,apiKey:s,measurementId:o},c,l,e)})}function yS(s,o,c){return v(this,arguments,function*(i,{throttleEndTimeMillis:e,backoffCount:t},n,r=vS){var l;let{appId:d,measurementId:h}=i;try{yield xj(n,e)}catch(f){if(h)return Qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:d,measurementId:h};throw f}try{let f=yield Sj(i);return r.deleteThrottleMetadata(d),f}catch(f){let g=f;if(!kj(g)){if(r.deleteThrottleMetadata(d),h)return Qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:d,measurementId:h};throw f}let w=Number((l=g?.customData)===null||l===void 0?void 0:l.httpStatus)===503?ga(t,r.intervalMillis,Cj):ga(t,r.intervalMillis),T={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return r.setThrottleMetadata(d,T),Qt.debug(`Calling attemptFetch again in ${w} millis`),yS(i,T,n,r)}})}function xj(i,e){return new Promise((t,n)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(t,r);i.addEventListener(()=>{clearTimeout(s),n(gi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kj(i){if(!(i instanceof ri)||!i.customData)return!1;let e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}var Iv=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Ev;function Dj(i,e,t,n,r){return v(this,null,function*(){if(r&&r.global){i("event",t,n);return}else{let s=yield e,o=Object.assign(Object.assign({},n),{send_to:s});i("event",t,o)}})}function Pj(i,e,t,n){return v(this,null,function*(){if(n&&n.global)return i("set",{user_id:t}),Promise.resolve();{let r=yield e;i("config",r,{update:!0,user_id:t})}})}var Cv;function Mj(i){Cv=i}function Oj(i){Ev=i}function Nj(){return v(this,null,function*(){if(un())try{yield yr()}catch(i){return Qt.warn(gi.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return Qt.warn(gi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Fj(i,e,t,n,r,s,o){return v(this,null,function*(){var c;let l=Rj(i);l.then(w=>{t[w.measurementId]=w.appId,i.options.measurementId&&w.measurementId!==i.options.measurementId&&Qt.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Qt.error(w)),e.push(l);let d=Nj().then(w=>{if(w)return n.getId()}),[h,f]=yield Promise.all([l,d]);Ej(s)||_j(s,h.measurementId),Cv&&(r("consent","default",Cv),Mj(void 0)),r("js",new Date);let g=(c=o?.config)!==null&&c!==void 0?c:{};return g[uj]="firebase",g.update=!0,f!=null&&(g[dj]=f),r("config",h.measurementId,g),Ev&&(r("set",Ev),Oj(void 0)),h.measurementId})}var Tv=class{constructor(e){this.app=e}_delete(){return delete po[this.app.options.appId],Promise.resolve()}},po={},uS=[],hS={},bv="dataLayer",Lj="gtag",mS,Sv,fS=!1;function Vj(){let i=[];if(da()&&i.push("This is a browser extension environment."),ua()||i.push("Cookies are not available."),i.length>0){let e=i.map((n,r)=>`(${r+1}) ${n}`).join(" "),t=gi.create("invalid-analytics-context",{errorInfo:e});Qt.warn(t.message)}}function Uj(i,e,t){Vj();let n=i.options.appId;if(!n)throw gi.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gi.create("no-api-key");if(po[n]!=null)throw gi.create("already-exists",{id:n});if(!fS){vj(bv);let{wrappedGtag:s,gtagCore:o}=Ij(po,uS,hS,bv,Lj);Sv=s,mS=o,fS=!0}return po[n]=Fj(i,uS,hS,e,mS,bv,t),new Tv(i)}function bS(i=vt()){i=me(i);let e=_t(i,uh);return e.isInitialized()?e.getImmediate():wS(i)}function wS(i,e={}){let t=_t(i,uh);if(t.isInitialized()){let r=t.getImmediate();if(fa(e,t.getOptions()))return r;throw gi.create("already-initialized")}return t.initialize({options:e})}function IS(){return v(this,null,function*(){if(da()||!ua()||!un())return!1;try{return yield yr()}catch{return!1}})}function ES(i,e,t){i=me(i),Pj(Sv,po[i.app.options.appId],e,t).catch(n=>Qt.error(n))}function Rv(i,e,t,n){i=me(i),Dj(Sv,po[i.app.options.appId],e,t,n).catch(r=>Qt.error(r))}var pS="@firebase/analytics",gS="0.10.8";function jj(){dt(new lt(uh,(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Uj(n,r,t)},"PUBLIC")),dt(new lt("analytics-internal",i,"PRIVATE")),G(pS,gS),G(pS,gS,"esm2017");function i(e){try{let t=e.getProvider(uh).getImmediate();return{logEvent:(n,r,s)=>Rv(t,n,r,s)}}catch(t){throw gi.create("interop-component-reg-failed",{reason:t})}}}jj();var Xr=class{constructor(e){return e}},AS="analytics",kv=class{constructor(){return ht(AS)}};var Dv="__angularfire_symbol__analyticsIsSupportedValue",SS="__angularfire_symbol__analyticsIsSupported";globalThis[SS]||=IS().then(i=>globalThis[Dv]=i).catch(()=>globalThis[Dv]=!1);var hh={async:()=>globalThis[SS],sync:()=>{let i=globalThis[Dv];if(i===void 0)throw new Error(Bs("Analytics"));return i}},RS=hh.async,xS=Te(bS,!0);var Bj=Te(Rv,!0);var zj=Te(ES,!0);var Mv=(()=>{class i{initialized;disposables=[];constructor(t,n,r){G("angularfire",He.full,"user-tracking");let s;this.initialized=n.runOutsideAngular(()=>new Promise(o=>{s=o})),RS().then(()=>{let o=r.get(Xr);o?this.disposables=[rT(t).subscribe(c=>{zj(o,c?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(n){return new(n||i)(D(Vr),D(U),D(ue))};static \u0275prov=$({token:i,factory:i.\u0275fac})}return i})(),$j="firebase_event_origin",qj="firebase_previous_class",Hj="firebase_previous_id",Gj="firebase_previous_screen",Wj="firebase_screen_class",CS="firebase_screen_id",Kj="firebase_screen",Pv="outlet",Yj="page_path",Qj="page_title",Oc="screen_class",TS="screen_name",Xj="screen_view",Zj="auto",Jj="#",e2=Math.floor(Math.random()*(2**32-1))-2**31,xv={},t2=i=>{let e=[i[Oc],i[Pv]].join(Jj);if(xv.hasOwnProperty(e))return xv[e];{let t=e2++;return xv[e]=t,t}},i2=(i,e,t)=>i.events.pipe(ft(r=>r instanceof Pa)).pipe(Rt(r=>{let o=i.parseUrl(i.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",c=i.routerState.root.children.map(g=>g).find(g=>g.outlet===r.snapshot.outlet);if(!c)return Y(null);let l=c;for(;l.firstChild;)l=l.firstChild;let d=l.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",h={[TS]:d,[Yj]:`/${o}`,[$j]:Zj,[Kj]:d,[Pv]:r.snapshot.outlet};e&&(h[Qj]=e.getTitle());let f=c.component;if(f){if(f===hf){let g=r.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=r.snapshot.component;if(typeof f=="string")return Y(Se(O({},h),{[Oc]:f}));if(f){let g=t.resolveComponentFactory(f);return Y(Se(O({},h),{[Oc]:g.selector}))}return Y(null)}),ft(r=>!!r),de(r=>O({[Wj]:r[Oc],[CS]:t2(r)},r)),$w(r=>r[Pv]),ei(r=>r.pipe(mr((s,o)=>JSON.stringify(s)===JSON.stringify(o)),zi(void 0),fm(),de(([s,o])=>s?O({[qj]:s[Oc],[Gj]:s[TS],[Hj]:s[CS]},o):o)))),kS=(()=>{class i{disposable;constructor(t,n,r,s,o,c){G("angularfire",He.full,"screen-tracking"),RS().then(()=>{let l=c.get(Xr);!t||!l||s.runOutsideAngular(()=>{this.disposable=i2(t,n,r).pipe(Rt(d=>v(this,null,function*(){return o&&(yield o.initialized),Bj(l,Xj,d)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(n){return new(n||i)(D(dd,8),D(Wl,8),D(sa),D(U),D(Mv,8),D(ue))};static \u0275prov=$({token:i,factory:i.\u0275fac})}return i})(),Ov=new L("angularfire2.analytics-instances");function n2(i,e){if(!hh.sync())return null;let t=yt(AS,i,e);return t&&new Xr(t)}function r2(i){return(e,t)=>{if(!hh.sync())return null;let n=e.runOutsideAngular(()=>i(t));return new Xr(n)}}var s2={provide:kv,deps:[[new ne,Ov]]},o2={provide:Xr,useFactory:n2,deps:[[new ne,Ov],Ke]};function DS(i,...e){return G("angularfire",He.full,"analytics"),Be([o2,s2,{provide:_r,useValue:hh.async,multi:!0},{provide:Ov,useFactory:r2(i),multi:!0,deps:[U,ue,st,Je,...e]}])}var PS="@firebase/database",MS="1.0.8";var Py="";function a2(i){Py=i}var zv=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ct(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Bl(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var $v=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Gi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var uR=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zv(e)}}catch{}return new $v},Jr=uR("localStorage"),qv=uR("sessionStorage");var yo=new Wi("@firebase/database"),c2=function(){let i=1;return function(){return i++}}(),hR=function(i){let e=V0(i),t=new N0;t.update(e);let n=t.digest();return T0.encodeByteArray(n)},Wc=function(...i){let e="";for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Wc.apply(null,n):typeof n=="object"?e+=Ct(n):e+=n,e+=" "}return e},es=null,OS=!0,l2=function(i,e){V(!e||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(yo.logLevel=Ut.VERBOSE,es=yo.log.bind(yo),e&&qv.set("logging_enabled",!0)):typeof i=="function"?es=i:(es=null,qv.remove("logging_enabled"))},$t=function(...i){if(OS===!0&&(OS=!1,es===null&&qv.get("logging_enabled")===!0&&l2(!0)),es){let e=Wc.apply(null,i);es(e)}},Kc=function(i){return function(...e){$t(i,...e)}},Hv=function(...i){let e="FIREBASE INTERNAL ERROR: "+Wc(...i);yo.error(e)},Sn=function(...i){let e=`FIREBASE FATAL ERROR: ${Wc(...i)}`;throw yo.error(e),new Error(e)},_i=function(...i){let e="FIREBASE WARNING: "+Wc(...i);yo.warn(e)},d2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_i("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mR=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},u2=function(i){if(qi()||document.readyState==="complete")i();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},wo="[MIN_NAME]",ts="[MAX_NAME]",Ro=function(i,e){if(i===e)return 0;if(i===wo||e===ts)return-1;if(e===wo||i===ts)return 1;{let t=NS(i),n=NS(e);return t!==null?n!==null?t-n===0?i.length-e.length:t-n:-1:n!==null?1:i<e?-1:1}},h2=function(i,e){return i===e?0:i<e?-1:1},Nc=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+Ct(e))},My=function(i){if(typeof i!="object"||i===null)return Ct(i);let e=[];for(let n in i)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)n!==0&&(t+=","),t+=Ct(e[n]),t+=":",t+=My(i[e[n]]);return t+="}",t},fR=function(i,e){let t=i.length;if(t<=e)return[i];let n=[];for(let r=0;r<t;r+=e)r+e>t?n.push(i.substring(r,t)):n.push(i.substring(r,r+e));return n};function xi(i,e){for(let t in i)i.hasOwnProperty(t)&&e(t,i[t])}var pR=function(i){V(!mR(i),"Invalid JSON number");let e=11,t=52,n=(1<<e-1)-1,r,s,o,c,l;i===0?(s=0,o=0,r=1/i===-1/0?1:0):(r=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(c=Math.min(Math.floor(Math.log(i)/Math.LN2),n),s=c+n,o=Math.round(i*Math.pow(2,t-c)-Math.pow(2,t))):(s=0,o=Math.round(i/Math.pow(2,1-n-t))));let d=[];for(l=t;l;l-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let h=d.join(""),f="";for(l=0;l<64;l+=8){let g=parseInt(h.substr(l,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},m2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},f2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var p2=new RegExp("^-?(0*)\\d{1,10}$"),g2=-2147483648,_2=2147483647,NS=function(i){if(p2.test(i)){let e=Number(i);if(e>=g2&&e<=_2)return e}return null},Yc=function(i){try{i()}catch(e){setTimeout(()=>{let t=e.stack||"";throw _i("Exception was thrown by user callback.",t),e},Math.floor(0))}},v2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jc=function(i,e){let t=setTimeout(i,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Gv=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){_i(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Wv=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?($t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_i(e)}},Bc=(()=>{class i{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),fh="5",gR="v",_R="s",vR="r",yR="f",bR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wR="ls",IR="p",Kv="ac",ER="websocket",CR="long_polling";var ph=class{constructor(e,t,n,r,s=!1,o="",c=!1,l=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Jr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function y2(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function TR(i,e,t){V(typeof e=="string","typeof type must == string"),V(typeof t=="object","typeof params must == object");let n;if(e===ER)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===CR)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);y2(i)&&(t.ns=i.namespace);let r=[];return xi(t,(s,o)=>{r.push(s+"="+o)}),n+r.join("&")}var Yv=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Gi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return R0(this.counters_)}};var Nv={},Fv={};function Oy(i){let e=i.toString();return Nv[e]||(Nv[e]=new Yv),Nv[e]}function b2(i,e){let t=i.toString();return Fv[t]||(Fv[t]=e()),Fv[t]}var Qv=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Yc(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var FS="start",w2="close",I2="pLPCommand",E2="pRTLPCB",AR="id",SR="pw",RR="ser",C2="cb",T2="seg",A2="ts",S2="d",R2="dframe",xR=1870,kR=30,x2=xR-kR,k2=25e3,D2=3e4,Xv=class i{constructor(e,t,n,r,s,o,c){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kc(e),this.stats_=Oy(t),this.urlFn=l=>(this.appCheckToken&&(l[Kv]=this.appCheckToken),TR(t,CR,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Qv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(D2)),u2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zv((...s)=>{let[o,c,l,d,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===FS)this.id=c,this.password=l;else if(o===w2)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);let n={};n[FS]="t",n[RR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[C2]=this.scriptTagHolder.uniqueCallbackIdentifier),n[gR]=fh,this.transportSessionId&&(n[_R]=this.transportSessionId),this.lastSessionId&&(n[wR]=this.lastSessionId),this.applicationId&&(n[IR]=this.applicationId),this.appCheckToken&&(n[Kv]=this.appCheckToken),typeof location<"u"&&location.hostname&&bR.test(location.hostname)&&(n[vR]=yR);let r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return qi()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!m2()&&!f2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=A0(t),r=fR(n,x2);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(qi())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[R2]="t",n[AR]=e,n[SR]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Zv=class i{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,qi())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=c2(),window[I2+this.uniqueCallbackIdentifier]=e,window[E2+this.uniqueCallbackIdentifier]=t,this.myIFrame=i.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){$t("frame writing exception"),c.stack&&$t(c.stack),$t(c)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||$t("No IE domain setting required")}catch{let n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[AR]=this.myID,e[SR]=this.myPW,e[RR]=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kR+n.length<=xR;){let o=this.pendingSegs.shift();n=n+"&"+T2+r+"="+o.seg+"&"+A2+r+"="+o.ts+"&"+S2+r+"="+o.d,r++}return t=t+n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(k2)),s=()=>{clearTimeout(r),n()};this.addTag(e,s)}addTag(e,t){qi()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{$t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var P2=16384,M2=45e3,gh=null;typeof MozWebSocket<"u"?gh=MozWebSocket:typeof WebSocket<"u"&&(gh=WebSocket);var Fc=(()=>{class i{constructor(t,n,r,s,o,c,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kc(this.connId),this.stats_=Oy(n),this.connURL=i.connectionURL_(n,c,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,s,o){let c={};return c[gR]=fh,!qi()&&typeof location<"u"&&location.hostname&&bR.test(location.hostname)&&(c[vR]=yR),n&&(c[_R]=n),r&&(c[wR]=r),s&&(c[Kv]=s),o&&(c[IR]=o),TR(t,ER,c)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jr.set("previous_websocket_failure",!0);try{let r;if(qi()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${fh}/${Py}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,c=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;c&&(r.proxy={origin:c})}this.mySock=new gh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&gh!==null&&!i.forceDisallow_}static previouslyFailed(){return Jr.isInMemoryStorage||Jr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Jr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let r=Bl(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(V(this.frames===null,"We already have a frame buffer"),t.length<=6){let n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let n=Ct(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=fR(n,P2);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(M2))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4;return i})(),O2=(()=>{class i{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Xv,Fc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let n=Fc&&Fc.isAvailable(),r=n&&!Fc.previouslyFailed();if(t.webSocketOnly&&(n||_i("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Fc];else{let s=this.transports_=[];for(let o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),N2=6e4,F2=5e3,L2=10*1024,V2=100*1024,Lv="t",LS="d",U2="s",VS="r",j2="e",US="o",jS="a",BS="n",zS="p",B2="h",Jv=class{constructor(e,t,n,r,s,o,c,l,d,h){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=l,this.onKill_=d,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kc("c:"+this.id+":"),this.transportManager_=new O2(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=jc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>V2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>L2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Lv in e){let t=e[Lv];t===jS?this.upgradeIfSecondaryHealthy_():t===VS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===US&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Nc("t",e),n=Nc("d",e);if(t==="c")this.onSecondaryControl_(n);else if(t==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:BS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Nc("t",e),n=Nc("d",e);t==="c"?this.onControl_(n):t==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Nc(Lv,e);if(LS in e){let n=e[LS];if(t===B2){let r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===BS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===U2?this.onConnectionShutdown_(n):t===VS?this.onReset_(n):t===j2?Hv("Server Error: "+n):t===US?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hv("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fh!==n&&_i("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),jc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(N2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(F2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zS,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var _h=class{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}};var vh=class{constructor(e){this.allowedEvents_=e,this.listeners_={},V(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(e){V(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var yh=class i extends vh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!la()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i}getInitialEvent(e){return V(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var $S=32,qS=768,$e=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Ue(){return new $e("")}function ye(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function cr(i){return i.pieces_.length-i.pieceNum_}function Ye(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new $e(i.pieces_,e)}function DR(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function z2(i){let e="";for(let t=i.pieceNum_;t<i.pieces_.length;t++)i.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[t])));return e||"/"}function PR(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function MR(i){if(i.pieceNum_>=i.pieces_.length)return null;let e=[];for(let t=i.pieceNum_;t<i.pieces_.length-1;t++)e.push(i.pieces_[t]);return new $e(e,0)}function At(i,e){let t=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)t.push(i.pieces_[n]);if(e instanceof $e)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{let n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&t.push(n[r])}return new $e(t,0)}function ge(i){return i.pieceNum_>=i.pieces_.length}function Si(i,e){let t=ye(i),n=ye(e);if(t===null)return e;if(t===n)return Si(Ye(i),Ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function OR(i,e){if(cr(i)!==cr(e))return!1;for(let t=i.pieceNum_,n=e.pieceNum_;t<=i.pieces_.length;t++,n++)if(i.pieces_[t]!==e.pieces_[n])return!1;return!0}function ji(i,e){let t=i.pieceNum_,n=e.pieceNum_;if(cr(i)>cr(e))return!1;for(;t<i.pieces_.length;){if(i.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}var ey=class{constructor(e,t){this.errorPrefix_=t,this.parts_=PR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=pa(this.parts_[n]);NR(this)}};function $2(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=pa(e),NR(i)}function q2(i){let e=i.parts_.pop();i.byteLength_-=pa(e),i.parts_.length>0&&(i.byteLength_-=1)}function NR(i){if(i.byteLength_>qS)throw new Error(i.errorPrefix_+"has a key path longer than "+qS+" bytes ("+i.byteLength_+").");if(i.parts_.length>$S)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$S+") or object contains a cycle "+Zr(i))}function Zr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var ty=class i extends vh{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new i}getInitialEvent(e){return V(e==="visible","Unknown event type: "+e),[this.visible_]}};var Lc=1e3,H2=60*5*1e3,HS=30*1e3,G2=1.3,W2=3e4,K2="server_kill",GS=3,Ny=(()=>{class i extends _h{constructor(t,n,r,s,o,c,l,d){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=l,this.authOverride_=d,this.id=i.nextPersistentConnectionId_++,this.log_=Kc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lc,this.maxReconnectDelay_=H2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!qi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ty.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&yh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){let s=++this.requestNumber_,o={r:s,a:t,b:n};this.log_(Ct(o)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let n=new Im,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{let l=c.d;c.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,r,s){this.initConnection_();let o=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),V(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:n,query:t,tag:r};this.listens.get(c).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){let n=t.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},c="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(c,o,l=>{let d=l.d,h=l.s;i.warnOnListenWarnings_(d,n),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),h!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(h,d))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Gi(t,"w")){let r=br(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();_i(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||O0(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=HS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,n=M0(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{let o=s.s,c=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),V(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,n)}sendUnlisten_(t,n,r,s){this.log_("Unlisten on "+t+" for "+n);let o={p:t},c="n";s&&(o.q=r,o.t=s),this.sendRequest(c,o)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,s){let o={p:n,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(t,n,r,s){this.putInternal("p",t,n,r,s)}merge(t,n,r,s){this.putInternal("m",t,n,r,s)}putInternal(t,n,r,s,o){this.initConnection_();let c={p:n,d:r};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:t,request:c,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){let n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ct(t));let n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):Hv("Unrecognized action received from server: "+Ct(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>W2&&(this.reconnectDelay_=Lc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*G2)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+i.nextConnectionId_++,o=this.lastSessionId,c=!1,l=null,d=function(){l?l.close():(c=!0,r())},h=function(g){V(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(g)};this.realtime_={close:d,sendRequest:h};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,w]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);c?$t("getToken() completed but was canceled"):($t("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=w&&w.token,l=new Jv(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,T=>{_i(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(K2)},o))}catch(g){this.log_("Failed to get token: "+g),c||(this.repoInfo_.nodeAdmin&&_i(g),d())}}})}interrupt(t){$t("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){$t("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ha(this.interruptReasons_)&&(this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(o=>My(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){let r=new $e(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,n){$t("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=GS&&(this.reconnectDelay_=HS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){$t("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=GS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},n="js";qi()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),t["sdk."+n+"."+Py.replace(/\./g,"-")]=1,la()?t["framework.cordova"]=1:jl()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=yh.getInstance().currentlyOnline();return ha(this.interruptReasons_)&&t}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),be=class i{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new i(e,t)}};var Io=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new be(wo,e),r=new be(wo,t);return this.compare(n,r)!==0}minPost(){return be.MIN}};var mh,bh=class extends Io{static get __EMPTY_NODE(){return mh}static set __EMPTY_NODE(e){mh=e}compare(e,t){return Ro(e.name,t.name)}isDefinedOn(e){throw vs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return be.MIN}maxPost(){return new be(ts,mh)}makePost(e,t){return V(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,mh)}toString(){return".key"}},bo=new bh;var _o=class{constructor(e,t,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ui=(()=>{class i{constructor(t,n,r,s,o){this.key=t,this.value=n,this.color=r??i.RED,this.left=s??Ri.EMPTY_NODE,this.right=o??Ri.EMPTY_NODE}copy(t,n,r,s,o){return new i(t??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,n,r),null):o===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ri.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,s;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Ri.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),iy=class{copy(e,t,n,r,s){return this}insert(e,t,n){return new Ui(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ri=class i{constructor(e,t=i.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new i(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ui.BLACK,null,null))}remove(e){return new i(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ui.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _o(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _o(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _o(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _o(this.root_,null,this.comparator_,!0,e)}};Ri.EMPTY_NODE=new iy;function Y2(i,e){return Ro(i.name,e.name)}function Fy(i,e){return Ro(i,e)}var ny;function Q2(i){ny=i}var FR=function(i){return typeof i=="number"?"number:"+pR(i):"string:"+i},LR=function(i){if(i.isLeafNode()){let e=i.val();V(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gi(e,".sv"),"Priority must be a string or number.")}else V(i===ny||i.isEmpty(),"priority of unexpected type.");V(i===ny||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var WS,Eo=(()=>{class i{constructor(t,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,V(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),LR(this.priorityNode_)}static set __childrenNodeConstructor(t){WS=t}static get __childrenNodeConstructor(){return WS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new i(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ge(t)?this:ye(t)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let r=ye(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(V(r!==".priority"||cr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+FR(this.priorityNode_.val())+":");let n=typeof this.value_;t+=n+":",n==="number"?t+=pR(this.value_):t+=this.value_,this.lazyHash_=hR(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===i.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof i.__childrenNodeConstructor?-1:(V(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,r=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(n),o=i.VALUE_TYPE_ORDER.indexOf(r);return V(s>=0,"Unknown leaf type: "+n),V(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),VR,UR;function X2(i){VR=i}function Z2(i){UR=i}var ry=class extends Io{compare(e,t){let n=e.node.getPriority(),r=t.node.getPriority(),s=n.compareTo(r);return s===0?Ro(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return be.MIN}maxPost(){return new be(ts,new Eo("[PRIORITY-POST]",UR))}makePost(e,t){let n=VR(e);return new be(t,new Eo("[PRIORITY-POST]",n))}toString(){return".priority"}},Ht=new ry;var J2=Math.log(2),sy=class{constructor(e){let t=s=>parseInt(Math.log(s)/J2,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},wh=function(i,e,t,n){i.sort(e);let r=function(l,d){let h=d-l,f,g;if(h===0)return null;if(h===1)return f=i[l],g=t?t(f):f,new Ui(g,f.node,Ui.BLACK,null,null);{let w=parseInt(h/2,10)+l,T=r(l,w),k=r(w+1,d);return f=i[w],g=t?t(f):f,new Ui(g,f.node,Ui.BLACK,T,k)}},s=function(l){let d=null,h=null,f=i.length,g=function(T,k){let R=f-T,j=f;f-=T;let X=r(R+1,j),K=i[R],le=t?t(K):K;w(new Ui(le,K.node,k,null,X))},w=function(T){d?(d.left=T,d=T):(h=T,d=T)};for(let T=0;T<l.count;++T){let k=l.nextBitIsOne(),R=Math.pow(2,l.count-(T+1));k?g(R,Ui.BLACK):(g(R,Ui.BLACK),g(R,Ui.RED))}return h},o=new sy(i.length),c=s(o);return new Ri(n||e,c)};var Vv,go={},Co=class i{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return V(go&&Ht,"ChildrenNode.ts has not been loaded"),Vv=Vv||new i({".priority":go},{".priority":Ht}),Vv}get(e){let t=br(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ri?t:null}hasIndex(e){return Gi(this.indexSet_,e.toString())}addIndex(e,t){V(e!==bo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,s=t.getIterator(be.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=s.getNext();let c;r?c=wh(n,e.getCompare()):c=go;let l=e.toString(),d=Object.assign({},this.indexSet_);d[l]=e;let h=Object.assign({},this.indexes_);return h[l]=c,new i(h,d)}addToIndexes(e,t){let n=ma(this.indexes_,(r,s)=>{let o=br(this.indexSet_,s);if(V(o,"Missing index implementation for "+s),r===go)if(o.isDefinedOn(e.node)){let c=[],l=t.getIterator(be.Wrap),d=l.getNext();for(;d;)d.name!==e.name&&c.push(d),d=l.getNext();return c.push(e),wh(c,o.getCompare())}else return go;else{let c=t.get(e.name),l=r;return c&&(l=l.remove(new be(e.name,c))),l.insert(e,e.node)}});return new i(n,this.indexSet_)}removeFromIndexes(e,t){let n=ma(this.indexes_,r=>{if(r===go)return r;{let s=t.get(e.name);return s?r.remove(new be(e.name,s)):r}});return new i(n,this.indexSet_)}};var Vc,tt=(()=>{class i{constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&LR(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vc||(Vc=new i(new Ri(Fy),null,Co.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vc}updatePriority(t){return this.children_.isEmpty()?this:new i(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let n=this.children_.get(t);return n===null?Vc:n}}getChild(t){let n=ye(t);return n===null?this:this.getImmediateChild(n).getChild(Ye(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(V(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{let r=new be(t,n),s,o;n.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));let c=s.isEmpty()?Vc:this.priorityNode_;return new i(s,c,o)}}updateChild(t,n){let r=ye(t);if(r===null)return n;{V(ye(t)!==".priority"||cr(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Ye(t),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},r=0,s=0,o=!0;if(this.forEachChild(Ht,(c,l)=>{n[c]=l.val(t),r++,o&&i.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):o=!1}),!t&&o&&s<2*r){let c=[];for(let l in n)c[l]=n[l];return c}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+FR(this.getPriority().val())+":"),this.forEachChild(Ht,(n,r)=>{let s=r.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":hR(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new be(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let n=this.resolveIndex_(t);if(n){let r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let n=this.getFirstChildName(t);return n?new be(n,this.children_.get(n)):null}getLastChildName(t){let n=this.resolveIndex_(t);if(n){let r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let n=this.getLastChildName(t);return n?new be(n,this.children_.get(n)):null}forEachChild(t,n){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){let r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,be.Wrap),o=s.peek();for(;o!=null&&n.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){let r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,be.Wrap),o=s.peek();for(;o!=null&&n.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qc?-1:0}withIndex(t){if(t===bo||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===bo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let r=this.getIterator(Ht),s=n.getIterator(Ht),o=r.getNext(),c=s.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=r.getNext(),c=s.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===bo?null:this.indexMap_.get(t.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),oy=class extends tt{constructor(){super(new Ri(Fy),tt.EMPTY_NODE,Co.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}},Qc=new oy;Object.defineProperties(be,{MIN:{value:new be(wo,tt.EMPTY_NODE)},MAX:{value:new be(ts,Qc)}});bh.__EMPTY_NODE=tt.EMPTY_NODE;Eo.__childrenNodeConstructor=tt;Q2(Qc);Z2(Qc);var eB=!0;function qt(i,e=null){if(i===null)return tt.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),V(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let t=i;return new Eo(t,qt(e))}if(!(i instanceof Array)&&eB){let t=[],n=!1;if(xi(i,(o,c)=>{if(o.substring(0,1)!=="."){let l=qt(c);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),t.push(new be(o,l)))}}),t.length===0)return tt.EMPTY_NODE;let s=wh(t,Y2,o=>o.name,Fy);if(n){let o=wh(t,Ht.getCompare());return new tt(s,qt(e),new Co({".priority":o},{".priority":Ht}))}else return new tt(s,qt(e),Co.Default)}else{let t=tt.EMPTY_NODE;return xi(i,(n,r)=>{if(Gi(i,n)&&n.substring(0,1)!=="."){let s=qt(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(n,s))}}),t.updatePriority(qt(e))}}X2(qt);var ay=class extends Io{constructor(e){super(),this.indexPath_=e,V(!ge(e)&&ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),r=this.extractChild(t.node),s=n.compareTo(r);return s===0?Ro(e.name,t.name):s}makePost(e,t){let n=qt(e),r=tt.EMPTY_NODE.updateChild(this.indexPath_,n);return new be(t,r)}maxPost(){let e=tt.EMPTY_NODE.updateChild(this.indexPath_,Qc);return new be(ts,e)}toString(){return PR(this.indexPath_,0).join("/")}};var cy=class extends Io{compare(e,t){let n=e.node.compareTo(t.node);return n===0?Ro(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,t){let n=qt(e);return new be(t,n)}toString(){return".value"}},tB=new cy;function iB(i){return{type:"value",snapshotNode:i}}function nB(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function rB(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function KS(i,e,t){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:t}}function sB(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}var ly=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wo}hasEnd(){return this.endSet_}getIndexEndValue(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ts}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ht}copy(){let e=new i;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function YS(i){let e={};if(i.isDefault())return e;let t;if(i.index_===Ht?t="$priority":i.index_===tB?t="$value":i.index_===bo?t="$key":(V(i.index_ instanceof ay,"Unrecognized index type!"),t=i.index_.toString()),e.orderBy=Ct(t),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";e[n]=Ct(i.indexStartValue_),i.startNameSet_&&(e[n]+=","+Ct(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";e[n]=Ct(i.indexEndValue_),i.endNameSet_&&(e[n]+=","+Ct(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function QS(i){let e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let t=i.viewFrom_;t===""&&(i.isViewFromLeft()?t="l":t="r"),e.vf=t}return i.index_!==Ht&&(e.i=i.index_.toString()),e}var dy=class i extends _h{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Kc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(V(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=i.getListenId_(e,n),c={};this.listens_[o]=c;let l=YS(e._queryParams);this.restRequest_(s+".json",l,(d,h)=>{let f=h;if(d===404&&(f=null,d=null),d===null&&this.onDataUpdate_(s,f,!1,n),br(this.listens_,o)===c){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",r(g,null)}})}unlisten(e,t){let n=i.getListenId_(e,t);delete this.listens_[n]}get(e){let t=YS(e._queryParams),n=e._path.toString(),r=new Im;return this.restRequest_(n+".json",t,(s,o)=>{let c=o;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(n,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+wr(t);this.log_("Sending REST request for "+o);let c=new XMLHttpRequest;c.onreadystatechange=()=>{if(n&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let l=null;if(c.status>=200&&c.status<300){try{l=Bl(c.responseText)}catch{_i("Failed to parse JSON response for "+o+": "+c.responseText)}n(null,l)}else c.status!==401&&c.status!==404&&_i("Got unsuccessful REST response for "+o+" Status: "+c.status),n(c.status);n=null}},c.open("GET",o,!0),c.send()})}};var uy=class{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Ih(){return{value:null,children:new Map}}function jR(i,e,t){if(ge(e))i.value=t,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,t);else{let n=ye(e);i.children.has(n)||i.children.set(n,Ih());let r=i.children.get(n);e=Ye(e),jR(r,e,t)}}function hy(i,e,t){i.value!==null?t(e,i.value):oB(i,(n,r)=>{let s=new $e(e.toString()+"/"+n);hy(r,s,t)})}function oB(i,e){i.children.forEach((t,n)=>{e(n,t)})}var my=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xi(this.last_,(n,r)=>{t[n]=t[n]-r}),this.last_=e,t}};var XS=10*1e3,aB=30*1e3,cB=5*60*1e3,fy=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new my(e);let n=XS+(aB-XS)*Math.random();jc(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;xi(e,(r,s)=>{s>0&&Gi(this.statsToReport_,r)&&(t[r]=s,n=!0)}),n&&this.server_.reportStats(t),jc(this.reportStats_.bind(this),Math.floor(Math.random()*2*cB))}};var An=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(An||{});function BR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $R(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var py=class i{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=An.ACK_USER_WRITE,this.source=BR()}operationForChild(e){if(ge(this.path)){if(this.affectedTree.value!=null)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new $e(e));return new i(Ue(),t,this.revert)}}else return V(ye(this.path)===e,"operationForChild called for unrelated child."),new i(Ye(this.path),this.affectedTree,this.revert)}};var To=class i{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=An.OVERWRITE}operationForChild(e){return ge(this.path)?new i(this.source,Ue(),this.snap.getImmediateChild(e)):new i(this.source,Ye(this.path),this.snap)}};var Eh=class i{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=An.MERGE}operationForChild(e){if(ge(this.path)){let t=this.children.subtree(new $e(e));return t.isEmpty()?null:t.value?new To(this.source,Ue(),t.value):new i(this.source,Ue(),t)}else return V(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new i(this.source,Ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var qc=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ge(e))return this.isFullyInitialized()&&!this.filtered_;let t=ye(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function lB(i,e,t,n){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(sB(o.childName,o.snapshotNode))}),Uc(i,r,"child_removed",e,n,t),Uc(i,r,"child_added",e,n,t),Uc(i,r,"child_moved",s,n,t),Uc(i,r,"child_changed",e,n,t),Uc(i,r,"value",e,n,t),r}function Uc(i,e,t,n,r,s){let o=n.filter(c=>c.type===t);o.sort((c,l)=>uB(i,c,l)),o.forEach(c=>{let l=dB(i,c,s);r.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(l,i.query_))})})}function dB(i,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function uB(i,e,t){if(e.childName==null||t.childName==null)throw vs("Should only compare child_ events.");let n=new be(e.childName,e.snapshotNode),r=new be(t.childName,t.snapshotNode);return i.index_.compare(n,r)}function qR(i,e){return{eventCache:i,serverCache:e}}function zc(i,e,t,n){return qR(new qc(e,t,n),i.serverCache)}function HR(i,e,t,n){return qR(i.eventCache,new qc(e,t,n))}function gy(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function is(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var Uv,hB=()=>(Uv||(Uv=new Ri(h2)),Uv),ci=class i{constructor(e,t=hB()){this.value=e,this.children=t}static fromObject(e){let t=new i(null);return xi(e,(n,r)=>{t=t.set(new $e(n),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ue(),value:this.value};if(ge(e))return null;{let n=ye(e),r=this.children.get(n);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Ye(e),t);return s!=null?{path:At(new $e(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ge(e))return this;{let t=ye(e),n=this.children.get(t);return n!==null?n.subtree(Ye(e)):new i(null)}}set(e,t){if(ge(e))return new i(t,this.children);{let n=ye(e),s=(this.children.get(n)||new i(null)).set(Ye(e),t),o=this.children.insert(n,s);return new i(this.value,o)}}remove(e){if(ge(e))return this.children.isEmpty()?new i(null):new i(null,this.children);{let t=ye(e),n=this.children.get(t);if(n){let r=n.remove(Ye(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new i(null):new i(this.value,s)}else return this}}get(e){if(ge(e))return this.value;{let t=ye(e),n=this.children.get(t);return n?n.get(Ye(e)):null}}setTree(e,t){if(ge(e))return t;{let n=ye(e),s=(this.children.get(n)||new i(null)).setTree(Ye(e),t),o;return s.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,s),new i(this.value,o)}}fold(e){return this.fold_(Ue(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(At(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Ue(),t)}findOnPath_(e,t,n){let r=this.value?n(t,this.value):!1;if(r)return r;if(ge(e))return null;{let s=ye(e),o=this.children.get(s);return o?o.findOnPath_(Ye(e),At(t,s),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ue(),t)}foreachOnPath_(e,t,n){if(ge(e))return this;{this.value&&n(t,this.value);let r=ye(e),s=this.children.get(r);return s?s.foreachOnPath_(Ye(e),At(t,r),n):new i(null)}}foreach(e){this.foreach_(Ue(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(At(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}};var Bi=class i{constructor(e){this.writeTree_=e}static empty(){return new i(new ci(null))}};function $c(i,e,t){if(ge(e))return new Bi(new ci(t));{let n=i.writeTree_.findRootMostValueAndPath(e);if(n!=null){let r=n.path,s=n.value,o=Si(r,e);return s=s.updateChild(o,t),new Bi(i.writeTree_.set(r,s))}else{let r=new ci(t),s=i.writeTree_.setTree(e,r);return new Bi(s)}}}function ZS(i,e,t){let n=i;return xi(t,(r,s)=>{n=$c(n,At(e,r),s)}),n}function JS(i,e){if(ge(e))return Bi.empty();{let t=i.writeTree_.setTree(e,new ci(null));return new Bi(t)}}function _y(i,e){return ns(i,e)!=null}function ns(i,e){let t=i.writeTree_.findRootMostValueAndPath(e);return t!=null?i.writeTree_.get(t.path).getChild(Si(t.path,e)):null}function eR(i){let e=[],t=i.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ht,(n,r)=>{e.push(new be(n,r))}):i.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new be(n,r.value))}),e}function ar(i,e){if(ge(e))return i;{let t=ns(i,e);return t!=null?new Bi(new ci(t)):new Bi(i.writeTree_.subtree(e))}}function vy(i){return i.writeTree_.isEmpty()}function Ao(i,e){return GR(Ue(),i.writeTree_,e)}function GR(i,e,t){if(e.value!=null)return t.updateChild(i,e.value);{let n=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(V(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):t=GR(At(i,r),s,t)}),!t.getChild(i).isEmpty()&&n!==null&&(t=t.updateChild(At(i,".priority"),n)),t}}function WR(i,e){return ZR(e,i)}function mB(i,e,t,n,r){V(n>i.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),i.allWrites.push({path:e,snap:t,writeId:n,visible:r}),r&&(i.visibleWrites=$c(i.visibleWrites,e,t)),i.lastWriteId=n}function fB(i,e){for(let t=0;t<i.allWrites.length;t++){let n=i.allWrites[t];if(n.writeId===e)return n}return null}function pB(i,e){let t=i.allWrites.findIndex(c=>c.writeId===e);V(t>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[t];i.allWrites.splice(t,1);let r=n.visible,s=!1,o=i.allWrites.length-1;for(;r&&o>=0;){let c=i.allWrites[o];c.visible&&(o>=t&&gB(c,n.path)?r=!1:ji(n.path,c.path)&&(s=!0)),o--}if(r){if(s)return _B(i),!0;if(n.snap)i.visibleWrites=JS(i.visibleWrites,n.path);else{let c=n.children;xi(c,l=>{i.visibleWrites=JS(i.visibleWrites,At(n.path,l))})}return!0}else return!1}function gB(i,e){if(i.snap)return ji(i.path,e);for(let t in i.children)if(i.children.hasOwnProperty(t)&&ji(At(i.path,t),e))return!0;return!1}function _B(i){i.visibleWrites=KR(i.allWrites,vB,Ue()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function vB(i){return i.visible}function KR(i,e,t){let n=Bi.empty();for(let r=0;r<i.length;++r){let s=i[r];if(e(s)){let o=s.path,c;if(s.snap)ji(t,o)?(c=Si(t,o),n=$c(n,c,s.snap)):ji(o,t)&&(c=Si(o,t),n=$c(n,Ue(),s.snap.getChild(c)));else if(s.children){if(ji(t,o))c=Si(t,o),n=ZS(n,c,s.children);else if(ji(o,t))if(c=Si(o,t),ge(c))n=ZS(n,Ue(),s.children);else{let l=br(s.children,ye(c));if(l){let d=l.getChild(Ye(c));n=$c(n,Ue(),d)}}}else throw vs("WriteRecord should have .snap or .children")}}return n}function YR(i,e,t,n,r){if(!n&&!r){let s=ns(i.visibleWrites,e);if(s!=null)return s;{let o=ar(i.visibleWrites,e);if(vy(o))return t;if(t==null&&!_y(o,Ue()))return null;{let c=t||tt.EMPTY_NODE;return Ao(o,c)}}}else{let s=ar(i.visibleWrites,e);if(!r&&vy(s))return t;if(!r&&t==null&&!_y(s,Ue()))return null;{let o=function(d){return(d.visible||r)&&(!n||!~n.indexOf(d.writeId))&&(ji(d.path,e)||ji(e,d.path))},c=KR(i.allWrites,o,e),l=t||tt.EMPTY_NODE;return Ao(c,l)}}}function yB(i,e,t){let n=tt.EMPTY_NODE,r=ns(i.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ht,(s,o)=>{n=n.updateImmediateChild(s,o)}),n;if(t){let s=ar(i.visibleWrites,e);return t.forEachChild(Ht,(o,c)=>{let l=Ao(ar(s,new $e(o)),c);n=n.updateImmediateChild(o,l)}),eR(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{let s=ar(i.visibleWrites,e);return eR(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function bB(i,e,t,n,r){V(n||r,"Either existingEventSnap or existingServerSnap must exist");let s=At(e,t);if(_y(i.visibleWrites,s))return null;{let o=ar(i.visibleWrites,s);return vy(o)?r.getChild(t):Ao(o,r.getChild(t))}}function wB(i,e,t,n){let r=At(e,t),s=ns(i.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(t)){let o=ar(i.visibleWrites,r);return Ao(o,n.getNode().getImmediateChild(t))}else return null}function IB(i,e){return ns(i.visibleWrites,e)}function EB(i,e,t,n,r,s,o){let c,l=ar(i.visibleWrites,e),d=ns(l,Ue());if(d!=null)c=d;else if(t!=null)c=Ao(l,t);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){let h=[],f=o.getCompare(),g=s?c.getReverseIteratorFrom(n,o):c.getIteratorFrom(n,o),w=g.getNext();for(;w&&h.length<r;)f(w,n)!==0&&h.push(w),w=g.getNext();return h}else return[]}function CB(){return{visibleWrites:Bi.empty(),allWrites:[],lastWriteId:-1}}function yy(i,e,t,n){return YR(i.writeTree,i.treePath,e,t,n)}function QR(i,e){return yB(i.writeTree,i.treePath,e)}function tR(i,e,t,n){return bB(i.writeTree,i.treePath,e,t,n)}function Ch(i,e){return IB(i.writeTree,At(i.treePath,e))}function TB(i,e,t,n,r,s){return EB(i.writeTree,i.treePath,e,t,n,r,s)}function Ly(i,e,t){return wB(i.writeTree,i.treePath,e,t)}function XR(i,e){return ZR(At(i.treePath,e),i.writeTree)}function ZR(i,e){return{treePath:i,writeTree:e}}var by=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;V(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),V(n!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(n,KS(n,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(n,rB(n,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(n,nB(n,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(n,KS(n,e.snapshotNode,r.oldSnap));else throw vs("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}};var wy=class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},JR=new wy,Hc=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let n=this.optCompleteServerCache_!=null?new qc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ly(this.writes_,e,n)}}getChildAfterChild(e,t,n){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:is(this.viewCache_),s=TB(this.writes_,r,t,1,n,e);return s.length===0?null:s[0]}};function AB(i,e){V(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),V(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function SB(i,e,t,n,r){let s=new by,o,c;if(t.type===An.OVERWRITE){let d=t;d.source.fromUser?o=Iy(i,e,d.path,d.snap,n,r,s):(V(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!ge(d.path),o=Th(i,e,d.path,d.snap,n,r,c,s))}else if(t.type===An.MERGE){let d=t;d.source.fromUser?o=xB(i,e,d.path,d.children,n,r,s):(V(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=Ey(i,e,d.path,d.children,n,r,c,s))}else if(t.type===An.ACK_USER_WRITE){let d=t;d.revert?o=PB(i,e,d.path,n,r,s):o=kB(i,e,d.path,d.affectedTree,n,r,s)}else if(t.type===An.LISTEN_COMPLETE)o=DB(i,e,t.path,n,s);else throw vs("Unknown operation type: "+t.type);let l=s.getChanges();return RB(e,o,l),{viewCache:o,changes:l}}function RB(i,e,t){let n=e.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=gy(i);(t.length>0||!i.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&t.push(iB(gy(e)))}}function ex(i,e,t,n,r,s){let o=e.eventCache;if(Ch(n,t)!=null)return e;{let c,l;if(ge(t))if(V(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let d=is(e),h=d instanceof tt?d:tt.EMPTY_NODE,f=QR(n,h);c=i.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let d=yy(n,is(e));c=i.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let d=ye(t);if(d===".priority"){V(cr(t)===1,"Can't have a priority with additional path components");let h=o.getNode();l=e.serverCache.getNode();let f=tR(n,t,h,l);f!=null?c=i.filter.updatePriority(h,f):c=o.getNode()}else{let h=Ye(t),f;if(o.isCompleteForChild(d)){l=e.serverCache.getNode();let g=tR(n,t,o.getNode(),l);g!=null?f=o.getNode().getImmediateChild(d).updateChild(h,g):f=o.getNode().getImmediateChild(d)}else f=Ly(n,d,e.serverCache);f!=null?c=i.filter.updateChild(o.getNode(),d,f,h,r,s):c=o.getNode()}}return zc(e,c,o.isFullyInitialized()||ge(t),i.filter.filtersNodes())}}function Th(i,e,t,n,r,s,o,c){let l=e.serverCache,d,h=o?i.filter:i.filter.getIndexedFilter();if(ge(t))d=h.updateFullNode(l.getNode(),n,null);else if(h.filtersNodes()&&!l.isFiltered()){let w=l.getNode().updateChild(t,n);d=h.updateFullNode(l.getNode(),w,null)}else{let w=ye(t);if(!l.isCompleteForPath(t)&&cr(t)>1)return e;let T=Ye(t),R=l.getNode().getImmediateChild(w).updateChild(T,n);w===".priority"?d=h.updatePriority(l.getNode(),R):d=h.updateChild(l.getNode(),w,R,T,JR,null)}let f=HR(e,d,l.isFullyInitialized()||ge(t),h.filtersNodes()),g=new Hc(r,f,s);return ex(i,f,t,r,g,c)}function Iy(i,e,t,n,r,s,o){let c=e.eventCache,l,d,h=new Hc(r,e,s);if(ge(t))d=i.filter.updateFullNode(e.eventCache.getNode(),n,o),l=zc(e,d,!0,i.filter.filtersNodes());else{let f=ye(t);if(f===".priority")d=i.filter.updatePriority(e.eventCache.getNode(),n),l=zc(e,d,c.isFullyInitialized(),c.isFiltered());else{let g=Ye(t),w=c.getNode().getImmediateChild(f),T;if(ge(g))T=n;else{let k=h.getCompleteChild(f);k!=null?DR(g)===".priority"&&k.getChild(MR(g)).isEmpty()?T=k:T=k.updateChild(g,n):T=tt.EMPTY_NODE}if(w.equals(T))l=e;else{let k=i.filter.updateChild(c.getNode(),f,T,g,h,o);l=zc(e,k,c.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function iR(i,e){return i.eventCache.isCompleteForChild(e)}function xB(i,e,t,n,r,s,o){let c=e;return n.foreach((l,d)=>{let h=At(t,l);iR(e,ye(h))&&(c=Iy(i,c,h,d,r,s,o))}),n.foreach((l,d)=>{let h=At(t,l);iR(e,ye(h))||(c=Iy(i,c,h,d,r,s,o))}),c}function nR(i,e,t){return t.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function Ey(i,e,t,n,r,s,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,d;ge(t)?d=n:d=new ci(null).setTree(t,n);let h=e.serverCache.getNode();return d.children.inorderTraversal((f,g)=>{if(h.hasChild(f)){let w=e.serverCache.getNode().getImmediateChild(f),T=nR(i,w,g);l=Th(i,l,new $e(f),T,r,s,o,c)}}),d.children.inorderTraversal((f,g)=>{let w=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!h.hasChild(f)&&!w){let T=e.serverCache.getNode().getImmediateChild(f),k=nR(i,T,g);l=Th(i,l,new $e(f),k,r,s,o,c)}}),l}function kB(i,e,t,n,r,s,o){if(Ch(r,t)!=null)return e;let c=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(ge(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Th(i,e,t,l.getNode().getChild(t),r,s,c,o);if(ge(t)){let d=new ci(null);return l.getNode().forEachChild(bo,(h,f)=>{d=d.set(new $e(h),f)}),Ey(i,e,t,d,r,s,c,o)}else return e}else{let d=new ci(null);return n.foreach((h,f)=>{let g=At(t,h);l.isCompleteForPath(g)&&(d=d.set(h,l.getNode().getChild(g)))}),Ey(i,e,t,d,r,s,c,o)}}function DB(i,e,t,n,r){let s=e.serverCache,o=HR(e,s.getNode(),s.isFullyInitialized()||ge(t),s.isFiltered());return ex(i,o,t,n,JR,r)}function PB(i,e,t,n,r,s){let o;if(Ch(n,t)!=null)return e;{let c=new Hc(n,e,r),l=e.eventCache.getNode(),d;if(ge(t)||ye(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=yy(n,is(e));else{let f=e.serverCache.getNode();V(f instanceof tt,"serverChildren would be complete if leaf node"),h=QR(n,f)}h=h,d=i.filter.updateFullNode(l,h,s)}else{let h=ye(t),f=Ly(n,h,e.serverCache);f==null&&e.serverCache.isCompleteForChild(h)&&(f=l.getImmediateChild(h)),f!=null?d=i.filter.updateChild(l,h,f,Ye(t),c,s):e.eventCache.getNode().hasChild(h)?d=i.filter.updateChild(l,h,tt.EMPTY_NODE,Ye(t),c,s):d=l,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yy(n,is(e)),o.isLeafNode()&&(d=i.filter.updateFullNode(d,o,s)))}return o=e.serverCache.isFullyInitialized()||Ch(n,Ue())!=null,zc(e,d,o,i.filter.filtersNodes())}}function MB(i,e){let t=is(i.viewCache_);return t&&(i.query._queryParams.loadsAllData()||!ge(e)&&!t.getImmediateChild(ye(e)).isEmpty())?t.getChild(e):null}function rR(i,e,t,n){e.type===An.MERGE&&e.source.queryId!==null&&(V(is(i.viewCache_),"We should always have a full cache before handling merges"),V(gy(i.viewCache_),"Missing event cache, even though we have a server cache"));let r=i.viewCache_,s=SB(i.processor_,r,e,t,n);return AB(i.processor_,s.viewCache),V(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,OB(i,s.changes,s.viewCache.eventCache.getNode(),null)}function OB(i,e,t,n){let r=n?[n]:i.eventRegistrations_;return lB(i.eventGenerator_,e,t,r)}var sR;function NB(i){V(!sR,"__referenceConstructor has already been defined"),sR=i}function Vy(i,e,t,n){let r=e.source.queryId;if(r!==null){let s=i.views.get(r);return V(s!=null,"SyncTree gave us an op for an invalid query."),rR(s,e,t,n)}else{let s=[];for(let o of i.views.values())s=s.concat(rR(o,e,t,n));return s}}function Uy(i,e){let t=null;for(let n of i.views.values())t=t||MB(n,e);return t}var oR;function FB(i){V(!oR,"__referenceConstructor has already been defined"),oR=i}var Ah=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ci(null),this.pendingWriteTree_=CB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function LB(i,e,t,n,r){return mB(i.pendingWriteTree_,e,t,n,r),r?Rh(i,new To(BR(),e,t)):[]}function vo(i,e,t=!1){let n=fB(i.pendingWriteTree_,e);if(pB(i.pendingWriteTree_,e)){let s=new ci(null);return n.snap!=null?s=s.set(Ue(),!0):xi(n.children,o=>{s=s.set(new $e(o),!0)}),Rh(i,new py(n.path,s,t))}else return[]}function Sh(i,e,t){return Rh(i,new To(zR(),e,t))}function VB(i,e,t){let n=ci.fromObject(t);return Rh(i,new Eh(zR(),e,n))}function UB(i,e,t,n){let r=rx(i,n);if(r!=null){let s=sx(r),o=s.path,c=s.queryId,l=Si(o,e),d=new To($R(c),l,t);return ox(i,o,d)}else return[]}function jB(i,e,t,n){let r=rx(i,n);if(r){let s=sx(r),o=s.path,c=s.queryId,l=Si(o,e),d=ci.fromObject(t),h=new Eh($R(c),l,d);return ox(i,o,h)}else return[]}function tx(i,e,t){let r=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(e,(o,c)=>{let l=Si(o,e),d=Uy(c,l);if(d)return d});return YR(r,e,s,t,!0)}function Rh(i,e){return ix(e,i.syncPointTree_,null,WR(i.pendingWriteTree_,Ue()))}function ix(i,e,t,n){if(ge(i.path))return nx(i,e,t,n);{let r=e.get(Ue());t==null&&r!=null&&(t=Uy(r,Ue()));let s=[],o=ye(i.path),c=i.operationForChild(o),l=e.children.get(o);if(l&&c){let d=t?t.getImmediateChild(o):null,h=XR(n,o);s=s.concat(ix(c,l,d,h))}return r&&(s=s.concat(Vy(r,i,n,t))),s}}function nx(i,e,t,n){let r=e.get(Ue());t==null&&r!=null&&(t=Uy(r,Ue()));let s=[];return e.children.inorderTraversal((o,c)=>{let l=t?t.getImmediateChild(o):null,d=XR(n,o),h=i.operationForChild(o);h&&(s=s.concat(nx(h,c,l,d)))}),r&&(s=s.concat(Vy(r,i,n,t))),s}function rx(i,e){return i.tagToQueryMap.get(e)}function sx(i){let e=i.indexOf("$");return V(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new $e(i.substr(0,e))}}function ox(i,e,t){let n=i.syncPointTree_.get(e);V(n,"Missing sync point for query tag that we're tracking");let r=WR(i.pendingWriteTree_,e);return Vy(n,t,r,null)}var Cy=class i{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new i(t)}node(){return this.node_}},Ty=class i{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=At(this.path_,e);return new i(this.syncTree_,t)}node(){return tx(this.syncTree_,this.path_)}},BB=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},aR=function(i,e,t){if(!i||typeof i!="object")return i;if(V(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return zB(i[".sv"],e,t);if(typeof i[".sv"]=="object")return $B(i[".sv"],e);V(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},zB=function(i,e,t){switch(i){case"timestamp":return t.timestamp;default:V(!1,"Unexpected server value: "+i)}},$B=function(i,e,t){i.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&V(!1,"Unexpected increment value: "+n);let r=e.node();if(V(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let o=r.getValue();return typeof o!="number"?n:o+n},qB=function(i,e,t,n){return jy(e,new Ty(t,i),n)},HB=function(i,e,t){return jy(i,new Cy(e),t)};function jy(i,e,t){let n=i.getPriority().val(),r=aR(n,e.getImmediateChild(".priority"),t),s;if(i.isLeafNode()){let o=i,c=aR(o.getValue(),e,t);return c!==o.getValue()||r!==o.getPriority().val()?new Eo(c,qt(r)):i}else{let o=i;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Eo(r))),o.forEachChild(Ht,(c,l)=>{let d=jy(l,e.getImmediateChild(c),t);d!==l&&(s=s.updateImmediateChild(c,d))}),s}}var Gc=class{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function By(i,e){let t=e instanceof $e?e:new $e(e),n=i,r=ye(t);for(;r!==null;){let s=br(n.node.children,r)||{children:{},childCount:0};n=new Gc(r,n,s),t=Ye(t),r=ye(t)}return n}function xo(i){return i.node.value}function ax(i,e){i.node.value=e,Ay(i)}function cx(i){return i.node.childCount>0}function GB(i){return xo(i)===void 0&&!cx(i)}function xh(i,e){xi(i.node.children,(t,n)=>{e(new Gc(t,i,n))})}function lx(i,e,t,n){t&&!n&&e(i),xh(i,r=>{lx(r,e,!0,n)}),t&&n&&e(i)}function WB(i,e,t){let n=t?i:i.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Xc(i){return new $e(i.parent===null?i.name:Xc(i.parent)+"/"+i.name)}function Ay(i){i.parent!==null&&KB(i.parent,i.name,i)}function KB(i,e,t){let n=GB(t),r=Gi(i.node.children,e);n&&r?(delete i.node.children[e],i.node.childCount--,Ay(i)):!n&&!r&&(i.node.children[e]=t.node,i.node.childCount++,Ay(i))}var YB=/[\[\].#$\/\u0000-\u001F\u007F]/,QB=/[\[\].#$\u0000-\u001F\u007F]/,jv=10*1024*1024,dx=function(i){return typeof i=="string"&&i.length!==0&&!YB.test(i)},XB=function(i){return typeof i=="string"&&i.length!==0&&!QB.test(i)},ZB=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),XB(i)};var ux=function(i,e,t){let n=t instanceof $e?new ey(t,i):t;if(e===void 0)throw new Error(i+"contains undefined "+Zr(n));if(typeof e=="function")throw new Error(i+"contains a function "+Zr(n)+" with contents = "+e.toString());if(mR(e))throw new Error(i+"contains "+e.toString()+" "+Zr(n));if(typeof e=="string"&&e.length>jv/3&&pa(e)>jv)throw new Error(i+"contains a string greater than "+jv+" utf8 bytes "+Zr(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(xi(e,(o,c)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!dx(o)))throw new Error(i+" contains an invalid key ("+o+") "+Zr(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$2(n,o),ux(i,c,n),q2(n)}),r&&s)throw new Error(i+' contains ".value" child '+Zr(n)+" in addition to actual children.")}};var JB=function(i,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!dx(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!ZB(t))throw new Error(L0(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Sy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function ez(i,e){let t=null;for(let n=0;n<e.length;n++){let r=e[n],s=r.getPath();t!==null&&!OR(s,t.path)&&(i.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&i.eventLists_.push(t)}function rs(i,e,t){ez(i,t),tz(i,n=>ji(n,e)||ji(e,n))}function tz(i,e){i.recursionDepth_++;let t=!0;for(let n=0;n<i.eventLists_.length;n++){let r=i.eventLists_[n];if(r){let s=r.path;e(s)?(iz(i.eventLists_[n]),i.eventLists_[n]=null):t=!1}}t&&(i.eventLists_=[]),i.recursionDepth_--}function iz(i){for(let e=0;e<i.events.length;e++){let t=i.events[e];if(t!==null){i.events[e]=null;let n=t.getEventRunner();es&&$t("event: "+t.toString()),Yc(n)}}}var nz="repo_interrupt",rz=25,Ry=class{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ih(),this.transactionQueueTree_=new Gc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function sz(i,e,t){if(i.stats_=Oy(i.repoInfo_),i.forceRestClient_||v2())i.server_=new dy(i.repoInfo_,(n,r,s,o)=>{cR(i,n,r,s,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>lR(i,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ct(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new Ny(i.repoInfo_,e,(n,r,s,o)=>{cR(i,n,r,s,o)},n=>{lR(i,n)},n=>{az(i,n)},i.authTokenProvider_,i.appCheckProvider_,t),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=b2(i.repoInfo_,()=>new fy(i.stats_,i.server_)),i.infoData_=new uy,i.infoSyncTree_=new Ah({startListening:(n,r,s,o)=>{let c=[],l=i.infoData_.getNode(n._path);return l.isEmpty()||(c=Sh(i.infoSyncTree_,n._path,l),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),zy(i,"connected",!1),i.serverSyncTree_=new Ah({startListening:(n,r,s,o)=>(i.server_.listen(n,s,r,(c,l)=>{let d=o(c,l);rs(i.eventQueue_,n._path,d)}),[]),stopListening:(n,r)=>{i.server_.unlisten(n,r)}})}function oz(i){let t=i.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function hx(i){return BB({timestamp:oz(i)})}function cR(i,e,t,n,r){i.dataUpdateCount++;let s=new $e(e);t=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(n){let l=ma(t,d=>qt(d));o=jB(i.serverSyncTree_,s,l,r)}else{let l=qt(t);o=UB(i.serverSyncTree_,s,l,r)}else if(n){let l=ma(t,d=>qt(d));o=VB(i.serverSyncTree_,s,l)}else{let l=qt(t);o=Sh(i.serverSyncTree_,s,l)}let c=s;o.length>0&&(c=qy(i,s)),rs(i.eventQueue_,c,o)}function lR(i,e){zy(i,"connected",e),e===!1&&lz(i)}function az(i,e){xi(e,(t,n)=>{zy(i,t,n)})}function zy(i,e,t){let n=new $e("/.info/"+e),r=qt(t);i.infoData_.updateSnapshot(n,r);let s=Sh(i.infoSyncTree_,n,r);rs(i.eventQueue_,n,s)}function cz(i){return i.nextWriteId_++}function lz(i){mx(i,"onDisconnectEvents");let e=hx(i),t=Ih();hy(i.onDisconnect_,Ue(),(r,s)=>{let o=qB(r,s,i.serverSyncTree_,e);jR(t,r,o)});let n=[];hy(t,Ue(),(r,s)=>{n=n.concat(Sh(i.serverSyncTree_,r,s));let o=mz(i,r);qy(i,o)}),i.onDisconnect_=Ih(),rs(i.eventQueue_,Ue(),n)}function dz(i){i.persistentConnection_&&i.persistentConnection_.interrupt(nz)}function mx(i,...e){let t="";i.persistentConnection_&&(t=i.persistentConnection_.id+":"),$t(t,...e)}function fx(i,e,t){return tx(i.serverSyncTree_,e,t)||tt.EMPTY_NODE}function $y(i,e=i.transactionQueueTree_){if(e||kh(i,e),xo(e)){let t=gx(i,e);V(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&uz(i,Xc(e),t)}else cx(e)&&xh(e,t=>{$y(i,t)})}function uz(i,e,t){let n=t.map(d=>d.currentWriteId),r=fx(i,e,n),s=r,o=r.hash();for(let d=0;d<t.length;d++){let h=t[d];V(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let f=Si(e,h.path);s=s.updateChild(f,h.currentOutputSnapshotRaw)}let c=s.val(!0),l=e;i.server_.put(l.toString(),c,d=>{mx(i,"transaction put response",{path:l.toString(),status:d});let h=[];if(d==="ok"){let f=[];for(let g=0;g<t.length;g++)t[g].status=2,h=h.concat(vo(i.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();kh(i,By(i.transactionQueueTree_,e)),$y(i,i.transactionQueueTree_),rs(i.eventQueue_,e,h);for(let g=0;g<f.length;g++)Yc(f[g])}else{if(d==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{_i("transaction at "+l.toString()+" failed: "+d);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=d}qy(i,e)}},o)}function qy(i,e){let t=px(i,e),n=Xc(t),r=gx(i,t);return hz(i,r,n),n}function hz(i,e,t){if(e.length===0)return;let n=[],r=[],o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){let l=e[c],d=Si(t,l.path),h=!1,f;if(V(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,f=l.abortReason,r=r.concat(vo(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=rz)h=!0,f="maxretry",r=r.concat(vo(i.serverSyncTree_,l.currentWriteId,!0));else{let g=fx(i,l.path,o);l.currentInputSnapshot=g;let w=e[c].update(g.val());if(w!==void 0){ux("transaction failed: Data returned ",w,l.path);let T=qt(w);typeof w=="object"&&w!=null&&Gi(w,".priority")||(T=T.updatePriority(g.getPriority()));let R=l.currentWriteId,j=hx(i),X=HB(T,g,j);l.currentOutputSnapshotRaw=T,l.currentOutputSnapshotResolved=X,l.currentWriteId=cz(i),o.splice(o.indexOf(R),1),r=r.concat(LB(i.serverSyncTree_,l.path,X,l.currentWriteId,l.applyLocally)),r=r.concat(vo(i.serverSyncTree_,R,!0))}else h=!0,f="nodata",r=r.concat(vo(i.serverSyncTree_,l.currentWriteId,!0))}rs(i.eventQueue_,t,r),r=[],h&&(e[c].status=2,function(g){setTimeout(g,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(f==="nodata"?n.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):n.push(()=>e[c].onComplete(new Error(f),!1,null))))}kh(i,i.transactionQueueTree_);for(let c=0;c<n.length;c++)Yc(n[c]);$y(i,i.transactionQueueTree_)}function px(i,e){let t,n=i.transactionQueueTree_;for(t=ye(e);t!==null&&xo(n)===void 0;)n=By(n,t),e=Ye(e),t=ye(e);return n}function gx(i,e){let t=[];return _x(i,e,t),t.sort((n,r)=>n.order-r.order),t}function _x(i,e,t){let n=xo(e);if(n)for(let r=0;r<n.length;r++)t.push(n[r]);xh(e,r=>{_x(i,r,t)})}function kh(i,e){let t=xo(e);if(t){let n=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[n]=t[r],n++);t.length=n,ax(e,t.length>0?t:void 0)}xh(e,n=>{kh(i,n)})}function mz(i,e){let t=Xc(px(i,e)),n=By(i.transactionQueueTree_,e);return WB(n,r=>{Bv(i,r)}),Bv(i,n),lx(n,r=>{Bv(i,r)}),t}function Bv(i,e){let t=xo(e);if(t){let n=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(V(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(V(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(vo(i.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?ax(e,void 0):t.length=s+1,rs(i.eventQueue_,Xc(e),r);for(let o=0;o<n.length;o++)Yc(n[o])}}function fz(i){let e="",t=i.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let r=t[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function pz(i){let e={};i.charAt(0)==="?"&&(i=i.substring(1));for(let t of i.split("&")){if(t.length===0)continue;let n=t.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):_i(`Invalid query segment '${t}' in query '${i}'`)}return e}var dR=function(i,e){let t=gz(i),n=t.namespace;t.domain==="firebase.com"&&Sn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&t.domain!=="localhost"&&Sn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||d2();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new ph(t.host,t.secure,n,r,e,"",n!==t.subdomain),path:new $e(t.pathString)}},gz=function(i){let e="",t="",n="",r="",s="",o=!0,c="https",l=443;if(typeof i=="string"){let d=i.indexOf("//");d>=0&&(c=i.substring(0,d-1),i=i.substring(d+2));let h=i.indexOf("/");h===-1&&(h=i.length);let f=i.indexOf("?");f===-1&&(f=i.length),e=i.substring(0,Math.min(h,f)),h<f&&(r=fz(i.substring(h,f)));let g=pz(i.substring(Math.min(i.length,f)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",l=parseInt(e.substring(d+1),10)):d=e.length;let w=e.slice(0,d);if(w.toLowerCase()==="localhost")t="localhost";else if(w.split(".").length<=2)t=w;else{let T=e.indexOf(".");n=e.substring(0,T).toLowerCase(),t=e.substring(T+1),s=n}"ns"in g&&(s=g.ns)}return{host:e,port:l,domain:t,subdomain:n,secure:o,scheme:c,pathString:r,namespace:s}};var xy=class i{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return ge(this._path)?null:DR(this._path)}get ref(){return new So(this._repo,this._path)}get _queryIdentifier(){let e=QS(this._queryParams),t=My(e);return t==="{}"?"default":t}get _queryObject(){return QS(this._queryParams)}isEqual(e){if(e=me(e),!(e instanceof i))return!1;let t=this._repo===e._repo,n=OR(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+z2(this._path)}};var So=class i extends xy{constructor(e,t){super(e,t,new ly,!1)}get parent(){let e=MR(this._path);return e===null?null:new i(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};NB(So);FB(So);var _z="FIREBASE_DATABASE_EMULATOR_HOST",ky={},vz=!1;function yz(i,e,t,n){i.repoInfo_=new ph(`${e}:${t}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),n&&(i.authTokenProvider_=n)}function bz(i,e,t,n,r){let s=n||i.options.databaseURL;s===void 0&&(i.options.projectId||Sn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$t("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=dR(s,r),c=o.repoInfo,l,d;typeof process<"u"&&process.env&&(d=process.env[_z]),d?(l=!0,s=`http://${d}?ns=${c.namespace}`,o=dR(s,r),c=o.repoInfo):l=!o.repoInfo.secure;let h=r&&l?new Bc(Bc.OWNER):new Wv(i.name,i.options,e);JB("Invalid Firebase Database URL",o),ge(o.path)||Sn("Database URL must point to the root of a Firebase Database (not including a child path).");let f=Iz(c,i,h,new Gv(i.name,t));return new Dy(f,i)}function wz(i,e){let t=ky[e];(!t||t[i.key]!==i)&&Sn(`Database ${e}(${i.repoInfo_}) has already been deleted.`),dz(i),delete t[i.key]}function Iz(i,e,t,n){let r=ky[e.name];r||(r={},ky[e.name]=r);let s=r[i.toURLString()];return s&&Sn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ry(i,vz,t,n),r[i.toURLString()]=s,s}var Dy=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(sz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new So(this._repo,Ue())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Sn("Cannot call "+e+" on a deleted database.")}};function vx(i=vt(),e){let t=_t(i,"database").getImmediate({identifier:e});if(!t._instanceStarted){let n=Hn("database");n&&yx(t,...n)}return t}function yx(i,e,t,n={}){i=me(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&Sn("Cannot call useEmulator() after instance has already been initialized.");let r=i._repoInternal,s;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&Sn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Bc(Bc.OWNER);else if(n.mockUserToken){let o=typeof n.mockUserToken=="string"?n.mockUserToken:ys(n.mockUserToken,i.app.options.projectId);s=new Bc(o)}yz(r,e,t,s)}function Ez(i){a2(si),dt(new lt("database",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return bz(n,r,s,t)},"PUBLIC").setMultipleInstances(!0)),G(PS,MS,i),G(PS,MS,"esm2017")}Ny.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};Ny.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};Ez();var Zc=class{constructor(e){return e}},bx="database",Hy=class{constructor(){return ht(bx)}};var Gy=new L("angularfire2.database-instances");function Cz(i,e){let t=yt(bx,i,e);return t&&new Zc(t)}function Tz(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Zc(n)}}var Az={provide:Hy,deps:[[new ne,Gy]]},Sz={provide:Zc,useFactory:Cz,deps:[[new ne,Gy],Ke]};function wx(i,...e){return G("angularfire",He.full,"rtdb"),Be([Sz,Az,{provide:Gy,useFactory:Tz(i),multi:!0,deps:[U,ue,st,Je,[new ne,Fi],[new ne,oi],...e]}])}var Ix=Te(vx,!0);var Tx="functions";var Wy=class{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||t.get().then(r=>this.messaging=r,()=>{}),this.appCheck||n.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return v(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return v(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return v(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return v(this,null,function*(){let t=yield this.getAuthToken(),n=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:r}})}};var Ky="us-central1";var Yy=class{constructor(e,t,n,r,s=Ky,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Wy(t,n,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{let c=new URL(s);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Ky}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function Rz(i,e,t){i.emulatorOrigin=`http://${e}:${t}`}var Ex="@firebase/functions",Cx="0.11.8";var xz="auth-internal",kz="app-check-internal",Dz="messaging-internal";function Pz(i,e){let t=(n,{instanceIdentifier:r})=>{let s=n.getProvider("app").getImmediate(),o=n.getProvider(xz),c=n.getProvider(Dz),l=n.getProvider(kz);return new Yy(s,o,c,l,r,i)};dt(new lt(Tx,t,"PUBLIC").setMultipleInstances(!0)),G(Ex,Cx,e),G(Ex,Cx,"esm2017")}function Ax(i=vt(),e=Ky){let n=_t(me(i),Tx).getImmediate({identifier:e}),r=Hn("functions");return r&&Sx(n,...r),n}function Sx(i,e,t){Rz(me(i),e,t)}Pz(fetch.bind(self));var Jc=class{constructor(e){return e}},Rx="functions",Qy=class{constructor(){return ht(Rx)}};var Xy=new L("angularfire2.functions-instances");function Mz(i,e){let t=yt(Rx,i,e);return t&&new Jc(t)}function Oz(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Jc(n)}}var Nz={provide:Qy,deps:[[new ne,Xy]]},Fz={provide:Jc,useFactory:Mz,deps:[[new ne,Xy],Ke]};function xx(i,...e){return G("angularfire",He.full,"fn"),Be([Fz,Nz,{provide:Xy,useFactory:Oz(i),multi:!0,deps:[U,ue,st,Je,[new ne,Fi],[new ne,oi],...e]}])}var kx=Te(Ax,!0);var Lz="/firebase-messaging-sw.js",Vz="/firebase-cloud-messaging-push-scope",Fx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Uz="https://fcmregistrations.googleapis.com/v1",Lx="google.c.a.c_id",jz="google.c.a.c_l",Bz="google.c.a.ts",zz="google.c.a.e";var Dh=function(i){return i.PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked",i}(Dh||{});function Rn(i){let e=new Uint8Array(i);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $z(i){let e="=".repeat((4-i.length%4)%4),t=(i+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}var Zy="fcm_token_details_db",qz=5,Dx="fcm_token_object_Store";function Hz(i){return v(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Zy))return null;let e=null;return(yield Em(Zy,qz,{upgrade:(n,r,s,o)=>v(this,null,function*(){var c;if(r<2||!n.objectStoreNames.contains(Dx))return;let l=o.objectStore(Dx),d=yield l.index("fcmSenderId").get(i);if(yield l.clear(),!!d){if(r===2){let h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(c=h.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Rn(h.vapidKey)}}}else if(r===3){let h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Rn(h.auth),p256dh:Rn(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Rn(h.vapidKey)}}}else if(r===4){let h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Rn(h.auth),p256dh:Rn(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Rn(h.vapidKey)}}}}})})).close(),yield zl(Zy),yield zl("fcm_vapid_details_db"),yield zl("undefined"),Gz(e)?e:null})}function Gz(i){if(!i||!i.subscriptionOptions)return!1;let{subscriptionOptions:e}=i;return typeof i.createTime=="number"&&i.createTime>0&&typeof i.token=="string"&&i.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var Wz="firebase-messaging-database",Kz=1,el="firebase-messaging-store",Jy=null;function Vx(){return Jy||(Jy=Em(Wz,Kz,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(el)}}})),Jy}function Yz(i){return v(this,null,function*(){let e=Ux(i),n=yield(yield Vx()).transaction(el).objectStore(el).get(e);if(n)return n;{let r=yield Hz(i.appConfig.senderId);if(r)return yield ib(i,r),r}})}function ib(i,e){return v(this,null,function*(){let t=Ux(i),r=(yield Vx()).transaction(el,"readwrite");return yield r.objectStore(el).put(e,t),yield r.done,e})}function Ux({appConfig:i}){return i.appId}var Qz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Xt=new Hi("messaging","Messaging",Qz);function Xz(i,e){return v(this,null,function*(){let t=yield rb(i),n=jx(e),r={method:"POST",headers:t,body:JSON.stringify(n)},s;try{s=yield(yield fetch(nb(i.appConfig),r)).json()}catch(o){throw Xt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Xt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Xt.create("token-subscribe-no-token");return s.token})}function Zz(i,e){return v(this,null,function*(){let t=yield rb(i),n=jx(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(n)},s;try{s=yield(yield fetch(`${nb(i.appConfig)}/${e.token}`,r)).json()}catch(o){throw Xt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Xt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Xt.create("token-update-no-token");return s.token})}function Jz(i,e){return v(this,null,function*(){let n={method:"DELETE",headers:yield rb(i)};try{let s=yield(yield fetch(`${nb(i.appConfig)}/${e}`,n)).json();if(s.error){let o=s.error.message;throw Xt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw Xt.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function nb({projectId:i}){return`${Uz}/projects/${i}/registrations`}function rb(t){return v(this,arguments,function*({appConfig:i,installations:e}){let n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})}function jx({p256dh:i,auth:e,endpoint:t,vapidKey:n}){let r={web:{endpoint:t,auth:e,p256dh:i}};return n!==Fx&&(r.web.applicationPubKey=n),r}var e$=7*24*60*60*1e3;function t$(i){return v(this,null,function*(){let e=yield n$(i.swRegistration,i.vapidKey),t={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:e.endpoint,auth:Rn(e.getKey("auth")),p256dh:Rn(e.getKey("p256dh"))},n=yield Yz(i.firebaseDependencies);if(n){if(r$(n.subscriptionOptions,t))return Date.now()>=n.createTime+e$?i$(i,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{yield Jz(i.firebaseDependencies,n.token)}catch(r){console.warn(r)}return Px(i.firebaseDependencies,t)}else return Px(i.firebaseDependencies,t)})}function i$(i,e){return v(this,null,function*(){try{let t=yield Zz(i.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield ib(i.firebaseDependencies,n),t}catch(t){throw t}})}function Px(i,e){return v(this,null,function*(){let n={token:yield Xz(i,e),createTime:Date.now(),subscriptionOptions:e};return yield ib(i,n),n.token})}function n$(i,e){return v(this,null,function*(){let t=yield i.pushManager.getSubscription();return t||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$z(e)})})}function r$(i,e){let t=e.vapidKey===i.vapidKey,n=e.endpoint===i.endpoint,r=e.auth===i.auth,s=e.p256dh===i.p256dh;return t&&n&&r&&s}function Mx(i){let e={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return s$(e,i),o$(e,i),a$(e,i),e}function s$(i,e){if(!e.notification)return;i.notification={};let t=e.notification.title;t&&(i.notification.title=t);let n=e.notification.body;n&&(i.notification.body=n);let r=e.notification.image;r&&(i.notification.image=r);let s=e.notification.icon;s&&(i.notification.icon=s)}function o$(i,e){e.data&&(i.data=e.data)}function a$(i,e){var t,n,r,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;i.fcmOptions={};let c=(r=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;c&&(i.fcmOptions.link=c);let l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(i.fcmOptions.analyticsLabel=l)}function c$(i){return typeof i=="object"&&!!i&&Lx in i}Bx("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Bx("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Bx(i,e){let t=[];for(let n=0;n<i.length;n++)t.push(i.charAt(n)),n<e.length&&t.push(e.charAt(n));return t.join("")}function l$(i){if(!i||!i.options)throw eb("App Configuration Object");if(!i.name)throw eb("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=i;for(let n of e)if(!t[n])throw eb(n);return{appName:i.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function eb(i){return Xt.create("missing-app-config-values",{valueName:i})}var tb=class{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=l$(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}};function d$(i){return v(this,null,function*(){try{i.swRegistration=yield navigator.serviceWorker.register(Lz,{scope:Vz}),i.swRegistration.update().catch(()=>{})}catch(e){throw Xt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function u$(i,e){return v(this,null,function*(){if(!e&&!i.swRegistration&&(yield d$(i)),!(!e&&i.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Xt.create("invalid-sw-registration");i.swRegistration=e}})}function h$(i,e){return v(this,null,function*(){e?i.vapidKey=e:i.vapidKey||(i.vapidKey=Fx)})}function m$(i,e){return v(this,null,function*(){if(!navigator)throw Xt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Xt.create("permission-blocked");return yield h$(i,e?.vapidKey),yield u$(i,e?.serviceWorkerRegistration),t$(i)})}function f$(i,e,t){return v(this,null,function*(){let n=p$(e);(yield i.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:t[Lx],message_name:t[jz],message_time:t[Bz],message_device_time:Math.floor(Date.now()/1e3)})})}function p$(i){switch(i){case Dh.NOTIFICATION_CLICKED:return"notification_open";case Dh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function g$(i,e){return v(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;i.onMessageHandler&&t.messageType===Dh.PUSH_RECEIVED&&(typeof i.onMessageHandler=="function"?i.onMessageHandler(Mx(t)):i.onMessageHandler.next(Mx(t)));let n=t.data;c$(n)&&n[zz]==="1"&&(yield f$(i,t.messageType,n))})}var Ox="@firebase/messaging",Nx="0.12.11";var _$=i=>{let e=new tb(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>g$(e,t)),e},v$=i=>{let e=i.getProvider("messaging").getImmediate();return{getToken:n=>m$(e,n)}};function y$(){dt(new lt("messaging",_$,"PUBLIC")),dt(new lt("messaging-internal",v$,"PRIVATE")),G(Ox,Nx),G(Ox,Nx,"esm2017")}function sb(){return v(this,null,function*(){try{yield yr()}catch{return!1}return typeof window<"u"&&un()&&ua()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function zx(i=vt()){return sb().then(e=>{if(!e)throw Xt.create("unsupported-browser")},e=>{throw Xt.create("indexed-db-unsupported")}),_t(me(i),"messaging").getImmediate()}y$();var tl=class{constructor(e){return e}},$x="messaging",ob=class{constructor(){return ht($x)}};var qx="__angularfire_symbol__messagingIsSupported",ab="__angularfire_symbol__messagingIsSupportedValue";globalThis[qx]||=sb().then(i=>globalThis[ab]=i).catch(()=>globalThis[ab]=!1);var Ph={async:()=>globalThis[qx],sync:()=>{let i=globalThis[ab];if(i===void 0)throw new Error(Bs("Messaging"));return i}},cb=new L("angularfire2.messaging-instances");function b$(i,e){if(!Ph.sync())return null;let t=yt($x,i,e);return t&&new tl(t)}function w$(i){return(e,t)=>{if(!Ph.sync())return null;let n=e.runOutsideAngular(()=>i(t));return new tl(n)}}var I$={provide:ob,deps:[[new ne,cb]]},E$={provide:tl,useFactory:b$,deps:[[new ne,cb],Ke]};function Hx(i,...e){return G("angularfire",He.full,"fcm"),Be([E$,I$,{provide:_r,useValue:Ph.async,multi:!0},{provide:cb,useFactory:w$(i),multi:!0,deps:[U,ue,st,Je,...e]}])}var rQ=Ph.async;var Gx=Te(zx,!0);var il=class{constructor(e){return e}},Wx="performance",lb=class{constructor(){return ht(Wx)}};var db=new L("angularfire2.performance-instances");function C$(i,e,t){if(!aa(t))return null;let n=yt(Wx,i,e);return n&&new il(n)}function T$(i){return(e,t,n)=>{if(!aa(t))return null;let r=e.runOutsideAngular(()=>i(n));return new il(r)}}var A$={provide:lb,deps:[[new ne,db]]},S$={provide:il,useFactory:C$,deps:[[new ne,db],Ke,yi]};function Kx(i,...e){return G("angularfire",He.full,"perf"),Be([S$,A$,{provide:db,useFactory:T$(i),multi:!0,deps:[U,yi,ue,st,Je,...e]}])}var Yx=Te(j0,!0);var tk="firebasestorage.googleapis.com",R$="storageBucket",x$=2*60*1e3,k$=10*60*1e3;var nn=class i extends ri{constructor(e,t,n=0){super(ub(e),`Firebase Storage: ${t} (${ub(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,i.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ub(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},kn=function(i){return i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment",i}(kn||{});function ub(i){return"storage/"+i}function D$(){let i="An unknown error occurred, please check the error payload for server response.";return new nn(kn.UNKNOWN,i)}function P$(){return new nn(kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M$(){return new nn(kn.CANCELED,"User canceled the upload/download.")}function O$(i){return new nn(kn.INVALID_URL,"Invalid URL '"+i+"'.")}function N$(i){return new nn(kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Qx(i){return new nn(kn.INVALID_ARGUMENT,i)}function ik(){return new nn(kn.APP_DELETED,"The Firebase app was deleted.")}function F$(i){return new nn(kn.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var xn=class i{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=i.makeFromUrl(e,t)}catch{return new i(e,"")}if(n.path==="")return n;throw N$(e)}static makeFromUrl(e,t){let n=null,r="([A-Za-z0-9.\\-_]+)";function s(le){le.path.charAt(le.path.length-1)==="/"&&(le.path_=le.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function d(le){le.path_=decodeURIComponent(le.path)}let h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${f}/${h}/b/${r}/o${g}`,"i"),T={bucket:1,path:3},k=t===tk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",j=new RegExp(`^https?://${k}/${r}/${R}`,"i"),K=[{regex:c,indices:l,postModify:s},{regex:w,indices:T,postModify:d},{regex:j,indices:{bucket:1,path:2},postModify:d}];for(let le=0;le<K.length;le++){let mt=K[le],we=mt.regex.exec(e);if(we){let E=we[mt.indices.bucket],_=we[mt.indices.path];_||(_=""),n=new i(E,_),mt.postModify(n);break}}if(n==null)throw O$(e);return n}},hb=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function L$(i,e,t){let n=1,r=null,s=null,o=!1,c=0;function l(){return c===2}let d=!1;function h(...R){d||(d=!0,e.apply(null,R))}function f(R){r=setTimeout(()=>{r=null,i(w,l())},R)}function g(){s&&clearTimeout(s)}function w(R,...j){if(d){g();return}if(R){g(),h.call(null,R,...j);return}if(l()||o){g(),h.call(null,R,...j);return}n<64&&(n*=2);let K;c===1?(c=2,K=0):K=(n+Math.random())*1e3,f(K)}let T=!1;function k(R){T||(T=!0,g(),!d&&(r!==null?(R||(c=2),clearTimeout(r),f(0)):R||(c=1)))}return f(0),s=setTimeout(()=>{o=!0,k(!0)},t),k}function V$(i){i(!1)}function U$(i){return i!==void 0}function Xx(i,e,t,n){if(n<e)throw Qx(`Invalid value for '${i}'. Expected ${e} or greater.`);if(n>t)throw Qx(`Invalid value for '${i}'. Expected ${t} or less.`)}function j$(i){let e=encodeURIComponent,t="?";for(let n in i)if(i.hasOwnProperty(n)){let r=e(n)+"="+e(i[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var mb=function(i){return i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT",i}(mb||{});function B$(i,e){let t=i>=500&&i<600,r=[408,429].indexOf(i)!==-1,s=e.indexOf(i)!==-1;return t||r||s}var fb=class{constructor(e,t,n,r,s,o,c,l,d,h,f,g=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,T)=>{this.resolve_=w,this.reject_=T,this.start_()})}start_(){let e=(n,r)=>{if(r){n(!1,new ko(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===mb.NO_ERROR,l=s.getStatus();if(!c||B$(l,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===mb.ABORT;n(!1,new ko(!1,null,h));return}let d=this.successCodes_.indexOf(l)!==-1;n(!0,new ko(d,s))})},t=(n,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());U$(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=D$();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(r.canceled){let l=this.appDelete_?ik():M$();o(l)}else{let l=P$();o(l)}};this.canceled_?t(!1,new ko(!1,null,!0)):this.backoffId_=L$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&V$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ko=class{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}};function z$(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function $$(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function q$(i,e){e&&(i["X-Firebase-GMPID"]=e)}function H$(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function G$(i,e,t,n,r,s,o=!0){let c=j$(i.urlParams),l=i.url+c,d=Object.assign({},i.headers);return q$(d,e),z$(d,t),$$(d,s),H$(d,n),new fb(l,i.method,d,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,r,o)}function W$(i){if(i.length===0)return null;let e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function K$(i){let e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}var wQ=256*1024;var pb=class i{constructor(e,t){this._service=e,t instanceof xn?this._location=t:this._location=xn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new i(e,t)}get root(){let e=new xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K$(this._location.path)}get storage(){return this._service}get parent(){let e=W$(this._location.path);if(e===null)return null;let t=new xn(this._location.bucket,e);return new i(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw F$(e)}};function Zx(i,e){let t=e?.[R$];return t==null?null:xn.makeFromBucketSpec(t,i)}function Y$(i,e,t,n={}){i.host=`${e}:${t}`,i._protocol="http";let{mockUserToken:r}=n;r&&(i._overrideAuthToken=typeof r=="string"?r:ys(r,i.app.options.projectId))}var gb=class{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=tk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x$,this._maxUploadRetryTime=k$,this._requests=new Set,r!=null?this._bucket=xn.makeFromBucketSpec(r,this._host):this._bucket=Zx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xn.makeFromBucketSpec(this._url,e):this._bucket=Zx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pb(this,e)}_makeRequest(e,t,n,r,s=!0){if(this._deleted)return new hb(ik());{let o=G$(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return v(this,null,function*(){let[n,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()})}},Jx="@firebase/storage",ek="0.13.2";var nk="storage";function rk(i=vt(),e){i=me(i);let n=_t(i,nk).getImmediate({identifier:e}),r=Hn("storage");return r&&sk(n,...r),n}function sk(i,e,t,n={}){Y$(i,e,t,n)}function Q$(i,{instanceIdentifier:e}){let t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new gb(t,n,r,e,si)}function X$(){dt(new lt(nk,Q$,"PUBLIC").setMultipleInstances(!0)),G(Jx,ek,""),G(Jx,ek,"esm2017")}X$();var nl=class{constructor(e){return e}},ok="storage",_b=class{constructor(){return ht(ok)}};var vb=new L("angularfire2.storage-instances");function Z$(i,e){let t=yt(ok,i,e);return t&&new nl(t)}function J$(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new nl(n)}}var eq={provide:_b,deps:[[new ne,vb]]},tq={provide:nl,useFactory:Z$,deps:[[new ne,vb],Ke]};function ak(i,...e){return G("angularfire",He.full,"gcs"),Be([tq,eq,{provide:vb,useFactory:J$(i),multi:!0,deps:[U,ue,st,Je,[new ne,Fi],[new ne,oi],...e]}])}var ck=Te(rk,!0);var yb="@firebase/remote-config",lk="0.4.9";var dk="remote-config";var iq={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},li=new Hi("remoteconfig","Remote Config",iq);function uk(i=vt()){return i=me(i),_t(i,dk).getImmediate()}function hk(i){let e=me(i);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var bb=class{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){return v(this,null,function*(){let[t,n]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;let r=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(s),r})}};function nq(i=navigator){return i.languages&&i.languages[0]||i.language}var wb=class{constructor(e,t,n,r,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){return v(this,null,function*(){let[t,n]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:nq()},l={method:"POST",headers:o,body:JSON.stringify(c)},d=fetch(s,l),h=new Promise((R,j)=>{e.signal.addEventListener(()=>{let X=new Error("The operation was aborted.");X.name="AbortError",j(X)})}),f;try{yield Promise.race([d,h]),f=yield d}catch(R){let j="fetch-client-network";throw R?.name==="AbortError"&&(j="fetch-timeout"),li.create(j,{originalErrorMessage:R?.message})}let g=f.status,w=f.headers.get("ETag")||void 0,T,k;if(f.status===200){let R;try{R=yield f.json()}catch(j){throw li.create("fetch-client-parse",{originalErrorMessage:j?.message})}T=R.entries,k=R.state}if(k==="INSTANCE_STATE_UNSPECIFIED"?g=500:k==="NO_CHANGE"?g=304:(k==="NO_TEMPLATE"||k==="EMPTY_CONFIG")&&(T={}),g!==304&&g!==200)throw li.create("fetch-status",{httpStatus:g});return{status:g,eTag:w,config:T}})}};function rq(i,e){return new Promise((t,n)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(t,r);i.addEventListener(()=>{clearTimeout(s),n(li.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sq(i){if(!(i instanceof ri)||!i.customData)return!1;let e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}var Ib=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return v(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(r,s){return v(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n}){yield rq(e.signal,t);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!sq(o))throw o;let c={throttleEndTimeMillis:Date.now()+ga(n),backoffCount:n+1};return yield this.storage.setThrottleMetadata(c),this.attemptFetch(e,c)}})}};var oq=60*1e3,aq=12*60*60*1e3,Eb=class{constructor(e,t,n,r,s){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:oq,minimumFetchIntervalMillis:aq},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Mh(i,e){let t=i.target.error||void 0;return li.create(e,{originalErrorMessage:t&&t?.message})}var ss="app_namespace_store",cq="firebase_remote_config",lq=1;function dq(){return new Promise((i,e)=>{try{let t=indexedDB.open(cq,lq);t.onerror=n=>{e(Mh(n,"storage-open"))},t.onsuccess=n=>{i(n.target.result)},t.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(ss,{keyPath:"compositeKey"})}}}catch(t){e(li.create("storage-open",{originalErrorMessage:t?.message}))}})}var Cb=class{constructor(e,t,n,r=dq()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return v(this,null,function*(){let t=yield this.openDbPromise;return new Promise((n,r)=>{let o=t.transaction([ss],"readonly").objectStore(ss),c=this.createCompositeKey(e);try{let l=o.get(c);l.onerror=d=>{r(Mh(d,"storage-get"))},l.onsuccess=d=>{let h=d.target.result;n(h?h.value:void 0)}}catch(l){r(li.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(e,t){return v(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,s)=>{let c=n.transaction([ss],"readwrite").objectStore(ss),l=this.createCompositeKey(e);try{let d=c.put({compositeKey:l,value:t});d.onerror=h=>{s(Mh(h,"storage-set"))},d.onsuccess=()=>{r()}}catch(d){s(li.create("storage-set",{originalErrorMessage:d?.message}))}})})}delete(e){return v(this,null,function*(){let t=yield this.openDbPromise;return new Promise((n,r)=>{let o=t.transaction([ss],"readwrite").objectStore(ss),c=this.createCompositeKey(e);try{let l=o.delete(c);l.onerror=d=>{r(Mh(d,"storage-delete"))},l.onsuccess=()=>{n()}}catch(l){r(li.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var Tb=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return v(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=yield e;r&&(this.lastFetchStatus=r);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield n;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function uq(){dt(new lt(dk,i,"PUBLIC").setMultipleInstances(!0)),G(yb,lk),G(yb,lk,"esm2017");function i(e,{instanceIdentifier:t}){let n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw li.create("registration-window");if(!un())throw li.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:c}=n.options;if(!s)throw li.create("registration-project-id");if(!o)throw li.create("registration-api-key");if(!c)throw li.create("registration-app-id");t=t||"firebase";let l=new Cb(c,n.name,t),d=new Tb(l),h=new Wi(yb);h.logLevel=Ut.ERROR;let f=new wb(r,si,t,s,o,c),g=new Ib(f,l),w=new bb(g,l,d,h),T=new Eb(n,w,d,l,h);return hk(T),T}}function mk(){return v(this,null,function*(){if(!un())return!1;try{return yield yr()}catch{return!1}})}uq();var rl=class{constructor(e){return e}},fk="remote-config",Ab=class{constructor(){return ht(fk)}};var Sb="__angularfire_symbol__remoteConfigIsSupportedValue",pk="__angularfire_symbol__remoteConfigIsSupported";globalThis[pk]||=mk().then(i=>globalThis[Sb]=i).catch(()=>globalThis[Sb]=!1);var Oh={async:()=>globalThis[pk],sync:()=>{let i=globalThis[Sb];if(i===void 0)throw new Error(Bs("RemoteConfig"));return i}},Rb=new L("angularfire2.remote-config-instances");function hq(i,e){if(!Oh.sync())return null;let t=yt(fk,i,e);return t&&new rl(t)}function mq(i){return(e,t)=>{if(!Oh.sync())return null;let n=e.runOutsideAngular(()=>i(t));return new rl(n)}}var fq={provide:Ab,deps:[[new ne,Rb]]},pq={provide:rl,useFactory:hq,deps:[[new ne,Rb],Ke]};function gk(i,...e){return G("angularfire",He.full,"rc"),Be([pq,fq,{provide:_r,useValue:Oh.async,multi:!0},{provide:Rb,useFactory:mq(i),multi:!0,deps:[U,ue,st,Je,...e]}])}var v7=Oh.async;var _k=Te(uk,!0);var vk="@firebase/vertexai-preview",yk="0.0.4";var bk="vertexAI",wk="us-central1";var xb=class{constructor(e,t,n,r){var s;this.app=e,this.options=r;let o=n?.getImmediate({optional:!0}),c=t?.getImmediate({optional:!0});this.auth=c||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||wk}_delete(){return Promise.resolve()}};var kb=function(i){return i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.OTHER="OTHER",i}(kb||{});var C7=[kb.RECITATION,kb.SAFETY];function Ik(i=vt(),e){return i=me(i),_t(i,bk).getImmediate({identifier:e?.location||wk})}function gq(){dt(new lt(bk,(i,{instanceIdentifier:e})=>{let t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new xb(t,n,r,{location:e})},"PUBLIC").setMultipleInstances(!0)),G(vk,yk),G(vk,yk,"esm2017")}gq();var sl=class{constructor(e){return e}},Ek="vertexai",Db=class{constructor(){return ht(Ek)}};var Pb=new L("angularfire2.vertexai-instances");function _q(i,e){let t=yt(Ek,i,e);return t&&new sl(t)}function vq(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new sl(n)}}var yq={provide:Db,deps:[[new ne,Pb]]},bq={provide:sl,useFactory:_q,deps:[[new ne,Pb],Ke]};function Ck(i,...e){return G("angularfire",He.full,"vertexai"),Be([bq,yq,{provide:Pb,useFactory:vq(i),multi:!0,deps:[U,ue,st,Je,[new ne,oi],...e]}])}var Tk=Te(Ik,!0);var wq="@",Iq=(()=>{class i{constructor(t,n,r,s,o){this.doc=t,this.delegate=n,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=B(Zw,{optional:!0}),this.loadingSchedulerFn=B(Eq,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-LMURREYO.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(t):n=t(),n.catch(r=>{throw new Qe(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,n){let r=this.delegate.createRenderer(t,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new Mb(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,n);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(n){xl()}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),Mb=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,n,r){this.delegate.insertBefore(e,t,n,r)}removeChild(e,t,n){this.delegate.removeChild(e,t,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,n)),this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,n)),this.delegate.listen(e,t,n)}shouldReplay(e){return this.replay!==null&&e.startsWith(wq)}},Eq=new L("");function Ak(i="animations"){return Jw("NgAsyncAnimations"),Be([{provide:Dl,useFactory:(e,t,n)=>new Iq(e,t,n,i),deps:[he,Hl,U]},{provide:Lt,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Sk={providers:[h0({eventCoalescing:!0}),kI(dS),dC(()=>uC({projectId:"chunks-versatile",appId:"1:303209244036:web:558f76e23fdcac43a3a9d1",databaseURL:"https://chunks-versatile.firebaseio.com",storageBucket:"chunks-versatile.appspot.com",apiKey:"AIzaSyCfooycLyNte5WizejI5GVWGF5wYLaJXH4",authDomain:"chunks-versatile.firebaseapp.com",messagingSenderId:"303209244036",measurementId:"G-718SMS4TDL"})),nT(()=>sT()),DS(()=>xS()),kS,Mv,iS(()=>sS()),wx(()=>Ix()),xx(()=>kx()),Hx(()=>Gx()),Kx(()=>Yx()),ak(()=>ck()),gk(()=>_k()),Ck(()=>Tk()),Ak()]};var Nh=class i{title="angular-chunks";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Me({type:i,selectors:[["app-root"]],standalone:!0,features:[Le],decls:1,vars:0,template:function(t,n){t&1&&Ie(0,"router-outlet")},dependencies:[lf]})};W0(Nh,Sk).catch(i=>console.error(i));
